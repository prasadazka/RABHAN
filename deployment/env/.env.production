# RABHAN BNPL Platform - Production Environment Configuration
# AWS t3.large Deployment

# =================================================================
# GLOBAL PRODUCTION SETTINGS
# =================================================================
NODE_ENV=production
LOG_LEVEL=info
TZ=Asia/Riyadh

# =================================================================
# SECURITY SETTINGS - CHANGE THESE IN PRODUCTION!
# =================================================================
JWT_SECRET=CHANGE_THIS_TO_SECURE_RANDOM_STRING_32_CHARS_MIN
JWT_REFRESH_SECRET=CHANGE_THIS_TO_SECURE_REFRESH_STRING_32_CHARS_MIN

# =================================================================
# DATABASE CONFIGURATION - PostgreSQL
# =================================================================
# Main database connection
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_SSL=false
DATABASE_POOL_MIN=5
DATABASE_POOL_MAX=20
DATABASE_IDLE_TIMEOUT=15000
DATABASE_CONNECTION_TIMEOUT=2000

# Individual database credentials
POSTGRES_USER=postgres
POSTGRES_PASSWORD=CHANGE_THIS_SECURE_POSTGRES_PASSWORD

# Auth Service Database
AUTH_DATABASE_NAME=rabhan_auth
AUTH_DATABASE_USER=rabhan_auth
AUTH_DATABASE_PASSWORD=CHANGE_THIS_AUTH_DB_PASSWORD

# User Service Database  
USER_DATABASE_NAME=rabhan_user
USER_DATABASE_USER=rabhan_user  
USER_DATABASE_PASSWORD=CHANGE_THIS_USER_DB_PASSWORD

# Document Service Database
DOCUMENT_DATABASE_NAME=rabhan_documents
DOCUMENT_DATABASE_USER=rabhan_documents
DOCUMENT_DATABASE_PASSWORD=CHANGE_THIS_DOCUMENT_DB_PASSWORD

# Contractor Service Database
CONTRACTOR_DATABASE_NAME=rabhan_contractors
CONTRACTOR_DATABASE_USER=rabhan_contractors
CONTRACTOR_DATABASE_PASSWORD=CHANGE_THIS_CONTRACTOR_DB_PASSWORD

# =================================================================
# REDIS CONFIGURATION
# =================================================================
REDIS_URL=redis://localhost:6379
REDIS_PREFIX=rabhan:prod:

# Service-specific Redis databases
AUTH_REDIS_DB=0
USER_REDIS_DB=1
DOCUMENT_REDIS_DB=2
CONTRACTOR_REDIS_DB=3
CACHE_TTL=3600

# =================================================================
# SERVICE PORTS & URLS
# =================================================================
AUTH_SERVICE_PORT=3001
USER_SERVICE_PORT=3002
DOCUMENT_SERVICE_PORT=3003
CONTRACTOR_SERVICE_PORT=3004
SOLAR_CALCULATOR_PORT=3005

# Internal service URLs
AUTH_SERVICE_URL=http://localhost:3001/api/auth
USER_SERVICE_URL=http://localhost:3002
DOCUMENT_SERVICE_URL=http://localhost:3003
CONTRACTOR_SERVICE_URL=http://localhost:3004

# =================================================================
# SAMA COMPLIANCE SETTINGS
# =================================================================
SAMA_AUDIT_ENABLED=true
SAMA_COMPLIANCE_MODE=production
AUDIT_LOG_RETENTION_DAYS=2555
SAMA_REPORTING_ENABLED=true
COMPLIANCE_LEVEL=high

# SAMA Customer Protection
BNPL_MAX_AMOUNT_SAR=5000
RESIDENT_ONLY_POLICY=true
ENABLE_METRICS=true

# =================================================================
# FILE UPLOAD & STORAGE
# =================================================================
UPLOAD_PATH=/opt/rabhan/uploads
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=image/jpeg,image/png,application/pdf

# Document service specific
DOCUMENT_ENCRYPTION_KEY=CHANGE_THIS_TO_SECURE_ENCRYPTION_KEY_32_CHARS
DOCUMENT_STORAGE_PATH=/opt/rabhan/secure-storage

# =================================================================
# RATE LIMITING & SECURITY
# =================================================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
MAX_LOGIN_ATTEMPTS=5
ACCOUNT_LOCK_DURATION_MS=300000

# Security settings
BCRYPT_ROUNDS=12
SESSION_TIMEOUT_MS=1800000
REQUIRE_HTTPS=true

# =================================================================
# CORS CONFIGURATION
# =================================================================
CORS_ORIGIN=https://your-domain.com,https://www.your-domain.com
CORS_CREDENTIALS=true

# =================================================================
# EXTERNAL INTEGRATIONS
# =================================================================
# Twilio SMS (Saudi phone verification)
TWILIO_ACCOUNT_SID=your_twilio_account_sid
TWILIO_AUTH_TOKEN=your_twilio_auth_token
TWILIO_PHONE_NUMBER=+966_your_saudi_number

# SendGrid Email
SENDGRID_API_KEY=your_sendgrid_api_key
SENDGRID_FROM_EMAIL=noreply@your-domain.com

# SAMA Government Integrations (Future)
NAFATH_CLIENT_ID=your_nafath_client_id
NAFATH_CLIENT_SECRET=your_nafath_client_secret
SIMAH_API_KEY=your_simah_api_key

# =================================================================
# SAUDI ARABIA SPECIFIC SETTINGS
# =================================================================
DEFAULT_TIMEZONE=Asia/Riyadh
DEFAULT_LOCALE=ar-SA
DEFAULT_CURRENCY=SAR

# Saudi regions
SAUDI_REGIONS=Riyadh,Makkah,Madinah,Qassim,Eastern Province,Asir,Tabuk,Hail,Northern Borders,Jazan,Najran,Al Bahah,Al Jawf

# Business rules
MIN_CONTRACTOR_AGE=18
MAX_SERVICE_AREAS=10
VERIFICATION_EXPIRY_DAYS=365
SOLAR_PRICE_PER_KWP=2000

# =================================================================
# MONITORING & LOGGING
# =================================================================
# Performance monitoring
METRICS_PORT=9090
ENABLE_HEALTH_CHECKS=true
HEALTH_CHECK_INTERVAL=30000

# Logging
LOG_FORMAT=json
LOG_MAX_SIZE=10m
LOG_MAX_FILES=10
LOG_DATE_PATTERN=YYYY-MM-DD

# =================================================================
# SSL/TLS CONFIGURATION
# =================================================================
# Let's Encrypt paths (will be set during deployment)
SSL_CERT_PATH=/etc/letsencrypt/live/your-domain.com/fullchain.pem
SSL_KEY_PATH=/etc/letsencrypt/live/your-domain.com/privkey.pem

# =================================================================
# DEPLOYMENT SPECIFIC
# =================================================================
DEPLOYMENT_ENV=production
AWS_REGION=me-south-1
INSTANCE_TYPE=t3.large

# Paths
APP_ROOT=/opt/rabhan
LOG_DIR=/var/log/rabhan
PID_DIR=/var/run/rabhan

# =================================================================
# DEVELOPMENT FLAGS (SET TO FALSE IN PRODUCTION)
# =================================================================
CREATE_SAMPLE_DATA=false
ENABLE_DEBUG_LOGS=false
SKIP_AUTH_IN_DEV=false
MOCK_EXTERNAL_APIS=false