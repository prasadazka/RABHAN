var Qd=Object.defineProperty;var Gd=(r,t,o)=>t in r?Qd(r,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[t]=o;var Ve=(r,t,o)=>Gd(r,typeof t!="symbol"?t+"":t,o);import{r as y,a as Kd,u as Be,L as ai,b as Xr,R as Me,c as cl,B as Xd,d as Zd,e as Ee}from"./vendor-react-BHCU1lM_.js";import{i as Jd,a as ep,u as ve}from"./vendor-i18n-CGfJ4BiB.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function o(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=o(i);fetch(i.href,a)}})();var dl={exports:{}},Ho={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tp=y,rp=Symbol.for("react.element"),op=Symbol.for("react.fragment"),sp=Object.prototype.hasOwnProperty,np=tp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ip={key:!0,ref:!0,__self:!0,__source:!0};function pl(r,t,o){var s,i={},a=null,l=null;o!==void 0&&(a=""+o),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(l=t.ref);for(s in t)sp.call(t,s)&&!ip.hasOwnProperty(s)&&(i[s]=t[s]);if(r&&r.defaultProps)for(s in t=r.defaultProps,t)i[s]===void 0&&(i[s]=t[s]);return{$$typeof:rp,type:r,key:a,ref:l,props:i,_owner:np.current}}Ho.Fragment=op;Ho.jsx=pl;Ho.jsxs=pl;dl.exports=Ho;var e=dl.exports,Hs={},li=Kd;Hs.createRoot=li.createRoot,Hs.hydrateRoot=li.hydrateRoot;const{slice:ap,forEach:lp}=[];function cp(r){return lp.call(ap.call(arguments,1),t=>{if(t)for(const o in t)r[o]===void 0&&(r[o]=t[o])}),r}function dp(r){return typeof r!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(o=>o.test(r))}const ci=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,pp=function(r,t){const s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},i=encodeURIComponent(t);let a=`${r}=${i}`;if(s.maxAge>0){const l=s.maxAge-0;if(Number.isNaN(l))throw new Error("maxAge should be a Number");a+=`; Max-Age=${Math.floor(l)}`}if(s.domain){if(!ci.test(s.domain))throw new TypeError("option domain is invalid");a+=`; Domain=${s.domain}`}if(s.path){if(!ci.test(s.path))throw new TypeError("option path is invalid");a+=`; Path=${s.path}`}if(s.expires){if(typeof s.expires.toUTCString!="function")throw new TypeError("option expires is invalid");a+=`; Expires=${s.expires.toUTCString()}`}if(s.httpOnly&&(a+="; HttpOnly"),s.secure&&(a+="; Secure"),s.sameSite)switch(typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return s.partitioned&&(a+="; Partitioned"),a},di={create(r,t,o,s){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};o&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+o*60*1e3)),s&&(i.domain=s),document.cookie=pp(r,t,i)},read(r){const t=`${r}=`,o=document.cookie.split(";");for(let s=0;s<o.length;s++){let i=o[s];for(;i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(t)===0)return i.substring(t.length,i.length)}return null},remove(r,t){this.create(r,"",-1,t)}};var up={name:"cookie",lookup(r){let{lookupCookie:t}=r;if(t&&typeof document<"u")return di.read(t)||void 0},cacheUserLanguage(r,t){let{lookupCookie:o,cookieMinutes:s,cookieDomain:i,cookieOptions:a}=t;o&&typeof document<"u"&&di.create(o,r,s,i,a)}},mp={name:"querystring",lookup(r){let{lookupQuerystring:t}=r,o;if(typeof window<"u"){let{search:s}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(s=window.location.hash.substring(window.location.hash.indexOf("?")));const a=s.substring(1).split("&");for(let l=0;l<a.length;l++){const c=a[l].indexOf("=");c>0&&a[l].substring(0,c)===t&&(o=a[l].substring(c+1))}}return o}},gp={name:"hash",lookup(r){let{lookupHash:t,lookupFromHashIndex:o}=r,s;if(typeof window<"u"){const{hash:i}=window.location;if(i&&i.length>2){const a=i.substring(1);if(t){const l=a.split("&");for(let c=0;c<l.length;c++){const p=l[c].indexOf("=");p>0&&l[c].substring(0,p)===t&&(s=l[c].substring(p+1))}}if(s)return s;if(!s&&o>-1){const l=i.match(/\/([a-zA-Z-]*)/g);return Array.isArray(l)?l[typeof o=="number"?o:0]?.replace("/",""):void 0}}}return s}};let pr=null;const pi=()=>{if(pr!==null)return pr;try{if(pr=typeof window<"u"&&window.localStorage!==null,!pr)return!1;const r="i18next.translate.boo";window.localStorage.setItem(r,"foo"),window.localStorage.removeItem(r)}catch{pr=!1}return pr};var hp={name:"localStorage",lookup(r){let{lookupLocalStorage:t}=r;if(t&&pi())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(r,t){let{lookupLocalStorage:o}=t;o&&pi()&&window.localStorage.setItem(o,r)}};let ur=null;const ui=()=>{if(ur!==null)return ur;try{if(ur=typeof window<"u"&&window.sessionStorage!==null,!ur)return!1;const r="i18next.translate.boo";window.sessionStorage.setItem(r,"foo"),window.sessionStorage.removeItem(r)}catch{ur=!1}return ur};var fp={name:"sessionStorage",lookup(r){let{lookupSessionStorage:t}=r;if(t&&ui())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(r,t){let{lookupSessionStorage:o}=t;o&&ui()&&window.sessionStorage.setItem(o,r)}},yp={name:"navigator",lookup(r){const t=[];if(typeof navigator<"u"){const{languages:o,userLanguage:s,language:i}=navigator;if(o)for(let a=0;a<o.length;a++)t.push(o[a]);s&&t.push(s),i&&t.push(i)}return t.length>0?t:void 0}},xp={name:"htmlTag",lookup(r){let{htmlTag:t}=r,o;const s=t||(typeof document<"u"?document.documentElement:null);return s&&typeof s.getAttribute=="function"&&(o=s.getAttribute("lang")),o}},bp={name:"path",lookup(r){let{lookupFromPathIndex:t}=r;if(typeof window>"u")return;const o=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(o)?o[typeof t=="number"?t:0]?.replace("/",""):void 0}},vp={name:"subdomain",lookup(r){let{lookupFromSubdomainIndex:t}=r;const o=typeof t=="number"?t+1:1,s=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(s)return s[o]}};let ul=!1;try{document.cookie,ul=!0}catch{}const ml=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];ul||ml.splice(1,1);const wp=()=>({order:ml,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:r=>r});class gl{constructor(t){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(t,o)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t,this.options=cp(o,this.options||{},wp()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=i=>i.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=s,this.addDetector(up),this.addDetector(mp),this.addDetector(hp),this.addDetector(fp),this.addDetector(yp),this.addDetector(xp),this.addDetector(bp),this.addDetector(vp),this.addDetector(gp)}addDetector(t){return this.detectors[t.name]=t,this}detect(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,o=[];return t.forEach(s=>{if(this.detectors[s]){let i=this.detectors[s].lookup(this.options);i&&typeof i=="string"&&(i=[i]),i&&(o=o.concat(i))}}),o=o.filter(s=>s!=null&&!dp(s)).map(s=>this.options.convertDetectedLanguage(s)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?o:o.length>0?o[0]:null}cacheUserLanguage(t){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;o&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||o.forEach(s=>{this.detectors[s]&&this.detectors[s].cacheUserLanguage(t,this.options)}))}}gl.type="languageDetector";const jp={login:"Login",register:"Register",logout:"Logout",language:"Language",logoAlt:"RABHAN Logo",tagline:"Solar Energy Finance",dashboard:"Dashboard"},Sp={en:"English",ar:"العربية"},kp={sar:"SAR"},Cp={home:"Home",about:"About",services:"Services",calculator:"Solar Calculator",contact:"Contact"},_p={loading:"Loading...",error:"Error",success:"Success",close:"Close",cancel:"Cancel",confirm:"Confirm",save:"Save",saving:"Saving...",edit:"Edit",delete:"Delete",search:"Search",filter:"Filter",sort:"Sort",next:"Next",previous:"Previous",submit:"Submit",reset:"Reset",back:"Back",step:"Step",coming_soon:"Coming Soon",of:"of",yes:"Yes",no:"No",enabled:"Enabled",disabled:"Disabled",selectOption:"Select an option",selectOptions:"Select options...",searchOptions:"Search options...",retry:"Retry",refresh:"Refresh",submitting:"Submitting...",viewQuotes:"View Quotes",clearAll:"Clear all",remove:"Remove",more:"more",noOptions:"No options available",noResultsFound:"No results found",notSet:"Not Set",unknown:"Unknown",optional:"Optional",createdAt:"Created At",none:"None",selecting:"Selecting...",backToComparison:"Back to Comparison"},Tp={saudi_arabia:"Saudi Arabia",india:"India"},Ap={title:"Document Management",subtitle:{user:"Manage your KYC documents and track verification status",contractor:"Manage your business documents and compliance requirements"},tabs:{overview:"Overview",kyc_progress:"KYC Progress",upload:"Upload",manage:"Manage"},stats:{total:"Total Documents",approved:"Approved",pending:"Pending",rejected:"Rejected"},quick_actions:{title:"Quick Actions",upload_id:"Upload ID Document",upload_id_desc:"Upload your national ID or passport",check_kyc:"Check KYC Status",check_kyc_desc:"View your verification progress",manage_docs:"Manage Documents",manage_docs_desc:"View and organize your documents"},upload:{title:"Upload Document",modal_title:"Upload New Document",category:"Document Category",select_category:"Select document category",drop_zone:{title:"Drop files here to upload",subtitle:"or click to select files"},supported_formats:"Supported formats",max_size:"Maximum size",upload_button:"Upload Document",uploading:"Uploading...",upload_another:"Upload Another",new_document:"New Document",validation_results:"Validation Results",file_validation:"File Validation",virus_scan:"Virus Scan",content_validation:"Content Validation",security_validation:"Security Validation",virus_scanning:"Scanning for viruses...",success:"Document uploaded successfully",error:{categories:"Failed to load document categories",invalid_type:"Invalid file type. Please upload PDF, JPEG, or PNG files.",size_limit:"File size exceeds maximum limit of {{maxSize}}",generic:"Upload failed. Please try again."}},manager:{title:"My Documents",search_placeholder:"Search documents...",all_categories:"All Categories",all_statuses:"All Statuses",loading:"Loading documents...",empty:{title:"No documents found",description:"Upload your first document to get started"},pagination:{showing:"Showing {{start}}-{{end}} of {{total}} documents"},download_success:"Document downloaded successfully",delete_success:"Document deleted successfully",delete_confirm:"Are you sure you want to delete this document?",error:{load_failed:"Failed to load documents",download_failed:"Failed to download document",delete_failed:"Failed to delete document"}},status:{pending:"Pending",processing:"Processing",validated:"Validated",approved:"Approved",rejected:"Rejected",expired:"Expired",archived:"Archived"}},Rp={title:"KYC Progress",subtitle:{user:"Complete your identity verification to access all features",contractor:"Complete your business verification to start offering services"},loading:"Loading KYC status...",required:"Required",stats:{completed:"Completed",remaining:"Remaining",uploaded:"Uploaded",progress:"Progress"},progress:{overall:"Overall Progress"},status:{completed:"Completed",partial:"In Progress",pending:"Not Started"},upload_document:"Upload {{category}}",click_to_upload:"Click to upload document",upload:"Upload",reupload:"Re-upload",required_document:"Required for verification",uploaded_on:"Uploaded on {{date}}",next_steps:{title:"Next Steps",upload_required:"Upload {{count}} required documents",await_approval:"Wait for {{count}} documents to be approved",complete:"Your KYC verification is complete!"},replace:"Replace",download_document:"Download Document",download_failed:"Download failed",confirm_delete:"Are you sure you want to delete this document?",document_deleted:"Document deleted successfully",delete_failed:"Failed to delete document",delete_document:"Delete Document",view:{cards:"Cards",table:"Table"},table:{document:"Document",category:"Category",status:"Status",uploaded:"Uploaded",size:"Size",actions:"Actions"},verified:"Verified",cannot_delete_verified:"Cannot delete admin-verified documents",replace_document:"Replace Document",no_documents:"No Documents",no_documents_description:"Upload documents to get started",not_uploaded:"Not uploaded",categories:{national_id:"National ID",national_id_front:"National ID (Front Side)",national_id_back:"National ID (Back Side)",proof_of_address:"Proof of Address",address_proof:"Address Proof",income_proof:"Income Proof",bank_statement:"Bank Statement",salary_certificate:"Salary Certificate",utility_bill:"Utility Bill",commercial_registration:"Commercial Registration",vat_certificate:"VAT Certificate",business_license:"Business License"}},Pp={title:"Welcome to Rabhan",subtitle:"A winning platform for everyone!",contractor_title:"Contractor Registration",contractor_subtitle:"Join RABHAN as a Solar Energy Contractor",personal_info:"Personal Information",business_info:"Business Information & Security",contractor_success_message:"Contractor registration successful! Welcome to RABHAN.",already_have_account:"Already have an account?",login_here:"Login here",registration_failed:"Registration failed. Please try again.",user:{title:"Consumer Registration",subtitle:"Transform Your Premises with Rabhan",joinButton:"Dive into Rabhan",benefits:{solarAnalysis:{title:"Smart Energy Estimations",description:"Get personalized solar recommendations based on your energy consumption and roof specifications"},bnplFinancing:{title:"Flexible BNPL Financing",description:"Access up to SAR 5,000 with SAMA-compliant financing options tailored for Saudi residents"},preverified:{title:"Instant Approvals",description:"Get quick financing approvals with our streamlined digital process"},monitoring:{title:"Real-Time Monitoring",description:"Track your solar production, savings, and environmental impact through our advanced monitoring system"}}},contractor:{title:"Vendor & Contractor Registration",subtitle:"Grow Business with Rabhan",joinButton:"Join Rabhan Network",firstName_placeholder:"Enter your first name",lastName_placeholder:"Enter your last name",companyName_placeholder:"Enter your company name",businessEmail_placeholder:"admin@yourcompany.com",password_placeholder:"Create strong password",confirmPassword_placeholder:"Confirm your password",crNumber_placeholder:"1010123456",vatNumber_placeholder:"300123456789003",crNumber_tooltip:"Saudi Commercial Registration number (10 digits, starting with 10/20/30/40)",vatNumber_tooltip:"Saudi VAT number (15 digits, starting and ending with 3)",benefits:{marketplace:{title:"Digital Marketplace",description:"Showcase your services and products to thousands of potential customers across Saudi Arabia"},matching:{title:"Smart Customer Matching",description:"Get matched with customers based on your expertise, location, and service offerings"},analytics:{title:"Business Analytics",description:"Access comprehensive insights about your performance, customer satisfaction, and market trends"},certification:{title:"Certification & Verification",description:"Build trust with customers through our comprehensive verification and certification process"}},profile:{title:"Contractor Profile",subtitle:"Manage your business profile and services",coming_soon_message:"We're building an amazing contractor profile management system. Stay tuned for updates!"}}},Ip={welcome:"Welcome to RABHAN",subtitle:"Your Solar Energy Financing Partner",loginTitle:"Sign in to your account",registerTitle:"Create your account",loginSubtitle:"Welcome back! Please enter your details.",registerSubtitle:"Join thousands of Saudi families going solar",email:"Email address",emailPlaceholder:"Enter your email address",password:"Password",forgotPassword:"Forgot your password?",rememberMe:"Remember me",loginButton:"Sign in",noAccount:"Don't have an account?",signUpHere:"Sign up here",orContinueWith:"Or continue with",firebaseLogin:"Sign in with Google",alreadyHaveAccount:"Already have an account?",signInHere:"Sign in here",userType:"Consumer Category",validation:{emailRequired:"Email is required",emailInvalid:"Please enter a valid email address",passwordRequired:"Password is required",passwordMinLength:"Password must be at least 8 characters",userTypeRequired:"Please select your consumer category"},login:{title:"Login to Your Account",subtitle:"Welcome back to RABHAN Solar BNPL Platform",email:"Email Address",password:"Password",forgotPassword:"Forgot Password?",loginButton:"Login",noAccount:"Don't have an account?",signUp:"Sign Up"},userTypes:{USER:"Customer",CONTRACTOR:"Contractor",HOMEOWNER:"Residential",BUSINESS:"Commercial",INDUSTRIAL:"Industrial",GOVERNMENT:"Government"},register:{title:"Create Your Account",subtitle:"Join RABHAN Solar BNPL Platform",firstName:"First Name",lastName:"Last Name",email:"Email Address",business_email:"Business Email",business_email_placeholder:"Enter your business email",business_phone:"Business Phone",company_name:"Company Name",company_name_placeholder:"Enter your company name",cr_number:"CR Number",vat_number:"VAT Number",saudi_phone_hint:"Saudi phone numbers only (+966)",next_step:"Next Step",register_contractor:"Register as Contractor",registering:"Registering...",password:"Password",confirmPassword:"Confirm Password",phone:"Phone Number",nationalId:"National ID",agreeTerms:"I agree to the Terms of Service and Privacy Policy",registerButton:"Create Account",hasAccount:"Already have an account?",signIn:"Sign In",createAccount:"Create Account",first_name:"First Name",last_name:"Last Name",confirm_password:"Confirm Password",confirm_password_placeholder:"Confirm your password",agree_to_terms:"I agree to the",terms_and_conditions:"Terms and Conditions",and:"and",privacy_policy:"Privacy Policy",password_min_length:"Password must be at least 8 characters",firstNamePlaceholder:"Enter your first name",first_name_placeholder:"Enter your first name",lastNamePlaceholder:"Enter your last name",last_name_placeholder:"Enter your last name",emailPlaceholder:"Enter your email address",phonePlaceholder:"5XXXXXXXX",nationalIdPlaceholder:"Saudi National ID (10 digits)",passwordPlaceholder:"Enter a strong password",confirmPasswordPlaceholder:"Confirm your password",reviewHint:"Please review your information before creating your account. You can go back to make changes if needed.",steps:{personal:"Personal",contact:"Contact",address:"Address",property:"Property",security:"Security",documents:"Documents",payment:"Payment",verification:"Review",review:"Review & Confirm",personalTitle:"Personal & Contact Information",contactTitle:"Contact Information",addressTitle:"Address Information",propertyTitle:"Property & Energy Information",securityTitle:"Security Settings",documentsTitle:"Document Upload",paymentTitle:"Payment Method Setup",verificationTitle:"Review & Confirm",verificationDescription:"Please review your information before creating your account. You can go back to make changes if needed."},addressSection:"Address Information",financialSection:"Financial Information",propertySection:"Property & Preferences",region:"Region",city:"City",district:"District",streetAddress:"Street Address",landmark:"Landmark",postalCode:"Postal Code",monthlyIncome:"Monthly Income",employmentStatus:"Employment Status",employerName:"Employer Name",employmentDuration:"Employment Duration (Years)",monthlyElectricityBill:"Monthly Electricity Bill",electricityMeterNumber:"Electricity Meter Number",propertyType:"Property Type",propertyOwnership:"Property Ownership",preferredLanguage:"Preferred Language",emailNotifications:"Email Notifications",smsNotifications:"SMS Notifications",marketingConsent:"Marketing Communications",regionPlaceholder:"Select your region",cityPlaceholder:"Enter your city",districtPlaceholder:"Enter your district",streetAddressPlaceholder:"Enter street address",landmarkPlaceholder:"Nearby landmark or building",postalCodePlaceholder:"5-digit postal code",monthlyIncomePlaceholder:"Enter monthly income in SAR",employmentStatusPlaceholder:"Select employment status",employerNamePlaceholder:"Enter employer name",employmentDurationPlaceholder:"Years of employment",monthlyElectricityBillPlaceholder:"Monthly bill amount in SAR",electricityMeterNumberPlaceholder:"SEC meter number",propertyTypePlaceholder:"Select property type",propertyOwnershipPlaceholder:"Select ownership status",roofSize:"Roof Size (m²)",roofSizePlaceholder:"Available roof area",meterNumber:"Electricity Meter Number",meterNumberPlaceholder:"SEC meter number",propertyLocation:"Property GPS Location",latitude:"Latitude",longitude:"Longitude",getCurrentLocation:"Get Current Location",electricityConsumption:{range1:"0-200 kWh",range2:"200-400 kWh",range3:"400-600 kWh",range4:"600-800 kWh",range5:"800-1000 kWh",range6:"1000-1200 kWh",range7:"1200-1500 kWh",range8:"1500+ kWh",selectAverage:"Select average monthly consumption"},electricityConsumptionHint:"Select your average monthly electricity consumption in kWh",paymentMethodHint:"Select your preferred payment method for solar system financing",paymentMethods:{bankAccount:"Bank Account",bankAccountDesc:"Direct debit from your bank account",card:"Credit/Debit Card",cardDesc:"Visa, Mastercard, or Mada card",applePay:"Apple Pay",applePayDesc:"Quick and secure payments with Apple Pay",stcPay:"STC Pay",stcPayDesc:"Mobile wallet payments"},preferredLanguagePlaceholder:"Select preferred language",emailNotificationsDesc:"Receive important updates and notifications via email",smsNotificationsDesc:"Receive urgent notifications and OTP via SMS",marketingConsentDesc:"Receive promotional offers and solar energy tips",regions:{riyadh:"Riyadh",makkah:"Makkah",eastern:"Eastern Province",asir:"Asir",tabuk:"Tabuk",qassim:"Qassim",hail:"Hail",northern:"Northern Borders",jazan:"Jazan",najran:"Najran",bahah:"Al Bahah",jouf:"Al Jouf",madinah:"Madinah"},employment:{government:"Government Employee",private:"Private Sector",selfEmployed:"Self-Employed",retired:"Retired",student:"Student"},propertyTypes:{villa:"Villa",apartment:"Apartment",duplex:"Duplex",townhouse:"Townhouse",commercial:"Commercial",other:"Other"},ownership:{owned:"Owned",rented:"Rented",leased:"Leased",owner:"Owner",tenant:"Tenant",other:"Other"},passwordHints:{title:"Password Requirements",length:"At least 8 characters",uppercase:"One uppercase letter (A-Z)",lowercase:"One lowercase letter (a-z)",number:"One number (0-9)",special:"One special character (!@#$%^&*)"},nafath:{title:"NAFATH Authentication",description:"NAFATH is Saudi Arabia's national digital identity platform that provides secure, government-verified authentication for enhanced security and streamlined access to digital services.",comingSoon:"Coming Soon:",currentlyEmail:"Currently using email-based authentication. NAFATH integration will be available in the next update for enhanced security."},summary:{title:"Account Summary",name:"Full Name",email:"Email",phone:"Phone",nationalId:"National ID",region:"Region",city:"City",monthlyIncome:"Monthly Income",employment:"Employment",propertyType:"Property Type"},review:{personalInfo:"Personal Information",addressInfo:"Address Information",propertyInfo:"Property Information"},sqm:"m²",propertyOwnershipTypes:{owned:"Owned",rented:"Rented",leased:"Leased"},verified:"Verified",sendOTP:"Send OTP",sending:"Sending...",resend:"Resend",enterOTP:"Enter OTP Code",otpPlaceholder:"123456",verify:"Verify",verifying:"Verifying...",otpSentTo:"OTP sent to",validation:{firstName_required:"First name is required",lastNameRequired:"Last name is required",regionRequired:"Region is required",cityRequired:"City is required",postalCodeRequired:"Postal code is required",propertyTypeRequired:"Property type is required",propertyOwnershipRequired:"Property ownership is required",roofSizeRequired:"Roof size is required",electricityConsumptionRequired:"Electricity consumption is required",meterNumberRequired:"Meter number is required",employmentStatusRequired:"Employment status is required",nameMaxLength:"{{field}} must be 25 characters or less",nameInvalid:"{{field}} can only contain letters and spaces",regionInvalid:"Please select a valid region",lastName_required:"Last name is required",email_required:"Email is required",phone_required:"Phone number is required",phone_invalid:"Please enter a valid Saudi phone number",company_name_required:"Company name is required",confirm_password_required:"Please confirm your password",passwords_dont_match:"Passwords do not match",agree_to_terms_required:"You must agree to the terms and conditions",email_already_registered:"This email is already registered",phone_already_registered:"This phone number is already registered",emailRequired:"Email is required",emailMaxLength:"Email must be 50 characters or less",emailInvalid:"Please enter a valid email address",passwordRequired:"Password is required",passwordMinLength:"Password must be at least 8 characters",passwordMaxLength:"Password must be 25 characters or less",passwordWeak:"Password must contain uppercase, lowercase, and number",passwordMismatch:"Passwords do not match",agreeTermsRequired:"You must agree to the terms and conditions",phoneInvalid:"Phone must be Saudi (+966) or Indian (+91) format",phoneRequired:"Phone number is required",phoneSaudiStart:"Saudi phone numbers must start with 5",phoneIndianStart:"Indian phone numbers must start with 6, 7, 8, or 9",phoneNotVerified:"Phone number must be verified",phoneDigits:"Phone number must be {{digits}} digits for {{country}}",nationalIdInvalid:"National ID must be 10 digits starting with 1 or 2",nameRequired:"{{field}} is required",cityMaxLength:"City name must be 30 characters or less",cityInvalid:"City name can only contain letters and spaces",districtRequired:"District is required",districtMaxLength:"District name must be 30 characters or less",districtInvalid:"District name can only contain letters, spaces, and hyphens",streetAddressRequired:"Street address is required",streetAddressMaxLength:"Street address must be 50 characters or less",streetAddressInvalid:"Street address can only contain letters, numbers, spaces, and basic punctuation",landmarkMaxLength:"Landmark must be 50 characters or less",landmarkInvalid:"Landmark can only contain letters, numbers, spaces, and basic punctuation",postalCodeInvalid:"Postal code must be exactly 5 digits",roofSizeInvalid:"Roof size must be between 10 and 10,000 square meters",meterNumberLength:"Meter number must be between 6 and 15 characters",meterNumberInvalid:"Meter number can only contain letters and numbers",latitudeInvalid:"Latitude must be between -90 and 90",longitudeInvalid:"Longitude must be between -180 and 180",documentRequired:"This document is required for KYC verification.",fileTypeInvalid:"Invalid file type. Please upload JPG, JPEG, or PNG images only.",fileSizeInvalid:"File size too large. Maximum size is 3MB.",paymentMethodRequired:"Please select a payment method",nameMinLength:"Name must be at least 2 characters",phoneFormat:"Phone must start with +966",phoneLength:"Phone must be 13 characters (+966xxxxxxxxx)",nationalIdLength:"National ID must be exactly 10 digits",nationalIdStart:"National ID must start with 1 or 2",cityMinLength:"City must be at least 2 characters",streetMinLength:"Street address must be at least 5 characters",streetMaxLength:"Street address must be 50 characters or less",postalCodeLength:"Postal code must be exactly 5 digits",incomeMinimum:"Monthly income must be at least 3,000 SAR",incomeMaximum:"Monthly income cannot exceed 9,999,999 SAR",yearsMaximum:"Years employed cannot exceed 50",dependentsMaximum:"Number of dependents cannot exceed 20",roofSizeMinimum:"Roof size must be at least 10 square meters",roofSizeMaximum:"Roof size cannot exceed 10,000 square meters",meterNumberMinLength:"Meter number must be at least 6 characters",meterNumberMaxLength:"Meter number cannot exceed 15 characters",employerMinLength:"Employer name must be at least 2 characters",jobTitleMinLength:"Job title must be at least 2 characters",validInput:"Valid",saving:"Saving..."},countries:{saudiArabia:"Saudi Arabia",india:"India"},documents:{title:"Required Documents",description:"Upload the required documents for KYC verification. All documents must be clear, readable, and in valid format.",nationalId:"Saudi National ID",nationalIdDesc:"Front and back photo required",proofOfAddress:"Proof of Address",proofOfAddressDesc:"Utility bill or bank statement",fileHint:"JPG, PNG • Max 3MB",uploaded:"Uploaded",upload:"Upload",uploadedIcon:"✓ Uploaded",kyc:{title:"SAMA KYC Compliance",description:"As per SAMA regulations, all BNPL customers must complete KYC verification. Documents are encrypted and stored securely with 7-year retention for compliance."}},placeholders:{postalCode:"12345",latitude:"24.7136",longitude:"46.6753"}}},Lp={first_name:"First Name",last_name:"Last Name",first_name_placeholder:"Enter your first name",last_name_placeholder:"Enter your last name",business_email:"Business Email",business_email_placeholder:"Enter your business email",business_phone:"Business Phone",saudi_phone_hint:"Saudi phone numbers only (+966)",next_step:"Next Step",company_name:"Company Name",company_name_placeholder:"Enter your company name",cr_number:"CR Number",vat_number:"VAT Number",password:"Password",password_placeholder:"Enter a strong password",confirm_password:"Confirm Password",confirm_password_placeholder:"Confirm your password",agree_to_terms:"I agree to the",terms_and_conditions:"Terms and Conditions",and:"and",privacy_policy:"Privacy Policy",back:"Back",registering:"Registering...",register_contractor:"Register as Contractor"},zp={firstName_required:"First name is required",lastName_required:"Last name is required",email_required:"Email is required",email_invalid:"Please enter a valid email address",phone_required:"Phone number is required",phone_invalid:"Please enter a valid Saudi phone number",password_required:"Password is required",password_min_length:"Password must be at least 8 characters",confirm_password_required:"Please confirm your password",passwords_dont_match:"Passwords do not match",company_name_required:"Company name is required",agree_to_terms_required:"You must agree to the terms and conditions",email_already_registered:"This email is already registered",phone_already_registered:"This phone number is already registered",nameMinLength:"Name must be at least 2 characters",nameMaxLength:"Name must be 25 characters or less",nameInvalid:"Name can only contain letters and spaces",phoneFormat:"Phone must start with +966",phoneLength:"Phone must be 13 characters (+966xxxxxxxxx)",nationalIdLength:"National ID must be exactly 10 digits",nationalIdStart:"National ID must start with 1 or 2",cityMinLength:"City must be at least 2 characters",cityMaxLength:"City must be 30 characters or less",streetMinLength:"Street address must be at least 5 characters",streetMaxLength:"Street address must be 50 characters or less",postalCodeLength:"Postal code must be exactly 5 digits",incomeMinimum:"Monthly income must be at least 3,000 SAR",incomeMaximum:"Monthly income cannot exceed 9,999,999 SAR",yearsMaximum:"Years employed cannot exceed 50",dependentsMaximum:"Number of dependents cannot exceed 20",roofSizeMinimum:"Roof size must be at least 10 square meters",roofSizeMaximum:"Roof size cannot exceed 10,000 square meters",meterNumberMinLength:"Meter number must be at least 6 characters",meterNumberMaxLength:"Meter number cannot exceed 15 characters",employerMinLength:"Employer name must be at least 2 characters",jobTitleMinLength:"Job title must be at least 2 characters",validInput:"Valid",firstName_minLength:"First name must be at least 2 characters",firstName_maxLength:"First name must be less than 50 characters",firstName_invalid:"First name can only contain letters, spaces, hyphens and apostrophes",firstName_spaces:"First name cannot start or end with spaces",firstName_consecutive:"First name cannot have consecutive spaces",lastName_minLength:"Last name must be at least 2 characters",lastName_maxLength:"Last name must be less than 50 characters",lastName_invalid:"Last name can only contain letters, spaces, hyphens and apostrophes",lastName_spaces:"Last name cannot start or end with spaces",lastName_consecutive:"Last name cannot have consecutive spaces",email_maxLength:"Email address must be less than 100 characters",email_business:"Please use a business email address (not personal email)",email_consecutive:"Email cannot contain consecutive dots",email_dots:"Email cannot start or end with a dot",password_maxLength:"Password must be less than 128 characters",password_lowercase:"Password must contain at least one lowercase letter",password_uppercase:"Password must contain at least one uppercase letter",password_number:"Password must contain at least one number",password_special:"Password must contain at least one special character",password_spaces:"Password cannot contain spaces",password_consecutive:"Password cannot have more than 2 consecutive identical characters",password_common:"Password is too common, please choose a stronger password",confirm_password_mismatch:"Passwords do not match",phone_business_required:"Business phone number is required",phone_saudi_invalid:"Please enter a valid Saudi mobile number (5XXXXXXXX)",phone_indian_invalid:"Indian mobile numbers must start with 6, 7, 8, or 9",phone_must_verify:"Phone number must be verified before registration",company_name_minLength:"Company name must be at least 2 characters",company_name_maxLength:"Company name must be less than 100 characters",company_name_invalid:"Company name contains invalid characters",company_name_spaces:"Company name cannot start or end with spaces",company_name_consecutive:"Company name cannot have consecutive spaces",cr_number_required:"CR number is required",cr_number_digits:"CR number must contain only digits",cr_number_length:"CR number must be exactly 10 digits",cr_number_start:"CR number must start with 10, 20, 30, or 40",vat_number_required:"VAT number is required",vat_number_digits:"VAT number must contain only digits",vat_number_length:"VAT number must be exactly 15 digits",vat_number_format:"VAT number must start and end with 3",terms_required:"You must agree to the Terms and Conditions to register",invalid_characters:"Invalid characters detected",names_identical:"First name and last name cannot be identical",temp_email:"Temporary email addresses are not allowed",email_domain_invalid:"Email domain length is invalid",company_name_generic:"Please enter your actual company name"},Ep={verification:{title:"Phone Verification",description:"Verify your phone number to secure your account",success:"Phone number verified successfully!",failed:"Phone verification failed. Please try again.",skip:"Skip for now",back:"Change Phone Number"},country:{label:"Country",placeholder:"Select your country"},number:{label:"Phone Number"},format:{example:"Format example"},validation:{required:"Phone number is required",invalid:"Please enter a valid phone number"},otp:{title:"OTP Verification",label:"Verification Code",description:"Enter the 6-digit code sent to {{phone}}",hint:"Enter the 6-digit code from SMS",send:"Send OTP",sending:"Sending...",sent:"Verification code sent successfully!",verify:"Verify OTP",verifying:"Verifying...",resend:"Resend Code",resendIn:"Resend in {{seconds}}s","resend.countdown":"Resend in {{seconds}}s","send.failed":"Failed to send verification code",error:"Failed to send OTP",invalid:"Invalid OTP code",validation:{length:"Please enter a 6-digit code"}}},Mp={title:"RABHAN Professional Theme",subtitle:"Professional light gradient theme with wave animations and glassmorphism",features:{waveAnimations:"Wave animations",glassmorphism:"Glassmorphism effects",improvedHover:"Improved hover states",shimmer:"Shimmer animations",float:"Float animations",responsive:"Mobile-first responsive"},ready:"Theme System Ready 🌊✨"},Bp={confirm:{title:"Logout Confirmation",message:"Are you sure you want to logout from your account?",messageWithName:"Are you sure you want to logout, {{name}}?",warning:{title:"Important Notice",message:"You will need to login again to access your account and continue using RABHAN services."},cancel:"Cancel",logout:"Logout"}},Np={welcome:{title:"Welcome, {{name}}!",subtitle:"You're logged in as {{userType}}"},status:{active:"Active"},sidebar:{dashboard:"Dashboard",calculator:"Solar Calculator",quotes:"Quote Requests",financing:"Financing",projects:"Projects",marketplace:"Marketplace",documents:"Documents",settings:"Settings",profile:"Profile",logout:"Logout"},quickActions:{title:"Quick Actions"},user:{solarCalculator:"Solar Calculator",viewFinancing:"View Financing Options"},contractor:{viewProjects:"View Projects",viewApplications:"View Applications"},profile:{title:"Profile",email:"Email",userType:"Type",editProfile:"Edit Profile",personalInfo:"Personal Information",addressInfo:"Address Information",propertyEmployment:"Property & Employment",notProvided:"Not provided",completionTitle:"Profile Completion",completionComplete:"Excellent! Your profile is complete.",completionAlmost:"Almost there! Just a few more details to complete your profile.",completionHalfway:"You're halfway there! Complete your profile for better service.",completionStart:"Get started by completing your profile information.",missingFields:"Missing information",tabs:{personal:"Personal",address:"Address",verification:"Verification",employment:"Employment",property:"Property",documents:"Documents",solar:"Solar Preferences",preferences:"Preferences"},selectSection:"Select a section from the menu to view and edit your information",dateOfBirth:"Date of Birth",maritalStatus:"Marital Status","maritalStatus.single":"Single","maritalStatus.married":"Married","maritalStatus.divorced":"Divorced","maritalStatus.widowed":"Widowed",dependents:"Number of Dependents",landmark:"Landmark",postalCode:"Postal Code",gpsLatitude:"GPS Latitude",gpsLongitude:"GPS Longitude",locationInfo:"Location Information",getMyLocation:"Get My Location",gettingLocation:"Getting Location...",gpsCoordinates:"GPS Coordinates",clickToGetLocation:"Click 'Get My Location' to auto-fill",locationSuccess:"Location retrieved successfully!",locationError:"Location Error",phoneVerified:"Phone Verified",emailVerified:"Email Verified",samaVerified:"SAMA Verified",nafathVerified:"NAFATH Verified",jobTitle:"Job Title",yearsEmployed:"Years Employed",electricityConsumption:"Monthly Electricity Consumption (kWh)",desiredSystemSize:"Desired Solar System Size (kW)",budgetRange:"Budget Range (SAR)",installationTimeline:"Installation Timeline",financingPreference:"Financing Preference",specialRequirements:"Special Requirements",bnplMaxAmount:"BNPL Maximum Amount",bnplEligible:"BNPL Eligible",preferredLanguage:"Preferred Language",emailNotifications:"Email Notifications",smsNotifications:"SMS Notifications",marketingConsent:"Marketing Communications",samaLimit:"SAMA Limit",adminControlled:"Admin Controlled",pendingAdminApproval:"Pending admin approval",updateSuccess:"Profile updated successfully",updateError:"Error updating profile",placeholder:{first_name:"Enter your first name",last_name:"Enter your last name",phone:"Enter your phone number",date_of_birth:"Select your date of birth",marital_status:"Select your marital status",dependents:"Number of dependents",region:"Select your region",city:"Enter your city",district:"Enter your district",street_address:"Enter your street address",landmark:"Enter nearby landmark",postal_code:"Enter 5-digit postal code",gps_latitude:"GPS latitude coordinate",gps_longitude:"GPS longitude coordinate",national_id:"Enter 10-digit national ID",employment_status:"Select employment status",employer_name:"Enter employer name",job_title:"Enter your job title",monthly_income:"Enter monthly income in SAR",years_employed:"Years with current employer",property_type:"Select property type",property_ownership:"Select ownership type",roof_size:"Roof area in square meters",electricity_consumption:"Select consumption range",electricity_meter_number:"Enter meter number",monthly_electricity_bill:"Average monthly bill in SAR",desired_system_size:"Desired capacity in kW",budget_range:"Select budget range",installation_timeline:"Preferred installation timeframe",financing_preference:"Select financing option",special_requirements:"Any special requirements or notes",preferred_language:"Select preferred language"},verification:{status:"Verification Status",verified:"Verified",pending:"Under Review",rejected:"Rejected",not_verified:"Not Verified",upload_documents:"Complete Verification",aria:{verified:"Account is verified",pending:"Account verification is under review",rejected:"Account verification was rejected",not_verified:"Account is not verified",upload_documents:"Click to upload verification documents"}}},activity:{title:"Recent Activity",noActivity:"No recent activity",getStarted:"Start using RABHAN to see your activity here"}},Wp={pageNotFound:"Page Not Found",somethingWentWrong:"Something went wrong",tryAgain:"Try again",goHome:"Go Home",networkError:"Network error",loginFailed:"Login failed. Please try again.",serverError:"Server error",unauthorizedAccess:"Unauthorized access",forbiddenAccess:"Forbidden access",sessionExpired:"Session expired"},Dp={sama:"SAMA Compliant",pdpl:"PDPL Compliant",dataProtection:"Your data is protected",secureConnection:"Secure connection",privacy:"Privacy protected",auditTrail:"Full audit trail",compliance:"Regulatory compliance"},$p={title:"Solar Calculator",subtitle:"Calculate your solar savings instantly",selectClientType:"Select Client Type",residential:"Residential",commercial:"Commercial",inputMethod:"Choose Input Method",monthlyUsage:"Monthly Usage (KWH)",monthlyBill:"Monthly Bill (SAR)",enterValue:"Enter Value",monthlyConsumption:"Monthly Electricity Consumption (KWH)",monthlyElectricityBill:"Monthly Electricity Bill (SAR)",enterKWH:"Enter KWH (minimum 6,000)",enterSAR:"Enter SAR",enterUsageDesc:"Enter your electricity usage",enterBillDesc:"Enter your current bill amount",paymentPeriod:"Payment Period",months:"months",calculating:"Calculating...",calculateSolarSavings:"Calculate Solar Savings",clientType:{residential:"Residential",commercial:"Commercial"},systemCalculated:"🌟 Your Solar Journey Starts Here!",personalizedSolution:"Discover the perfect solar solution tailored just for you - start saving today!",systemSize:"System Size",systemPrice:"System Price",monthlyPayment:"Monthly Payment",lifetimeSavings:"Lifetime Savings",roi:"ROI",financialBreakdown:"Financial Breakdown",downloadReport:"Download Report",recalculate:"Recalculate",getQuote:"Get Quote",results:{title:"🌟 Your Solar Journey Starts Here!",subtitle:"Discover the perfect solar solution tailored just for you - start saving today!",systemSize:"System Size",systemPrice:"System Price",monthlyPayment:"Monthly Payment",roi:"ROI",financialBreakdown:"Financial Breakdown",downloadReport:"Download Report",recalculate:"Recalculate",getQuote:"Get Quote",marketing:{saveMoreThan:"Save more than",ofSystemValue:"of the system value and own it for life",byPayingJust:"by paying just",plusOnBill:"plus on your electricity monthly bill",forOnly:"for only",months:"months",ownForLife:"Own for Life",afterMonths:"After {{months}} months",guaranteedROI:"Guaranteed ROI",percentReturn:"{{percent}}% return",startSaving:"Start Saving",fromDayOne:"From day one",transformBill:"Transform your {{currentBill}} monthly bill into a {{systemPrice}} solar investment!",visionTagline:"Clean energy • Zero emissions • Saudi Vision 2030"}},consumptionHint:"Enter between 6,000 - 24,000 KWH",billHint:"Minimum {{min}} SAR",validation:{consumptionRequired:"Monthly consumption is required",consumptionMustBeNumber:"Monthly consumption must be a valid number",consumptionMinimum:"Monthly consumption must be at least 6,000 KWH",consumptionMaximum:"Monthly consumption cannot exceed 24,000 KWH",billRequired:"Monthly bill is required",billMustBeNumber:"Monthly bill must be a valid number",billMinimum:"Monthly bill must be at least {{min}} SAR",billMaximum:"Maximum bill is 10,000 SAR",installmentPeriod:"Please select a valid installment period"},error:"Error",validationError:"Please check your inputs",calculationFailed:"Calculation failed. Please try again.",averageElectricityBill:"Average Electricity Monthly Bill",averageMonthlyProduction:"Average Monthly Power Production",installmentOptions:{12:"12 months",18:"18 months",24:"24 months"},numberOfInstallments:"Number of Installments",calculatingMessage:"Calculating your solar savings...",calculatingSubtext:"This will take just a moment",benefits:{reduceBills:"Reduce Bills by 65%",cleanEnergy:"Clean Energy",bnplFinancing:"BNPL Financing"},enterDetails:"Enter your details to see instant results",resultsWillAppear:"Results will appear here as you fill the form"},Fp={badge:{contractor:"Contractor Portal"},dashboard:{loading:"Loading contractor dashboard...",welcome:"Welcome, {{name}}!",subtitle:"Manage your solar business with RABHAN",stats:{totalProjects:"Total Projects",activeProjects:"Active Projects",completedProjects:"Completed Projects",totalRevenue:"Total Revenue",pendingPayments:"Pending Payments",averageRating:"Average Rating",reviews:"reviews",monthlyProjects:"This Month"},quickActions:{title:"Quick Actions",newProject:"Start New Project",manageProducts:"Manage Products",viewWallet:"View Wallet"},recentActivity:{title:"Recent Activity",noActivity:"No recent activity to display"}},verification:{verified:"Fully Verified",partial:"Partially Verified",pending:"Verification Pending"},sidebar:{dashboard:"Dashboard",projects:"Projects",quotes:"Quotes",marketplace:"Marketplace",wallet:"Wallet",documents:"Documents",profile:"Business Profile",logout:"Logout"},profile:{title:"Business Profile",subtitle:"Manage your business information and settings",loading:"Loading profile...",businessProfile:"Business Profile Management",comingSoon:"Business profile management will be available soon.",samaCompliance:"SAMA CSF Level 4 Compliant - All data is encrypted and securely processed",selectSection:"Select a section from the menu to view and edit your information",updateSuccess:"Business profile updated successfully",saveSuccess:"Profile saved successfully",saveError:"Failed to save profile. Please try again.",preferencesUpdateSuccess:"Preferences updated successfully",locationSuccess:"Location retrieved successfully!",selectToAdd:"Select to add:",tabs:{business:"Business Info",contact:"Contact Details",address:"Address",services:"Services",verification:"Verification",financial:"Financial",preferences:"Preferences"},fields:{businessName:"Business Name",businessNameAr:"Business Name (Arabic)",businessType:"Business Type",establishedYear:"Established Year",crNumber:"CR Number",vatNumber:"VAT Number",website:"Website",description:"Business Description",descriptionAr:"Business Description (Arabic)",firstName:"First Name",lastName:"Last Name",email:"Email",phone:"Phone",whatsapp:"WhatsApp",businessPhone:"Business Phone",businessEmail:"Business Email",contactPerson:"Contact Person",contactPosition:"Contact Position",region:"Region",addressLine1:"Address Line 1",addressLine2:"Address Line 2",latitude:"Latitude",longitude:"Longitude",verificationLevel:"Verification Level",averageRating:"Average Rating",totalReviews:"Total Reviews",contractorStatus:"Contractor Status",city:"City",district:"District",postalCode:"Postal Code",streetAddress:"Street Address",gpsLocation:"GPS Location",serviceCategories:"Service Categories",serviceAreas:"Service Areas",yearsExperience:"Years of Experience",contractorType:"Contractor Type",canInstall:"Can Install Solar Systems",canSupplyOnly:"Can Supply Products Only",employeeCount:"Employee Count",specializations:"Specializations",bankName:"Bank Name",customBankName:"Custom Bank Name",iban:"IBAN",accountHolderName:"Account Holder Name",preferredLanguage:"Preferred Language",emailNotifications:"Email Notifications",smsNotifications:"SMS Notifications",marketingConsent:"Marketing Communications"},businessTypes:{individual:"Individual",smallBusiness:"Small Business",mediumBusiness:"Medium Business",largeBusiness:"Large Business",fullContractor:"Full Contractor",llc:"Limited Liability Company (LLC)",corporation:"Corporation",partnership:"Partnership",other:"Other"},regions:{riyadh:"Riyadh",makkah:"Makkah",madinah:"Medina",qassim:"Qassim",eastern:"Eastern Province",asir:"Asir",tabuk:"Tabuk",hail:"Hail",northern:"Northern Borders",jazan:"Jazan",najran:"Najran",bahah:"Bahah",jawf:"Jawf"},serviceCategories:{residential_solar:"Residential Solar",commercial_solar:"Commercial Solar",industrial_solar:"Industrial Solar",maintenance:"Maintenance",consultation:"Consultation"},contractorTypes:{fullContractor:"Full Solar Contractor",vendorOnly:"Solar Vendor Only"},validation:{nameMinLength:"Name must be at least 2 characters",nameMaxLength:"Name must be 50 characters or less",nameFormat:"Name can only contain letters and spaces",businessNameMinLength:"Business name must be at least 2 characters",businessNameMaxLength:"Business name must be 100 characters or less",businessNameFormat:"Business name contains invalid characters",phoneFormat:"Phone must start with +966 (Saudi Arabia)",phoneLength:"Phone must be 13 characters (+966xxxxxxxxx)",saudiMobileFormat:"Invalid Saudi mobile number format",crLength:"Commercial Registration must be exactly 10 digits",crFormat:"Commercial Registration must contain only digits",vatLength:"VAT number must be exactly 15 digits",vatFormat:"VAT number must contain only digits",vatSaudiFormat:"Invalid Saudi VAT number format",postalCodeLength:"Postal code must be exactly 5 digits",postalCodeFormat:"Postal code must contain only digits",establishedYear:"Year must be between 1900 and current year",modernBusiness:"Solar businesses typically established after 2000",maxExperience:"Experience cannot exceed 50 years",minExperience:"Experience cannot be negative",websiteFormat:"Website must be a valid URL (http://example.com)",emailFormat:"Invalid email format",descriptionMaxLength:"Description must be 500 characters or less",addressMinLength:"Address must be at least 5 characters",addressMaxLength:"Address must be 100 characters or less",cityMinLength:"City must be at least 2 characters",cityMaxLength:"City must be 30 characters or less",cityFormat:"City name contains invalid characters",serviceCategories:"Please select at least one service category",maxServiceCategories:"Maximum 5 service categories allowed",serviceAreas:"Please select at least one service area",maxServiceAreas:"Maximum 8 service areas allowed"},reviews:"reviews",personal_info:{title:"Personal Information"},business_info:{title:"Business Information"},actions:{save_profile:"Save Profile",saving:"Saving..."},success:{profile_updated:"Profile updated successfully!"},errors:{load_failed:"Failed to load profile data",save_failed:"Failed to save profile",first_name_required:"First name is required",last_name_required:"Last name is required",email_required:"Email is required",email_invalid:"Please enter a valid email address",phone_required:"Phone number is required",company_name_required:"Company name is required"},completion:"Profile Completion",updateError:"Error updating business profile",languageUpdated:"Language preference updated successfully",defaultName:"Business Profile",verified:"Verified",pending:"Pending Verification",completionProgress:"Profile Completion",excellentProgress:"Excellent! Your profile is nearly complete and ready for business.",goodProgress:"Good progress! Complete a few more sections to enhance your profile.",completeProfile:"Complete your profile to unlock all contractor features.",verificationDescription:"Verification status is managed by RABHAN admin based on submitted documents",verificationLevel:"Verification Level",adminControlled:"This field is controlled by admin",securityNote:"Security Notice",financialSecurityNote:"Financial information is encrypted and securely stored according to SAMA regulations",gettingLocation:"Getting Location...",getLocation:"Get My Location",employees:"employees",sections:{title:"Profile Sections",businessInfo:"Business Information",contactInfo:"Contact Information",addressInfo:"Address Information",serviceInfo:"Service Information",verification:"Verification & Compliance",financialInfo:"Financial Information",preferences:"Preferences & Settings"},placeholders:{businessName:"Enter business name",businessNameAr:"Enter business name in Arabic",business_name_ar:"Enter business name in Arabic",selectBusinessType:"Select business type",description:"Describe your business and services",descriptionAr:"Describe your business in Arabic",description_ar:"Describe your business in Arabic",vatNumber:"Enter VAT number (15 digits)",vat_number:"Enter VAT number (15 digits)",establishedYear:"Enter year business was established",established_year:"Enter year business was established",employeeCount:"Enter number of employees",employee_count:"Enter number of employees",whatsapp:"+966501234567",secondaryPhone:"+966501234567",website:"https://company.com",firstName:"Enter first name",lastName:"Enter last name",contactPerson:"Main contact person",contactPosition:"Manager, Director, etc.",selectRegion:"Select region",city:"Enter city name",district:"Enter district",streetAddress:"Enter street address",address_line1:"Enter main address",address_line2:"Enter additional address (optional)",postal_code:"Enter 5-digit postal code",latitude:"24.7136",longitude:"46.6753",serviceAreas:"Riyadh, Jeddah, Dammam",specializations:"Solar panels, Inverters, Batteries",addSpecialization:"Add specialization...",selectEmployeeCount:"Select employee count",bankName:"Saudi National Bank",customBankName:"Enter custom bank name",accountHolderName:"Company or individual name"},hints:{separateWithComma:"Separate multiple items with commas",tagInput:"Type and press Enter to add tags, or separate with commas. Use backspace to remove last tag."},statusTypes:{pending:"Pending",documents_required:"Documents Required",verification:"Under Verification",verified:"Verified",active:"Active",suspended:"Suspended",rejected:"Rejected",inactive:"Inactive"},verifications:{sama:"SAMA Verified",nafath:"NAFATH Verified",saso:"SASO Certified",sec:"SEC Licensed"},verificationStatuses:{sama:"Saudi Arabian Monetary Authority verification",nafath:"National unified digital identity verification",saso:"Saudi Standards Organization certification",sec:"Saudi Electricity Company license"},contactMethods:{title:"Contact Details",description:"Manage your business contact information for customers to reach you."},managedInProfile:"Managed in Profile tab",authServiceInfo:{title:"Account Information",description:"This information is managed by your RABHAN account and cannot be modified here. To update these details, please contact support."},readOnly:"Read Only"},projects:{title:"Project Management",management:"Project Management System",comingSoon:"Project management system will be available soon."},marketplace:{title:"Product Marketplace",productListing:"Product Listing Management",comingSoon:"Product listing management will be available soon."},quotes:{title:"Quote Requests",assignedRequests:"Assigned Quote Requests",requests:"requests",noRequests:{title:"No assigned requests",message:"You haven't been assigned any quote requests yet. Check back later for new opportunities."},tabs:{assigned:"Assigned Requests",submitted:"Submitted Quotes"},status:"Status",statuses:{assigned:"Assigned",viewed:"Viewed",accepted:"Accepted",rejected:"Rejected",submitted:"Submitted",pending:"Pending"},assignmentStatus:"Assignment Status",propertyDetails:"Property Details",location:"Location",systemSize:"System Size",serviceArea:"Service Area",requestDate:"Request Date",requestId:"Request ID",solarSystem:"Solar System",quoteSubmitted:"Quote Submitted",submitQuote:"Submit Quote Required",submitQuoteMessage:"You've accepted this request. Please submit your quote to proceed.",alreadyAccepted:"You have already accepted this request.",alreadyRejected:"You have already rejected this request.",submittedQuotes:"Submitted Quotes",submittedQuotesMessage:"View and manage your submitted quotes. Track their status and responses.",viewQuotations:"View Quotations",compareQuotations:"Compare Quotations",quotationsAvailable:"quotations available",comparison:"Comparison",details:"Details",bestValue:"Best Value",recommended:"Recommended",fastestInstallation:"Fastest Installation",days:"days",totalPrice:"Total Price",lineItems:"line items",paymentTerms:"Payment Terms",selectThisQuote:"Select This Quote",noQuotationsAvailable:"No Quotations Available",waitForContractorQuotes:"Please wait for contractors to submit their detailed quotations",detailedQuotation:"Detailed Quotation",item:"Item",description:"Description",quantity:"Qty",unitPrice:"Unit Price",totalAmount:"Total Amount",installationDeadline:"Installation Deadline",selectThisQuotation:"Select This Quotation",quotationSummary:"Quotation Summary",quotedPrice:"Quoted Price",baseQuotationAmount:"Base quotation amount",youReceive:"You Receive",afterProcessingFees:"After processing fees & VAT",pricingNote:"Final payment amount includes VAT and processing fees. Quoted price is what will be shown to customers.",actions:{accept:"Accept Request",reject:"Reject Request",submitQuote:"Submit Quote"},quotation:"Quotation",submittedDate:"Submitted Date",loadingQuotes:"Loading quotations...",noSubmittedQuotes:"No Submitted Quotations",noSubmittedQuotesMessage:"You haven't submitted any quotations yet. Start by accepting quote requests and submitting your proposals.",items:"items",viewDetails:"View Details",quotationDetails:"Quotation Details",systemCapacity:"System Capacity",systemSpecifications:"System Specifications",solarCapacity:"Solar Capacity",storageCapacity:"Storage Capacity",monthlyProduction:"Monthly Production",serialNumber:"S/N",pricingBreakdown:"Pricing Breakdown",subtotal:"Subtotal",rabhanCommission:"Rabhan Commission",rabhanMarkup:"Rabhan Markup",customerPrice:"Customer Price",contractorEarnings:"Contractor Earnings",additionalInformation:"Additional Information",vatNumber:"VAT Number",walletCredit:"Wallet Credit",bankTransfer:"Bank Transfer"},wallet:{title:"Financial Wallet",paymentTracking:"Payment Tracking & Wallet",comingSoon:"Payment tracking and wallet management will be available soon."}},Op={title:"Solar Products Marketplace",subtitle:"Browse and purchase high-quality solar products from verified contractors",searchPlaceholder:"Search solar products...",filter:"Filter",inStock:"In Stock",outOfStock:"Out of Stock",inclVAT:"incl. VAT",exclVAT:"excl. VAT",addToCart:"Add to Cart",inCart:"In Cart",items:"items",loading:"Loading products...",errorTitle:"Error Loading Products",retry:"Try Again",noProducts:"No products found",noProductsDesc:"Try adjusting your search criteria",previous:"Previous",next:"Next"},qp={form:{title:"Request Solar Quote",subtitle:"Get personalized quotes from verified contractors",submit:"Submit Request",sections:{systemAndContact:"System & Contact",location:"Location",propertyDetails:"Property Details",notes:"Notes",notesOptional:"Notes (Optional)"},systemSize:{label:"System Size (kWp)",placeholder:"6.0",help:"Recommended system size based on your energy needs"},location:{label:"Installation Location",placeholder:"Full address including district, city, and region"},serviceArea:{label:"Service Area",placeholder:"Select your city/region",options:{riyadh:"Riyadh",jeddah:"Jeddah",dammam:"Dammam",mecca:"Mecca",medina:"Medina"}},installationDate:{label:"Preferred Installation Date"},phone:{label:"Contact Phone",placeholder:"+966 50 123 4567"},notes:{label:"Additional Notes (Optional)",placeholder:"Any specific requirements, questions, or preferences..."},propertyDetails:{title:"Property Details",propertyType:"Property Type",roofType:"Roof Type",roofOrientation:"Roof Orientation",shadingIssues:"Property has shading issues (trees, buildings, etc.)",propertyTypes:{villa:"Villa",apartment:"Apartment",townhouse:"Townhouse",commercial:"Commercial"},roofTypes:{flat:"Flat Roof",sloped:"Sloped Roof",mixed:"Mixed"},roofOrientations:{south:"South",southwest:"Southwest",southeast:"Southeast",east:"East",west:"West",mixed:"Multiple Directions"}},success:{title:"Quote Request Submitted!",message:"Your quote request has been sent to verified contractors in your area. You'll receive quotes within 24-48 hours."},errors:{systemSizeRange:"System size must be between 1-50 kWp",locationRequired:"Installation location is required",serviceAreaRequired:"Please select a service area",dateRequired:"Preferred installation date is required",dateInFuture:"Installation date must be at least tomorrow",phoneRequired:"Contact phone number is required",phoneTooLong:"Phone number too long",phoneInvalid:"Please enter a valid Saudi phone number",submitFailed:"Failed to submit quote request. Please try again."},steps:{basicInfo:"Basic Information",basicInfoDesc:"Tell us about your property and system requirements",contractorSelection:"Select Contractors",contractorSelectionDesc:"Choose exactly 3 contractors from your area for property inspection and quotes",finalSubmission:"Final Submission",finalSubmissionDesc:"Review your selections and complete your quote request"}},steps:{basicInfo:"Basic Information",basicInfoDesc:"Tell us about your property and system requirements",contractorSelection:"Select Contractors",contractorSelectionDesc:"Choose exactly 3 contractors from your area for property inspection and quotes",finalSubmission:"Final Submission",finalSubmissionDesc:"Review your selections and complete your quote request"},title:"Solar Quotes",subtitle:"Request quotes from verified contractors and compare offers for your solar installation",tabs:{myRequests:"My Requests",newRequest:"New Request"},myRequests:{title:"Your Quote Requests",subtitle:"Track your quote requests and view received quotes",empty:{title:"No quote requests yet",message:"Get started by requesting quotes from certified contractors in your area. It's free and takes just a few minutes."}},actions:{newRequest:"New Request",viewQuotes:"View Quotes",editRequest:"Edit Request",selectQuote:"Select Quote",viewDetails:"View Details"},status:{title:"Status",submitted:"Quote Submitted",pending:"Pending",assigned:"Assigned",accepted:"Accepted",quotesReceived:"Quotes Received",approved:"Approved",pendingReview:"Pending Review"},system:"Solar System",solarSystem:"Solar System",requestId:"Request ID",propertyDetails:"Property Details",location:"Location",contactPhone:"Contact Phone",propertyType:"Property Type",roofType:"Roof Type",roofOrientation:"Roof Orientation",shadingIssues:"Shading Issues",installationSchedule:"Installation Schedule",inspectionSchedules:"Inspection Schedules",contractor:"Contractor",selectedQuote:"Selected Quote",selectedOn:"Selected on",estimatedCost:"Estimated Cost",preferredDate:"Preferred Date",notSpecified:"Not specified",quotesReceivedCount:"quotes received",quotes:"quotes",requests:"requests",submittedOn:"Submitted on",selectedContractors:"Selected Contractors",solarCompany:"Solar Company",receivedQuotes:"Received Quotes",noQuotes:{title:"No quotes available",message:"Contractors have not submitted quotes yet. Please check back later."},installationTimeline:"Installation Timeline",systemCapacity:"System Capacity",panels:"Solar Panels",inverter:"Inverter",warrantyTerms:"Warranty Terms",equipment:"Equipment",performance:"Performance",installation:"Installation",years:"years",days:"days",detailedQuotation:"Detailed Quotation",readyForSelection:"Ready for selection",underAdminReview:"Under admin review",includingVAT:"Including VAT",excludingVAT:"Excluding VAT",installationTime:"Installation Time",itemizedBreakdown:"Itemized Breakdown",vat:"VAT",totalAmount:"Total Amount",systemSpecs:"System Specifications",warranty:"Warranty",providerInfo:"Provider Information",quoteValidUntil:"Quote Valid Until",selectThisQuote:"Select This Quote",noDetailedBreakdown:"No detailed breakdown available",totalPrice:"Total Price",subtotal:"Subtotal",storageCapacity:"Storage Capacity",monthlyProduction:"Monthly Production",paymentTerms:"Payment Terms",installationDeadline:"Installation Deadline"},Vp={loading:"Loading contractors...",loadError:"Failed to load contractors. Please try again.",reviews:"reviews",stars:"stars",years:"years",experience:"Experience",projects:"Projects",serviceAreas:"Service Areas",select:"Select",selected:"Selected",schedule:"Schedule",scheduled:"Scheduled",filters:"Filters",verification:{verified:"Verified",partial:"Partial",unverified:"Unverified"},filterOptions:{minRating:"Minimum Rating",anyRating:"Any Rating",maxDistance:"Max Distance"},selection:{title:"Select Your Contractors",subtitle:"Choose exactly 3 contractors from your area for property inspection and quotes",selected:"contractors selected",selectExactly:"You must select exactly 3 contractors to proceed",proceedToQuote:"Proceed to Quote Request",noContractors:"No contractors found in your area",noContractorsHint:"Try adjusting your filters or selecting a different service area",penaltyWarning:{title:"Important: Penalty Agreement",message:"By proceeding, you agree that if you don't continue with any contractor after inspections, a penalty fee will apply (50% will be paid to contractors as compensation)."}},scheduling:{title:"Schedule Inspection",reschedule:"Reschedule Inspection",currentSchedule:"Current Schedule",selectDate:"Select Inspection Date",selectTime:"Select Preferred Time",confirm:"Schedule Inspection"}},Up={header:jp,languages:Sp,currency:kp,navigation:Cp,common:_p,countries:Tp,documents:Ap,kyc:Rp,registration:Pp,auth:Ip,form:Lp,validation:zp,phone:Ep,theme:Mp,logout:Bp,userApp:Np,errors:Wp,compliance:Dp,solarCalculator:$p,contractorApp:Fp,marketplace:Op,quotes:qp,contractors:Vp},Hp={login:"تسجيل الدخول",register:"إنشاء حساب",logout:"تسجيل الخروج",language:"اللغة",logoAlt:"شعار رابحان",tagline:"تمويل الطاقة الشمسية",dashboard:"لوحة التحكم"},Yp={en:"English",ar:"العربية"},Qp={sar:"ريال"},Gp={home:"الرئيسية",about:"من نحن",services:"الخدمات",calculator:"حاسبة الطاقة الشمسية",contact:"اتصل بنا"},Kp={loading:"جاري التحميل...",error:"خطأ",success:"نجح",close:"إغلاق",cancel:"إلغاء",confirm:"تأكيد",save:"حفظ",saving:"جاري الحفظ...",edit:"تعديل",delete:"حذف",search:"بحث",filter:"تصفية",sort:"ترتيب",next:"التالي",previous:"السابق",submit:"إرسال",reset:"إعادة تعيين",back:"عودة",coming_soon:"قريباً",yes:"نعم",no:"لا",enabled:"مفعل",disabled:"معطل",unknown:"غير معروف",optional:"اختياري",notSet:"غير محدد",selectOption:"اختر خياراً",selectOptions:"اختر خيارات...",searchOptions:"البحث في الخيارات...",retry:"إعادة المحاولة",refresh:"تحديث",submitting:"جاري الإرسال...",viewQuotes:"عرض العروض",clearAll:"مسح الكل",remove:"إزالة",more:"المزيد",noOptions:"لا توجد خيارات متاحة",noResultsFound:"لم يتم العثور على نتائج",createdAt:"تاريخ الإنشاء",none:"لا يوجد",selecting:"جاري الاختيار...",backToComparison:"العودة للمقارنة"},Xp={saudi_arabia:"المملكة العربية السعودية",india:"الهند"},Zp={first_name:"الاسم الأول",last_name:"الاسم الأخير",first_name_placeholder:"أدخل اسمك الأول",last_name_placeholder:"أدخل اسمك الأخير",business_email:"البريد الإلكتروني التجاري",business_email_placeholder:"أدخل بريدك الإلكتروني التجاري",business_phone:"الهاتف التجاري",saudi_phone_hint:"أرقام الهواتف السعودية فقط (+966)",next_step:"الخطوة التالية",company_name:"اسم الشركة",company_name_placeholder:"أدخل اسم شركتك",cr_number:"رقم السجل التجاري",vat_number:"رقم ضريبة القيمة المضافة",password:"كلمة المرور",password_placeholder:"أدخل كلمة مرور قوية",confirm_password:"تأكيد كلمة المرور",confirm_password_placeholder:"أكد كلمة المرور",agree_to_terms:"أوافق على",terms_and_conditions:"الشروط والأحكام",and:"و",privacy_policy:"سياسة الخصوصية",back:"عودة",registering:"جاري التسجيل...",register_contractor:"تسجيل كمقاول"},Jp={title:"إدارة المستندات",subtitle:{user:"إدارة مستندات التحقق من الهوية وتتبع حالة التحقق",contractor:"إدارة مستندات الأعمال ومتطلبات الامتثال"},tabs:{overview:"نظرة عامة",kyc_progress:"تقدم التحقق",upload:"رفع",manage:"إدارة"},stats:{total:"إجمالي المستندات",approved:"معتمد",pending:"في الانتظار",rejected:"مرفوض"},quick_actions:{title:"الإجراءات السريعة",upload_id:"رفع وثيقة الهوية",upload_id_desc:"رفع الهوية الوطنية أو جواز السفر",check_kyc:"فحص حالة التحقق",check_kyc_desc:"عرض تقدم التحقق من الهوية",manage_docs:"إدارة المستندات",manage_docs_desc:"عرض وتنظيم مستنداتك"},upload:{title:"رفع مستند",modal_title:"رفع مستند جديد",category:"فئة المستند",select_category:"اختر فئة المستند",drop_zone:{title:"اسحب الملفات هنا للرفع",subtitle:"أو انقر لاختيار الملفات"},supported_formats:"الصيغ المدعومة",max_size:"الحد الأقصى للحجم",upload_button:"رفع المستند",uploading:"جاري الرفع...",upload_another:"رفع آخر",new_document:"مستند جديد",validation_results:"نتائج التحقق",file_validation:"التحقق من الملف",virus_scan:"فحص الفيروسات",content_validation:"التحقق من المحتوى",security_validation:"التحقق الأمني",virus_scanning:"جاري فحص الفيروسات...",success:"تم رفع المستند بنجاح",error:{categories:"فشل في تحميل فئات المستندات",invalid_type:"نوع ملف غير صالح. يرجى رفع ملفات PDF أو JPEG أو PNG.",size_limit:"حجم الملف يتجاوز الحد الأقصى {{maxSize}}",generic:"فشل الرفع. يرجى المحاولة مرة أخرى."}},manager:{title:"مستنداتي",search_placeholder:"البحث في المستندات...",all_categories:"جميع الفئات",all_statuses:"جميع الحالات",loading:"جاري تحميل المستندات...",empty:{title:"لم يتم العثور على مستندات",description:"ارفع مستندك الأول للبدء"},pagination:{showing:"عرض {{start}}-{{end}} من {{total}} مستند"},download_success:"تم تحميل المستند بنجاح",delete_success:"تم حذف المستند بنجاح",delete_confirm:"هل أنت متأكد من حذف هذا المستند؟",error:{load_failed:"فشل في تحميل المستندات",download_failed:"فشل في تحميل المستند",delete_failed:"فشل في حذف المستند"}},status:{pending:"في الانتظار",processing:"قيد المعالجة",validated:"تم التحقق",approved:"معتمد",rejected:"مرفوض",expired:"منتهي الصلاحية",archived:"مؤرشف"}},eu={title:"تقدم التحقق من الهوية",subtitle:{user:"أكمل التحقق من هويتك للوصول إلى جميع الميزات",contractor:"أكمل التحقق من أعمالك لبدء تقديم الخدمات"},loading:"جاري تحميل حالة التحقق...",required:"مطلوب",stats:{completed:"مكتمل",remaining:"متبقي",uploaded:"مرفوع",progress:"التقدم"},progress:{overall:"التقدم العام"},status:{completed:"مكتمل",partial:"قيد التنفيذ",pending:"لم يبدأ"},upload_document:"رفع {{category}}",click_to_upload:"انقر لرفع المستند",upload:"رفع",reupload:"إعادة رفع",required_document:"مطلوب للتوثيق",uploaded_on:"تم الرفع في {{date}}",next_steps:{title:"الخطوات التالية",upload_required:"رفع {{count}} مستندات مطلوبة",await_approval:"انتظار الموافقة على {{count}} مستندات",complete:"تم اكمال التحقق من هويتك!"},replace:"استبدال",download_document:"تحميل المستند",download_failed:"فشل التحميل",confirm_delete:"هل أنت متأكد من حذف هذا المستند؟",document_deleted:"تم حذف المستند بنجاح",delete_failed:"فشل في حذف المستند",delete_document:"حذف المستند",view:{cards:"بطاقات",table:"جدول"},table:{document:"المستند",category:"الفئة",status:"الحالة",uploaded:"تاريخ الرفع",size:"الحجم",actions:"الإجراءات"},verified:"تم التحقق",cannot_delete_verified:"لا يمكن حذف المستندات المُحققة من قبل الإدارة",replace_document:"استبدال المستند",no_documents:"لا توجد مستندات",no_documents_description:"ارفع مستندات للبدء",not_uploaded:"غير مُرفع",categories:{national_id:"الهوية الوطنية",national_id_front:"الهوية الوطنية (الوجه الأمامي)",national_id_back:"الهوية الوطنية (الوجه الخلفي)",proof_of_address:"إثبات العنوان",address_proof:"إثبات العنوان",income_proof:"إثبات الدخل",bank_statement:"كشف حساب بنكي",salary_certificate:"شهادة راتب",utility_bill:"فاتورة المرافق",commercial_registration:"السجل التجاري",vat_certificate:"شهادة ضريبة القيمة المضافة",business_license:"رخصة تجارية"}},tu={title:"أهلاً بك في ربحان",subtitle:"منصة رابحة للجميع!",already_have_account:"لديك حساب بالفعل؟",login_here:"سجل الدخول هنا",registration_failed:"فشل التسجيل. يرجى المحاولة مرة أخرى.",user:{title:"تسجيل المستهلك",subtitle:"حوّل مقرك مع ربحان",joinButton:"انغمس في ربحان",benefits:{solarAnalysis:{title:"تقديرات الطاقة الذكية",description:"احصل على توصيات شمسية مخصصة بناءً على استهلاكك للطاقة ومواصفات سطح منزلك"},bnplFinancing:{title:"تمويل مرن",description:"اوصل إلى 5,000 ريال سعودي مع خيارات التمويل المتوافقة مع ساما والمصممة للمقيمين السعوديين"},preverified:{title:"موافقات فورية",description:"احصل على موافقات تمويل سريعة من خلال عمليتنا الرقمية المبسطة"},monitoring:{title:"مراقبة في الوقت الفعلي",description:"تتبع إنتاج الطاقة الشمسية والوفورات والأثر البيئي من خلال نظام المراقبة المتقدم"}}},contractor:{title:"تسجيل البائع والمقاول",subtitle:"نمِّ أعمالك مع ربحان",joinButton:"انضم لشبكة ربحان",firstName_placeholder:"أدخل اسمك الأول",lastName_placeholder:"أدخل اسمك الأخير",companyName_placeholder:"أدخل اسم شركتك",businessEmail_placeholder:"البريد الإلكتروني التجاري",password_placeholder:"أنشئ كلمة مرور قوية",confirmPassword_placeholder:"أكد كلمة المرور",crNumber_placeholder:"1010123456",vatNumber_placeholder:"300123456789003",crNumber_tooltip:"رقم السجل التجاري السعودي (10 أرقام، يبدأ بـ 10/20/30/40)",vatNumber_tooltip:"رقم ضريبة القيمة المضافة السعودي (15 رقماً، يبدأ وينتهي بـ 3)",benefits:{marketplace:{title:"سوق رقمي",description:"اعرض خدماتك ومنتجاتك لآلاف العملاء المحتملين في جميع أنحاء المملكة العربية السعودية"},matching:{title:"مطابقة العملاء الذكية",description:"احصل على مطابقة مع العملاء بناءً على خبرتك وموقعك وعروض الخدمة"},analytics:{title:"تحليلات الأعمال",description:"احصل على رؤى شاملة حول أدائك ورضا العملاء واتجاهات السوق"},certification:{title:"الاعتماد والتحقق",description:"بناء الثقة مع العملاء من خلال عملية التحقق والاعتماد الشاملة"}},profile:{title:"ملف المقاول الشخصي",subtitle:"إدارة ملف عملك الشخصي والخدمات",coming_soon_message:"نحن نبني نظام إدارة ملف شخصي رائع للمقاولين. ترقبوا التحديثات!"}}},ru={welcome:"مرحباً بك في رابحان",subtitle:"شريكك في تمويل الطاقة الشمسية",loginTitle:"تسجيل الدخول إلى حسابك",registerTitle:"إنشاء حسابك",loginSubtitle:"مرحباً بعودتك! يرجى إدخال بياناتك.",registerSubtitle:"انضم إلى الآلاف من الأسر السعودية التي تستخدم الطاقة الشمسية",email:"البريد الإلكتروني",emailPlaceholder:"أدخل عنوان بريدك الإلكتروني",password:"كلمة المرور",forgotPassword:"هل نسيت كلمة المرور؟",rememberMe:"تذكرني",loginButton:"تسجيل الدخول",noAccount:"ليس لديك حساب؟",signUpHere:"سجل هنا",login:{title:"تسجيل الدخول إلى حسابك",subtitle:"أهلاً بك في منصة رابحان للطاقة الشمسية",email:"البريد الإلكتروني",password:"كلمة المرور",forgotPassword:"نسيت كلمة المرور؟",loginButton:"تسجيل الدخول",noAccount:"ليس لديك حساب؟",signUp:"إنشاء حساب"},orContinueWith:"أو الاستمرار بـ",firebaseLogin:"تسجيل الدخول بجوجل",alreadyHaveAccount:"لديك حساب بالفعل؟",signInHere:"سجل الدخول هنا",userType:"فئة المستهلك",validation:{emailRequired:"البريد الإلكتروني مطلوب",emailInvalid:"يرجى إدخال بريد إلكتروني صالح",passwordRequired:"كلمة المرور مطلوبة",passwordMinLength:"كلمة المرور يجب أن تكون 8 أحرف على الأقل",userTypeRequired:"يرجى اختيار فئة المستهلك"},userTypes:{USER:"عميل",CONTRACTOR:"مقاول",HOMEOWNER:"سكني",BUSINESS:"تجاري",INDUSTRIAL:"صناعي",GOVERNMENT:"حكومي"},register:{title:"إنشاء حساب جديد",subtitle:"انضم إلى منصة رابحان للطاقة الشمسية",firstName:"الاسم الأول",lastName:"الاسم الأخير",email:"البريد الإلكتروني",password:"كلمة المرور",confirmPassword:"تأكيد كلمة المرور",phone:"رقم الهاتف",nationalId:"رقم الهوية الوطنية",agreeTerms:"أوافق على شروط الخدمة وسياسة الخصوصية",registerButton:"إنشاء الحساب",hasAccount:"لديك حساب بالفعل؟",signIn:"تسجيل الدخول",createAccount:"إنشاء الحساب",firstNamePlaceholder:"أدخل اسمك الأول",lastNamePlaceholder:"أدخل اسمك الأخير",emailPlaceholder:"أدخل بريدك الإلكتروني",phonePlaceholder:"5XXXXXXXX",nationalIdPlaceholder:"رقم الهوية الوطنية السعودية (10 أرقام)",passwordPlaceholder:"أدخل كلمة مرور قوية",confirmPasswordPlaceholder:"تأكيد كلمة المرور",sendOTP:"إرسال رمز",sending:"جاري الإرسال...",resend:"إعادة إرسال",verify:"تحقق",verifying:"جاري التحقق...",verified:"محقق",otpPlaceholder:"أدخل رمز التحقق",steps:{personal:"شخصي",contact:"تواصل",address:"العنوان",security:"أمان",documents:"الوثائق",verification:"مراجعة",personalTitle:"المعلومات الشخصية والتواصل",contactTitle:"معلومات التواصل",addressTitle:"معلومات العنوان",securityTitle:"إعدادات الأمان",documentsTitle:"رفع الوثائق",verificationTitle:"مراجعة وتأكيد",verificationDescription:"يرجى مراجعة معلوماتك قبل إنشاء حسابك. يمكنك العودة لإجراء تغييرات إذا لزم الأمر."},summary:{title:"ملخص الحساب",name:"الاسم الكامل",email:"البريد الإلكتروني",phone:"الهاتف",nationalId:"رقم الهوية"},passwordHints:{title:"متطلبات كلمة المرور",length:"8 أحرف على الأقل",uppercase:"حرف كبير واحد (A-Z)",lowercase:"حرف صغير واحد (a-z)",number:"رقم واحد (0-9)",special:"رمز خاص واحد (!@#$%^&*)"},enterOTP:"أدخل رمز التحقق",otpSentTo:"تم إرسال رمز التحقق إلى",validation:{firstName_required:"الاسم الأول مطلوب",lastNameRequired:"الاسم الأخير مطلوب",regionRequired:"المنطقة مطلوبة",cityRequired:"المدينة مطلوبة",postalCodeRequired:"الرمز البريدي مطلوب",propertyTypeRequired:"نوع العقار مطلوب",propertyOwnershipRequired:"ملكية العقار مطلوبة",roofSizeRequired:"مساحة السطح مطلوبة",electricityConsumptionRequired:"استهلاك الكهرباء مطلوب",meterNumberRequired:"رقم العداد مطلوب",employmentStatusRequired:"الحالة الوظيفية مطلوبة",nameMaxLength:"{{field}} يجب أن يكون 25 حرفاً أو أقل",nameInvalid:"{{field}} يمكن أن يحتوي على أحرف ومسافات فقط",regionInvalid:"يرجى اختيار منطقة صالحة",emailRequired:"البريد الإلكتروني مطلوب",emailMaxLength:"البريد الإلكتروني يجب أن يكون 50 حرفاً أو أقل",emailInvalid:"يرجى إدخال بريد إلكتروني صحيح",passwordRequired:"كلمة المرور مطلوبة",passwordMinLength:"كلمة المرور يجب أن تكون 8 أحرف على الأقل",passwordMaxLength:"كلمة المرور يجب أن تكون 25 حرفاً أو أقل",passwordWeak:"كلمة المرور يجب أن تحتوي على أحرف كبيرة وصغيرة ورقم",passwordMismatch:"كلمات المرور غير متطابقة",agreeTermsRequired:"يجب الموافقة على الشروط والأحكام",phoneInvalid:"الهاتف يجب أن يكون بصيغة سعودية (+966) أو هندية (+91)",phoneRequired:"رقم الهاتف مطلوب",phoneSaudiStart:"أرقام الهواتف السعودية يجب أن تبدأ بـ 5",phoneIndianStart:"أرقام الهواتف الهندية يجب أن تبدأ بـ 6 أو 7 أو 8 أو 9",phoneNotVerified:"رقم الهاتف يجب أن يكون محققاً",nationalIdInvalid:"رقم الهوية يجب أن يكون 10 أرقام يبدأ بـ 1 أو 2",nameRequired:"{{field}} مطلوب",districtRequired:"الحي مطلوب",streetAddressRequired:"عنوان الشارع مطلوب"}}},ou={nameMinLength:"الاسم يجب أن يكون حرفين على الأقل",nameMaxLength:"الاسم يجب أن يكون 25 حرفاً أو أقل",nameInvalid:"الاسم يمكن أن يحتوي على أحرف ومسافات فقط",phoneFormat:"الهاتف يجب أن يبدأ بـ +966",phoneLength:"الهاتف يجب أن يكون 13 رقماً (+966xxxxxxxxx)",nationalIdLength:"الهوية الوطنية يجب أن تكون 10 أرقام بالضبط",nationalIdStart:"الهوية الوطنية يجب أن تبدأ بـ 1 أو 2",cityMinLength:"المدينة يجب أن تكون حرفين على الأقل",cityMaxLength:"المدينة يجب أن تكون 30 حرفاً أو أقل",streetMinLength:"عنوان الشارع يجب أن يكون 5 أحرف على الأقل",streetMaxLength:"عنوان الشارع يجب أن يكون 50 حرفاً أو أقل",postalCodeLength:"الرمز البريدي يجب أن يكون 5 أرقام بالضبط",incomeMinimum:"الدخل الشهري يجب أن يكون 3,000 ريال سعودي على الأقل",incomeMaximum:"الدخل الشهري لا يمكن أن يتجاوز 9,999,999 ريال سعودي",yearsMaximum:"سنوات العمل لا يمكن أن تتجاوز 50 سنة",dependentsMaximum:"عدد المعالين لا يمكن أن يتجاوز 20",roofSizeMinimum:"مساحة السطح يجب أن تكون 10 متر مربع على الأقل",roofSizeMaximum:"مساحة السطح لا يمكن أن تتجاوز 10,000 متر مربع",meterNumberMinLength:"رقم العداد يجب أن يكون 6 أحرف على الأقل",meterNumberMaxLength:"رقم العداد لا يمكن أن يتجاوز 15 حرفاً",employerMinLength:"اسم صاحب العمل يجب أن يكون حرفين على الأقل",jobTitleMinLength:"المسمى الوظيفي يجب أن يكون حرفين على الأقل",validInput:"صحيح",saving:"جاري الحفظ...",firstName_required:"الاسم الأول مطلوب",lastName_required:"الاسم الأخير مطلوب",email_required:"البريد الإلكتروني مطلوب",email_invalid:"يرجى إدخال بريد إلكتروني صالح",phone_required:"رقم الهاتف مطلوب",phone_invalid:"يرجى إدخال رقم هاتف سعودي صالح",password_required:"كلمة المرور مطلوبة",password_min_length:"كلمة المرور يجب أن تكون 8 أحرف على الأقل",confirm_password_required:"يرجى تأكيد كلمة المرور",passwords_dont_match:"كلمات المرور غير متطابقة",company_name_required:"اسم الشركة مطلوب",agree_to_terms_required:"يجب الموافقة على الشروط والأحكام",email_already_registered:"هذا البريد الإلكتروني مسجل بالفعل",phone_already_registered:"رقم الهاتف هذا مسجل بالفعل",firstName_minLength:"الاسم الأول يجب أن يكون حرفين على الأقل",firstName_maxLength:"الاسم الأول يجب أن يكون أقل من 50 حرفاً",firstName_invalid:"الاسم الأول يمكن أن يحتوي على أحرف ومسافات وواصلات فقط",firstName_spaces:"الاسم الأول لا يمكن أن يبدأ أو ينتهي بمسافات",firstName_consecutive:"الاسم الأول لا يمكن أن يحتوي على مسافات متتالية",lastName_minLength:"الاسم الأخير يجب أن يكون حرفين على الأقل",lastName_maxLength:"الاسم الأخير يجب أن يكون أقل من 50 حرفاً",lastName_invalid:"الاسم الأخير يمكن أن يحتوي على أحرف ومسافات وواصلات فقط",lastName_spaces:"الاسم الأخير لا يمكن أن يبدأ أو ينتهي بمسافات",lastName_consecutive:"الاسم الأخير لا يمكن أن يحتوي على مسافات متتالية",email_maxLength:"عنوان البريد الإلكتروني يجب أن يكون أقل من 100 حرف",email_business:"يرجى استخدام بريد إلكتروني تجاري (وليس شخصي)",email_consecutive:"البريد الإلكتروني لا يمكن أن يحتوي على نقاط متتالية",email_dots:"البريد الإلكتروني لا يمكن أن يبدأ أو ينتهي بنقطة",password_maxLength:"كلمة المرور يجب أن تكون أقل من 128 حرفاً",password_lowercase:"كلمة المرور يجب أن تحتوي على حرف صغير واحد على الأقل",password_uppercase:"كلمة المرور يجب أن تحتوي على حرف كبير واحد على الأقل",password_number:"كلمة المرور يجب أن تحتوي على رقم واحد على الأقل",password_special:"كلمة المرور يجب أن تحتوي على رمز خاص واحد على الأقل",password_spaces:"كلمة المرور لا يمكن أن تحتوي على مسافات",password_consecutive:"كلمة المرور لا يمكن أن تحتوي على أكثر من حرفين متطابقين متتاليين",password_common:"كلمة المرور شائعة جداً، يرجى اختيار كلمة مرور أقوى",confirm_password_mismatch:"كلمات المرور غير متطابقة",phone_business_required:"رقم هاتف العمل مطلوب",phone_saudi_invalid:"يرجى إدخال رقم جوال سعودي صحيح (5XXXXXXXX)",phone_indian_invalid:"أرقام الجوال الهندية يجب أن تبدأ بـ 6 أو 7 أو 8 أو 9",phone_must_verify:"يجب التحقق من رقم الهاتف قبل التسجيل",company_name_minLength:"اسم الشركة يجب أن يكون حرفين على الأقل",company_name_maxLength:"اسم الشركة يجب أن يكون أقل من 100 حرف",company_name_invalid:"اسم الشركة يحتوي على أحرف غير صالحة",company_name_spaces:"اسم الشركة لا يمكن أن يبدأ أو ينتهي بمسافات",company_name_consecutive:"اسم الشركة لا يمكن أن يحتوي على مسافات متتالية",cr_number_required:"رقم السجل التجاري مطلوب",cr_number_digits:"رقم السجل التجاري يجب أن يحتوي على أرقام فقط",cr_number_length:"رقم السجل التجاري يجب أن يكون 10 أرقام بالضبط",cr_number_start:"رقم السجل التجاري يجب أن يبدأ بـ 10 أو 20 أو 30 أو 40",vat_number_required:"رقم ضريبة القيمة المضافة مطلوب",vat_number_digits:"رقم ضريبة القيمة المضافة يجب أن يحتوي على أرقام فقط",vat_number_length:"رقم ضريبة القيمة المضافة يجب أن يكون 15 رقماً بالضبط",vat_number_format:"رقم ضريبة القيمة المضافة يجب أن يبدأ وينتهي بـ 3",terms_required:"يجب الموافقة على الشروط والأحكام للتسجيل",invalid_characters:"تم اكتشاف أحرف غير صالحة",names_identical:"الاسم الأول والأخير لا يمكن أن يكونا متطابقين",temp_email:"عناوين البريد الإلكتروني المؤقتة غير مسموحة",email_domain_invalid:"طول نطاق البريد الإلكتروني غير صالح",company_name_generic:"يرجى إدخال اسم شركتك الفعلي"},su={verification:{title:"التحقق من رقم الهاتف",description:"تحقق من رقم هاتفك لتأمين حسابك",success:"تم التحقق من رقم الهاتف بنجاح!",failed:"فشل التحقق من الهاتف. يرجى المحاولة مرة أخرى.",skip:"تخطي الآن",back:"تغيير رقم الهاتف"},otp:{title:"التحقق من الرمز",label:"رمز التحقق",description:"أدخل الرمز المكون من 6 أرقام المرسل إلى {{phone}}",hint:"أدخل الرمز المكون من 6 أرقام من الرسالة النصية",send:"إرسال الرمز",sending:"جاري الإرسال...",sent:"تم إرسال رمز التحقق بنجاح!",verify:"تحقق من الرمز",verifying:"جاري التحقق...",resend:"إعادة إرسال الرمز",resendIn:"إعادة الإرسال خلال {{seconds}} ثانية","resend.countdown":"إعادة الإرسال خلال {{seconds}} ثانية","send.failed":"فشل في إرسال رمز التحقق",error:"فشل في إرسال الرمز",invalid:"رمز التحقق غير صحيح",validation:{length:"يرجى إدخال رمز مكون من 6 أرقام"}},country:{label:"الدولة",placeholder:"اختر دولتك"},number:{label:"رقم الهاتف"},format:{example:"مثال على التنسيق"},validation:{required:"رقم الهاتف مطلوب",invalid:"يرجى إدخال رقم هاتف صحيح"}},nu={title:"قالب رابحان المهني",subtitle:"قالب احترافي بتدرجات خفيفة مع رسوم متحركة وتأثيرات زجاجية",features:{waveAnimations:"رسوم متحركة موجية",glassmorphism:"تأثيرات زجاجية",improvedHover:"تحسينات التفاعل",shimmer:"تأثيرات اللمعان",float:"رسوم متحركة عائمة",responsive:"تصميم متجاوب للهاتف المحمول"},ready:"نظام القالب جاهز 🌊✨"},iu={confirm:{title:"تأكيد تسجيل الخروج",message:"هل أنت متأكد من أنك تريد تسجيل الخروج من حسابك؟",messageWithName:"هل أنت متأكد من أنك تريد تسجيل الخروج، {{name}}؟",warning:{title:"ملاحظة مهمة",message:"ستحتاج إلى تسجيل الدخول مرة أخرى للوصول إلى حسابك ومتابعة استخدام خدمات رابحان."},cancel:"إلغاء",logout:"تسجيل الخروج"}},au={welcome:{title:"مرحباً، {{name}}!",subtitle:"أنت مسجل الدخول كـ {{userType}}"},status:{active:"نشط"},quickActions:{title:"إجراءات سريعة"},user:{solarCalculator:"حاسبة الطاقة الشمسية",viewFinancing:"عرض خيارات التمويل"},contractor:{viewProjects:"عرض المشاريع",viewApplications:"عرض الطلبات"},profile:{title:"الملف الشخصي",email:"البريد الإلكتروني",userType:"النوع",editProfile:"تعديل الملف الشخصي",personalInfo:"المعلومات الشخصية",addressInfo:"معلومات العنوان",propertyEmployment:"العقار والوظيفة",notProvided:"غير مقدم",completionTitle:"اكتمال الملف الشخصي",completionComplete:"ممتاز! ملفك الشخصي مكتمل.",completionAlmost:"تقريباً انتهيت! فقط بعض التفاصيل لإكمال ملفك الشخصي.",completionHalfway:"أنت في منتصف الطريق! أكمل ملفك الشخصي للحصول على خدمة أفضل.",completionStart:"ابدأ بإكمال معلومات ملفك الشخصي.",missingFields:"معلومات مفقودة",tabs:{personal:"شخصي",address:"العنوان",verification:"التحقق",employment:"التوظيف",property:"العقار",documents:"الوثائق",solar:"تفضيلات الطاقة الشمسية",preferences:"التفضيلات"},selectSection:"اختر قسماً من القائمة لعرض وتعديل معلوماتك",dateOfBirth:"تاريخ الميلاد",maritalStatus:"الحالة الاجتماعية","maritalStatus.single":"أعزب","maritalStatus.married":"متزوج","maritalStatus.divorced":"مطلق","maritalStatus.widowed":"أرمل",dependents:"عدد المعالين",landmark:"معلم مميز",postalCode:"الرمز البريدي",gpsLatitude:"خط العرض GPS",gpsLongitude:"خط الطول GPS",locationInfo:"معلومات الموقع",getMyLocation:"احصل على موقعي",gettingLocation:"جاري الحصول على الموقع...",gpsCoordinates:"إحداثيات GPS",clickToGetLocation:"اضغط 'احصل على موقعي' للتعبئة التلقائية",locationSuccess:"تم الحصول على الموقع بنجاح!",locationError:"خطأ في الموقع",samaVerified:"تم التحقق من ساما",nafathVerified:"تم التحقق من نفاذ",jobTitle:"المسمى الوظيفي",yearsEmployed:"سنوات الخدمة",electricityConsumption:"الاستهلاك الشهري للكهرباء (كيلو واط/ساعة)",desiredSystemSize:"حجم النظام الشمسي المرغوب (كيلو واط)",budgetRange:"نطاق الميزانية (ريال سعودي)",installationTimeline:"الجدول الزمني للتركيب",financingPreference:"تفضيل التمويل",specialRequirements:"متطلبات خاصة",bnplMaxAmount:"الحد الأقصى للدفع بالتقسيط",bnplEligible:"مؤهل للدفع بالتقسيط",preferredLanguage:"اللغة المفضلة",emailNotifications:"إشعارات البريد الإلكتروني",smsNotifications:"إشعارات الرسائل النصية",marketingConsent:"التسويق عبر الاتصالات",samaLimit:"حد ساما",adminControlled:"يتحكم به المشرف",pendingAdminApproval:"في انتظار موافقة المشرف",placeholder:{first_name:"أدخل اسمك الأول",last_name:"أدخل اسم العائلة",phone:"أدخل رقم هاتفك",date_of_birth:"اختر تاريخ ميلادك",marital_status:"اختر حالتك الاجتماعية",dependents:"عدد المعالين",region:"اختر منطقتك",city:"أدخل مدينتك",district:"أدخل حيك",street_address:"أدخل عنوان الشارع",landmark:"أدخل معلماً مميزاً قريباً",postal_code:"أدخل الرمز البريدي المكون من 5 أرقام",gps_latitude:"إحداثي خط العرض GPS",gps_longitude:"إحداثي خط الطول GPS",national_id:"أدخل رقم الهوية الوطنية المكون من 10 أرقام",employment_status:"اختر حالة التوظيف",employer_name:"أدخل اسم جهة العمل",job_title:"أدخل مسماك الوظيفي",monthly_income:"أدخل راتبك الشهري بالريال السعودي",years_employed:"سنوات العمل مع جهة العمل الحالية",property_type:"اختر نوع العقار",property_ownership:"اختر نوع الملكية",roof_size:"مساحة السطح بالمتر المربع",electricity_consumption:"اختر نطاق الاستهلاك",electricity_meter_number:"أدخل رقم العداد",monthly_electricity_bill:"متوسط الفاتورة الشهرية بالريال السعودي",desired_system_size:"السعة المرغوبة بالكيلو واط",budget_range:"اختر نطاق الميزانية",installation_timeline:"الإطار الزمني المفضل للتركيب",financing_preference:"اختر خيار التمويل",special_requirements:"أي متطلبات خاصة أو ملاحظات",preferred_language:"اختر اللغة المفضلة"},verification:{status:"حالة التوثيق",verified:"موثق",pending:"قيد المراجعة",rejected:"مرفوض",not_verified:"غير موثق",upload_documents:"إكمال التوثيق",aria:{verified:"الحساب موثق",pending:"توثيق الحساب قيد المراجعة",rejected:"تم رفض توثيق الحساب",not_verified:"الحساب غير موثق",upload_documents:"اضغط لرفع مستندات التوثيق"}}},activity:{title:"النشاط الحديث",noActivity:"لا يوجد نشاط حديث",getStarted:"ابدأ باستخدام رابحان لرؤية نشاطك هنا"},sidebar:{dashboard:"لوحة التحكم",calculator:"حاسبة الطاقة الشمسية",quotes:"طلبات العروض",financing:"التمويل",projects:"المشاريع",marketplace:"السوق",documents:"المستندات",settings:"الإعدادات",profile:"الملف الشخصي",logout:"تسجيل الخروج"}},lu={pageNotFound:"الصفحة غير موجودة",somethingWentWrong:"حدث خطأ ما",tryAgain:"حاول مرة أخرى",goHome:"اذهب للرئيسية",networkError:"خطأ في الشبكة",loginFailed:"فشل تسجيل الدخول. يرجى المحاولة مرة أخرى.",serverError:"خطأ في الخادم",unauthorizedAccess:"وصول غير مصرح به",forbiddenAccess:"وصول محظور",sessionExpired:"انتهت صلاحية الجلسة"},cu={sama:"متوافق مع ساما",pdpl:"متوافق مع نظام حماية البيانات",dataProtection:"بياناتك محمية",secureConnection:"اتصال آمن",privacy:"الخصوصية محمية",auditTrail:"سجل مراجعة كامل",compliance:"الامتثال التنظيمي"},du={title:"حاسبة الطاقة الشمسية",subtitle:"احسب مدخراتك من الطاقة الشمسية فوراً",selectClientType:"اختر نوع العميل",residential:"سكني",commercial:"تجاري",inputMethod:"اختر طريقة الإدخال",monthlyUsage:"الاستهلاك الشهري (كيلوواط ساعة)",monthlyBill:"الفاتورة الشهرية (ريال سعودي)",enterValue:"أدخل القيمة",monthlyConsumption:"استهلاك الكهرباء الشهري (كيلوواط ساعة)",monthlyElectricityBill:"فاتورة الكهرباء الشهرية (ريال سعودي)",enterKWH:"أدخل كيلوواط ساعة (الحد الأدنى 6,000)",enterSAR:"أدخل ريال سعودي",enterUsageDesc:"أدخل استهلاكك للكهرباء",enterBillDesc:"أدخل مبلغ فاتورتك الحالية",paymentPeriod:"فترة الدفع",months:"شهر",calculating:"جاري الحساب...",calculateSolarSavings:"احسب مدخرات الطاقة الشمسية",clientType:{residential:"سكني",commercial:"تجاري"},systemCalculated:"🌟 رحلتك الشمسية تبدأ هنا!",personalizedSolution:"اكتشف الحل الشمسي المثالي المصمم خصيصاً لك - ابدأ توفيرك اليوم!",systemSize:"حجم النظام",systemPrice:"سعر النظام",monthlyPayment:"الدفعة الشهرية",lifetimeSavings:"المدخرات مدى الحياة",roi:"العائد على الاستثمار",financialBreakdown:"التفصيل المالي",downloadReport:"تحميل التقرير",recalculate:"إعادة الحساب",getQuote:"احصل على عرض سعر",results:{title:"🌟 رحلتك الشمسية تبدأ هنا!",subtitle:"اكتشف الحل الشمسي المثالي المصمم خصيصاً لك - ابدأ توفيرك اليوم!",systemSize:"حجم النظام",systemPrice:"سعر النظام",monthlyPayment:"الدفعة الشهرية",roi:"العائد على الاستثمار",financialBreakdown:"التفصيل المالي",downloadReport:"تحميل التقرير",recalculate:"إعادة الحساب",getQuote:"احصل على عرض سعر",marketing:{saveMoreThan:"وفّر أكثر من",ofSystemValue:"من قيمة النظام واملكه مدى الحياة",byPayingJust:"بدفع",plusOnBill:"إضافية فقط على فاتورة الكهرباء الشهرية",forOnly:"لمدة",months:"شهر فقط",ownForLife:"ملكية مدى الحياة",afterMonths:"بعد {{months}} شهر",guaranteedROI:"عائد مضمون",percentReturn:"عائد {{percent}}%",startSaving:"ابدأ التوفير",fromDayOne:"من اليوم الأول",transformBill:"حوّل فاتورتك الشهرية {{currentBill}} إلى استثمار شمسي {{systemPrice}}!",visionTagline:"طاقة نظيفة • انبعاثات صفر • رؤية السعودية 2030"}},consumptionHint:"أدخل بين 6,000 - 24,000 كيلوواط ساعة",billHint:"الحد الأدنى {{min}} ريال سعودي",validation:{consumptionRequired:"الاستهلاك الشهري مطلوب",consumptionMustBeNumber:"الاستهلاك الشهري يجب أن يكون رقماً صحيحاً",consumptionMinimum:"الاستهلاك الشهري يجب أن يكون 6,000 كيلوواط ساعة على الأقل",consumptionMaximum:"الاستهلاك الشهري لا يمكن أن يتجاوز 24,000 كيلوواط ساعة",billRequired:"الفاتورة الشهرية مطلوبة",billMustBeNumber:"الفاتورة الشهرية يجب أن تكون رقماً صحيحاً",billMinimum:"الفاتورة الشهرية يجب أن تكون {{min}} ريال سعودي على الأقل",billMaximum:"الحد الأقصى للفاتورة 10,000 ريال سعودي",installmentPeriod:"يرجى اختيار فترة تقسيط صحيحة"},error:"خطأ",validationError:"يرجى التحقق من المدخلات",calculationFailed:"فشل الحساب. يرجى المحاولة مرة أخرى.",averageElectricityBill:"متوسط فاتورة الكهرباء الشهرية",averageMonthlyProduction:"متوسط الإنتاج الشهري للطاقة",installmentOptions:{12:"12 شهر",18:"18 شهر",24:"24 شهر"},numberOfInstallments:"عدد الأقساط",calculatingMessage:"جاري حساب مدخراتك من الطاقة الشمسية...",calculatingSubtext:"سيستغرق هذا لحظة واحدة فقط",benefits:{reduceBills:"تقليل الفواتير بنسبة 65%",cleanEnergy:"طاقة نظيفة",bnplFinancing:"تمويل بالتقسيط"},enterDetails:"أدخل تفاصيلك لرؤية النتائج الفورية",resultsWillAppear:"ستظهر النتائج هنا عند ملء النموذج"},pu={badge:{contractor:"بوابة المقاولين"},dashboard:{loading:"جاري تحميل لوحة المقاول...",welcome:"مرحباً، {{name}}!",subtitle:"إدارة أعمالك في مجال الطاقة الشمسية مع رابحان",stats:{totalProjects:"إجمالي المشاريع",activeProjects:"المشاريع النشطة",completedProjects:"المشاريع المكتملة",totalRevenue:"إجمالي الإيرادات",pendingPayments:"الدفعات المعلقة",averageRating:"متوسط التقييم",reviews:"مراجعة",monthlyProjects:"هذا الشهر"},quickActions:{title:"الإجراءات السريعة",newProject:"بدء مشروع جديد",manageProducts:"إدارة المنتجات",viewWallet:"عرض المحفظة"},recentActivity:{title:"النشاط الأخير",noActivity:"لا توجد أنشطة حديثة للعرض"}},verification:{verified:"مُتحقق بالكامل",partial:"مُتحقق جزئياً",pending:"التحقق معلق"},sidebar:{dashboard:"لوحة التحكم",projects:"المشاريع",quotes:"عروض الأسعار",marketplace:"المتجر الإلكتروني",wallet:"المحفظة",documents:"المستندات",profile:"الملف التجاري",logout:"تسجيل الخروج"},profile:{title:"الملف التجاري",subtitle:"إدارة معلومات أعمالك وإعداداتك",loading:"جاري تحميل الملف الشخصي...",businessProfile:"إدارة الملف التجاري",comingSoon:"إدارة الملف التجاري ستكون متاحة قريباً.",selectSection:"اختر قسماً من القائمة لعرض وتعديل معلوماتك",updateSuccess:"تم تحديث الملف التجاري بنجاح",saveSuccess:"تم حفظ الملف الشخصي بنجاح",saveError:"فشل في حفظ الملف الشخصي. يرجى المحاولة مرة أخرى.",preferencesUpdateSuccess:"تم تحديث التفضيلات بنجاح",locationSuccess:"تم تحديد الموقع بنجاح!",selectToAdd:"اختر للإضافة:",tabs:{business:"معلومات الشركة",contact:"تفاصيل الاتصال",address:"العنوان",services:"الخدمات",verification:"التحقق",financial:"المالية",preferences:"التفضيلات"},fields:{businessName:"اسم الشركة",businessNameAr:"اسم الشركة (عربي)",businessType:"نوع الشركة",establishedYear:"سنة التأسيس",crNumber:"رقم السجل التجاري",vatNumber:"الرقم الضريبي",website:"الموقع الإلكتروني",description:"وصف الشركة",descriptionAr:"وصف الشركة (عربي)",firstName:"الاسم الأول",lastName:"اسم العائلة",email:"البريد الإلكتروني",phone:"الهاتف",whatsapp:"واتساب",businessPhone:"هاتف الشركة",businessEmail:"بريد الشركة الإلكتروني",contactPerson:"شخص الاتصال",contactPosition:"منصب شخص الاتصال",region:"المنطقة",city:"المدينة",district:"الحي",postalCode:"الرمز البريدي",streetAddress:"عنوان الشارع",gpsLocation:"الموقع الجغرافي",serviceCategories:"فئات الخدمة",serviceAreas:"مناطق الخدمة",yearsExperience:"سنوات الخبرة",contractorType:"نوع المقاول",canInstall:"يمكن تركيب الأنظمة الشمسية",canSupplyOnly:"يمكن توريد المنتجات فقط",employeeCount:"عدد الموظفين",specializations:"التخصصات",bankName:"اسم البنك",customBankName:"اسم البنك المخصص",iban:"رقم الآيبان",accountHolderName:"اسم صاحب الحساب",preferredLanguage:"اللغة المفضلة",emailNotifications:"إشعارات البريد الإلكتروني",smsNotifications:"إشعارات الرسائل النصية",marketingConsent:"الاتصالات التسويقية"},businessTypes:{individual:"فردي",smallBusiness:"أعمال صغيرة",mediumBusiness:"أعمال متوسطة",largeBusiness:"أعمال كبيرة",fullContractor:"مقاول متكامل",llc:"شركة ذات مسؤولية محدودة",corporation:"شركة مساهمة",partnership:"شراكة",other:"أخرى"},regions:{riyadh:"الرياض",makkah:"مكة المكرمة",madinah:"المدينة المنورة",qassim:"القصيم",eastern:"المنطقة الشرقية",asir:"عسير",tabuk:"تبوك",hail:"حائل",northern:"الحدود الشمالية",jazan:"جازان",najran:"نجران",bahah:"الباحة",jawf:"الجوف"},serviceCategories:{residential_solar:"الطاقة الشمسية السكنية",commercial_solar:"الطاقة الشمسية التجارية",industrial_solar:"الطاقة الشمسية الصناعية",maintenance:"الصيانة",consultation:"الاستشارة"},contractorTypes:{fullContractor:"مقاول طاقة شمسية كامل",vendorOnly:"بائع طاقة شمسية فقط"},validation:{nameMinLength:"يجب أن يكون الاسم على الأقل حرفين",nameMaxLength:"يجب أن يكون الاسم 50 حرفاً أو أقل",nameFormat:"يمكن أن يحتوي الاسم على الحروف والمسافات فقط",businessNameMinLength:"يجب أن يكون اسم الشركة على الأقل حرفين",businessNameMaxLength:"يجب أن يكون اسم الشركة 100 حرف أو أقل",businessNameFormat:"يحتوي اسم الشركة على أحرف غير صالحة",phoneFormat:"يجب أن يبدأ الهاتف بـ +966 (السعودية)",phoneLength:"يجب أن يكون الهاتف 13 رقماً (+966xxxxxxxxx)",saudiMobileFormat:"تنسيق رقم الجوال السعودي غير صالح",crLength:"يجب أن يكون السجل التجاري 10 أرقام بالضبط",crFormat:"يجب أن يحتوي السجل التجاري على أرقام فقط",vatLength:"يجب أن يكون رقم ضريبة القيمة المضافة 15 رقماً بالضبط",vatFormat:"يجب أن يحتوي رقم ضريبة القيمة المضافة على أرقام فقط",vatSaudiFormat:"تنسيق رقم ضريبة القيمة المضافة السعودي غير صالح",postalCodeLength:"يجب أن يكون الرمز البريدي 5 أرقام بالضبط",postalCodeFormat:"يجب أن يحتوي الرمز البريدي على أرقام فقط",establishedYear:"يجب أن تكون السنة بين 1900 والسنة الحالية",modernBusiness:"شركات الطاقة الشمسية عادة ما تؤسس بعد عام 2000",maxExperience:"لا يمكن أن تتجاوز الخبرة 50 سنة",minExperience:"لا يمكن أن تكون الخبرة سالبة",websiteFormat:"يجب أن يكون الموقع رابطاً صالحاً (http://example.com)",emailFormat:"تنسيق البريد الإلكتروني غير صالح",descriptionMaxLength:"يجب أن يكون الوصف 500 حرف أو أقل",addressMinLength:"يجب أن يكون العنوان على الأقل 5 أحرف",addressMaxLength:"يجب أن يكون العنوان 100 حرف أو أقل",cityMinLength:"يجب أن تكون المدينة على الأقل حرفين",cityMaxLength:"يجب أن تكون المدينة 30 حرفاً أو أقل",cityFormat:"يحتوي اسم المدينة على أحرف غير صالحة"},personal_info:{title:"المعلومات الشخصية"},business_info:{title:"معلومات الأعمال"},actions:{save_profile:"حفظ الملف الشخصي",saving:"جاري الحفظ..."},success:{profile_updated:"تم تحديث الملف الشخصي بنجاح!"},errors:{load_failed:"فشل في تحميل بيانات الملف الشخصي",save_failed:"فشل في حفظ الملف الشخصي",first_name_required:"الاسم الأول مطلوب",last_name_required:"الاسم الأخير مطلوب",email_required:"البريد الإلكتروني مطلوب",email_invalid:"يرجى إدخال بريد إلكتروني صالح",phone_required:"رقم الهاتف مطلوب",company_name_required:"اسم الشركة مطلوب"},completion:"اكتمال الملف الشخصي",updateError:"خطأ في تحديث الملف التجاري",languageUpdated:"تم تحديث تفضيل اللغة بنجاح",defaultName:"الملف التجاري",verified:"مُتحقق",pending:"في انتظار التحقق",completionProgress:"اكتمال الملف الشخصي",excellentProgress:"ممتاز! ملفك الشخصي مكتمل تقريباً وجاهز للعمل.",goodProgress:"تقدم جيد! أكمل بعض الأقسام لتحسين ملفك الشخصي.",completeProfile:"أكمل ملفك الشخصي لفتح جميع ميزات المقاول.",verificationDescription:"حالة التحقق تدار بواسطة إدارة رابحان بناءً على المستندات المقدمة",verificationLevel:"مستوى التحقق",adminControlled:"هذا الحقل تحت سيطرة الإدارة",securityNote:"ملاحظة أمنية",financialSecurityNote:"المعلومات المالية مُشفرة ومُخزنة بأمان وفقاً لأنظمة ساما",gettingLocation:"جاري تحديد الموقع...",getLocation:"تحديد موقعي",employees:"موظف",sections:{title:"أقسام الملف الشخصي",businessInfo:"معلومات الشركة",contactInfo:"معلومات الاتصال",addressInfo:"معلومات العنوان",serviceInfo:"معلومات الخدمات",verification:"التحقق والامتثال",financialInfo:"المعلومات المالية",preferences:"التفضيلات والإعدادات"},placeholders:{businessName:"أدخل اسم الشركة",businessNameAr:"أدخل اسم الشركة بالعربية",business_name_ar:"أدخل اسم الشركة بالعربية",selectBusinessType:"اختر نوع الشركة",description:"اوصف شركتك وخدماتك",descriptionAr:"اوصف شركتك وخدماتك بالعربية",description_ar:"اوصف شركتك وخدماتك بالعربية",vatNumber:"أدخل رقم ضريبة القيمة المضافة (15 رقم)",vat_number:"أدخل رقم ضريبة القيمة المضافة (15 رقم)",establishedYear:"أدخل سنة تأسيس الشركة",established_year:"أدخل سنة تأسيس الشركة",employeeCount:"أدخل عدد الموظفين",employee_count:"أدخل عدد الموظفين",whatsapp:"+966501234567",website:"https://company.com",firstName:"أدخل الاسم الأول",lastName:"أدخل اسم العائلة",contactPerson:"الشخص المسؤول عن التواصل",contactPosition:"مدير، مدير عام، إلخ",selectRegion:"اختر المنطقة",city:"أدخل اسم المدينة",district:"أدخل اسم الحي",streetAddress:"أدخل عنوان الشارع",address_line1:"أدخل العنوان الرئيسي",address_line2:"أدخل العنوان الإضافي (اختياري)",postal_code:"أدخل الرمز البريدي (5 أرقام)",latitude:"24.7136",longitude:"46.6753",serviceAreas:"الرياض، جدة، الدمام",specializations:"ألواح شمسية، عاكسات، بطاريات",addSpecialization:"إضافة تخصص...",selectEmployeeCount:"اختر عدد الموظفين",bankName:"البنك الأهلي السعودي",customBankName:"أدخل اسم البنك المخصص",accountHolderName:"اسم الشركة أو الشخص"},hints:{separateWithComma:"فصل عدة عناصر بفواصل",tagInput:"اكتب واضغط Enter لإضافة العلامات، أو فصل بفواصل. استخدم Backspace لإزالة العلامة الأخيرة."},verifications:{sama:"معتمد من ساما",nafath:"معتمد من نفاذ",saso:"معتمد من الساسو",sec:"مرخص من شركة الكهرباء"},verificationStatuses:{sama:"تحقق مؤسسة النقد العربي السعودي",nafath:"تحقق الهوية الرقمية الموحدة الوطنية",saso:"شهادة هيئة المواصفات والمقاييس السعودية",sec:"ترخيص شركة الكهرباء السعودية"},contactMethods:{title:"تفاصيل الاتصال",description:"إدارة معلومات الاتصال التجارية الخاصة بك ليتمكن العملاء من التواصل معك."},managedInProfile:"يُدار في تبويب الملف الشخصي",authServiceInfo:{title:"معلومات الحساب",description:"هذه المعلومات تُدار من خلال حساب رابحان الخاص بك ولا يمكن تعديلها هنا. لتحديث هذه التفاصيل، يرجى التواصل مع الدعم الفني."},readOnly:"للقراءة فقط"},projects:{title:"إدارة المشاريع",management:"نظام إدارة المشاريع",comingSoon:"نظام إدارة المشاريع سيكون متاحاً قريباً."},marketplace:{title:"متجر المنتجات",productListing:"إدارة قائمة المنتجات",comingSoon:"إدارة قائمة المنتجات ستكون متاحة قريباً."},quotes:{title:"طلبات العروض",assignedRequests:"طلبات العروض المخصصة",requests:"طلبات",noRequests:{title:"لا توجد طلبات مخصصة",message:"لم يتم تخصيص أي طلبات عروض لك حتى الآن. تحقق لاحقًا من الفرص الجديدة."},tabs:{assigned:"الطلبات المخصصة",submitted:"العروض المقدمة"},status:"الحالة",statuses:{assigned:"مخصص",viewed:"تم الاطلاع",accepted:"مقبول",rejected:"مرفوض",submitted:"مقدم",pending:"في الانتظار"},assignmentStatus:"حالة التخصيص",propertyDetails:"تفاصيل العقار",location:"الموقع",systemSize:"حجم النظام",serviceArea:"منطقة الخدمة",requestDate:"تاريخ الطلب",requestId:"معرف الطلب",solarSystem:"نظام الطاقة الشمسية",quoteSubmitted:"تم تقديم العرض",submitQuote:"مطلوب تقديم عرض",submitQuoteMessage:"لقد قبلت هذا الطلب. يرجى تقديم عرضك للمتابعة.",alreadyAccepted:"لقد قبلت هذا الطلب بالفعل.",alreadyRejected:"لقد رفضت هذا الطلب بالفعل.",submittedQuotes:"العروض المقدمة",submittedQuotesMessage:"اعرض وإدارة العروض المقدمة. تتبع حالتها والردود عليها.",viewQuotations:"عرض العروض المسعرة",compareQuotations:"مقارنة العروض المسعرة",quotationsAvailable:"عرض مسعر متاح",comparison:"المقارنة",details:"التفاصيل",bestValue:"أفضل قيمة",recommended:"موصى به",fastestInstallation:"أسرع تركيب",days:"أيام",totalPrice:"السعر الإجمالي",lineItems:"عناصر السعر",paymentTerms:"شروط الدفع",selectThisQuote:"اختر هذا العرض",noDetailedBreakdown:"لا يوجد تفصيل مفصل متاح",noQuotationsAvailable:"لا توجد عروض مسعرة متاحة",waitForContractorQuotes:"يرجى انتظار تقديم المقاولين لعروضهم المسعرة التفصيلية",detailedQuotation:"العرض المسعر التفصيلي",item:"العنصر",description:"الوصف",quantity:"الكمية",unitPrice:"سعر الوحدة",totalAmount:"المبلغ الإجمالي",installationDeadline:"موعد التركيب النهائي",selectThisQuotation:"اختر هذا العرض المسعر",quotationSummary:"ملخص العرض المسعر",quotedPrice:"السعر المقترح",baseQuotationAmount:"مبلغ العرض الأساسي",youReceive:"ستحصل على",afterProcessingFees:"بعد رسوم المعالجة وضريبة القيمة المضافة",pricingNote:"مبلغ الدفع النهائي يشمل ضريبة القيمة المضافة ورسوم المعالجة. السعر المقترح هو ما سيظهر للعملاء.",actions:{accept:"قبول الطلب",reject:"رفض الطلب",submitQuote:"تقديم عرض"},quotation:"العرض المسعر",submittedDate:"تاريخ التقديم",loadingQuotes:"جاري تحميل العروض...",noSubmittedQuotes:"لا توجد عروض مقدمة",noSubmittedQuotesMessage:"لم تقدم أي عروض مسعرة حتى الآن. ابدأ بقبول طلبات العروض وتقديم مقترحاتك.",items:"عناصر",viewDetails:"عرض التفاصيل",quotationDetails:"تفاصيل العرض",systemCapacity:"قدرة النظام",systemSpecifications:"مواصفات النظام",solarCapacity:"قدرة الطاقة الشمسية",storageCapacity:"سعة التخزين",monthlyProduction:"الإنتاج الشهري",serialNumber:"الرقم التسلسلي",pricingBreakdown:"تفصيل الأسعار",subtotal:"المجموع الفرعي",rabhanCommission:"عمولة رابحان",rabhanMarkup:"هامش رابحان",customerPrice:"سعر العميل",contractorEarnings:"أرباح المقاول",additionalInformation:"معلومات إضافية",vatNumber:"رقم ضريبة القيمة المضافة",walletCredit:"رصيد المحفظة",bankTransfer:"تحويل بنكي"},wallet:{title:"المحفظة المالية",paymentTracking:"تتبع المدفوعات والمحفظة",comingSoon:"تتبع المدفوعات وإدارة المحفظة ستكون متاحة قريباً."}},uu={title:"سوق منتجات الطاقة الشمسية",subtitle:"تصفح واشتر منتجات طاقة شمسية عالية الجودة من مقاولين معتمدين",searchPlaceholder:"البحث في منتجات الطاقة الشمسية...",filter:"تصفية",inStock:"متوفر",outOfStock:"غير متوفر",inclVAT:"شامل الضريبة",exclVAT:"غير شامل الضريبة",addToCart:"أضف إلى السلة",inCart:"في السلة",items:"عناصر",loading:"جاري تحميل المنتجات...",errorTitle:"خطأ في تحميل المنتجات",retry:"حاول مرة أخرى",noProducts:"لم يتم العثور على منتجات",noProductsDesc:"حاول تعديل معايير البحث",previous:"السابق",next:"التالي"},mu={form:{title:"طلب عرض سعر للطاقة الشمسية",subtitle:"احصل على عروض أسعار مخصصة من مقاولين معتمدين",submit:"إرسال الطلب",sections:{systemAndContact:"النظام والاتصال",location:"الموقع",propertyDetails:"تفاصيل العقار",notes:"الملاحظات",notesOptional:"الملاحظات (اختيارية)"},systemSize:{label:"حجم النظام (كيلو واط)",placeholder:"6.0",help:"حجم النظام الموصى به بناءً على احتياجاتك من الطاقة"},location:{label:"موقع التركيب",placeholder:"العنوان الكامل متضمناً الحي والمدينة والمنطقة"},serviceArea:{label:"منطقة الخدمة",placeholder:"اختر مدينتك/منطقتك",options:{riyadh:"الرياض",jeddah:"جدة",dammam:"الدمام",mecca:"مكة",medina:"المدينة"}},installationDate:{label:"تاريخ التركيب المفضل"},phone:{label:"رقم الاتصال",placeholder:"+966 50 123 4567"},notes:{label:"ملاحظات إضافية (اختياري)",placeholder:"أي متطلبات خاصة أو أسئلة أو تفضيلات..."},propertyDetails:{title:"تفاصيل العقار",propertyType:"نوع العقار",roofType:"نوع السطح",roofOrientation:"اتجاه السطح",shadingIssues:"يوجد مشاكل تظليل في العقار (أشجار، مباني، إلخ)",propertyTypes:{villa:"فيلا",apartment:"شقة",townhouse:"تاون هاوس",commercial:"تجاري"},roofTypes:{flat:"سطح مسطح",sloped:"سطح مائل",mixed:"مختلط"},roofOrientations:{south:"جنوب",southwest:"جنوب غرب",southeast:"جنوب شرق",east:"شرق",west:"غرب",mixed:"متعدد الاتجاهات"}},success:{title:"تم إرسال طلب العرض!",message:"تم إرسال طلب العرض إلى المقاولين المعتمدين في منطقتك. ستحصل على العروض خلال 24-48 ساعة."},errors:{systemSizeRange:"حجم النظام يجب أن يكون بين 1-50 كيلو واط",locationRequired:"موقع التركيب مطلوب",serviceAreaRequired:"يرجى اختيار منطقة الخدمة",dateRequired:"تاريخ التركيب المفضل مطلوب",dateInFuture:"تاريخ التركيب يجب أن يكون غداً على الأقل",phoneRequired:"رقم الهاتف مطلوب",phoneTooLong:"رقم الهاتف طويل جداً (الحد الأقصى 13 رقم مع +966)",phoneInvalid:"يرجى إدخال رقم هاتف سعودي صحيح",submitFailed:"فشل في إرسال طلب العرض. يرجى المحاولة مرة أخرى."},steps:{basicInfo:"المعلومات الأساسية",basicInfoDesc:"أخبرنا عن عقارك ومتطلبات النظام",contractorSelection:"اختيار المقاولين",contractorSelectionDesc:"اختر بالضبط 3 مقاولين من منطقتك لفحص العقار وتقديم العروض",finalSubmission:"الإرسال النهائي",finalSubmissionDesc:"راجع اختياراتك وأكمل طلب العرض"}},steps:{basicInfo:"المعلومات الأساسية",basicInfoDesc:"أخبرنا عن عقارك ومتطلبات النظام",contractorSelection:"اختيار المقاولين",contractorSelectionDesc:"اختر بالضبط 3 مقاولين من منطقتك لفحص العقار وتقديم العروض",finalSubmission:"الإرسال النهائي",finalSubmissionDesc:"راجع اختياراتك وأكمل طلب العرض"},title:"عروض أسعار الطاقة الشمسية",subtitle:"اطلب عروض أسعار من مقاولين معتمدين وقارن العروض لتركيب نظام الطاقة الشمسية الخاص بك",tabs:{myRequests:"طلباتي",newRequest:"طلب جديد"},myRequests:{title:"طلبات العروض الخاصة بك",subtitle:"تتبع طلبات العروض واعرض العروض المستلمة",empty:{title:"لا توجد طلبات عروض أسعار بعد",message:"ابدأ بطلب عروض أسعار من المقاولين المعتمدين في منطقتك. إنه مجاني ويستغرق بضع دقائق فقط."}},actions:{newRequest:"طلب جديد",viewQuotes:"عرض العروض",editRequest:"تعديل الطلب",selectQuote:"اختيار العرض",viewDetails:"عرض التفاصيل"},status:{title:"الحالة",submitted:"تم تقديم العرض",pending:"قيد الانتظار",assigned:"مُعيَّن",accepted:"مقبول",quotesReceived:"تم استلام العروض",approved:"موافق عليه",pendingReview:"قيد المراجعة"},system:"نظام الطاقة الشمسية",solarSystem:"نظام الطاقة الشمسية",requestId:"رقم الطلب",propertyDetails:"تفاصيل العقار",location:"الموقع",contactPhone:"رقم الاتصال",propertyType:"نوع العقار",roofType:"نوع السطح",roofOrientation:"اتجاه السطح",shadingIssues:"مشاكل الظلال",installationSchedule:"جدولة التركيب",inspectionSchedules:"جدولة المعاينة",contractor:"مقاول",selectedQuote:"العرض المختار",selectedOn:"تم الاختيار في",estimatedCost:"التكلفة المقدرة",preferredDate:"التاريخ المفضل",notSpecified:"غير محدد",quotesReceivedCount:"عروض أسعار مستلمة",quotes:"عروض",requests:"طلبات",submittedOn:"تم الإرسال في",selectedContractors:"المقاولين المحددين",solarCompany:"شركة الطاقة الشمسية",receivedQuotes:"عروض الأسعار المستلمة",noQuotes:{title:"لا توجد عروض أسعار متاحة",message:"لم يقم المقاولون بتقديم عروض أسعار حتى الآن. يرجى المراجعة لاحقاً."},installationTimeline:"جدول التركيب الزمني",systemCapacity:"قدرة النظام",panels:"الألواح الشمسية",inverter:"المحول",warrantyTerms:"شروط الضمان",equipment:"المعدات",performance:"الأداء",installation:"التركيب",years:"سنوات",days:"أيام",detailedQuotation:"عرض السعر المفصل",readyForSelection:"جاهز للاختيار",underAdminReview:"قيد المراجعة الإدارية",includingVAT:"شامل ضريبة القيمة المضافة",excludingVAT:"قبل ضريبة القيمة المضافة",installationTime:"وقت التركيب",itemizedBreakdown:"تفصيل العناصر",vat:"ضريبة القيمة المضافة",totalAmount:"المبلغ الإجمالي",systemSpecs:"مواصفات النظام",warranty:"الضمان",providerInfo:"معلومات المورد",quoteValidUntil:"العرض صالح حتى",selectThisQuote:"اختيار هذا العرض",totalPrice:"السعر الإجمالي",subtotal:"المجموع الفرعي",storageCapacity:"سعة التخزين",monthlyProduction:"الإنتاج الشهري",paymentTerms:"شروط الدفع",installationDeadline:"موعد التركيب النهائي"},gu={loading:"جاري تحميل المقاولين...",loadError:"فشل في تحميل المقاولين. يرجى المحاولة مرة أخرى.",reviews:"مراجعة",stars:"نجوم",years:"سنوات",experience:"الخبرة",projects:"المشاريع",serviceAreas:"مناطق الخدمة",select:"اختيار",selected:"محدد",schedule:"جدولة",scheduled:"مجدولة",filters:"الفلاتر",verification:{verified:"موثق",partial:"جزئي",unverified:"غير موثق"},filterOptions:{minRating:"التقييم الأدنى",anyRating:"أي تقييم",maxDistance:"أقصى مسافة"},selection:{title:"اختر المقاولين",subtitle:"اختر بالضبط 3 مقاولين من منطقتك لفحص العقار والحصول على عروض الأسعار",selected:"مقاولين محددين",selectExactly:"يجب اختيار 3 مقاولين بالضبط للمتابعة",proceedToQuote:"المتابعة إلى طلب العرض",noContractors:"لم يتم العثور على مقاولين في منطقتك",noContractorsHint:"جرب تعديل الفلاتر أو اختيار منطقة خدمة مختلفة",penaltyWarning:{title:"مهم: اتفاقية الغرامة",message:"بالمتابعة، فإنك توافق على أنه في حالة عدم المتابعة مع أي مقاول بعد الفحوصات، ستطبق رسوم غرامة (50% ستدفع للمقاولين كتعويض)."}},scheduling:{title:"جدولة الفحص",reschedule:"إعادة جدولة الفحص",currentSchedule:"الجدولة الحالية",selectDate:"اختر تاريخ الفحص",selectTime:"اختر الوقت المفضل",confirm:"جدولة الفحص"}},hu={header:Hp,languages:Yp,currency:Qp,navigation:Gp,common:Kp,countries:Xp,form:Zp,documents:Jp,kyc:eu,registration:tu,auth:ru,validation:ou,phone:su,theme:nu,logout:iu,userApp:au,errors:lu,compliance:cu,solarCalculator:du,contractorApp:pu,marketplace:uu,quotes:mu,contractors:gu},fu={en:{translation:Up},ar:{translation:hu}};Jd.use(gl).use(ep).init({resources:fu,fallbackLng:"en",debug:!1,detection:{order:["localStorage","navigator","htmlTag"],caches:["localStorage"]},interpolation:{escapeValue:!1},react:{useSuspense:!1}});const jt={primary:{50:"#f0fdfc",100:"#ccfdf9",200:"#99f9f3",300:"#5cecea",400:"#22d3db",500:"#3eb2b1",600:"#0891b2",700:"#0e7490",800:"#155e75",900:"#164e63",950:"#083344"},secondary:{50:"#f9fafb",100:"#f3f4f6",200:"#e5e7eb",300:"#d1d5db",400:"#9ca3af",500:"#6b7280",600:"#4b5563",700:"#374151",800:"#1f2937",900:"#111827",950:"#030712"},semantic:{success:{25:"#f0fdf4",50:"#ecfdf5",100:"#d1fae5",200:"#a7f3d0",300:"#6ee7b7",400:"#34d399",500:"#10b981",600:"#059669",700:"#047857",800:"#065f46",900:"#064e3b",light:"#ecfdf5",main:"#10b981",dark:"#047857",contrast:"#ffffff"},warning:{25:"#fffcf5",50:"#fffbeb",100:"#fef3c7",200:"#fde68a",300:"#fcd34d",400:"#fbbf24",500:"#f59e0b",600:"#d97706",700:"#b45309",800:"#92400e",900:"#78350f",light:"#fffbeb",main:"#f59e0b",dark:"#d97706",contrast:"#ffffff"},error:{25:"#fffbfa",50:"#fef2f2",100:"#fee2e2",200:"#fecaca",300:"#fca5a5",400:"#f87171",500:"#ef4444",600:"#dc2626",700:"#b91c1c",800:"#991b1b",900:"#7f1d1d",light:"#fef2f2",main:"#ef4444",dark:"#dc2626",contrast:"#ffffff"},info:{25:"#f8fafc",50:"#eff6ff",100:"#dbeafe",200:"#bfdbfe",300:"#93c5fd",400:"#60a5fa",500:"#3b82f6",600:"#2563eb",700:"#1d4ed8",800:"#1e40af",900:"#1e3a8a",light:"#eff6ff",main:"#3b82f6",dark:"#2563eb",contrast:"#ffffff"}},neutral:{0:"#ffffff",50:"#fafafa",100:"#f5f5f5",200:"#e5e5e5",300:"#d4d4d4",400:"#a3a3a3",500:"#737373",600:"#525252",700:"#404040",800:"#262626",900:"#171717",950:"#0a0a0a",1e3:"#000000"},gradients:{primary:"linear-gradient(135deg, #3eb2b1 0%, #22d3db 100%)",primaryLight:"linear-gradient(135deg, #f0fdfc 0%, #ccfdf9 100%)",primaryDark:"linear-gradient(135deg, #0e7490 0%, #155e75 100%)",page:"linear-gradient(135deg, #f9fafb 0%, #ffffff 100%)",hero:"linear-gradient(135deg, #f0fdfc 0%, #ffffff 50%, #f9fafb 100%)",section:"linear-gradient(135deg, #f0fdfc 0%, #ffffff 100%)",glass:"linear-gradient(135deg, rgba(255, 255, 255, 0.25) 0%, rgba(255, 255, 255, 0.1) 100%)",glassHover:"linear-gradient(135deg, rgba(255, 255, 255, 0.35) 0%, rgba(255, 255, 255, 0.15) 100%)",card:"linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(249, 250, 251, 0.8) 100%)",cardHover:"linear-gradient(135deg, rgba(240, 253, 252, 0.9) 0%, rgba(204, 253, 249, 0.8) 100%)",button:"linear-gradient(135deg, #3eb2b1 0%, #22d3db 100%)",buttonHover:"linear-gradient(135deg, #22d3db 0%, #5cecea 100%)",buttonSecondary:"linear-gradient(135deg, #f9fafb 0%, #f3f4f6 100%)",buttonSecondaryHover:"linear-gradient(135deg, #f0fdfc 0%, #ccfdf9 100%)",success:"linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%)",warning:"linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%)",error:"linear-gradient(135deg, #fef2f2 0%, #fecaca 100%)",info:"linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%)",wave:"linear-gradient(45deg, #3eb2b1 0%, #22d3db 25%, #5cecea 50%, #22d3db 75%, #3eb2b1 100%)",waveReverse:"linear-gradient(315deg, #3eb2b1 0%, #22d3db 25%, #5cecea 50%, #22d3db 75%, #3eb2b1 100%)",overlay:"linear-gradient(135deg, rgba(62, 178, 177, 0.03) 0%, rgba(34, 211, 219, 0.03) 100%)",modalOverlay:"linear-gradient(135deg, rgba(31, 41, 55, 0.4) 0%, rgba(31, 41, 55, 0.6) 100%)"},backgrounds:{primary:"#ffffff",secondary:"#f9fafb",tertiary:"#f3f4f6",surface:"#ffffff",overlay:"rgba(31, 41, 55, 0.7)",modal:"rgba(255, 255, 255, 0.98)"},text:{primary:"#111827",secondary:"#4b5563",tertiary:"#6b7280",disabled:"#9ca3af",inverse:"#ffffff",link:"#3eb2b1",gradient:"linear-gradient(135deg, #3eb2b1 0%, #22d3db 100%)"},borders:{light:"#e5e7eb",medium:"#d1d5db",heavy:"#9ca3af",focus:"#3eb2b1",error:"#ef4444",success:"#10b981"}},Ys={fonts:{primary:'"Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},sizes:{xs:"0.75rem",sm:"0.875rem",base:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"},weights:{thin:100,extralight:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900}},hl={0:"0px",1:"0.25rem",2:"0.5rem",3:"0.75rem",4:"1rem",5:"1.25rem",6:"1.5rem",8:"2rem",10:"2.5rem",12:"3rem",16:"4rem",20:"5rem",24:"6rem",32:"8rem",40:"10rem",48:"12rem",56:"14rem",64:"16rem",components:{button:{padding:{sm:"0.5rem 1rem",md:"0.75rem 1.5rem",lg:"1rem 2rem",xl:"1.25rem 2.5rem"},gap:"0.5rem"},card:{padding:{sm:"1rem",md:"1.5rem",lg:"2rem",xl:"2.5rem"},gap:"1rem"},form:{fieldGap:"1rem",labelGap:"0.5rem",buttonGap:"1.5rem"},layout:{container:"1200px",section:"5rem",header:"4rem",footer:"3rem"}}},fl={none:"0px",sm:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px",components:{button:"0.5rem",card:"1rem",modal:"1.5rem",input:"0.5rem"}},yl={none:"none",sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)",primary:{sm:"0 1px 2px 0 rgba(62, 178, 177, 0.1)",md:"0 4px 6px -1px rgba(62, 178, 177, 0.15), 0 2px 4px -1px rgba(62, 178, 177, 0.1)",lg:"0 10px 15px -3px rgba(62, 178, 177, 0.2), 0 4px 6px -2px rgba(62, 178, 177, 0.1)",xl:"0 20px 25px -5px rgba(62, 178, 177, 0.2), 0 10px 10px -5px rgba(62, 178, 177, 0.1)","2xl":"0 25px 50px -12px rgba(62, 178, 177, 0.3)"},glow:{sm:"0 0 5px rgba(62, 178, 177, 0.3)",md:"0 0 10px rgba(62, 178, 177, 0.4)",lg:"0 0 20px rgba(62, 178, 177, 0.5)",xl:"0 0 40px rgba(62, 178, 177, 0.6)"},inner:{sm:"inset 0 1px 2px 0 rgba(0, 0, 0, 0.05)",md:"inset 0 2px 4px 0 rgba(0, 0, 0, 0.1)",lg:"inset 0 4px 8px 0 rgba(0, 0, 0, 0.15)"},components:{button:{default:"0 4px 6px -1px rgba(62, 178, 177, 0.15), 0 2px 4px -1px rgba(62, 178, 177, 0.1)",hover:"0 10px 15px -3px rgba(62, 178, 177, 0.2), 0 4px 6px -2px rgba(62, 178, 177, 0.1)",active:"inset 0 2px 4px 0 rgba(62, 178, 177, 0.2)"},card:{default:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",hover:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"},modal:{backdrop:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",content:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},input:{default:"inset 0 1px 2px 0 rgba(0, 0, 0, 0.05)",focus:"0 0 0 3px rgba(62, 178, 177, 0.1)"},dropdown:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"}},n={colors:jt,typography:Ys,spacing:hl,radius:fl,shadows:yl,responsive:{fluid:{xl:"clamp(1.25rem, 4vw, 1.5rem)"}},transitions:{fast:"150ms cubic-bezier(0.4, 0, 0.2, 1)",normal:"200ms cubic-bezier(0.4, 0, 0.2, 1)"},backdropFilters:{blur:"blur(10px)"},zIndex:{dropdown:1e3,sticky:1100,overlay:1300,modal:1400},accessibility:{minTouchTarget:"48px",focusRing:{width:"2px",color:jt.borders.focus}}},yu=()=>{const r={};return Object.entries(jt.primary).forEach(([t,o])=>{r[`--color-primary-${t}`]=o}),Object.entries(jt.secondary).forEach(([t,o])=>{r[`--color-secondary-${t}`]=o}),Object.entries(jt.neutral).forEach(([t,o])=>{r[`--color-neutral-${t}`]=o}),Object.entries(jt.semantic).forEach(([t,o])=>{Object.entries(o).forEach(([s,i])=>{r[`--color-${t}-${s}`]=i})}),Object.entries(jt.backgrounds).forEach(([t,o])=>{r[`--color-background-${t}`]=o}),Object.entries(jt.text).forEach(([t,o])=>{r[`--color-text-${t}`]=o}),Object.entries(jt.borders).forEach(([t,o])=>{r[`--color-border-${t}`]=o}),Object.entries(jt.gradients).forEach(([t,o])=>{r[`--gradient-${t}`]=o}),Object.entries(Ys.sizes).forEach(([t,o])=>{r[`--font-size-${t}`]=o}),Object.entries(Ys.weights).forEach(([t,o])=>{r[`--font-weight-${t}`]=o.toString()}),Object.entries(hl).forEach(([t,o])=>{typeof o=="string"&&(r[`--spacing-${t}`]=o)}),Object.entries(fl).forEach(([t,o])=>{typeof o=="string"&&(r[`--radius-${t}`]=o)}),Object.entries(yl).forEach(([t,o])=>{typeof o=="string"&&(r[`--shadow-${t}`]=o)}),r},xu="/assets/rabhan_logo-0PZU2Ao5.svg",bu=({isOpen:r,onConfirm:t,onCancel:o,userName:s})=>{const{t:i,i18n:a}=ve(),l=a.language==="ar";y.useEffect(()=>{const p=d=>{d.key==="Escape"&&r&&o()};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[r,o]),y.useEffect(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[r]);const c=p=>{p.target===p.currentTarget&&o()};return r?e.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",padding:"clamp(1rem, 3vw, 2rem)",zIndex:9999,animation:"fadeIn 200ms ease-out"},onClick:c,children:[e.jsxs("div",{style:{width:"100%",maxWidth:"420px",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",borderRadius:"20px",border:"1px solid rgba(255, 255, 255, 0.5)",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.1), 0 0 80px rgba(62, 178, 177, 0.1)",padding:"clamp(2rem, 5vw, 2.5rem)",position:"relative",animation:"slideUp 200ms ease-out",direction:l?"rtl":"ltr",transform:"translateY(0)",margin:"auto"},onClick:p=>p.stopPropagation(),children:[e.jsx("button",{onClick:o,style:{position:"absolute",top:"1rem",right:l?"auto":"1rem",left:l?"1rem":"auto",width:"40px",height:"40px",border:"none",background:"rgba(107, 114, 128, 0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:n.transitions.fast,color:"#6b7280",fontSize:"1.25rem"},onMouseEnter:p=>{p.currentTarget.style.background="rgba(107, 114, 128, 0.2)"},onMouseLeave:p=>{p.currentTarget.style.background="rgba(107, 114, 128, 0.1)"},children:"×"}),e.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[e.jsx("h2",{style:{fontSize:n.responsive.fluid.xl,fontWeight:"600",color:"#1a1a1a",margin:0,marginBottom:"0.5rem",letterSpacing:"-0.025em",fontFamily:n.typography.fonts.primary},children:i("logout.confirm.title")}),e.jsx("p",{style:{fontSize:"1rem",color:"#6b7280",margin:0,lineHeight:1.5,textAlign:"center"},children:s?i("logout.confirm.messageWithName",{name:s}):i("logout.confirm.message")})]}),e.jsx("div",{style:{background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"12px",padding:"1rem",marginBottom:"2rem"},children:e.jsxs("div",{children:[e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#dc2626",fontWeight:"500",marginBottom:"0.25rem"},children:i("logout.confirm.warning.title")}),e.jsx("p",{style:{margin:0,fontSize:"0.8125rem",color:"#7f1d1d",lineHeight:1.4},children:i("logout.confirm.warning.message")})]})}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexDirection:l?"row-reverse":"row"},children:[e.jsx("button",{onClick:o,style:{flex:1,padding:"0.875rem",background:"rgba(107, 114, 128, 0.1)",border:"1px solid rgba(107, 114, 128, 0.2)",borderRadius:"12px",color:"#374151",fontSize:"1rem",fontWeight:"500",fontFamily:n.typography.fonts.primary,cursor:"pointer",transition:n.transitions.fast,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},onMouseEnter:p=>{p.currentTarget.style.background="rgba(107, 114, 128, 0.15)",p.currentTarget.style.borderColor="rgba(107, 114, 128, 0.3)",p.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:p=>{p.currentTarget.style.background="rgba(107, 114, 128, 0.1)",p.currentTarget.style.borderColor="rgba(107, 114, 128, 0.2)",p.currentTarget.style.transform="translateY(0)"},children:e.jsx("span",{children:i("logout.confirm.cancel")})}),e.jsx("button",{onClick:t,style:{flex:1,padding:"0.875rem",background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",border:"none",borderRadius:"12px",color:"#ffffff",fontSize:"1rem",fontWeight:"600",fontFamily:n.typography.fonts.primary,cursor:"pointer",transition:n.transitions.fast,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",boxShadow:"0 4px 12px rgba(239, 68, 68, 0.25)"},onMouseEnter:p=>{p.currentTarget.style.background="linear-gradient(135deg, #dc2626 0%, #b91c1c 100%)",p.currentTarget.style.transform="translateY(-1px)",p.currentTarget.style.boxShadow="0 6px 16px rgba(239, 68, 68, 0.35)"},onMouseLeave:p=>{p.currentTarget.style.background="linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",p.currentTarget.style.transform="translateY(0)",p.currentTarget.style.boxShadow="0 4px 12px rgba(239, 68, 68, 0.25)"},children:e.jsx("span",{children:i("logout.confirm.logout")})})]})]}),e.jsx("style",{children:`
          @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
          }
          
          @keyframes slideUp {
            from { 
              opacity: 0; 
              transform: translateY(20px); 
            }
            to { 
              opacity: 1; 
              transform: translateY(0); 
            }
          }
        `})]}):null},lr=({onLogin:r,onRegister:t,onShowCalculator:o,onShowMarketplace:s,onHome:i,onDashboard:a,isAuthenticated:l=!1,user:c,onLogout:p})=>{const{t:d,i18n:m}=ve(),[u,h]=y.useState(!1),[b,j]=y.useState(!1),[_,S]=y.useState(!1),R=m.language,I=R==="ar",C=f=>{m.changeLanguage(f),h(!1),document.documentElement.dir=f==="ar"?"rtl":"ltr",document.documentElement.lang=f},z=[{code:"en",name:"English",flag:"🌐"},{code:"ar",name:"العربية",flag:"🌐"}];return e.jsxs("header",{style:{background:"#ffffff",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",borderBottom:`1px solid ${n.colors.borders.light}`,position:"sticky",top:0,zIndex:n.zIndex.sticky,width:"100%",boxShadow:n.shadows.md,direction:I?"rtl":"ltr"},children:[e.jsxs("div",{style:{width:"100%",maxWidth:"1400px",margin:"0 auto",padding:"0 clamp(1rem, 3vw, 2rem)",display:"flex",alignItems:"center",justifyContent:"space-between",height:"clamp(64px, 8vw, 80px)",boxSizing:"border-box"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",cursor:"pointer",padding:"0.5rem",borderRadius:n.radius.lg},onClick:i,children:e.jsx("img",{src:R==="ar"?"/assets/logo_arabic.jpeg":xu,alt:d("header.logoAlt"),style:{width:"clamp(72px, 12vw, 120px)",height:"clamp(72px, 12vw, 120px)",borderRadius:n.radius.lg,objectFit:"contain",filter:"drop-shadow(0 6px 20px rgba(0,0,0,0.15))",transition:n.transitions.normal}})}),e.jsx("button",{onClick:()=>j(!b),style:{display:"none",background:"rgba(62, 178, 177, 0.08)",border:"1px solid rgba(62, 178, 177, 0.2)",cursor:"pointer",padding:"0.75rem",borderRadius:n.radius.lg,color:n.colors.text.primary,fontSize:"1.25rem",minHeight:n.accessibility.minTouchTarget,minWidth:n.accessibility.minTouchTarget,alignItems:"center",justifyContent:"center",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)"},className:"mobile-menu-button",onMouseEnter:f=>{f.currentTarget.style.background="rgba(62, 178, 177, 0.12)",f.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:f=>{f.currentTarget.style.background="rgba(62, 178, 177, 0.08)",f.currentTarget.style.transform="translateY(0)"},children:"☰"}),e.jsxs("nav",{style:{display:"flex",alignItems:"center",gap:"clamp(0.75rem, 2vw, 1.25rem)"},className:"desktop-nav",children:[e.jsxs("div",{style:{position:"relative"},children:[e.jsxs("button",{onClick:()=>h(!u),style:{background:"transparent",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",padding:"clamp(0.5rem, 2vw, 0.75rem)",borderRadius:n.radius.sm,fontSize:"clamp(0.875rem, 2.5vw, 1rem)",color:n.colors.text.secondary,transition:n.transitions.normal,minHeight:n.accessibility.minTouchTarget},onMouseOver:f=>{f.currentTarget.style.background=n.colors.gradients.cardHover,f.currentTarget.style.color=n.colors.text.primary},onMouseOut:f=>{f.currentTarget.style.background="transparent",f.currentTarget.style.color=n.colors.text.secondary},children:[e.jsx("span",{style:{fontSize:"1.25rem"},children:z.find(f=>f.code===R)?.flag||"🌐"}),e.jsx("span",{children:z.find(f=>f.code===R)?.name||"English"}),e.jsx("span",{style:{fontSize:"0.75rem"},children:"▼"})]}),u&&e.jsx("div",{style:{position:"absolute",top:"100%",right:I?"auto":"0",left:I?"0":"auto",marginTop:"0.5rem",background:"#ffffff",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",borderRadius:n.radius.components.card,boxShadow:n.shadows.components.dropdown,border:`1px solid ${n.colors.borders.light}`,minWidth:"150px",zIndex:n.zIndex.dropdown,overflow:"hidden"},children:z.map(f=>e.jsxs("button",{onClick:()=>C(f.code),style:{width:"100%",padding:"0.75rem 1rem",background:"transparent",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"0.875rem",color:R===f.code?n.colors.text.primary:n.colors.text.secondary,transition:n.transitions.normal,fontWeight:R===f.code?n.typography.weights.semibold:n.typography.weights.normal},onMouseOver:P=>{P.currentTarget.style.background=n.colors.gradients.cardHover,P.currentTarget.style.color=n.colors.text.primary},onMouseOut:P=>{P.currentTarget.style.background="transparent",P.currentTarget.style.color=R===f.code?n.colors.text.primary:n.colors.text.secondary},children:[e.jsx("span",{style:{fontSize:"1.125rem"},children:f.flag}),e.jsx("span",{children:f.name}),R===f.code&&e.jsx("span",{style:{marginLeft:"auto",color:n.colors.semantic.success.main},children:"✓"})]},f.code))})]}),o&&e.jsxs("button",{onClick:o,style:{background:"linear-gradient(135deg, #3eb2b1 0%, #22d3db 100%)",border:"none",color:"#ffffff",padding:"clamp(0.625rem, 2vw, 0.75rem) clamp(1rem, 2.5vw, 1.25rem)",borderRadius:n.radius.lg,fontSize:"clamp(0.875rem, 2.5vw, 0.9375rem)",fontWeight:n.typography.weights.semibold,fontFamily:n.typography.fonts.primary,cursor:"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",minHeight:n.accessibility.minTouchTarget,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",boxShadow:"0 4px 12px rgba(62, 178, 177, 0.25)",position:"relative",overflow:"hidden",letterSpacing:"0.025em"},onMouseEnter:f=>{f.currentTarget.style.background="linear-gradient(135deg, #22d3db 0%, #5cecea 100%)",f.currentTarget.style.transform="translateY(-2px)",f.currentTarget.style.boxShadow="0 8px 20px rgba(62, 178, 177, 0.35)"},onMouseLeave:f=>{f.currentTarget.style.background="linear-gradient(135deg, #3eb2b1 0%, #22d3db 100%)",f.currentTarget.style.transform="translateY(0)",f.currentTarget.style.boxShadow="0 4px 12px rgba(62, 178, 177, 0.25)"},children:[e.jsx("span",{children:"🔆"}),e.jsx("span",{children:d("navigation.calculator")})]}),s&&e.jsxs("button",{onClick:s,style:{background:"rgba(62, 178, 177, 0.08)",border:"1px solid rgba(62, 178, 177, 0.2)",color:n.colors.text.primary,padding:"clamp(0.625rem, 2vw, 0.75rem) clamp(1rem, 2.5vw, 1.25rem)",borderRadius:n.radius.lg,fontSize:"clamp(0.875rem, 2.5vw, 0.9375rem)",fontWeight:n.typography.weights.semibold,fontFamily:n.typography.fonts.primary,cursor:"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",minHeight:n.accessibility.minTouchTarget,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",position:"relative",overflow:"hidden",letterSpacing:"0.025em"},onMouseEnter:f=>{f.currentTarget.style.background="rgba(62, 178, 177, 0.12)",f.currentTarget.style.borderColor="rgba(62, 178, 177, 0.3)",f.currentTarget.style.transform="translateY(-1px)",f.currentTarget.style.boxShadow="0 4px 12px rgba(62, 178, 177, 0.15)"},onMouseLeave:f=>{f.currentTarget.style.background="rgba(62, 178, 177, 0.08)",f.currentTarget.style.borderColor="rgba(62, 178, 177, 0.2)",f.currentTarget.style.transform="translateY(0)",f.currentTarget.style.boxShadow="none"},children:[e.jsx("span",{children:"🛒"}),e.jsx("span",{children:d("navigation.marketplace","Marketplace")})]}),l&&a&&e.jsxs("button",{onClick:a,style:{background:"rgba(62, 178, 177, 0.08)",border:"1px solid rgba(62, 178, 177, 0.2)",color:n.colors.text.primary,padding:"clamp(0.625rem, 2vw, 0.75rem) clamp(1rem, 2.5vw, 1.25rem)",borderRadius:n.radius.lg,fontSize:"clamp(0.875rem, 2.5vw, 0.9375rem)",fontWeight:n.typography.weights.semibold,fontFamily:n.typography.fonts.primary,cursor:"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",minHeight:n.accessibility.minTouchTarget,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",position:"relative",overflow:"hidden",letterSpacing:"0.025em"},onMouseEnter:f=>{f.currentTarget.style.background="rgba(62, 178, 177, 0.12)",f.currentTarget.style.borderColor="rgba(62, 178, 177, 0.3)",f.currentTarget.style.transform="translateY(-1px)",f.currentTarget.style.boxShadow="0 4px 12px rgba(62, 178, 177, 0.15)"},onMouseLeave:f=>{f.currentTarget.style.background="rgba(62, 178, 177, 0.08)",f.currentTarget.style.borderColor="rgba(62, 178, 177, 0.2)",f.currentTarget.style.transform="translateY(0)",f.currentTarget.style.boxShadow="none"},children:[e.jsx("span",{children:"📊"}),e.jsx("span",{children:d("header.dashboard")})]}),l&&c?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"clamp(0.75rem, 2vw, 1rem)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.75rem",background:"rgba(62, 178, 177, 0.08)",borderRadius:n.radius.lg,border:"1px solid rgba(62, 178, 177, 0.2)"},children:[e.jsx("div",{style:{width:"32px",height:"32px",background:"linear-gradient(135deg, #3eb2b1 0%, #22d3db 100%)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1rem",color:"#ffffff"},children:c.role==="CONTRACTOR"?"🔧":"👤"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.125rem"},children:[e.jsx("span",{style:{fontSize:"clamp(0.75rem, 2vw, 0.875rem)",fontWeight:n.typography.weights.semibold,color:n.colors.text.primary,lineHeight:1,textAlign:I?"right":"left"},children:c.first_name&&c.last_name?`${c.first_name} ${c.last_name}`:c.first_name?c.first_name:c.last_name?c.last_name:c.email.split("@")[0]}),e.jsx("span",{style:{fontSize:"clamp(0.625rem, 1.5vw, 0.75rem)",color:n.colors.text.secondary,lineHeight:1,textAlign:I?"right":"left"},children:c.role==="CONTRACTOR"?d("auth.userTypes.CONTRACTOR"):d("auth.userTypes.USER")})]})]}),e.jsxs("button",{onClick:()=>S(!0),style:{background:"rgba(239, 68, 68, 0.08)",border:"1px solid rgba(239, 68, 68, 0.2)",color:"#dc2626",padding:"clamp(0.625rem, 2vw, 0.75rem) clamp(1rem, 2.5vw, 1.25rem)",borderRadius:n.radius.lg,fontSize:"clamp(0.875rem, 2.5vw, 0.9375rem)",fontWeight:n.typography.weights.semibold,fontFamily:n.typography.fonts.primary,cursor:"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",minHeight:n.accessibility.minTouchTarget,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",letterSpacing:"0.025em"},onMouseEnter:f=>{f.currentTarget.style.background="rgba(239, 68, 68, 0.12)",f.currentTarget.style.borderColor="rgba(239, 68, 68, 0.3)",f.currentTarget.style.transform="translateY(-1px)",f.currentTarget.style.boxShadow="0 4px 12px rgba(239, 68, 68, 0.15)"},onMouseLeave:f=>{f.currentTarget.style.background="rgba(239, 68, 68, 0.08)",f.currentTarget.style.borderColor="rgba(239, 68, 68, 0.2)",f.currentTarget.style.transform="translateY(0)",f.currentTarget.style.boxShadow="none"},children:[e.jsx("span",{children:"🚪"}),e.jsx("span",{children:d("header.logout")})]})]}):e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"clamp(0.5rem, 1.5vw, 0.75rem)"},children:[e.jsx("button",{onClick:r,style:{background:"rgba(62, 178, 177, 0.08)",border:"1px solid rgba(62, 178, 177, 0.2)",color:n.colors.text.primary,padding:"clamp(0.625rem, 2vw, 0.75rem) clamp(1.25rem, 3vw, 1.5rem)",borderRadius:n.radius.lg,fontSize:"clamp(0.875rem, 2.5vw, 0.9375rem)",fontWeight:n.typography.weights.semibold,fontFamily:n.typography.fonts.primary,cursor:"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",minHeight:n.accessibility.minTouchTarget,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",overflow:"hidden",letterSpacing:"0.025em"},onMouseEnter:f=>{f.currentTarget.style.background="rgba(62, 178, 177, 0.12)",f.currentTarget.style.borderColor="rgba(62, 178, 177, 0.3)",f.currentTarget.style.transform="translateY(-1px)",f.currentTarget.style.boxShadow="0 4px 12px rgba(62, 178, 177, 0.15)"},onMouseLeave:f=>{f.currentTarget.style.background="rgba(62, 178, 177, 0.08)",f.currentTarget.style.borderColor="rgba(62, 178, 177, 0.2)",f.currentTarget.style.transform="translateY(0)",f.currentTarget.style.boxShadow="none"},children:d("header.login")}),e.jsx("button",{onClick:t,style:{background:"linear-gradient(135deg, #3eb2b1 0%, #22d3db 100%)",border:"none",color:"#ffffff",padding:"clamp(0.625rem, 2vw, 0.75rem) clamp(1.25rem, 3vw, 1.5rem)",borderRadius:n.radius.lg,fontSize:"clamp(0.875rem, 2.5vw, 0.9375rem)",fontWeight:n.typography.weights.semibold,fontFamily:n.typography.fonts.primary,cursor:"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",minHeight:n.accessibility.minTouchTarget,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(62, 178, 177, 0.25)",position:"relative",overflow:"hidden",letterSpacing:"0.025em"},onMouseEnter:f=>{f.currentTarget.style.background="linear-gradient(135deg, #22d3db 0%, #5cecea 100%)",f.currentTarget.style.transform="translateY(-2px)",f.currentTarget.style.boxShadow="0 8px 20px rgba(62, 178, 177, 0.35)"},onMouseLeave:f=>{f.currentTarget.style.background="linear-gradient(135deg, #3eb2b1 0%, #22d3db 100%)",f.currentTarget.style.transform="translateY(0)",f.currentTarget.style.boxShadow="0 4px 12px rgba(62, 178, 177, 0.25)"},children:d("header.register")})]})]})]}),b&&e.jsx("div",{style:{background:"#ffffff",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",borderTop:`1px solid ${n.colors.borders.light}`,padding:"1rem",display:"none"},className:"mobile-menu",children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"1rem",fontWeight:n.typography.weights.medium},children:d("header.language")}),e.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:z.map(f=>e.jsxs("button",{onClick:()=>C(f.code),style:{background:R===f.code?n.colors.gradients.primary:"transparent",color:R===f.code?n.colors.text.inverse:n.colors.text.secondary,border:`1px solid ${R===f.code?"transparent":n.colors.borders.light}`,padding:"0.5rem",borderRadius:n.radius.sm,cursor:"pointer",fontSize:"0.875rem",fontWeight:n.typography.weights.medium,transition:n.transitions.normal,minHeight:n.accessibility.minTouchTarget},children:[f.flag," ",f.name]},f.code))})]}),o&&e.jsxs("button",{onClick:()=>{j(!1),o()},style:{background:"linear-gradient(135deg, #3eb2b1 0%, #22d3db 100%)",border:"none",color:"#ffffff",padding:"0.75rem 1rem",borderRadius:n.radius.lg,fontSize:"1rem",fontWeight:n.typography.weights.semibold,cursor:"pointer",transition:n.transitions.normal,minHeight:n.accessibility.minTouchTarget,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",boxShadow:"0 4px 12px rgba(62, 178, 177, 0.25)"},children:[e.jsx("span",{children:"🔆"}),e.jsx("span",{children:d("navigation.calculator")})]}),s&&e.jsxs("button",{onClick:()=>{j(!1),s()},style:{background:"rgba(62, 178, 177, 0.08)",border:"1px solid rgba(62, 178, 177, 0.2)",color:n.colors.text.primary,padding:"0.75rem 1rem",borderRadius:n.radius.lg,fontSize:"1rem",fontWeight:n.typography.weights.semibold,cursor:"pointer",transition:n.transitions.normal,minHeight:n.accessibility.minTouchTarget,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[e.jsx("span",{children:"🛒"}),e.jsx("span",{children:d("navigation.marketplace","Marketplace")})]}),l&&a&&e.jsxs("button",{onClick:()=>{j(!1),a()},style:{background:"rgba(62, 178, 177, 0.08)",border:"1px solid rgba(62, 178, 177, 0.2)",color:n.colors.text.primary,padding:"0.75rem 1rem",borderRadius:n.radius.lg,fontSize:"1rem",fontWeight:n.typography.weights.semibold,cursor:"pointer",transition:n.transitions.normal,minHeight:n.accessibility.minTouchTarget,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[e.jsx("span",{children:"📊"}),e.jsx("span",{children:d("header.dashboard")})]}),l&&c?e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",background:"rgba(62, 178, 177, 0.08)",borderRadius:n.radius.lg,border:"1px solid rgba(62, 178, 177, 0.2)"},children:[e.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, #3eb2b1 0%, #22d3db 100%)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.25rem",color:"#ffffff"},children:c.role==="CONTRACTOR"?"🔧":"👤"}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"1rem",fontWeight:n.typography.weights.semibold,color:n.colors.text.primary,marginBottom:"0.25rem"},children:c.first_name&&c.last_name?`${c.first_name} ${c.last_name}`:c.first_name?c.first_name:c.last_name?c.last_name:c.email.split("@")[0]}),e.jsx("div",{style:{fontSize:"0.875rem",color:n.colors.text.secondary},children:c.role==="CONTRACTOR"?d("auth.userTypes.CONTRACTOR"):d("auth.userTypes.USER")})]})]}),e.jsx("button",{onClick:()=>S(!0),style:{background:"rgba(239, 68, 68, 0.08)",border:"1px solid rgba(239, 68, 68, 0.2)",color:"#dc2626",padding:"0.75rem 1rem",borderRadius:n.radius.lg,fontSize:"1rem",fontWeight:n.typography.weights.semibold,cursor:"pointer",transition:n.transitions.normal,minHeight:n.accessibility.minTouchTarget,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:d("header.logout")})]}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsx("button",{onClick:r,style:{background:"transparent",border:`1px solid ${n.colors.borders.medium}`,color:n.colors.text.primary,padding:"0.75rem 1rem",borderRadius:n.radius.components.button,fontSize:"1rem",fontWeight:n.typography.weights.medium,cursor:"pointer",transition:n.transitions.normal,minHeight:n.accessibility.minTouchTarget},children:d("header.login")}),e.jsx("button",{onClick:t,style:{background:n.colors.gradients.button,border:"none",color:n.colors.text.inverse,padding:"0.75rem 1rem",borderRadius:n.radius.components.button,fontSize:"1rem",fontWeight:n.typography.weights.medium,cursor:"pointer",transition:n.transitions.normal,minHeight:n.accessibility.minTouchTarget,boxShadow:n.shadows.primary.sm},children:d("header.register")})]})]})}),e.jsx(bu,{isOpen:_,onConfirm:()=>{S(!1),p?.()},onCancel:()=>S(!1),userName:(()=>{if(c)return c.first_name&&c.last_name?`${c.first_name} ${c.last_name}`:c.first_name?c.first_name:c.last_name?c.last_name:c.email.split("@")[0]})()}),e.jsx("style",{children:`
          @media (max-width: 768px) {
            .desktop-nav {
              display: none !important;
            }
            .mobile-menu-button {
              display: flex !important;
            }
            .mobile-menu {
              display: block !important;
            }
          }
        `})]})};function xl(r,t){return function(){return r.apply(t,arguments)}}const{toString:vu}=Object.prototype,{getPrototypeOf:_n}=Object,{iterator:Yo,toStringTag:bl}=Symbol,Qo=(r=>t=>{const o=vu.call(t);return r[o]||(r[o]=o.slice(8,-1).toLowerCase())})(Object.create(null)),vt=r=>(r=r.toLowerCase(),t=>Qo(t)===r),Go=r=>t=>typeof t===r,{isArray:Pr}=Array,Vr=Go("undefined");function wu(r){return r!==null&&!Vr(r)&&r.constructor!==null&&!Vr(r.constructor)&&tt(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const vl=vt("ArrayBuffer");function ju(r){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(r):t=r&&r.buffer&&vl(r.buffer),t}const Su=Go("string"),tt=Go("function"),wl=Go("number"),Ko=r=>r!==null&&typeof r=="object",ku=r=>r===!0||r===!1,xo=r=>{if(Qo(r)!=="object")return!1;const t=_n(r);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(bl in r)&&!(Yo in r)},Cu=vt("Date"),_u=vt("File"),Tu=vt("Blob"),Au=vt("FileList"),Ru=r=>Ko(r)&&tt(r.pipe),Pu=r=>{let t;return r&&(typeof FormData=="function"&&r instanceof FormData||tt(r.append)&&((t=Qo(r))==="formdata"||t==="object"&&tt(r.toString)&&r.toString()==="[object FormData]"))},Iu=vt("URLSearchParams"),[Lu,zu,Eu,Mu]=["ReadableStream","Request","Response","Headers"].map(vt),Bu=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Zr(r,t,{allOwnKeys:o=!1}={}){if(r===null||typeof r>"u")return;let s,i;if(typeof r!="object"&&(r=[r]),Pr(r))for(s=0,i=r.length;s<i;s++)t.call(null,r[s],s,r);else{const a=o?Object.getOwnPropertyNames(r):Object.keys(r),l=a.length;let c;for(s=0;s<l;s++)c=a[s],t.call(null,r[c],c,r)}}function jl(r,t){t=t.toLowerCase();const o=Object.keys(r);let s=o.length,i;for(;s-- >0;)if(i=o[s],t===i.toLowerCase())return i;return null}const Jt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Sl=r=>!Vr(r)&&r!==Jt;function Qs(){const{caseless:r}=Sl(this)&&this||{},t={},o=(s,i)=>{const a=r&&jl(t,i)||i;xo(t[a])&&xo(s)?t[a]=Qs(t[a],s):xo(s)?t[a]=Qs({},s):Pr(s)?t[a]=s.slice():t[a]=s};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&Zr(arguments[s],o);return t}const Nu=(r,t,o,{allOwnKeys:s}={})=>(Zr(t,(i,a)=>{o&&tt(i)?r[a]=xl(i,o):r[a]=i},{allOwnKeys:s}),r),Wu=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),Du=(r,t,o,s)=>{r.prototype=Object.create(t.prototype,s),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:t.prototype}),o&&Object.assign(r.prototype,o)},$u=(r,t,o,s)=>{let i,a,l;const c={};if(t=t||{},r==null)return t;do{for(i=Object.getOwnPropertyNames(r),a=i.length;a-- >0;)l=i[a],(!s||s(l,r,t))&&!c[l]&&(t[l]=r[l],c[l]=!0);r=o!==!1&&_n(r)}while(r&&(!o||o(r,t))&&r!==Object.prototype);return t},Fu=(r,t,o)=>{r=String(r),(o===void 0||o>r.length)&&(o=r.length),o-=t.length;const s=r.indexOf(t,o);return s!==-1&&s===o},Ou=r=>{if(!r)return null;if(Pr(r))return r;let t=r.length;if(!wl(t))return null;const o=new Array(t);for(;t-- >0;)o[t]=r[t];return o},qu=(r=>t=>r&&t instanceof r)(typeof Uint8Array<"u"&&_n(Uint8Array)),Vu=(r,t)=>{const s=(r&&r[Yo]).call(r);let i;for(;(i=s.next())&&!i.done;){const a=i.value;t.call(r,a[0],a[1])}},Uu=(r,t)=>{let o;const s=[];for(;(o=r.exec(t))!==null;)s.push(o);return s},Hu=vt("HTMLFormElement"),Yu=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(o,s,i){return s.toUpperCase()+i}),mi=(({hasOwnProperty:r})=>(t,o)=>r.call(t,o))(Object.prototype),Qu=vt("RegExp"),kl=(r,t)=>{const o=Object.getOwnPropertyDescriptors(r),s={};Zr(o,(i,a)=>{let l;(l=t(i,a,r))!==!1&&(s[a]=l||i)}),Object.defineProperties(r,s)},Gu=r=>{kl(r,(t,o)=>{if(tt(r)&&["arguments","caller","callee"].indexOf(o)!==-1)return!1;const s=r[o];if(tt(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+o+"'")})}})},Ku=(r,t)=>{const o={},s=i=>{i.forEach(a=>{o[a]=!0})};return Pr(r)?s(r):s(String(r).split(t)),o},Xu=()=>{},Zu=(r,t)=>r!=null&&Number.isFinite(r=+r)?r:t;function Ju(r){return!!(r&&tt(r.append)&&r[bl]==="FormData"&&r[Yo])}const em=r=>{const t=new Array(10),o=(s,i)=>{if(Ko(s)){if(t.indexOf(s)>=0)return;if(!("toJSON"in s)){t[i]=s;const a=Pr(s)?[]:{};return Zr(s,(l,c)=>{const p=o(l,i+1);!Vr(p)&&(a[c]=p)}),t[i]=void 0,a}}return s};return o(r,0)},tm=vt("AsyncFunction"),rm=r=>r&&(Ko(r)||tt(r))&&tt(r.then)&&tt(r.catch),Cl=((r,t)=>r?setImmediate:t?((o,s)=>(Jt.addEventListener("message",({source:i,data:a})=>{i===Jt&&a===o&&s.length&&s.shift()()},!1),i=>{s.push(i),Jt.postMessage(o,"*")}))(`axios@${Math.random()}`,[]):o=>setTimeout(o))(typeof setImmediate=="function",tt(Jt.postMessage)),om=typeof queueMicrotask<"u"?queueMicrotask.bind(Jt):typeof process<"u"&&process.nextTick||Cl,sm=r=>r!=null&&tt(r[Yo]),H={isArray:Pr,isArrayBuffer:vl,isBuffer:wu,isFormData:Pu,isArrayBufferView:ju,isString:Su,isNumber:wl,isBoolean:ku,isObject:Ko,isPlainObject:xo,isReadableStream:Lu,isRequest:zu,isResponse:Eu,isHeaders:Mu,isUndefined:Vr,isDate:Cu,isFile:_u,isBlob:Tu,isRegExp:Qu,isFunction:tt,isStream:Ru,isURLSearchParams:Iu,isTypedArray:qu,isFileList:Au,forEach:Zr,merge:Qs,extend:Nu,trim:Bu,stripBOM:Wu,inherits:Du,toFlatObject:$u,kindOf:Qo,kindOfTest:vt,endsWith:Fu,toArray:Ou,forEachEntry:Vu,matchAll:Uu,isHTMLForm:Hu,hasOwnProperty:mi,hasOwnProp:mi,reduceDescriptors:kl,freezeMethods:Gu,toObjectSet:Ku,toCamelCase:Yu,noop:Xu,toFiniteNumber:Zu,findKey:jl,global:Jt,isContextDefined:Sl,isSpecCompliantForm:Ju,toJSONObject:em,isAsyncFn:tm,isThenable:rm,setImmediate:Cl,asap:om,isIterable:sm};function we(r,t,o,s,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",t&&(this.code=t),o&&(this.config=o),s&&(this.request=s),i&&(this.response=i,this.status=i.status?i.status:null)}H.inherits(we,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:H.toJSONObject(this.config),code:this.code,status:this.status}}});const _l=we.prototype,Tl={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{Tl[r]={value:r}});Object.defineProperties(we,Tl);Object.defineProperty(_l,"isAxiosError",{value:!0});we.from=(r,t,o,s,i,a)=>{const l=Object.create(_l);return H.toFlatObject(r,l,function(p){return p!==Error.prototype},c=>c!=="isAxiosError"),we.call(l,r.message,t,o,s,i),l.cause=r,l.name=r.name,a&&Object.assign(l,a),l};const nm=null;function Gs(r){return H.isPlainObject(r)||H.isArray(r)}function Al(r){return H.endsWith(r,"[]")?r.slice(0,-2):r}function gi(r,t,o){return r?r.concat(t).map(function(i,a){return i=Al(i),!o&&a?"["+i+"]":i}).join(o?".":""):t}function im(r){return H.isArray(r)&&!r.some(Gs)}const am=H.toFlatObject(H,{},null,function(t){return/^is[A-Z]/.test(t)});function Xo(r,t,o){if(!H.isObject(r))throw new TypeError("target must be an object");t=t||new FormData,o=H.toFlatObject(o,{metaTokens:!0,dots:!1,indexes:!1},!1,function(_,S){return!H.isUndefined(S[_])});const s=o.metaTokens,i=o.visitor||m,a=o.dots,l=o.indexes,p=(o.Blob||typeof Blob<"u"&&Blob)&&H.isSpecCompliantForm(t);if(!H.isFunction(i))throw new TypeError("visitor must be a function");function d(j){if(j===null)return"";if(H.isDate(j))return j.toISOString();if(H.isBoolean(j))return j.toString();if(!p&&H.isBlob(j))throw new we("Blob is not supported. Use a Buffer instead.");return H.isArrayBuffer(j)||H.isTypedArray(j)?p&&typeof Blob=="function"?new Blob([j]):Buffer.from(j):j}function m(j,_,S){let R=j;if(j&&!S&&typeof j=="object"){if(H.endsWith(_,"{}"))_=s?_:_.slice(0,-2),j=JSON.stringify(j);else if(H.isArray(j)&&im(j)||(H.isFileList(j)||H.endsWith(_,"[]"))&&(R=H.toArray(j)))return _=Al(_),R.forEach(function(C,z){!(H.isUndefined(C)||C===null)&&t.append(l===!0?gi([_],z,a):l===null?_:_+"[]",d(C))}),!1}return Gs(j)?!0:(t.append(gi(S,_,a),d(j)),!1)}const u=[],h=Object.assign(am,{defaultVisitor:m,convertValue:d,isVisitable:Gs});function b(j,_){if(!H.isUndefined(j)){if(u.indexOf(j)!==-1)throw Error("Circular reference detected in "+_.join("."));u.push(j),H.forEach(j,function(R,I){(!(H.isUndefined(R)||R===null)&&i.call(t,R,H.isString(I)?I.trim():I,_,h))===!0&&b(R,_?_.concat(I):[I])}),u.pop()}}if(!H.isObject(r))throw new TypeError("data must be an object");return b(r),t}function hi(r){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function Tn(r,t){this._pairs=[],r&&Xo(r,this,t)}const Rl=Tn.prototype;Rl.append=function(t,o){this._pairs.push([t,o])};Rl.toString=function(t){const o=t?function(s){return t.call(this,s,hi)}:hi;return this._pairs.map(function(i){return o(i[0])+"="+o(i[1])},"").join("&")};function lm(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Pl(r,t,o){if(!t)return r;const s=o&&o.encode||lm;H.isFunction(o)&&(o={serialize:o});const i=o&&o.serialize;let a;if(i?a=i(t,o):a=H.isURLSearchParams(t)?t.toString():new Tn(t,o).toString(s),a){const l=r.indexOf("#");l!==-1&&(r=r.slice(0,l)),r+=(r.indexOf("?")===-1?"?":"&")+a}return r}class fi{constructor(){this.handlers=[]}use(t,o,s){return this.handlers.push({fulfilled:t,rejected:o,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){H.forEach(this.handlers,function(s){s!==null&&t(s)})}}const Il={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},cm=typeof URLSearchParams<"u"?URLSearchParams:Tn,dm=typeof FormData<"u"?FormData:null,pm=typeof Blob<"u"?Blob:null,um={isBrowser:!0,classes:{URLSearchParams:cm,FormData:dm,Blob:pm},protocols:["http","https","file","blob","url","data"]},An=typeof window<"u"&&typeof document<"u",Ks=typeof navigator=="object"&&navigator||void 0,mm=An&&(!Ks||["ReactNative","NativeScript","NS"].indexOf(Ks.product)<0),gm=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",hm=An&&window.location.href||"http://localhost",fm=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:An,hasStandardBrowserEnv:mm,hasStandardBrowserWebWorkerEnv:gm,navigator:Ks,origin:hm},Symbol.toStringTag,{value:"Module"})),Ye={...fm,...um};function ym(r,t){return Xo(r,new Ye.classes.URLSearchParams,Object.assign({visitor:function(o,s,i,a){return Ye.isNode&&H.isBuffer(o)?(this.append(s,o.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},t))}function xm(r){return H.matchAll(/\w+|\[(\w*)]/g,r).map(t=>t[0]==="[]"?"":t[1]||t[0])}function bm(r){const t={},o=Object.keys(r);let s;const i=o.length;let a;for(s=0;s<i;s++)a=o[s],t[a]=r[a];return t}function Ll(r){function t(o,s,i,a){let l=o[a++];if(l==="__proto__")return!0;const c=Number.isFinite(+l),p=a>=o.length;return l=!l&&H.isArray(i)?i.length:l,p?(H.hasOwnProp(i,l)?i[l]=[i[l],s]:i[l]=s,!c):((!i[l]||!H.isObject(i[l]))&&(i[l]=[]),t(o,s,i[l],a)&&H.isArray(i[l])&&(i[l]=bm(i[l])),!c)}if(H.isFormData(r)&&H.isFunction(r.entries)){const o={};return H.forEachEntry(r,(s,i)=>{t(xm(s),i,o,0)}),o}return null}function vm(r,t,o){if(H.isString(r))try{return(t||JSON.parse)(r),H.trim(r)}catch(s){if(s.name!=="SyntaxError")throw s}return(o||JSON.stringify)(r)}const Jr={transitional:Il,adapter:["xhr","http","fetch"],transformRequest:[function(t,o){const s=o.getContentType()||"",i=s.indexOf("application/json")>-1,a=H.isObject(t);if(a&&H.isHTMLForm(t)&&(t=new FormData(t)),H.isFormData(t))return i?JSON.stringify(Ll(t)):t;if(H.isArrayBuffer(t)||H.isBuffer(t)||H.isStream(t)||H.isFile(t)||H.isBlob(t)||H.isReadableStream(t))return t;if(H.isArrayBufferView(t))return t.buffer;if(H.isURLSearchParams(t))return o.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let c;if(a){if(s.indexOf("application/x-www-form-urlencoded")>-1)return ym(t,this.formSerializer).toString();if((c=H.isFileList(t))||s.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return Xo(c?{"files[]":t}:t,p&&new p,this.formSerializer)}}return a||i?(o.setContentType("application/json",!1),vm(t)):t}],transformResponse:[function(t){const o=this.transitional||Jr.transitional,s=o&&o.forcedJSONParsing,i=this.responseType==="json";if(H.isResponse(t)||H.isReadableStream(t))return t;if(t&&H.isString(t)&&(s&&!this.responseType||i)){const l=!(o&&o.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(c){if(l)throw c.name==="SyntaxError"?we.from(c,we.ERR_BAD_RESPONSE,this,null,this.response):c}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ye.classes.FormData,Blob:Ye.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};H.forEach(["delete","get","head","post","put","patch"],r=>{Jr.headers[r]={}});const wm=H.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),jm=r=>{const t={};let o,s,i;return r&&r.split(`
`).forEach(function(l){i=l.indexOf(":"),o=l.substring(0,i).trim().toLowerCase(),s=l.substring(i+1).trim(),!(!o||t[o]&&wm[o])&&(o==="set-cookie"?t[o]?t[o].push(s):t[o]=[s]:t[o]=t[o]?t[o]+", "+s:s)}),t},yi=Symbol("internals");function Er(r){return r&&String(r).trim().toLowerCase()}function bo(r){return r===!1||r==null?r:H.isArray(r)?r.map(bo):String(r)}function Sm(r){const t=Object.create(null),o=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=o.exec(r);)t[s[1]]=s[2];return t}const km=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function fs(r,t,o,s,i){if(H.isFunction(s))return s.call(this,t,o);if(i&&(t=o),!!H.isString(t)){if(H.isString(s))return t.indexOf(s)!==-1;if(H.isRegExp(s))return s.test(t)}}function Cm(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,o,s)=>o.toUpperCase()+s)}function _m(r,t){const o=H.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(r,s+o,{value:function(i,a,l){return this[s].call(this,t,i,a,l)},configurable:!0})})}let rt=class{constructor(t){t&&this.set(t)}set(t,o,s){const i=this;function a(c,p,d){const m=Er(p);if(!m)throw new Error("header name must be a non-empty string");const u=H.findKey(i,m);(!u||i[u]===void 0||d===!0||d===void 0&&i[u]!==!1)&&(i[u||p]=bo(c))}const l=(c,p)=>H.forEach(c,(d,m)=>a(d,m,p));if(H.isPlainObject(t)||t instanceof this.constructor)l(t,o);else if(H.isString(t)&&(t=t.trim())&&!km(t))l(jm(t),o);else if(H.isObject(t)&&H.isIterable(t)){let c={},p,d;for(const m of t){if(!H.isArray(m))throw TypeError("Object iterator must return a key-value pair");c[d=m[0]]=(p=c[d])?H.isArray(p)?[...p,m[1]]:[p,m[1]]:m[1]}l(c,o)}else t!=null&&a(o,t,s);return this}get(t,o){if(t=Er(t),t){const s=H.findKey(this,t);if(s){const i=this[s];if(!o)return i;if(o===!0)return Sm(i);if(H.isFunction(o))return o.call(this,i,s);if(H.isRegExp(o))return o.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,o){if(t=Er(t),t){const s=H.findKey(this,t);return!!(s&&this[s]!==void 0&&(!o||fs(this,this[s],s,o)))}return!1}delete(t,o){const s=this;let i=!1;function a(l){if(l=Er(l),l){const c=H.findKey(s,l);c&&(!o||fs(s,s[c],c,o))&&(delete s[c],i=!0)}}return H.isArray(t)?t.forEach(a):a(t),i}clear(t){const o=Object.keys(this);let s=o.length,i=!1;for(;s--;){const a=o[s];(!t||fs(this,this[a],a,t,!0))&&(delete this[a],i=!0)}return i}normalize(t){const o=this,s={};return H.forEach(this,(i,a)=>{const l=H.findKey(s,a);if(l){o[l]=bo(i),delete o[a];return}const c=t?Cm(a):String(a).trim();c!==a&&delete o[a],o[c]=bo(i),s[c]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const o=Object.create(null);return H.forEach(this,(s,i)=>{s!=null&&s!==!1&&(o[i]=t&&H.isArray(s)?s.join(", "):s)}),o}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,o])=>t+": "+o).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...o){const s=new this(t);return o.forEach(i=>s.set(i)),s}static accessor(t){const s=(this[yi]=this[yi]={accessors:{}}).accessors,i=this.prototype;function a(l){const c=Er(l);s[c]||(_m(i,l),s[c]=!0)}return H.isArray(t)?t.forEach(a):a(t),this}};rt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);H.reduceDescriptors(rt.prototype,({value:r},t)=>{let o=t[0].toUpperCase()+t.slice(1);return{get:()=>r,set(s){this[o]=s}}});H.freezeMethods(rt);function ys(r,t){const o=this||Jr,s=t||o,i=rt.from(s.headers);let a=s.data;return H.forEach(r,function(c){a=c.call(o,a,i.normalize(),t?t.status:void 0)}),i.normalize(),a}function zl(r){return!!(r&&r.__CANCEL__)}function Ir(r,t,o){we.call(this,r??"canceled",we.ERR_CANCELED,t,o),this.name="CanceledError"}H.inherits(Ir,we,{__CANCEL__:!0});function El(r,t,o){const s=o.config.validateStatus;!o.status||!s||s(o.status)?r(o):t(new we("Request failed with status code "+o.status,[we.ERR_BAD_REQUEST,we.ERR_BAD_RESPONSE][Math.floor(o.status/100)-4],o.config,o.request,o))}function Tm(r){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return t&&t[1]||""}function Am(r,t){r=r||10;const o=new Array(r),s=new Array(r);let i=0,a=0,l;return t=t!==void 0?t:1e3,function(p){const d=Date.now(),m=s[a];l||(l=d),o[i]=p,s[i]=d;let u=a,h=0;for(;u!==i;)h+=o[u++],u=u%r;if(i=(i+1)%r,i===a&&(a=(a+1)%r),d-l<t)return;const b=m&&d-m;return b?Math.round(h*1e3/b):void 0}}function Rm(r,t){let o=0,s=1e3/t,i,a;const l=(d,m=Date.now())=>{o=m,i=null,a&&(clearTimeout(a),a=null),r.apply(null,d)};return[(...d)=>{const m=Date.now(),u=m-o;u>=s?l(d,m):(i=d,a||(a=setTimeout(()=>{a=null,l(i)},s-u)))},()=>i&&l(i)]}const Ro=(r,t,o=3)=>{let s=0;const i=Am(50,250);return Rm(a=>{const l=a.loaded,c=a.lengthComputable?a.total:void 0,p=l-s,d=i(p),m=l<=c;s=l;const u={loaded:l,total:c,progress:c?l/c:void 0,bytes:p,rate:d||void 0,estimated:d&&c&&m?(c-l)/d:void 0,event:a,lengthComputable:c!=null,[t?"download":"upload"]:!0};r(u)},o)},xi=(r,t)=>{const o=r!=null;return[s=>t[0]({lengthComputable:o,total:r,loaded:s}),t[1]]},bi=r=>(...t)=>H.asap(()=>r(...t)),Pm=Ye.hasStandardBrowserEnv?((r,t)=>o=>(o=new URL(o,Ye.origin),r.protocol===o.protocol&&r.host===o.host&&(t||r.port===o.port)))(new URL(Ye.origin),Ye.navigator&&/(msie|trident)/i.test(Ye.navigator.userAgent)):()=>!0,Im=Ye.hasStandardBrowserEnv?{write(r,t,o,s,i,a){const l=[r+"="+encodeURIComponent(t)];H.isNumber(o)&&l.push("expires="+new Date(o).toGMTString()),H.isString(s)&&l.push("path="+s),H.isString(i)&&l.push("domain="+i),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read(r){const t=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(r){this.write(r,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Lm(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function zm(r,t){return t?r.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):r}function Ml(r,t,o){let s=!Lm(t);return r&&(s||o==!1)?zm(r,t):t}const vi=r=>r instanceof rt?{...r}:r;function ar(r,t){t=t||{};const o={};function s(d,m,u,h){return H.isPlainObject(d)&&H.isPlainObject(m)?H.merge.call({caseless:h},d,m):H.isPlainObject(m)?H.merge({},m):H.isArray(m)?m.slice():m}function i(d,m,u,h){if(H.isUndefined(m)){if(!H.isUndefined(d))return s(void 0,d,u,h)}else return s(d,m,u,h)}function a(d,m){if(!H.isUndefined(m))return s(void 0,m)}function l(d,m){if(H.isUndefined(m)){if(!H.isUndefined(d))return s(void 0,d)}else return s(void 0,m)}function c(d,m,u){if(u in t)return s(d,m);if(u in r)return s(void 0,d)}const p={url:a,method:a,data:a,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:c,headers:(d,m,u)=>i(vi(d),vi(m),u,!0)};return H.forEach(Object.keys(Object.assign({},r,t)),function(m){const u=p[m]||i,h=u(r[m],t[m],m);H.isUndefined(h)&&u!==c||(o[m]=h)}),o}const Bl=r=>{const t=ar({},r);let{data:o,withXSRFToken:s,xsrfHeaderName:i,xsrfCookieName:a,headers:l,auth:c}=t;t.headers=l=rt.from(l),t.url=Pl(Ml(t.baseURL,t.url,t.allowAbsoluteUrls),r.params,r.paramsSerializer),c&&l.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):"")));let p;if(H.isFormData(o)){if(Ye.hasStandardBrowserEnv||Ye.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((p=l.getContentType())!==!1){const[d,...m]=p?p.split(";").map(u=>u.trim()).filter(Boolean):[];l.setContentType([d||"multipart/form-data",...m].join("; "))}}if(Ye.hasStandardBrowserEnv&&(s&&H.isFunction(s)&&(s=s(t)),s||s!==!1&&Pm(t.url))){const d=i&&a&&Im.read(a);d&&l.set(i,d)}return t},Em=typeof XMLHttpRequest<"u",Mm=Em&&function(r){return new Promise(function(o,s){const i=Bl(r);let a=i.data;const l=rt.from(i.headers).normalize();let{responseType:c,onUploadProgress:p,onDownloadProgress:d}=i,m,u,h,b,j;function _(){b&&b(),j&&j(),i.cancelToken&&i.cancelToken.unsubscribe(m),i.signal&&i.signal.removeEventListener("abort",m)}let S=new XMLHttpRequest;S.open(i.method.toUpperCase(),i.url,!0),S.timeout=i.timeout;function R(){if(!S)return;const C=rt.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),f={data:!c||c==="text"||c==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:C,config:r,request:S};El(function(w){o(w),_()},function(w){s(w),_()},f),S=null}"onloadend"in S?S.onloadend=R:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(R)},S.onabort=function(){S&&(s(new we("Request aborted",we.ECONNABORTED,r,S)),S=null)},S.onerror=function(){s(new we("Network Error",we.ERR_NETWORK,r,S)),S=null},S.ontimeout=function(){let z=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const f=i.transitional||Il;i.timeoutErrorMessage&&(z=i.timeoutErrorMessage),s(new we(z,f.clarifyTimeoutError?we.ETIMEDOUT:we.ECONNABORTED,r,S)),S=null},a===void 0&&l.setContentType(null),"setRequestHeader"in S&&H.forEach(l.toJSON(),function(z,f){S.setRequestHeader(f,z)}),H.isUndefined(i.withCredentials)||(S.withCredentials=!!i.withCredentials),c&&c!=="json"&&(S.responseType=i.responseType),d&&([h,j]=Ro(d,!0),S.addEventListener("progress",h)),p&&S.upload&&([u,b]=Ro(p),S.upload.addEventListener("progress",u),S.upload.addEventListener("loadend",b)),(i.cancelToken||i.signal)&&(m=C=>{S&&(s(!C||C.type?new Ir(null,r,S):C),S.abort(),S=null)},i.cancelToken&&i.cancelToken.subscribe(m),i.signal&&(i.signal.aborted?m():i.signal.addEventListener("abort",m)));const I=Tm(i.url);if(I&&Ye.protocols.indexOf(I)===-1){s(new we("Unsupported protocol "+I+":",we.ERR_BAD_REQUEST,r));return}S.send(a||null)})},Bm=(r,t)=>{const{length:o}=r=r?r.filter(Boolean):[];if(t||o){let s=new AbortController,i;const a=function(d){if(!i){i=!0,c();const m=d instanceof Error?d:this.reason;s.abort(m instanceof we?m:new Ir(m instanceof Error?m.message:m))}};let l=t&&setTimeout(()=>{l=null,a(new we(`timeout ${t} of ms exceeded`,we.ETIMEDOUT))},t);const c=()=>{r&&(l&&clearTimeout(l),l=null,r.forEach(d=>{d.unsubscribe?d.unsubscribe(a):d.removeEventListener("abort",a)}),r=null)};r.forEach(d=>d.addEventListener("abort",a));const{signal:p}=s;return p.unsubscribe=()=>H.asap(c),p}},Nm=function*(r,t){let o=r.byteLength;if(o<t){yield r;return}let s=0,i;for(;s<o;)i=s+t,yield r.slice(s,i),s=i},Wm=async function*(r,t){for await(const o of Dm(r))yield*Nm(o,t)},Dm=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}const t=r.getReader();try{for(;;){const{done:o,value:s}=await t.read();if(o)break;yield s}}finally{await t.cancel()}},wi=(r,t,o,s)=>{const i=Wm(r,t);let a=0,l,c=p=>{l||(l=!0,s&&s(p))};return new ReadableStream({async pull(p){try{const{done:d,value:m}=await i.next();if(d){c(),p.close();return}let u=m.byteLength;if(o){let h=a+=u;o(h)}p.enqueue(new Uint8Array(m))}catch(d){throw c(d),d}},cancel(p){return c(p),i.return()}},{highWaterMark:2})},Zo=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Nl=Zo&&typeof ReadableStream=="function",$m=Zo&&(typeof TextEncoder=="function"?(r=>t=>r.encode(t))(new TextEncoder):async r=>new Uint8Array(await new Response(r).arrayBuffer())),Wl=(r,...t)=>{try{return!!r(...t)}catch{return!1}},Fm=Nl&&Wl(()=>{let r=!1;const t=new Request(Ye.origin,{body:new ReadableStream,method:"POST",get duplex(){return r=!0,"half"}}).headers.has("Content-Type");return r&&!t}),ji=64*1024,Xs=Nl&&Wl(()=>H.isReadableStream(new Response("").body)),Po={stream:Xs&&(r=>r.body)};Zo&&(r=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Po[t]&&(Po[t]=H.isFunction(r[t])?o=>o[t]():(o,s)=>{throw new we(`Response type '${t}' is not supported`,we.ERR_NOT_SUPPORT,s)})})})(new Response);const Om=async r=>{if(r==null)return 0;if(H.isBlob(r))return r.size;if(H.isSpecCompliantForm(r))return(await new Request(Ye.origin,{method:"POST",body:r}).arrayBuffer()).byteLength;if(H.isArrayBufferView(r)||H.isArrayBuffer(r))return r.byteLength;if(H.isURLSearchParams(r)&&(r=r+""),H.isString(r))return(await $m(r)).byteLength},qm=async(r,t)=>{const o=H.toFiniteNumber(r.getContentLength());return o??Om(t)},Vm=Zo&&(async r=>{let{url:t,method:o,data:s,signal:i,cancelToken:a,timeout:l,onDownloadProgress:c,onUploadProgress:p,responseType:d,headers:m,withCredentials:u="same-origin",fetchOptions:h}=Bl(r);d=d?(d+"").toLowerCase():"text";let b=Bm([i,a&&a.toAbortSignal()],l),j;const _=b&&b.unsubscribe&&(()=>{b.unsubscribe()});let S;try{if(p&&Fm&&o!=="get"&&o!=="head"&&(S=await qm(m,s))!==0){let f=new Request(t,{method:"POST",body:s,duplex:"half"}),P;if(H.isFormData(s)&&(P=f.headers.get("content-type"))&&m.setContentType(P),f.body){const[w,O]=xi(S,Ro(bi(p)));s=wi(f.body,ji,w,O)}}H.isString(u)||(u=u?"include":"omit");const R="credentials"in Request.prototype;j=new Request(t,{...h,signal:b,method:o.toUpperCase(),headers:m.normalize().toJSON(),body:s,duplex:"half",credentials:R?u:void 0});let I=await fetch(j,h);const C=Xs&&(d==="stream"||d==="response");if(Xs&&(c||C&&_)){const f={};["status","statusText","headers"].forEach(V=>{f[V]=I[V]});const P=H.toFiniteNumber(I.headers.get("content-length")),[w,O]=c&&xi(P,Ro(bi(c),!0))||[];I=new Response(wi(I.body,ji,w,()=>{O&&O(),_&&_()}),f)}d=d||"text";let z=await Po[H.findKey(Po,d)||"text"](I,r);return!C&&_&&_(),await new Promise((f,P)=>{El(f,P,{data:z,headers:rt.from(I.headers),status:I.status,statusText:I.statusText,config:r,request:j})})}catch(R){throw _&&_(),R&&R.name==="TypeError"&&/Load failed|fetch/i.test(R.message)?Object.assign(new we("Network Error",we.ERR_NETWORK,r,j),{cause:R.cause||R}):we.from(R,R&&R.code,r,j)}}),Zs={http:nm,xhr:Mm,fetch:Vm};H.forEach(Zs,(r,t)=>{if(r){try{Object.defineProperty(r,"name",{value:t})}catch{}Object.defineProperty(r,"adapterName",{value:t})}});const Si=r=>`- ${r}`,Um=r=>H.isFunction(r)||r===null||r===!1,Dl={getAdapter:r=>{r=H.isArray(r)?r:[r];const{length:t}=r;let o,s;const i={};for(let a=0;a<t;a++){o=r[a];let l;if(s=o,!Um(o)&&(s=Zs[(l=String(o)).toLowerCase()],s===void 0))throw new we(`Unknown adapter '${l}'`);if(s)break;i[l||"#"+a]=s}if(!s){const a=Object.entries(i).map(([c,p])=>`adapter ${c} `+(p===!1?"is not supported by the environment":"is not available in the build"));let l=t?a.length>1?`since :
`+a.map(Si).join(`
`):" "+Si(a[0]):"as no adapter specified";throw new we("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return s},adapters:Zs};function xs(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new Ir(null,r)}function ki(r){return xs(r),r.headers=rt.from(r.headers),r.data=ys.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),Dl.getAdapter(r.adapter||Jr.adapter)(r).then(function(s){return xs(r),s.data=ys.call(r,r.transformResponse,s),s.headers=rt.from(s.headers),s},function(s){return zl(s)||(xs(r),s&&s.response&&(s.response.data=ys.call(r,r.transformResponse,s.response),s.response.headers=rt.from(s.response.headers))),Promise.reject(s)})}const $l="1.10.0",Jo={};["object","boolean","number","function","string","symbol"].forEach((r,t)=>{Jo[r]=function(s){return typeof s===r||"a"+(t<1?"n ":" ")+r}});const Ci={};Jo.transitional=function(t,o,s){function i(a,l){return"[Axios v"+$l+"] Transitional option '"+a+"'"+l+(s?". "+s:"")}return(a,l,c)=>{if(t===!1)throw new we(i(l," has been removed"+(o?" in "+o:"")),we.ERR_DEPRECATED);return o&&!Ci[l]&&(Ci[l]=!0,console.warn(i(l," has been deprecated since v"+o+" and will be removed in the near future"))),t?t(a,l,c):!0}};Jo.spelling=function(t){return(o,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function Hm(r,t,o){if(typeof r!="object")throw new we("options must be an object",we.ERR_BAD_OPTION_VALUE);const s=Object.keys(r);let i=s.length;for(;i-- >0;){const a=s[i],l=t[a];if(l){const c=r[a],p=c===void 0||l(c,a,r);if(p!==!0)throw new we("option "+a+" must be "+p,we.ERR_BAD_OPTION_VALUE);continue}if(o!==!0)throw new we("Unknown option "+a,we.ERR_BAD_OPTION)}}const vo={assertOptions:Hm,validators:Jo},wt=vo.validators;let or=class{constructor(t){this.defaults=t||{},this.interceptors={request:new fi,response:new fi}}async request(t,o){try{return await this._request(t,o)}catch(s){if(s instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";try{s.stack?a&&!String(s.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+a):s.stack=a}catch{}}throw s}}_request(t,o){typeof t=="string"?(o=o||{},o.url=t):o=t||{},o=ar(this.defaults,o);const{transitional:s,paramsSerializer:i,headers:a}=o;s!==void 0&&vo.assertOptions(s,{silentJSONParsing:wt.transitional(wt.boolean),forcedJSONParsing:wt.transitional(wt.boolean),clarifyTimeoutError:wt.transitional(wt.boolean)},!1),i!=null&&(H.isFunction(i)?o.paramsSerializer={serialize:i}:vo.assertOptions(i,{encode:wt.function,serialize:wt.function},!0)),o.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?o.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:o.allowAbsoluteUrls=!0),vo.assertOptions(o,{baseUrl:wt.spelling("baseURL"),withXsrfToken:wt.spelling("withXSRFToken")},!0),o.method=(o.method||this.defaults.method||"get").toLowerCase();let l=a&&H.merge(a.common,a[o.method]);a&&H.forEach(["delete","get","head","post","put","patch","common"],j=>{delete a[j]}),o.headers=rt.concat(l,a);const c=[];let p=!0;this.interceptors.request.forEach(function(_){typeof _.runWhen=="function"&&_.runWhen(o)===!1||(p=p&&_.synchronous,c.unshift(_.fulfilled,_.rejected))});const d=[];this.interceptors.response.forEach(function(_){d.push(_.fulfilled,_.rejected)});let m,u=0,h;if(!p){const j=[ki.bind(this),void 0];for(j.unshift.apply(j,c),j.push.apply(j,d),h=j.length,m=Promise.resolve(o);u<h;)m=m.then(j[u++],j[u++]);return m}h=c.length;let b=o;for(u=0;u<h;){const j=c[u++],_=c[u++];try{b=j(b)}catch(S){_.call(this,S);break}}try{m=ki.call(this,b)}catch(j){return Promise.reject(j)}for(u=0,h=d.length;u<h;)m=m.then(d[u++],d[u++]);return m}getUri(t){t=ar(this.defaults,t);const o=Ml(t.baseURL,t.url,t.allowAbsoluteUrls);return Pl(o,t.params,t.paramsSerializer)}};H.forEach(["delete","get","head","options"],function(t){or.prototype[t]=function(o,s){return this.request(ar(s||{},{method:t,url:o,data:(s||{}).data}))}});H.forEach(["post","put","patch"],function(t){function o(s){return function(a,l,c){return this.request(ar(c||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:a,data:l}))}}or.prototype[t]=o(),or.prototype[t+"Form"]=o(!0)});let Ym=class Fl{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let o;this.promise=new Promise(function(a){o=a});const s=this;this.promise.then(i=>{if(!s._listeners)return;let a=s._listeners.length;for(;a-- >0;)s._listeners[a](i);s._listeners=null}),this.promise.then=i=>{let a;const l=new Promise(c=>{s.subscribe(c),a=c}).then(i);return l.cancel=function(){s.unsubscribe(a)},l},t(function(a,l,c){s.reason||(s.reason=new Ir(a,l,c),o(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const o=this._listeners.indexOf(t);o!==-1&&this._listeners.splice(o,1)}toAbortSignal(){const t=new AbortController,o=s=>{t.abort(s)};return this.subscribe(o),t.signal.unsubscribe=()=>this.unsubscribe(o),t.signal}static source(){let t;return{token:new Fl(function(i){t=i}),cancel:t}}};function Qm(r){return function(o){return r.apply(null,o)}}function Gm(r){return H.isObject(r)&&r.isAxiosError===!0}const Js={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Js).forEach(([r,t])=>{Js[t]=r});function Ol(r){const t=new or(r),o=xl(or.prototype.request,t);return H.extend(o,or.prototype,t,{allOwnKeys:!0}),H.extend(o,t,null,{allOwnKeys:!0}),o.create=function(i){return Ol(ar(r,i))},o}const ke=Ol(Jr);ke.Axios=or;ke.CanceledError=Ir;ke.CancelToken=Ym;ke.isCancel=zl;ke.VERSION=$l;ke.toFormData=Xo;ke.AxiosError=we;ke.Cancel=ke.CanceledError;ke.all=function(t){return Promise.all(t)};ke.spread=Qm;ke.isAxiosError=Gm;ke.mergeConfig=ar;ke.AxiosHeaders=rt;ke.formToJSON=r=>Ll(H.isHTMLForm(r)?new FormData(r):r);ke.getAdapter=Dl.getAdapter;ke.HttpStatusCode=Js;ke.default=ke;const{Axios:Qv,AxiosError:Gv,CanceledError:Kv,isCancel:Xv,CancelToken:Zv,VERSION:Jv,all:e5,Cancel:t5,isAxiosError:r5,spread:o5,toFormData:s5,AxiosHeaders:n5,HttpStatusCode:i5,formToJSON:a5,getAdapter:l5,mergeConfig:c5}=ke,Km={apiUrl:"/api",documentServiceUrl:"http://16.170.220.109:3003/api/documents",authServiceUrl:"http://16.170.220.109:3001/api/auth",solarApiUrl:"http://16.170.220.109:3005/api/solar-calculator",userApiUrl:"http://16.170.220.109:3002/api/users",contractorApiUrl:"http://16.170.220.109:3004/api/contractors",marketplaceApiUrl:"/api/marketplace",quoteServiceUrl:"/api/quotes",environment:"development",enableLogging:!0,maxFileSize:parseInt("52428800")||50*1024*1024,allowedFileTypes:"application/pdf,image/jpeg,image/png".split(",")||["application/pdf","image/jpeg","image/png"],supportedLanguages:"en,ar".split(",")||["en","ar"],defaultLanguage:"en",theme:{primaryColor:"#3eb2b1",accentColor:"#2c8a89",backgroundColor:"#ffffff"},solarCalculator:{minConsumption:parseInt("6000")||6e3,maxConsumption:parseInt("24000")||24e3,minBillResidential:parseInt("1080")||1080,minBillCommercial:parseInt("1200")||1200,maxBill:parseInt("10000")||1e4,minInstallments:parseInt("12")||12,maxInstallments:parseInt("30")||30,defaultConsumption:parseInt("8000")||8e3,defaultInstallments:parseInt("12")||12,installmentOptions:"12,18,24,30".split(",").map(Number)||[12,18,24,30],consumptionPlaceholder:parseInt("8000,2100".split(",")[0])||8e3,billPlaceholder:parseInt("8000,2100".split(",")[1])||2100,enableMarketingBanner:!0}},Xm={apiUrl:"/api",documentServiceUrl:"http://16.170.220.109:3003/api/documents",authServiceUrl:"http://16.170.220.109:3001/api/auth",solarApiUrl:"http://16.170.220.109:3005/api/solar-calculator",userApiUrl:"http://16.170.220.109:3002/api/users",contractorApiUrl:"http://16.170.220.109:3004/api/contractors",marketplaceApiUrl:"/api/marketplace",quoteServiceUrl:"/api/quotes",environment:"production",enableLogging:!0,maxFileSize:parseInt("52428800")||50*1024*1024,allowedFileTypes:"application/pdf,image/jpeg,image/png".split(",")||["application/pdf","image/jpeg","image/png"],supportedLanguages:"en,ar".split(",")||["en","ar"],defaultLanguage:"en",theme:{primaryColor:"#3eb2b1",accentColor:"#2c8a89",backgroundColor:"#ffffff"},solarCalculator:{minConsumption:parseInt("6000")||6e3,maxConsumption:parseInt("24000")||24e3,minBillResidential:parseInt("1080")||1080,minBillCommercial:parseInt("1200")||1200,maxBill:parseInt("10000")||1e4,minInstallments:parseInt("12")||12,maxInstallments:parseInt("30")||30,defaultConsumption:parseInt("8000")||8e3,defaultInstallments:parseInt("12")||12,installmentOptions:"12,18,24,30".split(",").map(Number)||[12,18,24,30],consumptionPlaceholder:parseInt("8000,2100".split(",")[0])||8e3,billPlaceholder:parseInt("8000,2100".split(",")[1])||2100,enableMarketingBanner:!0}},Zm={apiUrl:"/api",documentServiceUrl:"http://16.170.220.109:3003/api/documents",authServiceUrl:"http://16.170.220.109:3001/api/auth",solarApiUrl:"http://16.170.220.109:3005/api/solar-calculator",userApiUrl:"http://16.170.220.109:3002/api/users",contractorApiUrl:"http://16.170.220.109:3004/api/contractors",marketplaceApiUrl:"/api/marketplace",quoteServiceUrl:"/api/quotes",environment:"testing",enableLogging:!0,maxFileSize:10*1024*1024,allowedFileTypes:"application/pdf,image/jpeg,image/png".split(",")||["application/pdf","image/jpeg","image/png"],supportedLanguages:"en,ar".split(",")||["en","ar"],defaultLanguage:"en",theme:{primaryColor:"#3eb2b1",accentColor:"#2c8a89",backgroundColor:"#ffffff"},solarCalculator:{minConsumption:parseInt("6000")||6e3,maxConsumption:parseInt("24000")||24e3,minBillResidential:parseInt("1080")||1080,minBillCommercial:parseInt("1200")||1200,maxBill:parseInt("10000")||1e4,minInstallments:parseInt("12")||12,maxInstallments:parseInt("30")||30,defaultConsumption:parseInt("8000")||8e3,defaultInstallments:parseInt("12")||12,installmentOptions:"12,18,24,30".split(",").map(Number)||[12,18,24,30],consumptionPlaceholder:parseInt("8000,2100".split(",")[0])||8e3,billPlaceholder:parseInt("8000,2100".split(",")[1])||2100,enableMarketingBanner:!0}};function Jm(){switch("production"){case"production":return Xm;case"testing":return Zm;default:return Km}}const Ce=Jm();class eg{constructor(){Ve(this,"authClient");Ve(this,"userClient");Ve(this,"documentClient");Ve(this,"contractorClient");Ve(this,"quoteClient");Ve(this,"accessToken",null);this.accessToken=localStorage.getItem("rabhan_access_token"),this.authClient=ke.create({baseURL:Ce.authServiceUrl,timeout:1e4,withCredentials:!0,headers:{"Content-Type":"application/json"}}),this.userClient=ke.create({baseURL:Ce.userApiUrl,timeout:1e4,withCredentials:!0,headers:{"Content-Type":"application/json"}}),this.documentClient=ke.create({baseURL:Ce.documentServiceUrl,timeout:15e3,withCredentials:!0,headers:{"Content-Type":"application/json"}}),this.contractorClient=ke.create({baseURL:Ce.contractorApiUrl,timeout:1e4,withCredentials:!0,headers:{"Content-Type":"application/json"}}),this.quoteClient=ke.create({baseURL:Ce.quoteServiceUrl,timeout:15e3,withCredentials:!0,headers:{"Content-Type":"application/json"}}),this.setupInterceptors()}setupInterceptors(){[this.authClient,this.userClient,this.documentClient,this.contractorClient,this.quoteClient].forEach(t=>{t.interceptors.request.use(async o=>(o.headers["X-Request-ID"]=this.generateRequestId(),o.headers["X-Request-Time"]=new Date().toISOString(),this.accessToken&&(o.headers.Authorization=`Bearer ${this.accessToken}`),o),o=>(console.error("❌ Request Error:",o),Promise.reject(o))),t.interceptors.response.use(o=>o,async o=>(console.error(`❌ API Error: ${o.config?.url}`,{status:o.response?.status,data:o.response?.data,message:o.message}),o.response?.status===401&&(console.warn("🔒 Session expired, redirecting to login..."),console.warn("🔍 Request URL:",o.config?.url),console.warn("🔍 Request data:",o.config?.data),this.handleSessionExpired()),o.response?.status===403&&console.warn("🚫 Access denied"),o.response||console.error("🌐 Network error - service unavailable"),Promise.reject(this.formatError(o))))})}generateRequestId(){return`req_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}setAccessToken(t){this.accessToken=t,localStorage.setItem("rabhan_access_token",t),console.log("🔑 Access token set for API requests")}clearAccessToken(){this.accessToken=null,localStorage.removeItem("rabhan_access_token"),console.log("🔑 Access token cleared")}getAccessToken(){return this.accessToken}handleSessionExpired(){window.dispatchEvent(new CustomEvent("session-expired"))}isTokenExpired(t){try{const o=JSON.parse(atob(t.split(".")[1])),s=Date.now()/1e3;return o.exp<s+30}catch(o){return console.error("Error checking token expiration:",o),!0}}async refreshTokenIfNeeded(){try{const t=await this.authClient.post("/auth/refresh");t.data.success&&t.data.data?.accessToken&&(this.setAccessToken(t.data.data.accessToken),console.log("✅ Token refreshed successfully"))}catch(t){throw console.error("❌ Token refresh failed:",t),t}}formatError(t){const o=t.response;return o?{success:!1,error:o.data?.error||o.statusText||"API Error",code:o.data?.code||`HTTP_${o.status}`,status:o.status,details:o.data}:t.request?{success:!1,error:"Network error - please check your connection",code:"NETWORK_ERROR",status:0,details:{message:t.message}}:{success:!1,error:t.message||"Unknown error occurred",code:"REQUEST_ERROR",status:0,details:{message:t.message}}}async request(t,o,s){try{let i;const a=s?{data:s}:{};switch(o.toUpperCase()){case"GET":i=await this.authClient.get(t);break;case"POST":i=await this.authClient.post(t,s);break;case"PUT":i=await this.authClient.put(t,s);break;case"DELETE":i=await this.authClient.delete(t);break;default:throw new Error(`Unsupported HTTP method: ${o}`)}return i.data}catch(i){throw console.error(`API request error [${o} ${t}]:`,i),this.formatError(i)}}get auth(){return{register:async t=>(await this.authClient.post("/register",{...t,role:t.role||"USER"})).data,login:async t=>(await this.authClient.post("/login",t)).data,logout:async()=>(await this.authClient.post("/logout")).data,sendPhoneOTP:async t=>(await this.authClient.post("/phone/send-otp",{phoneNumber:t})).data,verifyPhoneOTP:async(t,o)=>(await this.authClient.post("/phone/verify-otp",{phoneNumber:t,otp:o})).data,sendEmailVerification:async()=>(await this.authClient.post("/email/send-verification")).data,verifyEmail:async t=>(await this.authClient.post("/email/verify",{token:t})).data,getCurrentUser:async()=>(await this.authClient.get("/profile")).data,updateCurrentUser:async t=>(await this.authClient.put("/profile",t)).data,refreshSession:async()=>(await this.authClient.post("/refresh")).data,registerContractor:async t=>(await this.authClient.post("/contractor/register",{...t,role:"CONTRACTOR"})).data}}get user(){return{createProfile:async t=>(await this.userClient.post("/profiles",t)).data,createRegistrationProfile:async t=>(await this.userClient.post("/profiles/register",t)).data,getProfile:async t=>{const o=t?`/profiles/${t}`:"/profiles/me";return(await this.userClient.get(o)).data},updateProfile:async(t,o)=>{const s=t?`/profiles/${t}`:"/profiles/me";return(await this.userClient.put(s,o)).data},checkBNPLEligibility:async t=>{const o=t?`/profiles/${t}/bnpl-eligibility`:"/profiles/me/bnpl-eligibility";return(await this.userClient.get(o)).data},getDocuments:async t=>{const o=t?`/profiles/${t}/documents`:"/profiles/me/documents";return(await this.userClient.get(o)).data},getUserDocuments:async t=>{const o=t?`/profiles/${t}/documents`:"/profiles/me/documents";return(await this.userClient.get(o)).data}}}get documents(){return{uploadDocument:async(t,o,s)=>{const i=new FormData;return i.append("file",o),i.append("documentType",t),s&&i.append("metadata",JSON.stringify(s)),(await this.documentClient.post("/upload",i,{headers:{"Content-Type":"multipart/form-data"}})).data},getDocumentStatus:async t=>(await this.documentClient.get(`/status/${t}`)).data,downloadDocument:async t=>(await this.documentClient.get(`/download/${t}`,{responseType:"blob"})).data}}get health(){return{checkAuthService:async()=>(await this.authClient.get("/health")).data,checkUserService:async()=>(await this.userClient.get("/health")).data,checkDocumentService:async()=>(await this.documentClient.get("/health")).data,checkAllServices:async()=>{const[t,o,s]=await Promise.allSettled([this.health.checkAuthService(),this.health.checkUserService(),this.health.checkDocumentService()]);return{auth:t.status==="fulfilled"?t.value:{success:!1,error:"Service unavailable"},user:o.status==="fulfilled"?o.value:{success:!1,error:"Service unavailable"},document:s.status==="fulfilled"?s.value:{success:!1,error:"Service unavailable"}}}}}getAuthServiceInstance(){return this.authClient}getUserServiceInstance(){return this.userClient}getDocumentServiceInstance(){return this.documentClient}getContractorServiceInstance(){return this.contractorClient}getQuoteServiceInstance(){return this.quoteClient}}const _e=new eg,yt=_e.getContractorServiceInstance(),bs=Object.freeze(Object.defineProperty({__proto__:null,api:yt,apiService:_e},Symbol.toStringTag,{value:"Module"}));class tg{constructor(){Ve(this,"listeners",new Set);Ve(this,"currentState",{isAuthenticated:!1,user:null,isLoading:!1,error:null});Ve(this,"hasInitialized",!1);window.addEventListener("session-expired",this.handleSessionExpired.bind(this)),this.hasInitialized||(this.hasInitialized=!0,this.checkAuthStatus())}transformProfileData(t){return{region:t.region,city:t.city,district:t.district,street_address:t.streetAddress,landmark:t.landmark,postal_code:t.postalCode,property_type:t.propertyType,property_ownership:t.propertyOwnership,roof_size:t.roofSize,gps_latitude:t.gpsLatitude,gps_longitude:t.gpsLongitude,electricity_consumption:t.electricityConsumption,electricity_meter_number:t.electricityMeterNumber,preferred_language:t.preferredLanguage,email_notifications:t.emailNotifications,sms_notifications:t.smsNotifications,marketing_consent:t.marketingConsent,profile_completed:t.profileCompleted,profile_completion_percentage:t.profileCompletionPercentage,bnpl_eligible:t.bnplEligible,bnpl_max_amount:t.bnplMaxAmount,bnpl_risk_score:t.bnplRiskScore,employment_status:t.employmentStatus,employer_name:t.employerName,job_title:t.jobTitle,monthly_income:t.monthlyIncome,years_employed:t.yearsEmployed}}setState(t){this.currentState={...this.currentState,...t},this.notifyListeners()}notifyListeners(){this.listeners.forEach(t=>t(this.currentState))}subscribe(t){return this.listeners.add(t),t(this.currentState),()=>{this.listeners.delete(t)}}getState(){return{...this.currentState}}async register(t){try{if(this.setState({isLoading:!0,error:null}),t.confirmPassword&&t.password!==t.confirmPassword)throw new Error("Passwords do not match");const{confirmPassword:o,...s}=t;console.log("🔐 Attempting user registration...",{email:s.email});const i=await _e.auth.register(s);if(i.success&&i.data){console.log("✅ Registration successful");const{accessToken:a,refreshToken:l}=i.data;a&&(_e.setAccessToken(a),console.log("✅ Access token set after registration"));const c=await _e.auth.getCurrentUser();return c.success&&c.data?(console.log("✅ User data fetched successfully after registration"),this.setState({isAuthenticated:!0,user:c.data,isLoading:!1,error:null}),{success:!0,user:c.data}):(console.warn("⚠️ Could not fetch user data after registration"),{success:!0})}else{const a=i.error||"Registration failed";return console.error("❌ Registration failed:",a),this.setState({isLoading:!1,error:a}),{success:!1,error:a}}}catch(o){const s=o.error||o.message||"Registration failed";return console.error("❌ Registration error:",s),this.setState({isLoading:!1,error:s}),{success:!1,error:s}}}async login(t){try{this.setState({isLoading:!0,error:null}),console.log("🔐 Attempting user login...",{email:t.email});const o=await _e.auth.login(t);if(o.success&&o.data){console.log("✅ Login successful, setting access token...");const{accessToken:s}=o.data;s&&_e.setAccessToken(s);const i=await _e.auth.getCurrentUser();if(i.success&&i.data){console.log("✅ User data fetched successfully");let a=i.data;if(i.data.role==="USER")try{const l=await _e.user.getProfile();l.success&&l.data?(console.log("✅ Profile data fetched successfully"),a={...this.transformProfileData(l.data),...i.data,id:i.data.id,email:i.data.email,role:i.data.role,status:i.data.status,email_verified:i.data.email_verified,phone_verified:i.data.phone_verified,sama_verified:i.data.sama_verified,created_at:i.data.created_at,updated_at:i.data.updated_at}):console.log("ℹ️ No profile data found, using auth data only")}catch(l){console.warn("⚠️ Failed to fetch profile data, continuing with auth data only:",l)}else console.log("ℹ️ Contractor user - skipping profile fetch from user service");return this.setState({isAuthenticated:!0,user:a,isLoading:!1,error:null}),{success:!0,user:a}}else{const a="Failed to fetch user data after login";return console.error("❌ Failed to fetch user data:",a),this.setState({isLoading:!1,error:a}),{success:!1,error:a}}}else{const s=o.error||"Login failed";return console.error("❌ Login failed:",s),this.setState({isLoading:!1,error:s}),{success:!1,error:s}}}catch(o){const s=o.error||o.message||"Login failed";return console.error("❌ Login error:",s),this.setState({isLoading:!1,error:s}),{success:!1,error:s}}}async logout(){try{return this.setState({isLoading:!0,error:null}),console.log("🚪 Logging out user..."),await _e.auth.logout(),console.log("✅ Logout successful"),_e.clearAccessToken(),this.setState({isAuthenticated:!1,user:null,isLoading:!1,error:null}),{success:!0}}catch(t){return console.warn("⚠️ Logout warning:",t.error||t.message),_e.clearAccessToken(),this.setState({isAuthenticated:!1,user:null,isLoading:!1,error:null}),{success:!0}}}async sendPhoneOTP(t){try{console.log("📱 Sending phone OTP...",{phone:t});const o=await _e.auth.sendPhoneOTP(t);if(o.success)return console.log("✅ Phone OTP sent successfully"),{success:!0};{const s=o.error||"Failed to send OTP";return console.error("❌ Failed to send phone OTP:",s),{success:!1,error:s}}}catch(o){const s=o.error||o.message||"Failed to send OTP";return console.error("❌ Phone OTP error:",s),{success:!1,error:s}}}async lookupEmailForLogin(t,o){try{const s=await _e.request("/login/email/lookup","POST",{email:t,userType:o});return{success:s.success,data:s.data,error:s.error}}catch(s){return console.error("Email lookup error:",s),{success:!1,error:s.message||"Email lookup failed"}}}async sendLoginOTPToPhone(t,o){try{const s=await _e.request("/login/email/send-otp","POST",{email:t,userType:o});return{success:s.success,data:s.data,error:s.error}}catch(s){return console.error("Send login OTP error:",s),{success:!1,error:s.message||"Failed to send OTP"}}}async verifyLoginOTP(t){try{const o=await _e.request("/login/email/verify-otp","POST",t);return{success:o.success,error:o.error}}catch(o){return console.error("Verify login OTP error:",o),{success:!1,error:o.message||"OTP verification failed"}}}async verifyPhoneOTP(t){try{console.log("🔍 Verifying phone OTP...",{phone:t.phone});const o=await _e.auth.verifyPhoneOTP(t.phone,t.otp);if(o.success)return console.log("✅ Phone OTP verified successfully"),o.data&&this.currentState.user&&this.setState({user:{...this.currentState.user,...o.data}}),{success:!0,user:o.data};{const s=o.error||"Invalid OTP";return console.error("❌ Phone OTP verification failed:",s),{success:!1,error:s}}}catch(o){const s=o.error||o.message||"OTP verification failed";return console.error("❌ Phone OTP verification error:",s),{success:!1,error:s}}}async sendEmailVerification(){try{console.log("📧 Sending email verification...");const t=await _e.auth.sendEmailVerification();if(t.success)return console.log("✅ Email verification sent successfully"),{success:!0};{const o=t.error||"Failed to send email verification";return console.error("❌ Failed to send email verification:",o),{success:!1,error:o}}}catch(t){const o=t.error||t.message||"Failed to send email verification";return console.error("❌ Email verification error:",o),{success:!1,error:o}}}async verifyEmail(t){try{console.log("📧 Verifying email...");const o=await _e.auth.verifyEmail(t);if(o.success)return console.log("✅ Email verified successfully"),o.data&&this.currentState.user&&this.setState({user:{...this.currentState.user,...o.data}}),{success:!0,user:o.data};{const s=o.error||"Email verification failed";return console.error("❌ Email verification failed:",s),{success:!1,error:s}}}catch(o){const s=o.error||o.message||"Email verification failed";return console.error("❌ Email verification error:",s),{success:!1,error:s}}}async checkAuthStatus(){try{this.setState({isLoading:!0});const t=await _e.auth.getCurrentUser();if(t.success&&t.data){let o=t.data;if(t.data.role==="USER")try{const s=await _e.user.getProfile();s.success&&s.data?(console.log("✅ Profile data fetched successfully"),o={...this.transformProfileData(s.data),...t.data,id:t.data.id,email:t.data.email,role:t.data.role,status:t.data.status,email_verified:t.data.email_verified,phone_verified:t.data.phone_verified,sama_verified:t.data.sama_verified,created_at:t.data.created_at,updated_at:t.data.updated_at}):console.log("ℹ️ No profile data found, using auth data only")}catch(s){console.warn("⚠️ Failed to fetch profile data, continuing with auth data only:",s)}else console.log("ℹ️ Contractor user - skipping profile fetch from user service");this.setState({isAuthenticated:!0,user:o,isLoading:!1,error:null})}else console.log("ℹ️ User is not authenticated"),this.setState({isAuthenticated:!1,user:null,isLoading:!1,error:null})}catch(t){console.error("❌ Authentication check failed:",t),this.setState({isAuthenticated:!1,user:null,isLoading:!1,error:null})}}async refreshSession(){try{console.log("🔄 Refreshing session...");const t=await _e.auth.refreshSession();if(t.success)return console.log("✅ Session refreshed successfully"),await this.checkAuthStatus(),{success:!0};{const o=t.error||"Failed to refresh session";return console.error("❌ Session refresh failed:",o),{success:!1,error:o}}}catch(t){const o=t.error||t.message||"Session refresh failed";return console.error("❌ Session refresh error:",o),{success:!1,error:o}}}handleSessionExpired(){console.warn("🔒 Session expired detected"),this.setState({isAuthenticated:!1,user:null,isLoading:!1,error:"Your session has expired. Please log in again."})}isAuthenticated(){return this.currentState.isAuthenticated}getCurrentUser(){return this.currentState.user}async updateCurrentUser(t){try{this.setState({isLoading:!0,error:null}),console.log("🔄 Updating current user...",t);const o=await _e.auth.updateCurrentUser(t);if(o.success){console.log("✅ User updated successfully");const s=await this.refreshUserData();return this.setState({isLoading:!1}),{success:!0,user:s.user}}else{const s=o.error||"Failed to update user";return console.error("❌ User update failed:",s),this.setState({isLoading:!1,error:s}),{success:!1,error:s}}}catch(o){const s=o.error||o.message||"Update failed";return console.error("❌ User update error:",s),this.setState({isLoading:!1,error:s}),{success:!1,error:s}}}async refreshUserData(){try{console.log("🔄 Refreshing user data...");const t=await _e.auth.getCurrentUser();if(t.success&&t.data){console.log("✅ Auth user data fetched successfully");let o=t.data;if(t.data.role==="USER")try{const s=await _e.user.getProfile();s.success&&s.data?(console.log("✅ Profile data fetched successfully"),o={...this.transformProfileData(s.data),...t.data,id:t.data.id,email:t.data.email,role:t.data.role,status:t.data.status,email_verified:t.data.email_verified,phone_verified:t.data.phone_verified,sama_verified:t.data.sama_verified,created_at:t.data.created_at,updated_at:t.data.updated_at}):console.log("ℹ️ No profile data found, using auth data only")}catch(s){console.warn("⚠️ Failed to fetch profile data during refresh, continuing with auth data only:",s)}else console.log("ℹ️ Contractor user - skipping profile fetch from user service");return this.setState({...this.currentState,user:o}),{success:!0,user:o}}else{const o="Failed to refresh user data";return console.error("❌ Failed to refresh user data:",o),{success:!1,error:o}}}catch(t){const o=t.error||t.message||"Failed to refresh user data";return console.error("❌ Error refreshing user data:",o),{success:!1,error:o}}}isEmailVerified(){return this.currentState.user?.emailVerified??!1}isPhoneVerified(){return this.currentState.user?.phoneVerified??!1}isSamaVerified(){return this.currentState.user?.samaVerified??!1}getUserRole(){return this.currentState.user?.role??null}clearError(){this.setState({error:null})}updateUserData(t){if(this.currentState.user){const o={...this.currentState.user,...t};console.log("🔄 Updating auth service user data:",o),this.setState({user:o})}}}const xe=new tg,Vt=({isOpen:r,onClose:t,onLoginSuccess:o,onRegister:s})=>{const{t:i,i18n:a}=ve(),l=a.language==="ar",[c,p]=y.useState({email:"",otp:"",password:"",userType:"USER",rememberMe:!1}),[d,m]=y.useState({step:"email",isEmailVerified:!1,isOtpVerified:!1,otpSent:!1,isSendingOtp:!1,isVerifyingOtp:!1,resendCountdown:0,maskedPhone:void 0}),[u,h]=y.useState({}),[b,j]=y.useState(!1),[_,S]=y.useState(!1),R=()=>{switch(d.step){case"email":return c.email.trim()!=="";case"otp":return c.otp.trim()!==""&&c.otp.length===6;case"password":return c.password.trim()!=="";default:return!1}};y.useEffect(()=>{r&&(p({email:"",otp:"",password:"",userType:"USER",rememberMe:!1}),m({step:"email",isEmailVerified:!1,isOtpVerified:!1,otpSent:!1,isSendingOtp:!1,isVerifyingOtp:!1,resendCountdown:0,maskedPhone:void 0}),h({}),j(!1),S(!1))},[r]),y.useEffect(()=>{const w=O=>{O.key==="Escape"&&r&&t()};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r,t]),y.useEffect(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[r]);const I=async()=>{console.log("sendOTPToPhone function called!");const w=c.email.trim();if(console.log("Trimmed email:",w),!w){console.log("Email is empty"),h({email:i("auth.validation.emailRequired")});return}console.log("Setting loading state..."),m(O=>({...O,isSendingOtp:!0})),h({});try{console.log("Looking up email:",c.email);const O=await xe.lookupEmailForLogin(c.email,c.userType);if(console.log("Lookup result:",O),O.success&&O.data?.userExists){console.log("User exists, sending OTP...");const V=await xe.sendLoginOTPToPhone(c.email,c.userType);if(console.log("OTP result:",V),V.success){m(Q=>({...Q,otpSent:!0,isSendingOtp:!1,step:"otp",resendCountdown:60,maskedPhone:V.data?.maskedPhone,isEmailVerified:!0}));const re=setInterval(()=>{m(Q=>Q.resendCountdown<=1?(clearInterval(re),{...Q,resendCountdown:0}):{...Q,resendCountdown:Q.resendCountdown-1})},1e3)}else throw new Error(V.error||"Failed to send OTP")}else console.log("User not found or lookup failed"),h({email:"Email not found or no phone number registered"})}catch(O){h({email:O.message||i("errors.loginFailed")}),m(V=>({...V,isSendingOtp:!1}))}},C=async()=>{if(!c.otp.trim()||c.otp.length!==6){h({otp:i("phone.otp.invalid")});return}m(w=>({...w,isVerifyingOtp:!0})),h({});try{const w=await xe.verifyLoginOTP({email:c.email,otp:c.otp,userType:c.userType});if(w.success)m(O=>({...O,isOtpVerified:!0,isVerifyingOtp:!1,step:"password"}));else throw new Error(w.error||"Invalid OTP")}catch(w){h({otp:w.message||i("phone.otp.invalid")}),m(O=>({...O,isVerifyingOtp:!1}))}},z=()=>{const w={};return d.step==="password"&&(c.password?c.password.length<8&&(w.password=i("auth.validation.passwordMinLength")):w.password=i("auth.validation.passwordRequired")),h(w),Object.keys(w).length===0},f=async w=>{switch(w.preventDefault(),d.step){case"email":await I();break;case"otp":await C();break;case"password":if(!z())return;j(!0),h({});try{const O=await xe.login({email:c.email,password:c.password,userType:c.userType});O.success&&O.user?(console.log("✅ Login successful:",O.user),o(O.user),t()):h({general:O.error||i("errors.loginFailed")})}catch(O){console.error("❌ Login error:",O),h({general:O.message||i("errors.loginFailed")})}finally{j(!1)}break}},P=w=>{w.target===w.currentTarget&&t()};return r?e.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:n.zIndex.modal,animation:"fadeIn 200ms ease-out"},onClick:P,children:[e.jsxs("div",{style:{width:"100%",maxWidth:"480px",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",borderRadius:"24px",border:"1px solid rgba(255, 255, 255, 0.5)",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.1), 0 0 80px rgba(62, 178, 177, 0.1)",padding:"clamp(2rem, 5vw, 2.5rem)",position:"relative",animation:"slideUp 200ms ease-out",direction:l?"rtl":"ltr"},onClick:w=>w.stopPropagation(),children:[e.jsx("button",{onClick:t,style:{position:"absolute",top:"1rem",right:l?"auto":"1rem",left:l?"1rem":"auto",width:"40px",height:"40px",border:"none",background:"rgba(107, 114, 128, 0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:n.transitions.fast,color:"#6b7280",fontSize:"1.25rem"},onMouseEnter:w=>{w.currentTarget.style.background="rgba(107, 114, 128, 0.2)"},onMouseLeave:w=>{w.currentTarget.style.background="rgba(107, 114, 128, 0.1)"},children:"×"}),e.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[e.jsx("div",{style:{width:"64px",height:"64px",background:"linear-gradient(135deg, #3eb2b1 0%, #22d3db 100%)",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.75rem",margin:"0 auto",marginBottom:"1.5rem",boxShadow:"0 8px 16px rgba(62, 178, 177, 0.3)"},children:"🔐"}),e.jsx("h2",{style:{fontSize:n.responsive.fluid.xl,fontWeight:"600",color:"#1a1a1a",margin:0,marginBottom:"0.5rem",letterSpacing:"-0.025em",fontFamily:n.typography.fonts.primary},children:i("auth.loginTitle")}),e.jsx("p",{style:{fontSize:"1rem",color:"#6b7280",margin:0,lineHeight:1.5},children:i("auth.loginSubtitle")})]}),e.jsx("div",{style:{marginBottom:"1.5rem"},children:e.jsxs("div",{style:{display:"flex",background:"rgba(62, 178, 177, 0.1)",borderRadius:"12px",padding:"4px",position:"relative"},children:[e.jsx("button",{type:"button",onClick:()=>p(w=>({...w,userType:"USER"})),style:{flex:1,padding:"0.75rem",border:"none",borderRadius:"8px",background:c.userType==="USER"?"#3eb2b1":"transparent",color:c.userType==="USER"?"#ffffff":"#6b7280",fontSize:"0.875rem",fontWeight:"500",fontFamily:n.typography.fonts.primary,cursor:"pointer",transition:n.transitions.fast},children:i("auth.userTypes.USER")||"Customer"}),e.jsx("button",{type:"button",onClick:()=>p(w=>({...w,userType:"CONTRACTOR"})),style:{flex:1,padding:"0.75rem",border:"none",borderRadius:"8px",background:c.userType==="CONTRACTOR"?"#3eb2b1":"transparent",color:c.userType==="CONTRACTOR"?"#ffffff":"#6b7280",fontSize:"0.875rem",fontWeight:"500",fontFamily:n.typography.fonts.primary,cursor:"pointer",transition:n.transitions.fast},children:i("auth.userTypes.CONTRACTOR")||"Contractor"})]})}),e.jsxs("form",{onSubmit:f,children:[u.general&&e.jsx("div",{style:{padding:"0.75rem",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"8px",color:"#dc2626",fontSize:"0.875rem",marginBottom:"1rem",textAlign:l?"right":"left"},children:u.general}),d.step==="email"&&e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151",textAlign:l?"right":"left"},children:[i("auth.email")," ",e.jsx("span",{style:{color:"#374151"},children:"*"})]}),e.jsx("input",{type:"email",value:c.email,onChange:w=>{p(O=>({...O,email:w.target.value})),d.step!=="email"&&(m({step:"email",isEmailVerified:!1,isOtpVerified:!1,otpSent:!1,isSendingOtp:!1,isVerifyingOtp:!1,resendCountdown:0,maskedPhone:void 0}),h({}))},placeholder:i("auth.emailPlaceholder"),style:{width:"100%",padding:"0.75rem",border:`1px solid ${u.email?"#ef4444":"#d1d5db"}`,borderRadius:"8px",fontSize:"1rem",backgroundColor:"#ffffff",color:"#1f2937",outline:"none",textAlign:l?"right":"left",direction:l?"rtl":"ltr",fontFamily:n.typography.fonts.primary},onFocus:w=>w.target.style.borderColor="#3eb2b1",onBlur:w=>w.target.style.borderColor=u.email?"#ef4444":"#d1d5db"}),u.email&&e.jsx("span",{style:{display:"block",marginTop:"0.25rem",fontSize:"0.75rem",color:"#ef4444"},children:u.email})]}),d.step==="otp"&&e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151",textAlign:l?"right":"left"},children:[i("phone.otp.title")," ",e.jsx("span",{style:{color:"#374151"},children:"*"})]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginBottom:"0.75rem",textAlign:l?"right":"left"},children:[i("auth.register.otpSentTo")," ",d.maskedPhone||c.email]}),e.jsx("input",{type:"text",value:c.otp,onChange:w=>{const O=w.target.value.replace(/\D/g,"");O.length<=6&&p(V=>({...V,otp:O}))},placeholder:"000000",maxLength:6,style:{width:"100%",padding:"0.75rem",border:`1px solid ${u.otp?"#ef4444":"#d1d5db"}`,borderRadius:"8px",fontSize:"1.125rem",backgroundColor:"#ffffff",color:"#1f2937",outline:"none",textAlign:"center",letterSpacing:"0.25rem",fontFamily:"monospace"},onFocus:w=>w.target.style.borderColor="#3eb2b1",onBlur:w=>w.target.style.borderColor=u.otp?"#ef4444":"#d1d5db"}),u.otp&&e.jsx("span",{style:{display:"block",marginTop:"0.25rem",fontSize:"0.75rem",color:"#ef4444"},children:u.otp}),d.resendCountdown>0?e.jsx("div",{style:{marginTop:"0.75rem",fontSize:"0.75rem",color:"#6b7280",textAlign:"center"},children:i("phone.otp.resendIn",{seconds:d.resendCountdown})}):e.jsx("button",{type:"button",onClick:I,disabled:d.isSendingOtp,style:{marginTop:"0.75rem",width:"100%",padding:"0.5rem",background:"none",color:"#3eb2b1",border:"none",fontSize:"0.875rem",cursor:"pointer",textDecoration:"underline"},children:d.isSendingOtp?i("common.loading"):i("phone.otp.resend")}),e.jsx("div",{style:{marginTop:"1rem",textAlign:"center"},children:e.jsxs("button",{type:"button",onClick:()=>{m({step:"email",isEmailVerified:!1,isOtpVerified:!1,otpSent:!1,isSendingOtp:!1,isVerifyingOtp:!1,resendCountdown:0,maskedPhone:void 0}),p(w=>({...w,otp:""})),h({})},style:{background:"none",color:"#6b7280",border:"none",fontSize:"0.875rem",cursor:"pointer",textDecoration:"underline",display:"flex",alignItems:"center",gap:"4px",margin:"0 auto"},children:[e.jsx("span",{children:l?"→":"←"}),i("auth.backToEmail","Back to Email")]})})]}),d.step==="password"&&e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",fontSize:"0.875rem",color:"#374151",textAlign:l?"right":"left"},children:[i("auth.password")," ",e.jsx("span",{style:{color:"#374151"},children:"*"})]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:_?"text":"password",value:c.password,onChange:w=>p(O=>({...O,password:w.target.value})),placeholder:i("auth.register.passwordPlaceholder")||"Enter your password",style:{width:"100%",padding:"0.75rem",paddingRight:l?"0.75rem":"3rem",paddingLeft:l?"3rem":"0.75rem",border:`1px solid ${u.password?"#ef4444":"#d1d5db"}`,borderRadius:"8px",fontSize:"1rem",backgroundColor:"#ffffff",color:"#1f2937",outline:"none",textAlign:l?"right":"left",direction:l?"rtl":"ltr",fontFamily:n.typography.fonts.primary,boxSizing:"border-box"},onFocus:w=>w.target.style.borderColor="#3eb2b1",onBlur:w=>w.target.style.borderColor=u.password?"#ef4444":"#d1d5db"}),e.jsx("button",{type:"button",onClick:()=>S(!_),style:{position:"absolute",top:"50%",right:l?"auto":"0.75rem",left:l?"0.75rem":"auto",transform:"translateY(-50%)",border:"none",background:"none",color:"#6b7280",fontSize:"1rem",cursor:"pointer",padding:"0.25rem"},children:_?"👁️":"👁️‍🗨️"})]}),u.password&&e.jsx("span",{style:{display:"block",marginTop:"0.25rem",fontSize:"0.75rem",color:"#ef4444"},children:u.password}),e.jsx("div",{style:{marginTop:"1rem",textAlign:"center"},children:e.jsxs("button",{type:"button",onClick:()=>{m({step:"email",isEmailVerified:!1,isOtpVerified:!1,otpSent:!1,isSendingOtp:!1,isVerifyingOtp:!1,resendCountdown:0,maskedPhone:void 0}),p(w=>({...w,otp:"",password:""})),h({})},style:{background:"none",color:"#6b7280",border:"none",fontSize:"0.875rem",cursor:"pointer",textDecoration:"underline",display:"flex",alignItems:"center",gap:"4px",margin:"0 auto"},children:[e.jsx("span",{children:l?"→":"←"}),i("auth.backToEmail","Back to Email")]})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.5rem",flexDirection:l?"row-reverse":"row"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer",fontSize:"0.875rem",color:"#374151",flexDirection:l?"row-reverse":"row",gap:"0.5rem"},children:[e.jsx("input",{type:"checkbox",checked:c.rememberMe,onChange:w=>p(O=>({...O,rememberMe:w.target.checked})),style:{width:"16px",height:"16px",accentColor:"#3eb2b1"}}),e.jsx("span",{children:i("auth.rememberMe")})]}),e.jsx("button",{type:"button",style:{border:"none",background:"none",color:"#3eb2b1",fontSize:"0.875rem",cursor:"pointer",textDecoration:"underline"},children:i("auth.forgotPassword")})]}),e.jsx("button",{type:"submit",disabled:b||!R()||d.isSendingOtp||d.isVerifyingOtp,style:{width:"100%",padding:"0.875rem",background:b||!R()||d.isSendingOtp||d.isVerifyingOtp?"#9ca3af":"linear-gradient(135deg, #3eb2b1 0%, #22d3db 100%)",border:"none",borderRadius:"12px",color:"#ffffff",fontSize:"1rem",fontWeight:"600",fontFamily:n.typography.fonts.primary,cursor:b||!R()||d.isSendingOtp||d.isVerifyingOtp?"not-allowed":"pointer",transition:n.transitions.fast,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",letterSpacing:"0.025em",marginBottom:"1rem"},onMouseEnter:w=>{b||(w.currentTarget.style.background="linear-gradient(135deg, #22d3db 0%, #5cecea 100%)",w.currentTarget.style.transform="translateY(-1px)")},onMouseLeave:w=>{b||(w.currentTarget.style.background="linear-gradient(135deg, #3eb2b1 0%, #22d3db 100%)",w.currentTarget.style.transform="translateY(0)")},children:b?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid rgba(255, 255, 255, 0.3)",borderTopColor:"#ffffff",borderRadius:"50%",animation:"spin 1s linear infinite"}}),e.jsx("span",{children:i("common.loading")})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:d.step==="email"?i("phone.otp.send"):d.step==="otp"?i("phone.otp.verify"):i("auth.loginButton")}),e.jsx("span",{style:{fontSize:"1.1rem"},children:l?"←":"→"})]})}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsxs("span",{style:{color:"#6b7280",fontSize:"0.875rem"},children:[i("auth.noAccount")," "]}),e.jsx("button",{type:"button",onClick:()=>{t(),s?.()},style:{border:"none",background:"none",color:"#3eb2b1",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",textDecoration:"underline"},children:i("auth.signUpHere")})]})]})]}),e.jsx("style",{children:`
          @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
          }
          
          @keyframes slideUp {
            from { 
              opacity: 0; 
              transform: translateY(20px); 
            }
            to { 
              opacity: 1; 
              transform: translateY(0); 
            }
          }
          
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }
        `})]}):null},rg=({onUserTypeSelect:r,onBack:t,onLogin:o,onRegister:s})=>{const{t:i,i18n:a}=ve(),l=a.language==="ar",c=[i("registration.user.benefits.solarAnalysis.title"),i("registration.user.benefits.bnplFinancing.title"),i("registration.user.benefits.preverified.title"),i("registration.user.benefits.monitoring.title")],p=[i("registration.contractor.benefits.marketplace.title"),i("registration.contractor.benefits.matching.title"),i("registration.contractor.benefits.analytics.title"),i("registration.contractor.benefits.certification.title")],d=()=>e.jsxs("div",{style:{padding:"clamp(2.5rem, 5vw, 3.5rem)",borderRadius:"24px",background:"rgba(255, 255, 255, 0.7)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:"2px solid rgba(255, 255, 255, 0.5)",boxShadow:"0 8px 32px rgba(62, 178, 177, 0.15), 0 0 80px rgba(62, 178, 177, 0.1)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",position:"relative",overflow:"hidden"},onMouseEnter:u=>{u.currentTarget.style.transform="translateY(-4px)",u.currentTarget.style.boxShadow="0 20px 40px rgba(62, 178, 177, 0.25), 0 0 120px rgba(62, 178, 177, 0.2)",u.currentTarget.style.borderColor="rgba(62, 178, 177, 0.5)"},onMouseLeave:u=>{u.currentTarget.style.transform="translateY(0)",u.currentTarget.style.boxShadow="0 8px 32px rgba(62, 178, 177, 0.15), 0 0 80px rgba(62, 178, 177, 0.1)",u.currentTarget.style.borderColor="rgba(255, 255, 255, 0.5)"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[e.jsx("div",{style:{width:"64px",height:"64px",background:"linear-gradient(135deg, #3eb2b1 0%, #22d3db 100%)",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.75rem",margin:"0 auto",marginBottom:"1.5rem",boxShadow:"0 8px 16px rgba(62, 178, 177, 0.3)"},children:"🏠"}),e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",color:"#1a1a1a",margin:0,marginBottom:"0.5rem",letterSpacing:"-0.025em"},children:i("registration.user.title")}),e.jsx("p",{style:{fontSize:"1rem",color:"#6b7280",margin:0,lineHeight:1.5},children:i("registration.user.subtitle")})]}),e.jsx("div",{style:{marginBottom:"2rem"},children:c.map((u,h)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem",fontSize:"0.9rem",color:"#374151",flexDirection:l?"row-reverse":"row"},children:[e.jsx("div",{style:{width:"6px",height:"6px",background:"#3eb2b1",borderRadius:"50%",flexShrink:0}}),e.jsx("span",{style:{textAlign:l?"right":"left"},children:u})]},h))}),e.jsxs("button",{onClick:()=>r("USER"),style:{width:"100%",padding:"1rem",background:"linear-gradient(135deg, #3eb2b1 0%, #22d3db 100%)",border:"none",borderRadius:"12px",color:"#ffffff",fontSize:"1rem",fontWeight:"600",fontFamily:n.typography.fonts.primary,cursor:"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",letterSpacing:"0.025em",position:"relative",overflow:"hidden"},onMouseEnter:u=>{u.currentTarget.style.background="linear-gradient(135deg, #22d3db 0%, #5cecea 100%)",u.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:u=>{u.currentTarget.style.background="linear-gradient(135deg, #3eb2b1 0%, #22d3db 100%)",u.currentTarget.style.transform="translateY(0)"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:"linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.4) 50%, transparent 100%)",animation:"wave 2s ease-in-out infinite"}}),e.jsx("span",{children:i("registration.user.joinButton")}),e.jsx("span",{style:{fontSize:"1.1rem"},children:l?"←":"→"})]})]}),m=()=>e.jsxs("div",{style:{padding:"clamp(2.5rem, 5vw, 3.5rem)",borderRadius:"24px",background:"rgba(255, 255, 255, 0.7)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:"2px solid rgba(255, 255, 255, 0.5)",boxShadow:"0 8px 32px rgba(62, 178, 177, 0.15), 0 0 80px rgba(62, 178, 177, 0.1)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",position:"relative",overflow:"hidden"},onMouseEnter:u=>{u.currentTarget.style.transform="translateY(-4px)",u.currentTarget.style.boxShadow="0 20px 40px rgba(62, 178, 177, 0.25), 0 0 120px rgba(62, 178, 177, 0.2)",u.currentTarget.style.borderColor="rgba(62, 178, 177, 0.5)"},onMouseLeave:u=>{u.currentTarget.style.transform="translateY(0)",u.currentTarget.style.boxShadow="0 8px 32px rgba(62, 178, 177, 0.15), 0 0 80px rgba(62, 178, 177, 0.1)",u.currentTarget.style.borderColor="rgba(255, 255, 255, 0.5)"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[e.jsx("div",{style:{width:"64px",height:"64px",background:"linear-gradient(135deg, #3eb2b1 0%, #22d3db 100%)",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.75rem",margin:"0 auto",marginBottom:"1.5rem",boxShadow:"0 8px 16px rgba(62, 178, 177, 0.3)"},children:"🔧"}),e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",color:"#1a1a1a",margin:0,marginBottom:"0.5rem",letterSpacing:"-0.025em"},children:i("registration.contractor.title")}),e.jsx("p",{style:{fontSize:"1rem",color:"#6b7280",margin:0,lineHeight:1.5},children:i("registration.contractor.subtitle")})]}),e.jsx("div",{style:{marginBottom:"2rem"},children:p.map((u,h)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem",fontSize:"0.9rem",color:"#374151",flexDirection:l?"row-reverse":"row"},children:[e.jsx("div",{style:{width:"6px",height:"6px",background:"#3eb2b1",borderRadius:"50%",flexShrink:0}}),e.jsx("span",{style:{textAlign:l?"right":"left"},children:u})]},h))}),e.jsxs("button",{onClick:()=>r("CONTRACTOR"),style:{width:"100%",padding:"1rem",background:"linear-gradient(135deg, #3eb2b1 0%, #22d3db 100%)",border:"none",borderRadius:"12px",color:"#ffffff",fontSize:"1rem",fontWeight:"600",fontFamily:n.typography.fonts.primary,cursor:"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",letterSpacing:"0.025em",position:"relative",overflow:"hidden"},onMouseEnter:u=>{u.currentTarget.style.background="linear-gradient(135deg, #22d3db 0%, #5cecea 100%)",u.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:u=>{u.currentTarget.style.background="linear-gradient(135deg, #3eb2b1 0%, #22d3db 100%)",u.currentTarget.style.transform="translateY(0)"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:"linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.4) 50%, transparent 100%)",animation:"wave 2s ease-in-out infinite"}}),e.jsx("span",{children:i("registration.contractor.joinButton")}),e.jsx("span",{style:{fontSize:"1.1rem"},children:l?"←":"→"})]})]});return e.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #f0fdfc 0%, #e6fffd 100%)",display:"flex",flexDirection:"column"},children:e.jsxs("div",{style:{flex:1,padding:"clamp(2rem, 5vw, 4rem) clamp(1rem, 3vw, 2rem)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[e.jsx("h1",{style:{fontSize:"clamp(2.5rem, 5vw, 3.5rem)",fontWeight:"700",color:"#1a1a1a",margin:0,marginBottom:"1rem",letterSpacing:"-0.025em",lineHeight:1.2},children:i("registration.title")}),e.jsx("p",{style:{fontSize:"1.125rem",color:"#6b7280",lineHeight:1.6,maxWidth:"600px",margin:"0 auto"},children:i("registration.subtitle")})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(min(350px, 100%), 1fr))",gap:"clamp(2rem, 4vw, 3rem)",width:"100%",maxWidth:"900px",margin:"0 auto"},children:[e.jsx(d,{}),e.jsx(m,{})]}),e.jsxs("button",{onClick:t,style:{marginTop:"3rem",padding:"0.75rem 1.5rem",background:"rgba(255, 255, 255, 0.2)",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"12px",color:"#374151",fontSize:"0.9rem",fontWeight:"500",fontFamily:n.typography.fonts.primary,cursor:"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",alignItems:"center",gap:"0.5rem",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)"},onMouseEnter:u=>{u.currentTarget.style.background="rgba(255, 255, 255, 0.3)",u.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:u=>{u.currentTarget.style.background="rgba(255, 255, 255, 0.2)",u.currentTarget.style.transform="translateY(0)"},children:[e.jsx("span",{style:{fontSize:"1.1rem"},children:l?"→":"←"}),e.jsx("span",{children:i("common.back")})]})]})})},og=({onBack:r,onLogin:t,onRegister:o,onComplete:s})=>{const{t:i,i18n:a}=ve(),l=Be(),c=a.language==="ar",[p,d]=y.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",phone:"",userType:"HOMEOWNER",agreeTerms:!1}),[m,u]=y.useState({}),[h,b]=y.useState(!1),[j,_]=y.useState(!1),[S,R]=y.useState(!1),I=()=>p.firstName.trim()!==""&&p.lastName.trim()!==""&&p.email.trim()!==""&&p.password.trim()!==""&&p.confirmPassword.trim()!==""&&p.phone.trim()!==""&&C.isVerified&&p.agreeTerms,[C,z]=y.useState({isVerified:!1,otpSent:!1,otp:"",isVerifying:!1,isSendingOTP:!1,resendCountdown:0}),[f,P]=y.useState({code:"+966",flag:"🇸🇦",name:"Saudi Arabia",digits:9}),w=[{code:"+966",flag:"🇸🇦",name:"Saudi Arabia",digits:9,format:"5XX XXX XXXX"},{code:"+91",flag:"🇮🇳",name:"India",digits:10,format:"XXXXX XXXXX"}],[O,V]=y.useState(!1);y.useEffect(()=>{const L=()=>{V(window.innerWidth<640)};return L(),window.addEventListener("resize",L),()=>window.removeEventListener("resize",L)},[]);const re=(L,k)=>{switch(L){case"firstName":case"lastName":return k.trim()?k.length>25?i("auth.register.validation.nameMaxLength",{field:i(`auth.register.${L}`)}):/^[a-zA-Z\u0600-\u06FF\s]+$/.test(k)?null:i("auth.register.validation.nameInvalid",{field:i(`auth.register.${L}`)}):i("auth.register.validation.nameRequired",{field:i(`auth.register.${L}`)});case"email":return k.trim()?k.length>50?i("auth.register.validation.emailMaxLength"):/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(k)?null:i("auth.register.validation.emailInvalid"):i("auth.register.validation.emailRequired");case"password":return k?k.length<8?i("auth.register.validation.passwordMinLength"):k.length>25?i("auth.register.validation.passwordMaxLength"):/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(k)?null:i("auth.register.validation.passwordWeak"):i("auth.register.validation.passwordRequired");case"confirmPassword":return k!==p.password?i("auth.register.validation.passwordMismatch"):null;case"phone":if(!k.trim())return null;const v=k.replace(/\D/g,"");if(v.length>0){if(f.code==="+966"&&v[0]!=="5")return i("auth.register.validation.phoneSaudiStart");if(f.code==="+91"&&!["6","7","8","9"].includes(v[0]))return i("auth.register.validation.phoneIndianStart")}return v.length!==f.digits?i("auth.register.validation.phoneDigits",{digits:f.digits,country:f.name}):k.trim()&&!C.isVerified?i("auth.register.validation.phoneNotVerified"):null;case"agreeTerms":return k?null:i("auth.register.validation.agreeTermsRequired");default:return null}},Q=(L,k)=>{if(d(v=>({...v,[L]:k})),m[L]&&u(v=>{const g={...v};return delete g[L],g}),["email","password","confirmPassword"].includes(L)&&k){const v=re(L,k);v&&u(g=>({...g,[L]:v}))}L==="phone"&&z({isVerified:!1,otpSent:!1,otp:"",isVerifying:!1,isSendingOTP:!1,resendCountdown:0})},oe=()=>{const L={};return Object.keys(p).forEach(k=>{const v=k,g=re(v,p[v]);g&&(L[v]=g)}),u(L),Object.keys(L).length===0},K=async()=>{if(p.phone.trim()){z(L=>({...L,isSendingOTP:!0})),u(L=>{const k={...L};return delete k.phone,k});try{const L=`${f.code}${p.phone}`,k=await xe.sendPhoneOTP(L);if(k.success){z(g=>({...g,otpSent:!0,isSendingOTP:!1,resendCountdown:60}));const v=setInterval(()=>{z(g=>g.resendCountdown<=1?(clearInterval(v),{...g,resendCountdown:0}):{...g,resendCountdown:g.resendCountdown-1})},1e3)}else u(v=>({...v,phone:k.error||i("phone.otp.send.failed")})),z(v=>({...v,isSendingOTP:!1}))}catch(L){u(k=>({...k,phone:L.message||i("phone.otp.send.failed")})),z(k=>({...k,isSendingOTP:!1}))}}},Y=async()=>{if(!C.otp.trim()||C.otp.length!==6){u(L=>({...L,otp:i("phone.otp.validation.length")}));return}z(L=>({...L,isVerifying:!0})),u(L=>{const k={...L};return delete k.otp,k});try{const L=`${f.code}${p.phone}`,k=await xe.verifyPhoneOTP({phone:L,otp:C.otp});k.success?z(v=>({...v,isVerified:!0,isVerifying:!1})):(u(v=>({...v,otp:k.error||i("phone.verification.failed")})),z(v=>({...v,isVerifying:!1})))}catch(L){u(k=>({...k,otp:L.message||i("phone.verification.failed")})),z(k=>({...k,isVerifying:!1}))}},W=async L=>{if(L.preventDefault(),!!oe()){b(!0),u({});try{if(!p.phone.trim()){u({phone:i("auth.register.validation.phoneRequired")});return}if(p.phone.trim()&&!C.isVerified){u({phone:i("auth.register.validation.phoneNotVerified")});return}const k=p.userType==="GOVERNMENT"?"BUSINESS":p.userType,v=await xe.register({email:p.email,password:p.password,confirmPassword:p.confirmPassword,firstName:p.firstName,lastName:p.lastName,phone:p.phone?`${f.code}${p.phone}`:void 0,role:"USER",user_type:k});if(!v.success)throw new Error(v.error||"Registration failed");console.log("✅ Registration successful, user is now logged in"),l("/")}catch(k){console.error("❌ Registration failed:",k);const v=k.message||k.error||"Registration failed. Please try again.";u({general:v})}finally{b(!1)}}},$=({show:L,onToggle:k})=>e.jsx("button",{type:"button",onClick:k,style:{position:"absolute",right:c?"auto":"0.75rem",left:c?"0.75rem":"auto",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#6b7280",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:L?"👁️":"👁️‍🗨️"});return e.jsx("div",{style:{minHeight:"100vh",background:n.colors.gradients.primaryLight,color:n.colors.text.primary,fontFamily:n.typography.fonts.primary,direction:c?"rtl":"ltr"},children:e.jsx("main",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"calc(100vh - 80px)",padding:O?"1rem":"2rem",marginTop:"80px"},children:e.jsxs("div",{style:{width:"100%",maxWidth:"500px",background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(10px)",borderRadius:"1rem",padding:O?"1.5rem":"2rem",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[e.jsx("h1",{style:{fontSize:"2rem",fontWeight:"700",marginBottom:"0.5rem",background:"linear-gradient(135deg, #3eb2b1 0%, #22d3db 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:i("auth.register.title")}),e.jsx("p",{style:{color:"#6b7280"},children:i("auth.register.subtitle")})]}),m.general&&e.jsx("div",{style:{background:"#fee2e2",border:"1px solid #fecaca",borderRadius:"0.5rem",padding:"1rem",marginBottom:"1rem",color:"#dc2626",fontSize:"0.875rem"},children:m.general}),e.jsxs("form",{onSubmit:W,children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:O?"1fr":"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:[i("auth.register.firstName")," *"]}),e.jsx("input",{type:"text",value:p.firstName,onChange:L=>Q("firstName",L.target.value),placeholder:i("auth.register.firstNamePlaceholder"),style:{width:"100%",padding:"0.75rem",border:m.firstName?"1px solid #ef4444":"1px solid rgba(229, 231, 235, 0.5)",borderRadius:"0.5rem",fontSize:"1rem",background:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(10px)",transition:"all 0.2s ease"}}),m.firstName&&e.jsx("span",{style:{fontSize:"0.75rem",color:"#ef4444",marginTop:"0.25rem",display:"block"},children:m.firstName})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:[i("auth.register.lastName")," *"]}),e.jsx("input",{type:"text",value:p.lastName,onChange:L=>Q("lastName",L.target.value),placeholder:i("auth.register.lastNamePlaceholder"),style:{width:"100%",padding:"0.75rem",border:m.lastName?"1px solid #ef4444":"1px solid rgba(229, 231, 235, 0.5)",borderRadius:"0.5rem",fontSize:"1rem",background:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(10px)",transition:"all 0.2s ease"}}),m.lastName&&e.jsx("span",{style:{fontSize:"0.75rem",color:"#ef4444",marginTop:"0.25rem",display:"block"},children:m.lastName})]})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:[i("auth.userType")," *"]}),e.jsxs("select",{value:p.userType,onChange:L=>Q("userType",L.target.value),style:{width:"100%",padding:"0.75rem",border:m.userType?"1px solid #ef4444":"1px solid rgba(229, 231, 235, 0.5)",borderRadius:"0.5rem",fontSize:"1rem",background:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(10px)",transition:"all 0.2s ease",cursor:"pointer"},children:[e.jsx("option",{value:"HOMEOWNER",children:i("auth.userTypes.HOMEOWNER")}),e.jsx("option",{value:"BUSINESS",children:i("auth.userTypes.BUSINESS")}),e.jsx("option",{value:"INDUSTRIAL",children:i("auth.userTypes.INDUSTRIAL")}),e.jsx("option",{value:"GOVERNMENT",children:i("auth.userTypes.GOVERNMENT")})]})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:[i("auth.register.email")," *"]}),e.jsx("input",{type:"email",value:p.email,onChange:L=>Q("email",L.target.value),placeholder:i("auth.register.emailPlaceholder"),style:{width:"100%",padding:"0.75rem",border:m.email?"1px solid #ef4444":"1px solid rgba(229, 231, 235, 0.5)",borderRadius:"0.5rem",fontSize:"1rem",background:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(10px)",transition:"all 0.2s ease"}}),m.email&&e.jsx("span",{style:{fontSize:"0.75rem",color:"#ef4444",marginTop:"0.25rem",display:"block"},children:m.email})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:n.colors.text.primary},children:[i("auth.register.phone")," ",e.jsx("span",{style:{color:n.colors.text.primary},children:"*"})," ",C.isVerified&&e.jsxs("span",{style:{color:n.colors.semantic.success.main,fontSize:"0.75rem",marginLeft:c?"0":"0.5rem",marginRight:c?"0.5rem":"0"},children:["✓ ",i("auth.register.verified")]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexDirection:O?"column":"row",alignItems:"stretch"},children:[e.jsx("select",{value:f.code,onChange:L=>{const k=w.find(v=>v.code===L.target.value);k&&(P(k),Q("phone",""))},style:{minWidth:O?"100%":"90px",width:O?"100%":"auto",padding:"0.75rem",border:`1px solid ${n.colors.borders.light}`,borderRadius:n.radius.md,fontSize:"1rem",background:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(10px)",cursor:"pointer",color:n.colors.text.primary},children:w.map(L=>e.jsxs("option",{value:L.code,children:[L.flag," ",L.code]},L.code))}),e.jsx("input",{type:"tel",value:p.phone,onChange:L=>{const k=L.target.value.replace(/\D/g,"");k.length===1&&(f.code==="+966"&&k[0]!=="5"||f.code==="+91"&&!["6","7","8","9"].includes(k[0]))||k.length<=f.digits&&Q("phone",k)},placeholder:f.code==="+966"?"5XXXXXXXX":"9XXXXXXXXX",disabled:C.isVerified,style:{flex:O?"none":1,width:O?"100%":"auto",padding:"0.75rem",border:`1px solid ${m.phone?n.colors.borders.error:n.colors.borders.light}`,borderRadius:n.radius.md,fontSize:"1rem",background:C.isVerified?n.colors.semantic.success.light:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(10px)",transition:"all 0.2s ease",cursor:C.isVerified?"not-allowed":"text",color:n.colors.text.primary}})]}),p.phone.trim()&&p.phone.length===f.digits&&!C.isVerified&&e.jsx("div",{style:{marginTop:"0.75rem"},children:e.jsx("button",{type:"button",onClick:K,disabled:C.isSendingOTP||C.resendCountdown>0,style:{width:"100%",padding:"0.75rem",background:C.isSendingOTP||C.resendCountdown>0?n.colors.secondary[400]:C.otpSent?n.colors.secondary[600]:n.colors.gradients.button,color:n.colors.text.inverse,border:"none",borderRadius:n.radius.md,fontSize:"0.875rem",fontWeight:"500",cursor:C.isSendingOTP||C.resendCountdown>0?"not-allowed":"pointer",transition:"all 0.2s ease"},children:C.isSendingOTP?i("auth.register.sending"):C.resendCountdown>0?`${i("auth.register.resend")} (${C.resendCountdown}s)`:C.otpSent?i("auth.register.resend"):i("auth.register.sendOTP")})}),C.otpSent&&!C.isVerified&&e.jsxs("div",{style:{marginTop:"0.75rem",padding:"1rem",background:n.colors.semantic.info.light,borderRadius:n.radius.md,border:`1px solid ${n.colors.semantic.info.main}20`},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:n.colors.text.secondary,marginBottom:"0.75rem",textAlign:"center"},children:i("phone.otp.description",{phone:`${f.code}${p.phone}`})}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexDirection:O?"column":"row"},children:[e.jsx("input",{type:"text",value:C.otp,onChange:L=>{const k=L.target.value.replace(/\D/g,"");k.length<=6&&(z(v=>({...v,otp:k})),m.otp&&u(v=>{const g={...v};return delete g.otp,g}))},placeholder:i("auth.register.otpPlaceholder"),maxLength:6,style:{flex:1,padding:"0.75rem",border:`1px solid ${m.otp?n.colors.borders.error:n.colors.borders.medium}`,borderRadius:n.radius.md,fontSize:"1.125rem",background:n.colors.backgrounds.primary,transition:"all 0.2s ease",textAlign:"center",letterSpacing:"0.2em",fontWeight:"500",color:n.colors.text.primary}}),e.jsx("button",{type:"button",onClick:Y,disabled:C.isVerifying||C.otp.length!==6,style:{minWidth:O?"100%":"120px",padding:"0.75rem 1rem",background:C.isVerifying||C.otp.length!==6?n.colors.secondary[400]:n.colors.semantic.success.main,color:n.colors.text.inverse,border:"none",borderRadius:n.radius.md,fontSize:"0.875rem",fontWeight:"600",cursor:C.isVerifying||C.otp.length!==6?"not-allowed":"pointer",transition:"all 0.2s ease"},children:C.isVerifying?i("auth.register.verifying"):i("auth.register.verify")})]}),m.otp&&e.jsx("div",{style:{fontSize:"0.75rem",color:n.colors.semantic.error.main,marginTop:"0.5rem",textAlign:"center",fontWeight:"500"},children:m.otp})]}),m.phone&&e.jsx("div",{style:{fontSize:"0.75rem",color:n.colors.semantic.error.main,marginTop:"0.5rem",fontWeight:"500"},children:m.phone})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:[i("auth.register.password")," *"]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:j?"text":"password",value:p.password,onChange:L=>Q("password",L.target.value),placeholder:i("auth.register.passwordPlaceholder"),style:{width:"100%",padding:"0.75rem",paddingRight:"3rem",border:m.password?"1px solid #ef4444":"1px solid rgba(229, 231, 235, 0.5)",borderRadius:"0.5rem",fontSize:"1rem",background:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(10px)",transition:"all 0.2s ease"}}),e.jsx($,{show:j,onToggle:()=>_(!j)})]}),m.password&&e.jsx("span",{style:{fontSize:"0.75rem",color:"#ef4444",marginTop:"0.25rem",display:"block"},children:m.password})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:[i("auth.register.confirmPassword")," *"]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:S?"text":"password",value:p.confirmPassword,onChange:L=>Q("confirmPassword",L.target.value),placeholder:i("auth.register.confirmPasswordPlaceholder"),style:{width:"100%",padding:"0.75rem",paddingRight:"3rem",border:m.confirmPassword?"1px solid #ef4444":"1px solid rgba(229, 231, 235, 0.5)",borderRadius:"0.5rem",fontSize:"1rem",background:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(10px)",transition:"all 0.2s ease"}}),e.jsx($,{show:S,onToggle:()=>R(!S)})]}),m.confirmPassword&&e.jsx("span",{style:{fontSize:"0.75rem",color:"#ef4444",marginTop:"0.25rem",display:"block"},children:m.confirmPassword})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",cursor:"pointer",flexDirection:c?"row-reverse":"row"},children:[e.jsx("input",{type:"checkbox",checked:p.agreeTerms,onChange:L=>Q("agreeTerms",L.target.checked),style:{marginTop:"0.25rem",cursor:"pointer"}}),e.jsx("span",{style:{fontSize:"0.875rem",color:"#4b5563",lineHeight:"1.5"},children:i("auth.register.agreeTerms")})]}),m.agreeTerms&&e.jsx("span",{style:{fontSize:"0.75rem",color:"#ef4444",marginTop:"0.25rem",display:"block"},children:m.agreeTerms})]}),e.jsx("button",{type:"submit",disabled:h||!I(),style:{width:"100%",padding:"0.75rem",background:h||!I()?"#94a3b8":"linear-gradient(135deg, #3eb2b1 0%, #22d3db 100%)",color:"#ffffff",border:"none",borderRadius:"0.5rem",fontSize:"1rem",fontWeight:"600",cursor:h||!I()?"not-allowed":"pointer",transition:"all 0.2s ease",boxShadow:h||!I()?"none":"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},children:i(h?"common.loading":"auth.register.createAccount")}),e.jsxs("div",{style:{textAlign:"center",marginTop:"1.5rem"},children:[e.jsxs("span",{style:{color:"#6b7280",fontSize:"0.875rem"},children:[i("auth.register.hasAccount")," "]}),e.jsx("button",{type:"button",onClick:t,style:{color:"#3eb2b1",background:"none",border:"none",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500",textDecoration:"underline"},children:i("auth.register.signIn")})]})]})]})})})},sg=`
.custom-checkbox {
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  width: 18px;
  height: 18px;
  border: 2px solid #d1d5db;
  border-radius: 4px;
  background: white;
  cursor: pointer;
  position: relative;
  transition: all 0.2s ease;
  flex-shrink: 0;
  margin-top: 0.25rem;
}

.custom-checkbox:hover {
  border-color: #3eb2b1;
}

.custom-checkbox:checked {
  background: #3eb2b1;
  border-color: #3eb2b1;
}

.custom-checkbox:checked::after {
  content: '';
  position: absolute;
  left: 5px;
  top: 2px;
  width: 4px;
  height: 8px;
  border: solid white;
  border-width: 0 2px 2px 0;
  transform: rotate(45deg);
}

.custom-checkbox:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}
`;if(!document.querySelector("#contractor-registration-checkbox-styles")){const r=document.createElement("style");r.id="contractor-registration-checkbox-styles",r.textContent=sg,document.head.appendChild(r)}const ng=({onBack:r,onLogin:t,onRegister:o,onComplete:s})=>{const i=Be(),{t:a,i18n:l}=ve(),c=l.language==="ar",[p,d]=y.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",phone:"",companyName:"",crNumber:"",vatNumber:"",userType:"BUSINESS",agreeToTerms:!1}),[m,u]=y.useState({}),[h,b]=y.useState(!1),[j,_]=y.useState(!1),[S,R]=y.useState(!1),[I,C]=y.useState({isVerified:!1,otpSent:!1,otp:"",isVerifying:!1,isSendingOTP:!1,resendCountdown:0}),[z,f]=y.useState({code:"+966",flag:"🇸🇦",name:a("countries.saudi_arabia"),digits:9}),P=[{code:"+966",flag:"🇸🇦",name:a("countries.saudi_arabia"),digits:9,format:"5XX XXX XXXX"},{code:"+91",flag:"🇮🇳",name:a("countries.india"),digits:10,format:"XXXXX XXXXX"}],[w,O]=y.useState(!1);y.useEffect(()=>{const k=()=>{O(window.innerWidth<640)};return k(),window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[]);const V=(k,v)=>{switch(k){case"firstName":return v.trim()?v.length<2?a("validation.firstName_minLength"):v.length>50?a("validation.firstName_maxLength"):/^[a-zA-Z\u0600-\u06FF\s'-]+$/.test(v.trim())?/^\s|\s$/.test(v)?a("validation.firstName_spaces"):/\s{2,}/.test(v)?a("validation.firstName_consecutive"):null:a("validation.firstName_invalid"):a("validation.firstName_required");case"lastName":return v.trim()?v.length<2?a("validation.lastName_minLength"):v.length>50?a("validation.lastName_maxLength"):/^[a-zA-Z\u0600-\u06FF\s'-]+$/.test(v.trim())?/^\s|\s$/.test(v)?a("validation.lastName_spaces"):/\s{2,}/.test(v)?a("validation.lastName_consecutive"):null:a("validation.lastName_invalid"):a("validation.lastName_required");case"email":if(!v.trim())return a("validation.email_required");const g=v.trim().toLowerCase();if(g.length>100)return a("validation.email_maxLength");if(!/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(g))return a("validation.email_invalid");const ee=["gmail.com","yahoo.com","hotmail.com","outlook.com","icloud.com","aol.com","live.com"],U=g.split("@")[1];return ee.includes(U)?a("validation.email_business"):g.includes("..")?a("validation.email_consecutive"):g.startsWith(".")||g.endsWith(".")?a("validation.email_dots"):null;case"password":return v?v.length<8?a("validation.password_min_length"):v.length>128?a("validation.password_maxLength"):/(?=.*[a-z])/.test(v)?/(?=.*[A-Z])/.test(v)?/(?=.*\d)/.test(v)?/(?=.*[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?])/.test(v)?/\s/.test(v)?a("validation.password_spaces"):/(.)\1{2,}/.test(v)?a("validation.password_consecutive"):["password","Password","PASSWORD","12345678","qwerty","abc123","password123","admin123"].some(X=>v.toLowerCase().includes(X.toLowerCase()))?a("validation.password_common"):null:a("validation.password_special"):a("validation.password_number"):a("validation.password_uppercase"):a("validation.password_lowercase"):a("validation.password_required");case"confirmPassword":return v?v!==p.password?a("validation.confirm_password_mismatch"):null:a("validation.confirm_password_required");case"phone":if(!v.trim())return a("validation.phone_business_required");const ie=v.replace(/\D/g,"");if(z.code==="+966"){if(ie.length!==9||!ie.startsWith("5")||!/^5[0-9]{8}$/.test(ie))return a("validation.phone_saudi_invalid")}else if(z.code==="+91"&&(ie.length!==10||!["6","7","8","9"].includes(ie[0])))return a("validation.phone_indian_invalid");return v.trim()&&!I.isVerified?a("validation.phone_must_verify"):null;case"companyName":return v.trim()?v.length<2?a("validation.company_name_minLength"):v.length>100?a("validation.company_name_maxLength"):/^[a-zA-Z0-9\u0600-\u06FF\s\-&.,()]+$/.test(v.trim())?/^\s|\s$/.test(v)?a("validation.company_name_spaces"):/\s{2,}/.test(v)?a("validation.company_name_consecutive"):null:a("validation.company_name_invalid"):a("validation.company_name_required");case"crNumber":if(!v||!v.trim())return a("validation.cr_number_required");const ce=v.trim();return/^[0-9]+$/.test(ce)?ce.length!==10?a("validation.cr_number_length"):!ce.startsWith("10")&&!ce.startsWith("20")&&!ce.startsWith("30")&&!ce.startsWith("40")?a("validation.cr_number_start"):null:a("validation.cr_number_digits");case"vatNumber":if(!v||!v.trim())return a("validation.vat_number_required");const J=v.trim();return/^[0-9]+$/.test(J)?J.length!==15?a("validation.vat_number_length"):!J.startsWith("3")||!J.endsWith("3")?a("validation.vat_number_format"):null:a("validation.vat_number_digits");case"agreeToTerms":return v?null:a("validation.terms_required");default:return null}},re=(k,v)=>{if(typeof v!="string")return v;switch(k){case"firstName":case"lastName":return v.slice(0,50).replace(/[^a-zA-Z\u0600-\u06FF\s'-]/g,"");case"email":return v.trim().toLowerCase().slice(0,100);case"companyName":return v.slice(0,100).replace(/[^a-zA-Z0-9\u0600-\u06FF\s\-&.,()]/g,"");case"phone":return v.replace(/\D/g,"").slice(0,z.digits);case"crNumber":return v.replace(/\D/g,"").slice(0,10);case"vatNumber":return v.replace(/\D/g,"").slice(0,15);case"password":case"confirmPassword":return v.replace(/\s/g,"").slice(0,128);default:return v}},Q=(k,v)=>{const g=re(k,v);if(d(A=>({...A,[k]:g})),m[k]&&u(A=>{const ee={...A};return delete ee[k],ee}),["email","password","confirmPassword","companyName","firstName","lastName"].includes(k)&&g&&setTimeout(()=>{const A=V(k,g);A&&u(ee=>({...ee,[k]:A}))},500),k==="confirmPassword"&&g){const A=V(k,g);A&&u(ee=>({...ee,[k]:A}))}k==="phone"&&C({isVerified:!1,otpSent:!1,otp:"",isVerifying:!1,isSendingOTP:!1,resendCountdown:0})},oe=()=>{const k={},v=[/script/i,/javascript/i,/alert/i,/onclick/i,/onerror/i,/<[^>]*>/g,/[<>'"]/g];if(Object.entries(p).forEach(([g,A])=>{if(typeof A=="string"){for(const ee of v)if(ee.test(A)){k[g]=a("validation.invalid_characters");break}}}),p.firstName&&p.lastName&&p.firstName.toLowerCase()===p.lastName.toLowerCase()&&(k.lastName=a("validation.names_identical")),p.email){const g=p.email.split("@")[1];g&&(["10minutemail.com","tempmail.org","guerrillamail.com","mailinator.com"].some(ee=>g.includes(ee))&&(k.email=a("validation.temp_email")),(g.length<4||g.length>63)&&(k.email=a("validation.email_domain_invalid")))}return p.companyName&&["test","company","business","corp","inc","ltd","llc"].includes(p.companyName.toLowerCase().trim())&&(k.companyName=a("validation.company_name_generic")),{isValid:Object.keys(k).length===0,errors:k}},K=()=>{const k={};Object.keys(p).forEach(g=>{const A=g,ee=V(A,p[A]);ee&&(k[A]=ee)});const v=oe();if(v.isValid||Object.assign(k,v.errors),p.email&&p.companyName){const g=p.email.split("@")[1];g&&!g.toLowerCase().includes(p.companyName.toLowerCase().split(" ")[0])&&console.warn("Email domain does not match company name")}return u(k),Object.keys(k).length===0},Y=async()=>{if(p.phone.trim()){C(k=>({...k,isSendingOTP:!0})),u(k=>{const v={...k};return delete v.phone,v});try{const k=`${z.code}${p.phone}`,v=await xe.sendPhoneOTP(k);if(v.success){C(A=>({...A,otpSent:!0,isSendingOTP:!1,resendCountdown:60}));const g=setInterval(()=>{C(A=>A.resendCountdown<=1?(clearInterval(g),{...A,resendCountdown:0}):{...A,resendCountdown:A.resendCountdown-1})},1e3)}else u(g=>({...g,phone:v.error||a("phone.otp.send.failed")})),C(g=>({...g,isSendingOTP:!1}))}catch(k){u(v=>({...v,phone:k.message||a("phone.otp.send.failed")})),C(v=>({...v,isSendingOTP:!1}))}}},W=async()=>{if(!I.otp.trim()||I.otp.length!==6){u(k=>({...k,otp:a("phone.otp.validation.length")}));return}C(k=>({...k,isVerifying:!0})),u(k=>{const v={...k};return delete v.otp,v});try{const k=`${z.code}${p.phone}`,v=await xe.verifyPhoneOTP({phone:k,otp:I.otp});v.success?C(g=>({...g,isVerified:!0,isVerifying:!1})):(u(g=>({...g,otp:v.error||a("phone.verification.failed")})),C(g=>({...g,isVerifying:!1})))}catch(k){u(v=>({...v,otp:k.message||a("phone.verification.failed")})),C(v=>({...v,isVerifying:!1}))}},$=async k=>{if(k.preventDefault(),!!K()){b(!0);try{if(p.phone.trim()&&!I.isVerified){u({phone:a("auth.register.validation.phoneNotVerified")}),b(!1);return}const v=await _e.auth.registerContractor({firstName:p.firstName,lastName:p.lastName,email:p.email,password:p.password,phone:p.phone?`${z.code}${p.phone}`:void 0,companyName:p.companyName,crNumber:p.crNumber,vatNumber:p.vatNumber,userType:p.userType});if(v.success){v.data?.accessToken&&(_e.setAccessToken(v.data.accessToken),console.log("✅ Access token set after contractor registration"));const g=await _e.auth.getCurrentUser();g.success&&g.data?(console.log("✅ User data fetched successfully after contractor registration"),await xe.checkAuthStatus(),console.log("✅ Contractor registration successful"),s?s(g?.data||v.data?.user):i("/contractor/dashboard")):(console.warn("⚠️ Could not fetch user data after contractor registration"),s?s(v.data?.user):i("/contractor/dashboard"))}}catch(v){console.error("Contractor registration failed:",v),v.error==="Business email already registered"?u({email:a("validation.email_already_registered")}):v.error==="Business phone already registered"?u({phone:a("validation.phone_already_registered")}):u({email:v.error||a("registration.registration_failed")})}finally{b(!1)}}},L=({show:k,onToggle:v})=>e.jsx("button",{type:"button",onClick:v,style:{position:"absolute",right:c?"auto":"0.75rem",left:c?"0.75rem":"auto",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#6b7280",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:k?"👁️":"👁️‍🗨️"});return e.jsx("div",{style:{minHeight:"100vh",background:n.colors.gradients.primaryLight,color:n.colors.text.primary,fontFamily:n.typography.fonts.primary,direction:c?"rtl":"ltr"},children:e.jsx("main",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"calc(100vh - 80px)",padding:w?"1rem":"2rem",marginTop:"80px"},children:e.jsxs("div",{style:{width:"100%",maxWidth:"600px",background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(10px)",borderRadius:"1rem",padding:w?"1.5rem":"2rem",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[e.jsx("h1",{style:{fontSize:"2rem",fontWeight:"700",marginBottom:"0.5rem",background:"linear-gradient(135deg, #3eb2b1 0%, #22d3db 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:a("registration.contractor.title")}),e.jsx("p",{style:{color:"#6b7280"},children:a("registration.contractor.subtitle")})]}),m.general&&e.jsx("div",{style:{background:"#fee2e2",border:"1px solid #fecaca",borderRadius:"0.5rem",padding:"1rem",marginBottom:"1rem",color:"#dc2626",fontSize:"0.875rem"},children:m.general}),e.jsxs("form",{onSubmit:$,children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:w?"1fr":"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:[a("form.first_name")," *"]}),e.jsx("input",{type:"text",value:p.firstName,onChange:k=>Q("firstName",k.target.value),placeholder:a("registration.contractor.firstName_placeholder"),style:{width:"100%",padding:"0.75rem",border:m.firstName?"1px solid #ef4444":"1px solid rgba(229, 231, 235, 0.5)",borderRadius:"0.5rem",fontSize:"1rem",background:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(10px)",transition:"all 0.2s ease"}}),m.firstName&&e.jsx("span",{style:{fontSize:"0.75rem",color:"#ef4444",marginTop:"0.25rem",display:"block"},children:m.firstName})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:[a("form.last_name")," *"]}),e.jsx("input",{type:"text",value:p.lastName,onChange:k=>Q("lastName",k.target.value),placeholder:a("registration.contractor.lastName_placeholder"),style:{width:"100%",padding:"0.75rem",border:m.lastName?"1px solid #ef4444":"1px solid rgba(229, 231, 235, 0.5)",borderRadius:"0.5rem",fontSize:"1rem",background:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(10px)",transition:"all 0.2s ease"}}),m.lastName&&e.jsx("span",{style:{fontSize:"0.75rem",color:"#ef4444",marginTop:"0.25rem",display:"block"},children:m.lastName})]})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:[a("form.company_name")," *"]}),e.jsx("input",{type:"text",value:p.companyName,onChange:k=>Q("companyName",k.target.value),placeholder:a("registration.contractor.companyName_placeholder"),style:{width:"100%",padding:"0.75rem",border:m.companyName?"1px solid #ef4444":"1px solid rgba(229, 231, 235, 0.5)",borderRadius:"0.5rem",fontSize:"1rem",background:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(10px)",transition:"all 0.2s ease"}}),m.companyName&&e.jsx("span",{style:{fontSize:"0.75rem",color:"#ef4444",marginTop:"0.25rem",display:"block"},children:m.companyName})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:w?"1fr":"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:[a("form.cr_number")," *"]}),e.jsx("input",{type:"text",value:p.crNumber,onChange:k=>Q("crNumber",k.target.value),placeholder:a("registration.contractor.crNumber_placeholder"),title:a("registration.contractor.crNumber_tooltip"),style:{width:"100%",padding:"0.75rem",border:m.crNumber?"1px solid #ef4444":"1px solid rgba(229, 231, 235, 0.5)",borderRadius:"0.5rem",fontSize:"1rem",background:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(10px)",transition:"all 0.2s ease"}}),m.crNumber&&e.jsx("span",{style:{fontSize:"0.75rem",color:"#ef4444",marginTop:"0.25rem",display:"block"},children:m.crNumber})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:[a("form.vat_number")," *"]}),e.jsx("input",{type:"text",value:p.vatNumber,onChange:k=>Q("vatNumber",k.target.value),placeholder:a("registration.contractor.vatNumber_placeholder"),title:a("registration.contractor.vatNumber_tooltip"),style:{width:"100%",padding:"0.75rem",border:m.vatNumber?"1px solid #ef4444":"1px solid rgba(229, 231, 235, 0.5)",borderRadius:"0.5rem",fontSize:"1rem",background:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(10px)",transition:"all 0.2s ease"}}),m.vatNumber&&e.jsx("span",{style:{fontSize:"0.75rem",color:"#ef4444",marginTop:"0.25rem",display:"block"},children:m.vatNumber})]})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:[a("form.business_email")," *"]}),e.jsx("input",{type:"email",value:p.email,onChange:k=>Q("email",k.target.value),placeholder:a("registration.contractor.businessEmail_placeholder"),style:{width:"100%",padding:"0.75rem",border:m.email?"1px solid #ef4444":"1px solid rgba(229, 231, 235, 0.5)",borderRadius:"0.5rem",fontSize:"1rem",background:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(10px)",transition:"all 0.2s ease"}}),m.email&&e.jsx("span",{style:{fontSize:"0.75rem",color:"#ef4444",marginTop:"0.25rem",display:"block"},children:m.email})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:n.colors.text.primary},children:[a("form.business_phone")," * ",I.isVerified&&e.jsxs("span",{style:{color:n.colors.semantic.success.main,fontSize:"0.75rem",marginLeft:c?"0":"0.5rem",marginRight:c?"0.5rem":"0"},children:["✓ ",a("auth.register.verified")]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexDirection:w?"column":"row",alignItems:"stretch"},children:[e.jsx("select",{value:z.code,onChange:k=>{const v=P.find(g=>g.code===k.target.value);v&&(f(v),Q("phone",""))},style:{minWidth:w?"100%":"90px",width:w?"100%":"auto",padding:"0.75rem",border:`1px solid ${n.colors.borders.light}`,borderRadius:"0.5rem",fontSize:"1rem",background:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(10px)",cursor:"pointer",color:n.colors.text.primary},children:P.map(k=>e.jsxs("option",{value:k.code,children:[k.flag," ",k.code]},k.code))}),e.jsx("input",{type:"tel",value:p.phone,onChange:k=>{const v=k.target.value.replace(/\D/g,"");v.length<=z.digits&&Q("phone",v)},placeholder:a("auth.register.phonePlaceholder"),disabled:I.isVerified,style:{flex:w?"none":1,width:w?"100%":"auto",padding:"0.75rem",border:`1px solid ${m.phone?"#ef4444":"rgba(229, 231, 235, 0.5)"}`,borderRadius:"0.5rem",fontSize:"1rem",background:I.isVerified?n.colors.semantic.success.light:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(10px)",transition:"all 0.2s ease",cursor:I.isVerified?"not-allowed":"text",color:n.colors.text.primary}})]}),p.phone.trim()&&p.phone.length===z.digits&&!I.isVerified&&e.jsx("div",{style:{marginTop:"0.75rem"},children:e.jsx("button",{type:"button",onClick:Y,disabled:I.isSendingOTP||I.resendCountdown>0,style:{width:"100%",padding:"0.75rem",background:I.isSendingOTP||I.resendCountdown>0?"#94a3b8":I.otpSent?"#6b7280":"linear-gradient(135deg, #3eb2b1 0%, #22d3db 100%)",color:"#ffffff",border:"none",borderRadius:"0.5rem",fontSize:"0.875rem",fontWeight:"500",cursor:I.isSendingOTP||I.resendCountdown>0?"not-allowed":"pointer",transition:"all 0.2s ease"},children:I.isSendingOTP?a("auth.register.sending"):I.resendCountdown>0?`${a("auth.register.resend")} (${I.resendCountdown}s)`:I.otpSent?a("auth.register.resend"):a("auth.register.sendOTP")})}),I.otpSent&&!I.isVerified&&e.jsxs("div",{style:{marginTop:"0.75rem",padding:"1rem",background:n.colors.semantic.info.light,borderRadius:"0.5rem",border:`1px solid ${n.colors.semantic.info.main}20`},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:n.colors.text.secondary,marginBottom:"0.75rem",textAlign:"center"},children:a("phone.otp.description",{phone:`${z.code}${p.phone}`})}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexDirection:w?"column":"row"},children:[e.jsx("input",{type:"text",value:I.otp,onChange:k=>{const v=k.target.value.replace(/\D/g,"");v.length<=6&&(C(g=>({...g,otp:v})),m.otp&&u(g=>{const A={...g};return delete A.otp,A}))},placeholder:a("auth.register.otpPlaceholder"),maxLength:6,style:{flex:1,padding:"0.75rem",border:`1px solid ${m.otp?"#ef4444":"rgba(229, 231, 235, 0.5)"}`,borderRadius:"0.5rem",fontSize:"1.125rem",background:"rgba(255, 255, 255, 0.8)",transition:"all 0.2s ease",textAlign:"center",letterSpacing:"0.2em",fontWeight:"500",color:n.colors.text.primary}}),e.jsx("button",{type:"button",onClick:W,disabled:I.isVerifying||I.otp.length!==6,style:{minWidth:w?"100%":"120px",padding:"0.75rem 1rem",background:I.isVerifying||I.otp.length!==6?"#94a3b8":n.colors.semantic.success.main,color:"#ffffff",border:"none",borderRadius:"0.5rem",fontSize:"0.875rem",fontWeight:"600",cursor:I.isVerifying||I.otp.length!==6?"not-allowed":"pointer",transition:"all 0.2s ease"},children:I.isVerifying?a("auth.register.verifying"):a("auth.register.verify")})]}),m.otp&&e.jsx("div",{style:{fontSize:"0.75rem",color:"#ef4444",marginTop:"0.5rem",textAlign:"center",fontWeight:"500"},children:m.otp})]}),m.phone&&e.jsx("div",{style:{fontSize:"0.75rem",color:"#ef4444",marginTop:"0.5rem",fontWeight:"500"},children:m.phone})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:[a("form.password")," *"]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:j?"text":"password",value:p.password,onChange:k=>Q("password",k.target.value),placeholder:a("registration.contractor.password_placeholder"),style:{width:"100%",padding:"0.75rem",paddingRight:"3rem",border:m.password?"1px solid #ef4444":"1px solid rgba(229, 231, 235, 0.5)",borderRadius:"0.5rem",fontSize:"1rem",background:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(10px)",transition:"all 0.2s ease"}}),e.jsx(L,{show:j,onToggle:()=>_(!j)})]}),m.password&&e.jsx("span",{style:{fontSize:"0.75rem",color:"#ef4444",marginTop:"0.25rem",display:"block"},children:m.password})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:[a("form.confirm_password")," *"]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:S?"text":"password",value:p.confirmPassword,onChange:k=>Q("confirmPassword",k.target.value),placeholder:a("registration.contractor.confirmPassword_placeholder"),style:{width:"100%",padding:"0.75rem",paddingRight:"3rem",border:m.confirmPassword?"1px solid #ef4444":"1px solid rgba(229, 231, 235, 0.5)",borderRadius:"0.5rem",fontSize:"1rem",background:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(10px)",transition:"all 0.2s ease"}}),e.jsx(L,{show:S,onToggle:()=>R(!S)})]}),m.confirmPassword&&e.jsx("span",{style:{fontSize:"0.75rem",color:"#ef4444",marginTop:"0.25rem",display:"block"},children:m.confirmPassword})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",cursor:"pointer",flexDirection:c?"row-reverse":"row"},children:[e.jsx("input",{type:"checkbox",className:"custom-checkbox",checked:p.agreeToTerms,onChange:k=>Q("agreeToTerms",k.target.checked)}),e.jsxs("span",{style:{fontSize:"0.875rem",color:"#4b5563",lineHeight:"1.5"},children:[a("form.agree_to_terms")," "," ",e.jsx(ai,{to:"/terms",style:{color:"#3eb2b1",textDecoration:"underline"},children:a("form.terms_and_conditions")})," "," ",a("form.and")," "," ",e.jsx(ai,{to:"/privacy",style:{color:"#3eb2b1",textDecoration:"underline"},children:a("form.privacy_policy")})]})]}),m.agreeToTerms&&e.jsx("span",{style:{fontSize:"0.75rem",color:"#ef4444",marginTop:"0.25rem",display:"block"},children:m.agreeToTerms})]}),e.jsx("button",{type:"submit",disabled:h,style:{width:"100%",padding:"0.75rem",background:h?"#94a3b8":"linear-gradient(135deg, #3eb2b1 0%, #22d3db 100%)",color:"#ffffff",border:"none",borderRadius:"0.5rem",fontSize:"1rem",fontWeight:"600",cursor:h?"not-allowed":"pointer",transition:"all 0.2s ease",boxShadow:h?"none":"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",display:"flex",alignItems:"center",justifyContent:"center"},children:h?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{width:"20px",height:"20px",border:"2px solid transparent",borderTop:"2px solid #ffffff",borderRadius:"50%",animation:"spin 1s linear infinite",marginRight:"0.5rem"}}),a("form.registering")]}):a("form.register_contractor")}),e.jsxs("div",{style:{textAlign:"center",marginTop:"1.5rem"},children:[e.jsxs("span",{style:{color:"#6b7280",fontSize:"0.875rem"},children:[a("registration.already_have_account")," "," "]}),e.jsx("button",{type:"button",onClick:t,style:{color:"#3eb2b1",background:"none",border:"none",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500",textDecoration:"underline"},children:a("registration.login_here")})]})]})]})})})},ig=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("polyline",{points:"9,22 9,12 15,12 15,22",stroke:"currentColor",strokeWidth:"2",fill:"none"})]}),ag=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("circle",{cx:"12",cy:"12",r:"5",stroke:"currentColor",strokeWidth:"2",fill:"currentColor",fillOpacity:"0.2"}),e.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),lg=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"23",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})]}),cg=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M9 11H5a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2h-4",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("polyline",{points:"9,11 12,14 15,11",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("line",{x1:"12",y1:"14",x2:"12",y2:"3",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("circle",{cx:"5",cy:"16",r:"1",fill:"currentColor"}),e.jsx("circle",{cx:"19",cy:"16",r:"1",fill:"currentColor"})]}),dg=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("polyline",{points:"14,2 14,8 20,8",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("polyline",{points:"10,9 9,9 8,9",stroke:"currentColor",strokeWidth:"2",fill:"none"})]}),pg=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("path",{d:"M16 10a4 4 0 0 1-8 0",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})]}),ug=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("polyline",{points:"13,2 13,9 20,9",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("line",{x1:"8",y1:"13",x2:"16",y2:"13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"8",y1:"17",x2:"16",y2:"17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),_i=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1 1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z",stroke:"currentColor",strokeWidth:"2",fill:"none"})]}),mg=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("polyline",{points:"16,17 21,12 16,7",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),gg=()=>e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("polyline",{points:"6,9 12,15 18,9",stroke:"currentColor",strokeWidth:"2",fill:"none"})}),hg=({user:r,onLogout:t,activeItem:o="dashboard",onItemClick:s})=>{const{t:i,i18n:a}=ve(),l=a.language,c=l==="ar",[p,d]=y.useState(!1),[m,u]=y.useState(window.innerWidth>=1024),[h,b]=y.useState(!1),j=y.useRef(null);y.useEffect(()=>{const L=()=>{const v=window.innerWidth>=1024;u(v),v&&d(!1)},k=v=>{j.current&&!j.current.contains(v.target)&&b(!1)};return window.addEventListener("resize",L),document.addEventListener("mousedown",k),()=>{window.removeEventListener("resize",L),document.removeEventListener("mousedown",k)}},[]);const _=()=>r.first_name&&r.last_name?`${r.first_name.charAt(0)}${r.last_name.charAt(0)}`.toUpperCase():r.first_name?r.first_name.charAt(0).toUpperCase():r.last_name?r.last_name.charAt(0).toUpperCase():r.email.charAt(0).toUpperCase(),R=(()=>{const L=[r.first_name,r.last_name,r.email,r.phone,r.national_id,r.region,r.city,r.district,r.street_address,r.property_type,r.property_ownership,r.monthly_income,r.employment_status],k=L.filter(v=>v&&v.toString().trim()!=="").length;return Math.round(k/L.length*100)})(),I=R===100,C=I?1:.5,z=28,f=2*Math.PI*z,P=f,w=f-f*R/100,O=()=>r.first_name&&r.last_name?`${r.first_name} ${r.last_name}`:r.first_name?r.first_name:r.last_name?r.last_name:r.email.split("@")[0],re=[{key:"dashboard",translationKey:"userApp.sidebar.dashboard",icon:e.jsx(ig,{})},{key:"calculator",translationKey:"userApp.sidebar.calculator",icon:e.jsx(ag,{})},{key:"quotes",translationKey:"userApp.sidebar.quotes",icon:e.jsx(cg,{}),userTypes:["USER"]},{key:"financing",translationKey:"userApp.sidebar.financing",icon:e.jsx(lg,{}),userTypes:["USER"]},{key:"projects",translationKey:"userApp.sidebar.projects",icon:e.jsx(dg,{}),userTypes:["CONTRACTOR"]},{key:"marketplace",translationKey:"userApp.sidebar.marketplace",icon:e.jsx(pg,{})},{key:"documents",translationKey:"userApp.sidebar.documents",icon:e.jsx(ug,{})},{key:"profile",translationKey:"userApp.sidebar.profile",icon:e.jsx(_i,{})}].filter(L=>!L.userTypes||L.userTypes.includes(r.role)),Q=Be();Xr();const oe=o,K=L=>{if(L==="settings"){b(!h);return}switch(L){case"dashboard":Q("/dashboard");break;case"profile":Q("/profile");break;case"calculator":case"financing":case"projects":case"marketplace":case"documents":Q("/dashboard");break;default:Q("/dashboard")}s?.(L),d(!1)},Y=()=>{Q("/dashboard/profile"),b(!1)},W=()=>{b(!1),t()},$={sidebar:{position:"fixed",top:0,[c?"right":"left"]:0,height:"100vh",width:"280px",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",borderRight:c?"none":"1px solid rgba(62, 178, 177, 0.2)",borderLeft:c?"1px solid rgba(62, 178, 177, 0.2)":"none",boxShadow:c?"-8px 0 32px rgba(62, 178, 177, 0.15)":"8px 0 32px rgba(62, 178, 177, 0.15)",display:"flex",flexDirection:"column",zIndex:1e3,transform:m||p?"translateX(0)":"translateX(-100%)",transition:n.transitions.normal},logo:{padding:"1.5rem",borderBottom:"1px solid rgba(62, 178, 177, 0.2)",display:"flex",alignItems:"center",justifyContent:"center"},logoIcon:{width:"120px",height:"80px",backgroundImage:"url(/rabhan_logo.svg)",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"},nav:{flex:1,padding:"1rem 0",overflowY:"auto"},menuItem:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.875rem 1.5rem",margin:"0.25rem 1rem",borderRadius:"12px",cursor:"pointer",transition:n.transitions.fast,fontSize:"0.875rem",fontWeight:"500",color:"#6b7280",textDecoration:"none",border:"none",background:"transparent",width:"calc(100% - 2rem)",textAlign:c?"right":"left"},menuItemActive:{background:"linear-gradient(135deg, rgba(62, 178, 177, 0.15) 0%, rgba(34, 211, 219, 0.15) 100%)",color:"#3eb2b1",fontWeight:"600",boxShadow:"0 2px 8px rgba(62, 178, 177, 0.2)"},menuItemHover:{background:"rgba(62, 178, 177, 0.1)",color:"#3eb2b1"},menuIcon:{width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center"},userSection:{padding:"1rem 1.5rem 1.5rem 1.5rem",borderTop:"1px solid rgba(62, 178, 177, 0.2)",position:"relative"},userButton:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"1rem",background:"rgba(62, 178, 177, 0.1)",borderRadius:"16px",width:"100%",border:"none",cursor:"pointer",transition:n.transitions.fast,textAlign:c?"right":"left"},userAvatarWrapper:{position:"relative",width:"64px",height:"64px",display:"flex",alignItems:"center",justifyContent:"center"},progressRing:{position:"absolute",top:0,left:0,transform:"rotate(-90deg)"},userAvatar:{width:"48px",height:"48px",background:"linear-gradient(135deg, #3eb2b1 0%, #22d3db 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.25rem",fontWeight:"600",color:"#ffffff",boxShadow:"0 4px 12px rgba(62, 178, 177, 0.3)",position:"relative",zIndex:1},userInfo:{flex:1,minWidth:0,textAlign:c?"right":"left"},userName:{fontSize:"0.875rem",fontWeight:"600",color:"#1a1a1a",marginBottom:"0.25rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},userEmail:{fontSize:"0.75rem",color:"#6b7280",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},chevron:{color:"#6b7280",transition:n.transitions.fast,transform:h?"rotate(180deg)":"rotate(0deg)"},dropdown:{position:"absolute",bottom:"100%",left:"1.5rem",right:"1.5rem",background:"rgba(255, 255, 255, 0.98)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",borderRadius:"16px",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.15)",border:"1px solid rgba(62, 178, 177, 0.2)",padding:"0.5rem",opacity:h?1:0,visibility:h?"visible":"hidden",transform:h?"translateY(-8px)":"translateY(8px)",transition:n.transitions.normal,zIndex:1001},dropdownItem:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",borderRadius:"12px",cursor:"pointer",transition:n.transitions.fast,fontSize:"0.875rem",fontWeight:"500",color:"#6b7280",width:"100%",border:"none",background:"transparent",textAlign:c?"right":"left"},settingsItem:{color:"#3eb2b1"},logoutItem:{color:"#ef4444"},dropdownItemHover:{background:"rgba(62, 178, 177, 0.1)"},overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",zIndex:999,display:p?"block":"none"},mobileToggle:{position:"fixed",top:"5rem",[c?"right":"left"]:"1rem",width:"48px",height:"48px",background:"#3eb2b1",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:"2px solid #3eb2b1",borderRadius:"12px",display:m?"none":"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"1.25rem",color:"#ffffff",fontWeight:"600",zIndex:1001,boxShadow:"0 4px 12px rgba(62, 178, 177, 0.4)",transition:n.transitions.fast}};return e.jsxs(e.Fragment,{children:[e.jsx("button",{style:$.mobileToggle,onClick:()=>d(!p),"aria-label":"Toggle menu",children:p?"✕":"☰"}),e.jsx("div",{style:$.overlay,onClick:()=>d(!1)}),e.jsxs("aside",{style:{...$.sidebar,direction:c?"rtl":"ltr"},children:[e.jsx("div",{style:$.logo,children:e.jsx("div",{style:{...$.logoIcon,backgroundImage:l==="ar"?"url(/assets/logo_arabic.jpeg)":"url(/rabhan_logo.svg)"}})}),e.jsx("nav",{style:$.nav,children:re.map(L=>e.jsxs("button",{style:{...$.menuItem,...oe===L.key?$.menuItemActive:{}},onClick:()=>K(L.key),onMouseEnter:k=>{oe!==L.key&&Object.assign(k.currentTarget.style,$.menuItemHover)},onMouseLeave:k=>{oe!==L.key&&Object.assign(k.currentTarget.style,{background:"transparent",color:"#6b7280"})},children:[e.jsx("span",{style:$.menuIcon,children:L.icon}),i(L.translationKey)]},L.key))}),e.jsxs("div",{style:$.userSection,ref:j,children:[h&&e.jsxs("div",{style:$.dropdown,children:[e.jsxs("button",{style:{...$.dropdownItem,...$.settingsItem},onClick:Y,onMouseEnter:L=>{Object.assign(L.currentTarget.style,$.dropdownItemHover)},onMouseLeave:L=>{Object.assign(L.currentTarget.style,{background:"transparent"})},children:[e.jsx("span",{style:$.menuIcon,children:e.jsx(_i,{})}),i("userApp.sidebar.profile")]}),e.jsxs("button",{style:{...$.dropdownItem,...$.logoutItem},onClick:W,onMouseEnter:L=>{Object.assign(L.currentTarget.style,{...$.dropdownItemHover,background:"rgba(239, 68, 68, 0.1)"})},onMouseLeave:L=>{Object.assign(L.currentTarget.style,{background:"transparent"})},children:[e.jsx("span",{style:$.menuIcon,children:e.jsx(mg,{})}),i("userApp.sidebar.logout")]})]}),e.jsxs("button",{style:$.userButton,onClick:()=>b(!h),onMouseEnter:L=>{Object.assign(L.currentTarget.style,{background:"rgba(62, 178, 177, 0.15)",transform:"translateY(-2px)",boxShadow:"0 4px 12px rgba(62, 178, 177, 0.2)"})},onMouseLeave:L=>{Object.assign(L.currentTarget.style,{background:"rgba(62, 178, 177, 0.1)",transform:"translateY(0)",boxShadow:"none"})},children:[e.jsxs("div",{style:$.userAvatarWrapper,children:[e.jsxs("svg",{style:$.progressRing,width:"64",height:"64",children:[e.jsx("circle",{cx:"32",cy:"32",r:z,stroke:"rgba(0, 0, 0, 0.1)",strokeWidth:"3",fill:"none"}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"progressGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#3eb2b1",stopOpacity:C}),e.jsx("stop",{offset:"100%",stopColor:"#22d3db",stopOpacity:C})]})}),e.jsx("circle",{cx:"32",cy:"32",r:z,stroke:"url(#progressGradient)",strokeWidth:"3",fill:"none",strokeDasharray:`${P}`,strokeDashoffset:w,strokeLinecap:"round",style:{transition:"stroke-dashoffset 0.5s ease-out, opacity 0.3s ease-out",...I?{}:{strokeDasharray:"5 3"}}})]}),e.jsx("div",{style:$.userAvatar,children:_()})]}),e.jsxs("div",{style:$.userInfo,children:[e.jsx("div",{style:$.userName,children:O()}),e.jsx("div",{style:$.userEmail,children:r.email})]}),e.jsx("div",{style:$.chevron,children:e.jsx(gg,{})})]})]})]})]})};class fg{async createProfile(t){try{console.log("👤 Creating user profile...",{firstName:t.firstName,lastName:t.lastName,city:t.city}),this.validateProfileData(t);const o={...t,roofSize:Number(t.roofSize),gpsLatitude:Number(t.gpsLatitude),gpsLongitude:Number(t.gpsLongitude)},s=await _e.user.createRegistrationProfile(o);if(s.success&&s.data)return console.log("✅ User profile created successfully"),{success:!0,profile:s.data};{const i=s.error||"Failed to create profile";return console.error("❌ Profile creation failed:",i),{success:!1,error:i}}}catch(o){return console.error("❌ Profile creation error - Full details:",{message:o.message,code:o.code,response:o.response?.data,status:o.response?.status,config:{url:o.config?.url,method:o.config?.method,data:o.config?.data}}),o.code==="ECONNABORTED"||o.code==="ETIMEDOUT"?{success:!1,error:"Request timeout - service may be overloaded"}:o.code==="ERR_NETWORK"?{success:!1,error:"Network error - please check your connection"}:{success:!1,error:o.response?.data?.error||o.error||o.message||"Failed to create profile"}}}async getProfile(t){try{console.log("👤 Fetching user profile...",t?{userId:t}:{current:!0});const o=_e.getAccessToken();console.log("🔑 Auth token status:",{hasToken:!!o,tokenLength:o?o.length:0,tokenPreview:o?o.substring(0,20)+"...":"none"});const s=await _e.user.getProfile(t);if(s.success&&s.data)return console.log("✅ User profile fetched successfully"),{success:!0,profile:s.data};{const i=s.error||"Failed to fetch profile";return console.error("❌ Profile fetch failed:",i),{success:!1,error:i}}}catch(o){const s=o.error||o.message||"Failed to fetch profile";return console.error("❌ Profile fetch error:",s),{success:!1,error:s}}}async updateProfile(t,o){try{console.log("👤 Updating user profile...",{userId:t||"current user",updates:Object.keys(o||{}),fullUpdateData:o});const s={...o};s.roofSize&&(s.roofSize=Number(s.roofSize)),s.gpsLatitude&&(s.gpsLatitude=Number(s.gpsLatitude)),s.gpsLongitude&&(s.gpsLongitude=Number(s.gpsLongitude)),s.desiredSystemSize!==void 0&&(s.desiredSystemSize=Number(s.desiredSystemSize),console.log("🌞 Processing desiredSystemSize:",s.desiredSystemSize)),s.budgetRange!==void 0&&console.log("🌞 Processing budgetRange:",s.budgetRange),console.log("📡 Making API call to update profile with:",s);const i=await _e.user.updateProfile(t,s);if(i.success&&i.data)return console.log("✅ User profile updated successfully"),{success:!0,profile:i.data};{const a=i.error||"Failed to update profile";return console.error("❌ Profile update failed:",a),{success:!1,error:a}}}catch(s){const i=s.error||s.message||"Failed to update profile";return console.error("❌ Profile update error:",i),{success:!1,error:i}}}async checkBNPLEligibility(t){try{console.log("💰 Checking BNPL eligibility...",t?{userId:t}:{current:!0});const o=await _e.user.checkBNPLEligibility(t);if(o.success&&o.data)return console.log("✅ BNPL eligibility checked successfully",{eligible:o.data.eligible,maxAmount:o.data.maxAmount}),{success:!0,eligibility:o.data};{const s=o.error||"Failed to check BNPL eligibility";return console.error("❌ BNPL eligibility check failed:",s),{success:!1,error:s}}}catch(o){const s=o.error||o.message||"Failed to check BNPL eligibility";return console.error("❌ BNPL eligibility error:",s),{success:!1,error:s}}}async getDocuments(t){try{console.log("📄 Fetching user documents...",t?{userId:t}:{current:!0});const o=await _e.user.getDocuments(t);if(o.success&&o.data)return console.log("✅ User documents fetched successfully",{count:o.data.length}),{success:!0,documents:o.data};{const s=o.error||"Failed to fetch documents";return console.error("❌ Documents fetch failed:",s),{success:!1,error:s}}}catch(o){const s=o.error||o.message||"Failed to fetch documents";return console.error("❌ Documents fetch error:",s),{success:!1,error:s}}}validateProfileData(t){const o=["firstName","lastName","region","city","postalCode","propertyType","propertyOwnership","roofSize","gpsLatitude","gpsLongitude","electricityConsumption","electricityMeterNumber"];for(const c of o)if(!t[c])throw new Error(`${c} is required`);if(!/^\d{5}$/.test(t.postalCode))throw new Error("Postal code must be 5 digits");const s=Number(t.roofSize);if(s<=0||s>1e4)throw new Error("Roof size must be between 1 and 10,000 square meters");if(!["riyadh","makkah","madinah","qassim","eastern","asir","tabuk","hail","northern","jazan","najran","bahah"].includes(t.region.toLowerCase()))throw new Error("Invalid Saudi Arabia region");if(!["villa","apartment","duplex","townhouse","commercial","other"].includes(t.propertyType))throw new Error("Invalid property type");if(!["owned","rented","leased"].includes(t.propertyOwnership))throw new Error("Invalid property ownership type");if(!t.electricityConsumption||t.electricityConsumption.trim()==="")throw new Error("Electricity consumption is required")}getSaudiRegions(){return[{value:"riyadh",label:"الرياض (Riyadh)"},{value:"makkah",label:"مكة المكرمة (Makkah)"},{value:"madinah",label:"المدينة المنورة (Madinah)"},{value:"qassim",label:"القصيم (Qassim)"},{value:"eastern",label:"الشرقية (Eastern Province)"},{value:"asir",label:"عسير (Asir)"},{value:"tabuk",label:"تبوك (Tabuk)"},{value:"hail",label:"حائل (Hail)"},{value:"northern",label:"الحدود الشمالية (Northern Borders)"},{value:"jazan",label:"جازان (Jazan)"},{value:"najran",label:"نجران (Najran)"},{value:"bahah",label:"الباحة (Al Bahah)"}]}getPropertyTypes(){return[{value:"villa",label:"فيلا (Villa)"},{value:"apartment",label:"شقة (Apartment)"},{value:"duplex",label:"دوبلكس (Duplex)"},{value:"townhouse",label:"تاون هاوس (Townhouse)"},{value:"commercial",label:"تجاري (Commercial)"},{value:"other",label:"أخرى (Other)"}]}getPropertyOwnership(){return[{value:"owned",label:"ملك (Owned)"},{value:"rented",label:"مستأجر (Rented)"},{value:"leased",label:"مؤجر (Leased)"}]}getElectricityConsumption(){return[{value:"0-200",label:"0-200 كيلوواط/ساعة (0-200 kWh)"},{value:"200-400",label:"200-400 كيلوواط/ساعة (200-400 kWh)"},{value:"400-600",label:"400-600 كيلوواط/ساعة (400-600 kWh)"},{value:"600-800",label:"600-800 كيلوواط/ساعة (600-800 kWh)"},{value:"800-1000",label:"800-1000 كيلوواط/ساعة (800-1000 kWh)"},{value:"1000-1500",label:"1000-1500 كيلوواط/ساعة (1000-1500 kWh)"},{value:"1500+",label:"1500+ كيلوواط/ساعة (1500+ kWh)"}]}calculateProfileCompletion(t){const o=["firstName","lastName","region","city","postalCode","propertyType","propertyOwnership","roofSize","gpsLatitude","gpsLongitude","electricityConsumption","electricityMeterNumber"],s=["district","streetAddress","landmark","preferredLanguage","emailNotifications","smsNotifications","marketingConsent"],i=o.filter(p=>t[p]!==void 0&&t[p]!==null&&t[p]!=="").length,a=s.filter(p=>t[p]!==void 0&&t[p]!==null&&t[p]!=="").length,l=i/o.length*80,c=a/s.length*20;return Math.round(l+c)}async getUserDocuments(t){try{console.log("🔍 Fetching user documents...",{userId:t});const o=await _e.user.getUserDocuments(t);if(o.success&&o.data)return console.log("✅ User documents fetched successfully",{count:o.data.length}),{success:!0,documents:o.data};{const s=o.error||"Failed to fetch user documents";return console.error("❌ Failed to fetch user documents:",s),{success:!1,error:s}}}catch(o){return console.error("❌ User documents fetch error:",{message:o.message,code:o.code,response:o.response?.data,status:o.response?.status}),{success:!1,error:o.response?.data?.error||o.response?.data?.message||o.message||"Failed to fetch user documents"}}}async getVerificationStatus(t){try{console.log("🔍 Getting verification status from user profile...",{userId:t});const o=await this.getProfile(t);if(console.log("📋 Profile result for verification status:",o),o.success&&o.profile){const s=o.profile.verificationStatus||"not_verified";return console.log("✅ Verification status retrieved:",{status:s,verificationStatus:o.profile.verificationStatus,profileCompleted:o.profile.profileCompleted,profileCompletionPercentage:o.profile.profileCompletionPercentage}),s}else return console.warn("❌ Failed to get profile for verification status",o),"not_verified"}catch(o){return console.error("Error getting verification status:",o),"not_verified"}}}const fr=new fg;class yg{async registerContractor(t){try{return(await yt.post("/register",t)).data.data}catch(o){throw console.error("Error registering contractor:",o),new Error(o.response?.data?.error?.message||"Failed to register contractor")}}async getProfile(){try{console.log("📥 Loading contractor profile...");const t=await yt.get("/profile");return console.log("✅ Contractor profile loaded successfully:",t.data),{success:!0,profile:t.data.data||t.data}}catch(t){return console.error("❌ Error getting contractor profile:",t),t.response?.status===404||t.response?.data?.error==="Contractor not found"?(console.log("ℹ️ Contractor profile not found - will be created on first save"),{success:!0,profile:null}):{success:!1,error:t.response?.data?.error||t.message||"Failed to get contractor profile"}}}async getDashboardStats(){try{return(await yt.get("/dashboard/stats")).data.data}catch(t){throw console.error("Error getting dashboard stats:",t),new Error(t.response?.data?.error?.message||"Failed to get dashboard statistics")}}async searchContractors(t={}){try{const o={...t};return o.service_categories&&Array.isArray(o.service_categories)&&(o.service_categories=o.service_categories.join(",")),(await yt.get("/search",{params:o})).data.data}catch(o){throw console.error("Error searching contractors:",o),new Error(o.response?.data?.error?.message||"Failed to search contractors")}}async getContractorById(t){try{return(await yt.get(`/${t}`)).data.data}catch(o){throw console.error("Error getting contractor by ID:",o),new Error(o.response?.data?.error?.message||"Failed to get contractor")}}async updateProfile(t){try{console.log("💾 Updating contractor profile with data:",t);const s=Object.keys(t).every(a=>["preferred_language","email_notifications","sms_notifications","marketing_consent"].includes(a))?"/preferences":"/profile",i=await yt.put(`${s}`,t);return console.log("✅ Successfully updated contractor profile:",i.data),{success:!0,profile:i.data.data||i.data}}catch(o){if(console.error("Error updating contractor profile:",o),o.response?.status===404||o.response?.data?.error==="Contractor not found"){console.log("🔄 Contractor profile not found. Using lazy creation...");try{const s=await yt.put("/profile",t);return console.log("✅ Successfully created and updated contractor profile:",s.data),{success:!0,profile:s.data.data||s.data}}catch(s){return console.error("Failed to create contractor profile:",s),{success:!1,error:s.response?.data?.error||s.message||"Failed to create contractor profile"}}}return{success:!1,error:o.response?.data?.error||o.message||"Failed to update contractor profile"}}}async updateContractorProfile(t){try{console.log("💾 Updating contractor profile with data:",t);const o=await yt.put("/profile",t);return console.log("✅ Successfully updated contractor profile:",o.data),{success:!0}}catch(o){throw console.error("Error updating contractor profile:",o),new Error(`Failed to update profile: ${o.response?.data?.error?.message||o.message}`)}}prepareRegistrationData(t,o){let s="temp";try{s=window.authService?.getCurrentUser()?.id||"temp"}catch{console.warn("Could not get current user for loading saved data")}const i=this.loadAllSavedData(s),a={business_name:t.business_name||i.business?.business_name||"My Business",business_type:t.business_type||i.business?.business_type||"individual",email:t.email||i.contact?.email||"contractor@example.com",phone:t.phone||i.contact?.phone||"+966500000000",address_line1:t.address_line1||i.address?.address_line1||"Address",city:t.city||i.address?.city||"Riyadh",region:t.region||i.address?.region||"Riyadh Region",service_categories:t.service_categories||i.services?.service_categories||["SOLAR_INSTALLATION"],service_areas:t.service_areas||i.services?.service_areas||["Riyadh"],years_experience:t.years_experience||i.services?.years_experience||1};return a.business_name&&a.email&&a.phone?a:(console.warn("Insufficient data for contractor registration"),null)}loadSavedData(t,o){try{const s=`contractor_${t}_${o}`,i=localStorage.getItem(s);return i?JSON.parse(i):null}catch(s){return console.warn(`Failed to load saved data for ${o}:`,s),null}}loadAllSavedData(t){const o=["business","contact","address","services","verification","financial","preferences"],s={};return o.forEach(i=>{const a=this.loadSavedData(t,i);a&&(s[i]=a)}),s}clearSavedData(t){["business","contact","address","services","verification","financial","preferences"].forEach(s=>{const i=`contractor_${t}_${s}`;localStorage.removeItem(i)})}async getVerificationStatus(t){try{console.log("🔍 Getting contractor verification status for:",t);const o=await yt.get(`/verification/status/${t}`);if(o.data&&o.data.data){const s=o.data.data.status||"not_verified";return console.log("✅ Contractor verification status retrieved:",s),s}return"not_verified"}catch(o){return console.error("❌ Error getting contractor verification status:",o),"not_verified"}}async getProfileData(){try{console.log("📥 Loading contractor profile data...");const t=await this.getProfile();return{success:!0,profile:{id:t.id,userId:t.user_id,businessName:t.business_name,businessNameAr:t.business_name_ar,businessType:t.business_type,commercialRegistration:t.commercial_registration,vatNumber:t.vat_number,email:t.email,phone:t.phone,whatsapp:t.whatsapp,website:t.website,addressLine1:t.address_line1,addressLine2:t.address_line2,city:t.city,region:t.region,postalCode:t.postal_code,latitude:t.latitude,longitude:t.longitude,establishedYear:t.established_year,employeeCount:t.employee_count,description:t.description,descriptionAr:t.description_ar,serviceCategories:t.service_categories,serviceAreas:t.service_areas,yearsExperience:t.years_experience,verificationLevel:t.verification_level,averageRating:t.average_rating,totalReviews:t.total_reviews,status:t.status,verificationStatus:t.verification_level>=1?"verified":"not_verified",createdAt:t.created_at,updatedAt:t.updated_at}}}catch(t){return console.error("❌ Error loading contractor profile:",t),{success:!1,error:t.message||"Failed to load contractor profile"}}}async healthCheck(){try{return(await yt.get("/health")).data}catch(t){throw console.error("Error checking contractor service health:",t),new Error("Contractor service is unavailable")}}}const xt=new yg,ql=(r={})=>{const[t,o]=y.useState({loading:!1,error:null,data:null}),{timeout:s=1e4,enableHighAccuracy:i=!0,maximumAge:a=3e5}=r,l=async(m,u)=>{try{const h=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${m}&lon=${u}&zoom=18&addressdetails=1&accept-language=ar,en`,{headers:{"User-Agent":"RABHAN Solar BNPL Platform"}});if(!h.ok)throw new Error(`HTTP error! status: ${h.status}`);const b=await h.json();let j="";if(b.address){const{amenity:_,building:S,house_number:R,road:I,neighbourhood:C,suburb:z,city_district:f,quarter:P}=b.address;j=[_,S,R&&I?`${R} ${I}`:I,C||z||f||P].filter(Boolean).join(", ")||b.display_name?.split(",")[0]||"Current Location"}else j="Current Location";return j}catch(h){return console.warn("Reverse geocoding failed:",h),"Current Location"}},c=y.useCallback(async()=>new Promise((m,u)=>{if(!navigator.geolocation){u(new Error("Geolocation is not supported by this browser"));return}o(h=>({...h,loading:!0,error:null})),navigator.geolocation.getCurrentPosition(async h=>{try{const{latitude:b,longitude:j}=h.coords,_=await l(b,j),S={latitude:Number(b.toFixed(6)),longitude:Number(j.toFixed(6)),landmark:_};o({loading:!1,error:null,data:S}),m(S)}catch(b){const j=b instanceof Error?b.message:"Failed to get landmark";o({loading:!1,error:j,data:null}),u(new Error(j))}},h=>{let b;switch(h.code){case h.PERMISSION_DENIED:b="Location access denied by user";break;case h.POSITION_UNAVAILABLE:b="Location information is unavailable";break;case h.TIMEOUT:b="Location request timed out";break;default:b="An unknown error occurred while retrieving location";break}o({loading:!1,error:b,data:null}),u(new Error(b))},{enableHighAccuracy:i,timeout:s,maximumAge:a})}),[i,s,a]),p=y.useCallback(()=>{o(m=>({...m,error:null}))},[]),d=y.useCallback(()=>{o({loading:!1,error:null,data:null})},[]);return{getCurrentLocation:c,clearError:p,reset:d,...t}};var et=function(){return et=Object.assign||function(t){for(var o,s=1,i=arguments.length;s<i;s++){o=arguments[s];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a])}return t},et.apply(this,arguments)};function Io(r,t,o){if(o||arguments.length===2)for(var s=0,i=t.length,a;s<i;s++)(a||!(s in t))&&(a||(a=Array.prototype.slice.call(t,0,s)),a[s]=t[s]);return r.concat(a||Array.prototype.slice.call(t))}var Ie="-ms-",Dr="-moz-",Re="-webkit-",Vl="comm",es="rule",Rn="decl",xg="@import",Ul="@keyframes",bg="@layer",Hl=Math.abs,Pn=String.fromCharCode,en=Object.assign;function vg(r,t){return Oe(r,0)^45?(((t<<2^Oe(r,0))<<2^Oe(r,1))<<2^Oe(r,2))<<2^Oe(r,3):0}function Yl(r){return r.trim()}function Tt(r,t){return(r=t.exec(r))?r[0]:r}function Se(r,t,o){return r.replace(t,o)}function wo(r,t,o){return r.indexOf(t,o)}function Oe(r,t){return r.charCodeAt(t)|0}function Sr(r,t,o){return r.slice(t,o)}function St(r){return r.length}function Ql(r){return r.length}function Nr(r,t){return t.push(r),r}function wg(r,t){return r.map(t).join("")}function Ti(r,t){return r.filter(function(o){return!Tt(o,t)})}var ts=1,kr=1,Gl=0,ft=0,$e=0,Lr="";function rs(r,t,o,s,i,a,l,c){return{value:r,root:t,parent:o,type:s,props:i,children:a,line:ts,column:kr,length:l,return:"",siblings:c}}function Bt(r,t){return en(rs("",null,null,"",null,null,0,r.siblings),r,{length:-r.length},t)}function mr(r){for(;r.root;)r=Bt(r.root,{children:[r]});Nr(r,r.siblings)}function jg(){return $e}function Sg(){return $e=ft>0?Oe(Lr,--ft):0,kr--,$e===10&&(kr=1,ts--),$e}function bt(){return $e=ft<Gl?Oe(Lr,ft++):0,kr++,$e===10&&(kr=1,ts++),$e}function sr(){return Oe(Lr,ft)}function jo(){return ft}function os(r,t){return Sr(Lr,r,t)}function tn(r){switch(r){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function kg(r){return ts=kr=1,Gl=St(Lr=r),ft=0,[]}function Cg(r){return Lr="",r}function vs(r){return Yl(os(ft-1,rn(r===91?r+2:r===40?r+1:r)))}function _g(r){for(;($e=sr())&&$e<33;)bt();return tn(r)>2||tn($e)>3?"":" "}function Tg(r,t){for(;--t&&bt()&&!($e<48||$e>102||$e>57&&$e<65||$e>70&&$e<97););return os(r,jo()+(t<6&&sr()==32&&bt()==32))}function rn(r){for(;bt();)switch($e){case r:return ft;case 34:case 39:r!==34&&r!==39&&rn($e);break;case 40:r===41&&rn(r);break;case 92:bt();break}return ft}function Ag(r,t){for(;bt()&&r+$e!==57;)if(r+$e===84&&sr()===47)break;return"/*"+os(t,ft-1)+"*"+Pn(r===47?r:bt())}function Rg(r){for(;!tn(sr());)bt();return os(r,ft)}function Pg(r){return Cg(So("",null,null,null,[""],r=kg(r),0,[0],r))}function So(r,t,o,s,i,a,l,c,p){for(var d=0,m=0,u=l,h=0,b=0,j=0,_=1,S=1,R=1,I=0,C="",z=i,f=a,P=s,w=C;S;)switch(j=I,I=bt()){case 40:if(j!=108&&Oe(w,u-1)==58){wo(w+=Se(vs(I),"&","&\f"),"&\f",Hl(d?c[d-1]:0))!=-1&&(R=-1);break}case 34:case 39:case 91:w+=vs(I);break;case 9:case 10:case 13:case 32:w+=_g(j);break;case 92:w+=Tg(jo()-1,7);continue;case 47:switch(sr()){case 42:case 47:Nr(Ig(Ag(bt(),jo()),t,o,p),p);break;default:w+="/"}break;case 123*_:c[d++]=St(w)*R;case 125*_:case 59:case 0:switch(I){case 0:case 125:S=0;case 59+m:R==-1&&(w=Se(w,/\f/g,"")),b>0&&St(w)-u&&Nr(b>32?Ri(w+";",s,o,u-1,p):Ri(Se(w," ","")+";",s,o,u-2,p),p);break;case 59:w+=";";default:if(Nr(P=Ai(w,t,o,d,m,i,c,C,z=[],f=[],u,a),a),I===123)if(m===0)So(w,t,P,P,z,a,u,c,f);else switch(h===99&&Oe(w,3)===110?100:h){case 100:case 108:case 109:case 115:So(r,P,P,s&&Nr(Ai(r,P,P,0,0,i,c,C,i,z=[],u,f),f),i,f,u,c,s?z:f);break;default:So(w,P,P,P,[""],f,0,c,f)}}d=m=b=0,_=R=1,C=w="",u=l;break;case 58:u=1+St(w),b=j;default:if(_<1){if(I==123)--_;else if(I==125&&_++==0&&Sg()==125)continue}switch(w+=Pn(I),I*_){case 38:R=m>0?1:(w+="\f",-1);break;case 44:c[d++]=(St(w)-1)*R,R=1;break;case 64:sr()===45&&(w+=vs(bt())),h=sr(),m=u=St(C=w+=Rg(jo())),I++;break;case 45:j===45&&St(w)==2&&(_=0)}}return a}function Ai(r,t,o,s,i,a,l,c,p,d,m,u){for(var h=i-1,b=i===0?a:[""],j=Ql(b),_=0,S=0,R=0;_<s;++_)for(var I=0,C=Sr(r,h+1,h=Hl(S=l[_])),z=r;I<j;++I)(z=Yl(S>0?b[I]+" "+C:Se(C,/&\f/g,b[I])))&&(p[R++]=z);return rs(r,t,o,i===0?es:c,p,d,m,u)}function Ig(r,t,o,s){return rs(r,t,o,Vl,Pn(jg()),Sr(r,2,-2),0,s)}function Ri(r,t,o,s,i){return rs(r,t,o,Rn,Sr(r,0,s),Sr(r,s+1,-1),s,i)}function Kl(r,t,o){switch(vg(r,t)){case 5103:return Re+"print-"+r+r;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Re+r+r;case 4789:return Dr+r+r;case 5349:case 4246:case 4810:case 6968:case 2756:return Re+r+Dr+r+Ie+r+r;case 5936:switch(Oe(r,t+11)){case 114:return Re+r+Ie+Se(r,/[svh]\w+-[tblr]{2}/,"tb")+r;case 108:return Re+r+Ie+Se(r,/[svh]\w+-[tblr]{2}/,"tb-rl")+r;case 45:return Re+r+Ie+Se(r,/[svh]\w+-[tblr]{2}/,"lr")+r}case 6828:case 4268:case 2903:return Re+r+Ie+r+r;case 6165:return Re+r+Ie+"flex-"+r+r;case 5187:return Re+r+Se(r,/(\w+).+(:[^]+)/,Re+"box-$1$2"+Ie+"flex-$1$2")+r;case 5443:return Re+r+Ie+"flex-item-"+Se(r,/flex-|-self/g,"")+(Tt(r,/flex-|baseline/)?"":Ie+"grid-row-"+Se(r,/flex-|-self/g,""))+r;case 4675:return Re+r+Ie+"flex-line-pack"+Se(r,/align-content|flex-|-self/g,"")+r;case 5548:return Re+r+Ie+Se(r,"shrink","negative")+r;case 5292:return Re+r+Ie+Se(r,"basis","preferred-size")+r;case 6060:return Re+"box-"+Se(r,"-grow","")+Re+r+Ie+Se(r,"grow","positive")+r;case 4554:return Re+Se(r,/([^-])(transform)/g,"$1"+Re+"$2")+r;case 6187:return Se(Se(Se(r,/(zoom-|grab)/,Re+"$1"),/(image-set)/,Re+"$1"),r,"")+r;case 5495:case 3959:return Se(r,/(image-set\([^]*)/,Re+"$1$`$1");case 4968:return Se(Se(r,/(.+:)(flex-)?(.*)/,Re+"box-pack:$3"+Ie+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Re+r+r;case 4200:if(!Tt(r,/flex-|baseline/))return Ie+"grid-column-align"+Sr(r,t)+r;break;case 2592:case 3360:return Ie+Se(r,"template-","")+r;case 4384:case 3616:return o&&o.some(function(s,i){return t=i,Tt(s.props,/grid-\w+-end/)})?~wo(r+(o=o[t].value),"span",0)?r:Ie+Se(r,"-start","")+r+Ie+"grid-row-span:"+(~wo(o,"span",0)?Tt(o,/\d+/):+Tt(o,/\d+/)-+Tt(r,/\d+/))+";":Ie+Se(r,"-start","")+r;case 4896:case 4128:return o&&o.some(function(s){return Tt(s.props,/grid-\w+-start/)})?r:Ie+Se(Se(r,"-end","-span"),"span ","")+r;case 4095:case 3583:case 4068:case 2532:return Se(r,/(.+)-inline(.+)/,Re+"$1$2")+r;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(St(r)-1-t>6)switch(Oe(r,t+1)){case 109:if(Oe(r,t+4)!==45)break;case 102:return Se(r,/(.+:)(.+)-([^]+)/,"$1"+Re+"$2-$3$1"+Dr+(Oe(r,t+3)==108?"$3":"$2-$3"))+r;case 115:return~wo(r,"stretch",0)?Kl(Se(r,"stretch","fill-available"),t,o)+r:r}break;case 5152:case 5920:return Se(r,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(s,i,a,l,c,p,d){return Ie+i+":"+a+d+(l?Ie+i+"-span:"+(c?p:+p-+a)+d:"")+r});case 4949:if(Oe(r,t+6)===121)return Se(r,":",":"+Re)+r;break;case 6444:switch(Oe(r,Oe(r,14)===45?18:11)){case 120:return Se(r,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Re+(Oe(r,14)===45?"inline-":"")+"box$3$1"+Re+"$2$3$1"+Ie+"$2box$3")+r;case 100:return Se(r,":",":"+Ie)+r}break;case 5719:case 2647:case 2135:case 3927:case 2391:return Se(r,"scroll-","scroll-snap-")+r}return r}function Lo(r,t){for(var o="",s=0;s<r.length;s++)o+=t(r[s],s,r,t)||"";return o}function Lg(r,t,o,s){switch(r.type){case bg:if(r.children.length)break;case xg:case Rn:return r.return=r.return||r.value;case Vl:return"";case Ul:return r.return=r.value+"{"+Lo(r.children,s)+"}";case es:if(!St(r.value=r.props.join(",")))return""}return St(o=Lo(r.children,s))?r.return=r.value+"{"+o+"}":""}function zg(r){var t=Ql(r);return function(o,s,i,a){for(var l="",c=0;c<t;c++)l+=r[c](o,s,i,a)||"";return l}}function Eg(r){return function(t){t.root||(t=t.return)&&r(t)}}function Mg(r,t,o,s){if(r.length>-1&&!r.return)switch(r.type){case Rn:r.return=Kl(r.value,r.length,o);return;case Ul:return Lo([Bt(r,{value:Se(r.value,"@","@"+Re)})],s);case es:if(r.length)return wg(o=r.props,function(i){switch(Tt(i,s=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":mr(Bt(r,{props:[Se(i,/:(read-\w+)/,":"+Dr+"$1")]})),mr(Bt(r,{props:[i]})),en(r,{props:Ti(o,s)});break;case"::placeholder":mr(Bt(r,{props:[Se(i,/:(plac\w+)/,":"+Re+"input-$1")]})),mr(Bt(r,{props:[Se(i,/:(plac\w+)/,":"+Dr+"$1")]})),mr(Bt(r,{props:[Se(i,/:(plac\w+)/,Ie+"input-$1")]})),mr(Bt(r,{props:[i]})),en(r,{props:Ti(o,s)});break}return""})}}var Bg={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},st={},Cr=typeof process<"u"&&st!==void 0&&(st.REACT_APP_SC_ATTR||st.SC_ATTR)||"data-styled",Xl="active",Zl="data-styled-version",ss="6.1.19",In=`/*!sc*/
`,zo=typeof window<"u"&&typeof document<"u",Ng=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&st!==void 0&&st.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&st.REACT_APP_SC_DISABLE_SPEEDY!==""?st.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&st.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&st!==void 0&&st.SC_DISABLE_SPEEDY!==void 0&&st.SC_DISABLE_SPEEDY!==""&&st.SC_DISABLE_SPEEDY!=="false"&&st.SC_DISABLE_SPEEDY),ns=Object.freeze([]),_r=Object.freeze({});function Wg(r,t,o){return o===void 0&&(o=_r),r.theme!==o.theme&&r.theme||t||o.theme}var Jl=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),Dg=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,$g=/(^-|-$)/g;function Pi(r){return r.replace(Dg,"-").replace($g,"")}var Fg=/(a)(d)/gi,io=52,Ii=function(r){return String.fromCharCode(r+(r>25?39:97))};function on(r){var t,o="";for(t=Math.abs(r);t>io;t=t/io|0)o=Ii(t%io)+o;return(Ii(t%io)+o).replace(Fg,"$1-$2")}var ws,ec=5381,yr=function(r,t){for(var o=t.length;o;)r=33*r^t.charCodeAt(--o);return r},tc=function(r){return yr(ec,r)};function Og(r){return on(tc(r)>>>0)}function qg(r){return r.displayName||r.name||"Component"}function js(r){return typeof r=="string"&&!0}var rc=typeof Symbol=="function"&&Symbol.for,oc=rc?Symbol.for("react.memo"):60115,Vg=rc?Symbol.for("react.forward_ref"):60112,Ug={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Hg={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},sc={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Yg=((ws={})[Vg]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},ws[oc]=sc,ws);function Li(r){return("type"in(t=r)&&t.type.$$typeof)===oc?sc:"$$typeof"in r?Yg[r.$$typeof]:Ug;var t}var Qg=Object.defineProperty,Gg=Object.getOwnPropertyNames,zi=Object.getOwnPropertySymbols,Kg=Object.getOwnPropertyDescriptor,Xg=Object.getPrototypeOf,Ei=Object.prototype;function nc(r,t,o){if(typeof t!="string"){if(Ei){var s=Xg(t);s&&s!==Ei&&nc(r,s,o)}var i=Gg(t);zi&&(i=i.concat(zi(t)));for(var a=Li(r),l=Li(t),c=0;c<i.length;++c){var p=i[c];if(!(p in Hg||o&&o[p]||l&&p in l||a&&p in a)){var d=Kg(t,p);try{Qg(r,p,d)}catch{}}}}return r}function Tr(r){return typeof r=="function"}function Ln(r){return typeof r=="object"&&"styledComponentId"in r}function er(r,t){return r&&t?"".concat(r," ").concat(t):r||t||""}function Mi(r,t){if(r.length===0)return"";for(var o=r[0],s=1;s<r.length;s++)o+=r[s];return o}function Ur(r){return r!==null&&typeof r=="object"&&r.constructor.name===Object.name&&!("props"in r&&r.$$typeof)}function sn(r,t,o){if(o===void 0&&(o=!1),!o&&!Ur(r)&&!Array.isArray(r))return t;if(Array.isArray(t))for(var s=0;s<t.length;s++)r[s]=sn(r[s],t[s]);else if(Ur(t))for(var s in t)r[s]=sn(r[s],t[s]);return r}function zn(r,t){Object.defineProperty(r,"toString",{value:t})}function eo(r){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(r," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var Zg=function(){function r(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}return r.prototype.indexOfGroup=function(t){for(var o=0,s=0;s<t;s++)o+=this.groupSizes[s];return o},r.prototype.insertRules=function(t,o){if(t>=this.groupSizes.length){for(var s=this.groupSizes,i=s.length,a=i;t>=a;)if((a<<=1)<0)throw eo(16,"".concat(t));this.groupSizes=new Uint32Array(a),this.groupSizes.set(s),this.length=a;for(var l=i;l<a;l++)this.groupSizes[l]=0}for(var c=this.indexOfGroup(t+1),p=(l=0,o.length);l<p;l++)this.tag.insertRule(c,o[l])&&(this.groupSizes[t]++,c++)},r.prototype.clearGroup=function(t){if(t<this.length){var o=this.groupSizes[t],s=this.indexOfGroup(t),i=s+o;this.groupSizes[t]=0;for(var a=s;a<i;a++)this.tag.deleteRule(s)}},r.prototype.getGroup=function(t){var o="";if(t>=this.length||this.groupSizes[t]===0)return o;for(var s=this.groupSizes[t],i=this.indexOfGroup(t),a=i+s,l=i;l<a;l++)o+="".concat(this.tag.getRule(l)).concat(In);return o},r}(),ko=new Map,Eo=new Map,Co=1,ao=function(r){if(ko.has(r))return ko.get(r);for(;Eo.has(Co);)Co++;var t=Co++;return ko.set(r,t),Eo.set(t,r),t},Jg=function(r,t){Co=t+1,ko.set(r,t),Eo.set(t,r)},eh="style[".concat(Cr,"][").concat(Zl,'="').concat(ss,'"]'),th=new RegExp("^".concat(Cr,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),rh=function(r,t,o){for(var s,i=o.split(","),a=0,l=i.length;a<l;a++)(s=i[a])&&r.registerName(t,s)},oh=function(r,t){for(var o,s=((o=t.textContent)!==null&&o!==void 0?o:"").split(In),i=[],a=0,l=s.length;a<l;a++){var c=s[a].trim();if(c){var p=c.match(th);if(p){var d=0|parseInt(p[1],10),m=p[2];d!==0&&(Jg(m,d),rh(r,m,p[3]),r.getTag().insertRules(d,i)),i.length=0}else i.push(c)}}},Bi=function(r){for(var t=document.querySelectorAll(eh),o=0,s=t.length;o<s;o++){var i=t[o];i&&i.getAttribute(Cr)!==Xl&&(oh(r,i),i.parentNode&&i.parentNode.removeChild(i))}};function sh(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var ic=function(r){var t=document.head,o=r||t,s=document.createElement("style"),i=function(c){var p=Array.from(c.querySelectorAll("style[".concat(Cr,"]")));return p[p.length-1]}(o),a=i!==void 0?i.nextSibling:null;s.setAttribute(Cr,Xl),s.setAttribute(Zl,ss);var l=sh();return l&&s.setAttribute("nonce",l),o.insertBefore(s,a),s},nh=function(){function r(t){this.element=ic(t),this.element.appendChild(document.createTextNode("")),this.sheet=function(o){if(o.sheet)return o.sheet;for(var s=document.styleSheets,i=0,a=s.length;i<a;i++){var l=s[i];if(l.ownerNode===o)return l}throw eo(17)}(this.element),this.length=0}return r.prototype.insertRule=function(t,o){try{return this.sheet.insertRule(o,t),this.length++,!0}catch{return!1}},r.prototype.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},r.prototype.getRule=function(t){var o=this.sheet.cssRules[t];return o&&o.cssText?o.cssText:""},r}(),ih=function(){function r(t){this.element=ic(t),this.nodes=this.element.childNodes,this.length=0}return r.prototype.insertRule=function(t,o){if(t<=this.length&&t>=0){var s=document.createTextNode(o);return this.element.insertBefore(s,this.nodes[t]||null),this.length++,!0}return!1},r.prototype.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},r.prototype.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},r}(),ah=function(){function r(t){this.rules=[],this.length=0}return r.prototype.insertRule=function(t,o){return t<=this.length&&(this.rules.splice(t,0,o),this.length++,!0)},r.prototype.deleteRule=function(t){this.rules.splice(t,1),this.length--},r.prototype.getRule=function(t){return t<this.length?this.rules[t]:""},r}(),Ni=zo,lh={isServer:!zo,useCSSOMInjection:!Ng},ac=function(){function r(t,o,s){t===void 0&&(t=_r),o===void 0&&(o={});var i=this;this.options=et(et({},lh),t),this.gs=o,this.names=new Map(s),this.server=!!t.isServer,!this.server&&zo&&Ni&&(Ni=!1,Bi(this)),zn(this,function(){return function(a){for(var l=a.getTag(),c=l.length,p="",d=function(u){var h=function(R){return Eo.get(R)}(u);if(h===void 0)return"continue";var b=a.names.get(h),j=l.getGroup(u);if(b===void 0||!b.size||j.length===0)return"continue";var _="".concat(Cr,".g").concat(u,'[id="').concat(h,'"]'),S="";b!==void 0&&b.forEach(function(R){R.length>0&&(S+="".concat(R,","))}),p+="".concat(j).concat(_,'{content:"').concat(S,'"}').concat(In)},m=0;m<c;m++)d(m);return p}(i)})}return r.registerId=function(t){return ao(t)},r.prototype.rehydrate=function(){!this.server&&zo&&Bi(this)},r.prototype.reconstructWithOptions=function(t,o){return o===void 0&&(o=!0),new r(et(et({},this.options),t),this.gs,o&&this.names||void 0)},r.prototype.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},r.prototype.getTag=function(){return this.tag||(this.tag=(t=function(o){var s=o.useCSSOMInjection,i=o.target;return o.isServer?new ah(i):s?new nh(i):new ih(i)}(this.options),new Zg(t)));var t},r.prototype.hasNameForId=function(t,o){return this.names.has(t)&&this.names.get(t).has(o)},r.prototype.registerName=function(t,o){if(ao(t),this.names.has(t))this.names.get(t).add(o);else{var s=new Set;s.add(o),this.names.set(t,s)}},r.prototype.insertRules=function(t,o,s){this.registerName(t,o),this.getTag().insertRules(ao(t),s)},r.prototype.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},r.prototype.clearRules=function(t){this.getTag().clearGroup(ao(t)),this.clearNames(t)},r.prototype.clearTag=function(){this.tag=void 0},r}(),ch=/&/g,dh=/^\s*\/\/.*$/gm;function lc(r,t){return r.map(function(o){return o.type==="rule"&&(o.value="".concat(t," ").concat(o.value),o.value=o.value.replaceAll(",",",".concat(t," ")),o.props=o.props.map(function(s){return"".concat(t," ").concat(s)})),Array.isArray(o.children)&&o.type!=="@keyframes"&&(o.children=lc(o.children,t)),o})}function ph(r){var t,o,s,i=_r,a=i.options,l=a===void 0?_r:a,c=i.plugins,p=c===void 0?ns:c,d=function(h,b,j){return j.startsWith(o)&&j.endsWith(o)&&j.replaceAll(o,"").length>0?".".concat(t):h},m=p.slice();m.push(function(h){h.type===es&&h.value.includes("&")&&(h.props[0]=h.props[0].replace(ch,o).replace(s,d))}),l.prefix&&m.push(Mg),m.push(Lg);var u=function(h,b,j,_){b===void 0&&(b=""),j===void 0&&(j=""),_===void 0&&(_="&"),t=_,o=b,s=new RegExp("\\".concat(o,"\\b"),"g");var S=h.replace(dh,""),R=Pg(j||b?"".concat(j," ").concat(b," { ").concat(S," }"):S);l.namespace&&(R=lc(R,l.namespace));var I=[];return Lo(R,zg(m.concat(Eg(function(C){return I.push(C)})))),I};return u.hash=p.length?p.reduce(function(h,b){return b.name||eo(15),yr(h,b.name)},ec).toString():"",u}var uh=new ac,nn=ph(),cc=Me.createContext({shouldForwardProp:void 0,styleSheet:uh,stylis:nn});cc.Consumer;Me.createContext(void 0);function Wi(){return y.useContext(cc)}var mh=function(){function r(t,o){var s=this;this.inject=function(i,a){a===void 0&&(a=nn);var l=s.name+a.hash;i.hasNameForId(s.id,l)||i.insertRules(s.id,l,a(s.rules,l,"@keyframes"))},this.name=t,this.id="sc-keyframes-".concat(t),this.rules=o,zn(this,function(){throw eo(12,String(s.name))})}return r.prototype.getName=function(t){return t===void 0&&(t=nn),this.name+t.hash},r}(),gh=function(r){return r>="A"&&r<="Z"};function Di(r){for(var t="",o=0;o<r.length;o++){var s=r[o];if(o===1&&s==="-"&&r[0]==="-")return r;gh(s)?t+="-"+s.toLowerCase():t+=s}return t.startsWith("ms-")?"-"+t:t}var dc=function(r){return r==null||r===!1||r===""},pc=function(r){var t,o,s=[];for(var i in r){var a=r[i];r.hasOwnProperty(i)&&!dc(a)&&(Array.isArray(a)&&a.isCss||Tr(a)?s.push("".concat(Di(i),":"),a,";"):Ur(a)?s.push.apply(s,Io(Io(["".concat(i," {")],pc(a),!1),["}"],!1)):s.push("".concat(Di(i),": ").concat((t=i,(o=a)==null||typeof o=="boolean"||o===""?"":typeof o!="number"||o===0||t in Bg||t.startsWith("--")?String(o).trim():"".concat(o,"px")),";")))}return s};function nr(r,t,o,s){if(dc(r))return[];if(Ln(r))return[".".concat(r.styledComponentId)];if(Tr(r)){if(!Tr(a=r)||a.prototype&&a.prototype.isReactComponent||!t)return[r];var i=r(t);return nr(i,t,o,s)}var a;return r instanceof mh?o?(r.inject(o,s),[r.getName(s)]):[r]:Ur(r)?pc(r):Array.isArray(r)?Array.prototype.concat.apply(ns,r.map(function(l){return nr(l,t,o,s)})):[r.toString()]}function hh(r){for(var t=0;t<r.length;t+=1){var o=r[t];if(Tr(o)&&!Ln(o))return!1}return!0}var fh=tc(ss),yh=function(){function r(t,o,s){this.rules=t,this.staticRulesId="",this.isStatic=(s===void 0||s.isStatic)&&hh(t),this.componentId=o,this.baseHash=yr(fh,o),this.baseStyle=s,ac.registerId(o)}return r.prototype.generateAndInjectStyles=function(t,o,s){var i=this.baseStyle?this.baseStyle.generateAndInjectStyles(t,o,s):"";if(this.isStatic&&!s.hash)if(this.staticRulesId&&o.hasNameForId(this.componentId,this.staticRulesId))i=er(i,this.staticRulesId);else{var a=Mi(nr(this.rules,t,o,s)),l=on(yr(this.baseHash,a)>>>0);if(!o.hasNameForId(this.componentId,l)){var c=s(a,".".concat(l),void 0,this.componentId);o.insertRules(this.componentId,l,c)}i=er(i,l),this.staticRulesId=l}else{for(var p=yr(this.baseHash,s.hash),d="",m=0;m<this.rules.length;m++){var u=this.rules[m];if(typeof u=="string")d+=u;else if(u){var h=Mi(nr(u,t,o,s));p=yr(p,h+m),d+=h}}if(d){var b=on(p>>>0);o.hasNameForId(this.componentId,b)||o.insertRules(this.componentId,b,s(d,".".concat(b),void 0,this.componentId)),i=er(i,b)}}return i},r}(),uc=Me.createContext(void 0);uc.Consumer;var Ss={};function xh(r,t,o){var s=Ln(r),i=r,a=!js(r),l=t.attrs,c=l===void 0?ns:l,p=t.componentId,d=p===void 0?function(z,f){var P=typeof z!="string"?"sc":Pi(z);Ss[P]=(Ss[P]||0)+1;var w="".concat(P,"-").concat(Og(ss+P+Ss[P]));return f?"".concat(f,"-").concat(w):w}(t.displayName,t.parentComponentId):p,m=t.displayName,u=m===void 0?function(z){return js(z)?"styled.".concat(z):"Styled(".concat(qg(z),")")}(r):m,h=t.displayName&&t.componentId?"".concat(Pi(t.displayName),"-").concat(t.componentId):t.componentId||d,b=s&&i.attrs?i.attrs.concat(c).filter(Boolean):c,j=t.shouldForwardProp;if(s&&i.shouldForwardProp){var _=i.shouldForwardProp;if(t.shouldForwardProp){var S=t.shouldForwardProp;j=function(z,f){return _(z,f)&&S(z,f)}}else j=_}var R=new yh(o,h,s?i.componentStyle:void 0);function I(z,f){return function(P,w,O){var V=P.attrs,re=P.componentStyle,Q=P.defaultProps,oe=P.foldedComponentIds,K=P.styledComponentId,Y=P.target,W=Me.useContext(uc),$=Wi(),L=P.shouldForwardProp||$.shouldForwardProp,k=Wg(w,W,Q)||_r,v=function(ie,ce,J){for(var X,ae=et(et({},ce),{className:void 0,theme:J}),de=0;de<ie.length;de+=1){var je=Tr(X=ie[de])?X(ae):X;for(var fe in je)ae[fe]=fe==="className"?er(ae[fe],je[fe]):fe==="style"?et(et({},ae[fe]),je[fe]):je[fe]}return ce.className&&(ae.className=er(ae.className,ce.className)),ae}(V,w,k),g=v.as||Y,A={};for(var ee in v)v[ee]===void 0||ee[0]==="$"||ee==="as"||ee==="theme"&&v.theme===k||(ee==="forwardedAs"?A.as=v.forwardedAs:L&&!L(ee,g)||(A[ee]=v[ee]));var U=function(ie,ce){var J=Wi(),X=ie.generateAndInjectStyles(ce,J.styleSheet,J.stylis);return X}(re,v),q=er(oe,K);return U&&(q+=" "+U),v.className&&(q+=" "+v.className),A[js(g)&&!Jl.has(g)?"class":"className"]=q,O&&(A.ref=O),y.createElement(g,A)}(C,z,f)}I.displayName=u;var C=Me.forwardRef(I);return C.attrs=b,C.componentStyle=R,C.displayName=u,C.shouldForwardProp=j,C.foldedComponentIds=s?er(i.foldedComponentIds,i.styledComponentId):"",C.styledComponentId=h,C.target=s?i.target:r,Object.defineProperty(C,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(z){this._foldedDefaultProps=s?function(f){for(var P=[],w=1;w<arguments.length;w++)P[w-1]=arguments[w];for(var O=0,V=P;O<V.length;O++)sn(f,V[O],!0);return f}({},i.defaultProps,z):z}}),zn(C,function(){return".".concat(C.styledComponentId)}),a&&nc(C,r,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),C}function $i(r,t){for(var o=[r[0]],s=0,i=t.length;s<i;s+=1)o.push(t[s],r[s+1]);return o}var Fi=function(r){return Object.assign(r,{isCss:!0})};function bh(r){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];if(Tr(r)||Ur(r))return Fi(nr($i(ns,Io([r],t,!0))));var s=r;return t.length===0&&s.length===1&&typeof s[0]=="string"?nr(s):Fi(nr($i(s,t)))}function an(r,t,o){if(o===void 0&&(o=_r),!t)throw eo(1,t);var s=function(i){for(var a=[],l=1;l<arguments.length;l++)a[l-1]=arguments[l];return r(t,o,bh.apply(void 0,Io([i],a,!1)))};return s.attrs=function(i){return an(r,t,et(et({},o),{attrs:Array.prototype.concat(o.attrs,i).filter(Boolean)}))},s.withConfig=function(i){return an(r,t,et(et({},o),i))},s}var mc=function(r){return an(xh,r)},te=mc;Jl.forEach(function(r){te[r]=mc(r)});const gc=y.createContext({transformPagePoint:r=>r,isStatic:!1,reducedMotion:"never"}),is=y.createContext({}),as=y.createContext(null),ls=typeof document<"u",En=ls?y.useLayoutEffect:y.useEffect,hc=y.createContext({strict:!1}),Mn=r=>r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),vh="framerAppearId",fc="data-"+Mn(vh);function wh(r,t,o,s){const{visualElement:i}=y.useContext(is),a=y.useContext(hc),l=y.useContext(as),c=y.useContext(gc).reducedMotion,p=y.useRef();s=s||a.renderer,!p.current&&s&&(p.current=s(r,{visualState:t,parent:i,props:o,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const d=p.current;y.useInsertionEffect(()=>{d&&d.update(o,l)});const m=y.useRef(!!(o[fc]&&!window.HandoffComplete));return En(()=>{d&&(d.render(),m.current&&d.animationState&&d.animationState.animateChanges())}),y.useEffect(()=>{d&&(d.updateFeatures(),!m.current&&d.animationState&&d.animationState.animateChanges(),m.current&&(m.current=!1,window.HandoffComplete=!0))}),d}function xr(r){return r&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function jh(r,t,o){return y.useCallback(s=>{s&&r.mount&&r.mount(s),t&&(s?t.mount(s):t.unmount()),o&&(typeof o=="function"?o(s):xr(o)&&(o.current=s))},[t])}function Hr(r){return typeof r=="string"||Array.isArray(r)}function cs(r){return r!==null&&typeof r=="object"&&typeof r.start=="function"}const Bn=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Nn=["initial",...Bn];function ds(r){return cs(r.animate)||Nn.some(t=>Hr(r[t]))}function yc(r){return!!(ds(r)||r.variants)}function Sh(r,t){if(ds(r)){const{initial:o,animate:s}=r;return{initial:o===!1||Hr(o)?o:void 0,animate:Hr(s)?s:void 0}}return r.inherit!==!1?t:{}}function kh(r){const{initial:t,animate:o}=Sh(r,y.useContext(is));return y.useMemo(()=>({initial:t,animate:o}),[Oi(t),Oi(o)])}function Oi(r){return Array.isArray(r)?r.join(" "):r}const qi={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Yr={};for(const r in qi)Yr[r]={isEnabled:t=>qi[r].some(o=>!!t[o])};function Ch(r){for(const t in r)Yr[t]={...Yr[t],...r[t]}}const Wn=y.createContext({}),xc=y.createContext({}),_h=Symbol.for("motionComponentSymbol");function Th({preloadedFeatures:r,createVisualElement:t,useRender:o,useVisualState:s,Component:i}){r&&Ch(r);function a(c,p){let d;const m={...y.useContext(gc),...c,layoutId:Ah(c)},{isStatic:u}=m,h=kh(c),b=s(c,u);if(!u&&ls){h.visualElement=wh(i,b,m,t);const j=y.useContext(xc),_=y.useContext(hc).strict;h.visualElement&&(d=h.visualElement.loadFeatures(m,_,r,j))}return y.createElement(is.Provider,{value:h},d&&h.visualElement?y.createElement(d,{visualElement:h.visualElement,...m}):null,o(i,c,jh(b,h.visualElement,p),b,u,h.visualElement))}const l=y.forwardRef(a);return l[_h]=i,l}function Ah({layoutId:r}){const t=y.useContext(Wn).id;return t&&r!==void 0?t+"-"+r:r}function Rh(r){function t(s,i={}){return Th(r(s,i))}if(typeof Proxy>"u")return t;const o=new Map;return new Proxy(t,{get:(s,i)=>(o.has(i)||o.set(i,t(i)),o.get(i))})}const Ph=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Dn(r){return typeof r!="string"||r.includes("-")?!1:!!(Ph.indexOf(r)>-1||/[A-Z]/.test(r))}const Mo={};function Ih(r){Object.assign(Mo,r)}const to=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],cr=new Set(to);function bc(r,{layout:t,layoutId:o}){return cr.has(r)||r.startsWith("origin")||(t||o!==void 0)&&(!!Mo[r]||r==="opacity")}const ot=r=>!!(r&&r.getVelocity),Lh={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},zh=to.length;function Eh(r,{enableHardwareAcceleration:t=!0,allowTransformNone:o=!0},s,i){let a="";for(let l=0;l<zh;l++){const c=to[l];if(r[c]!==void 0){const p=Lh[c]||c;a+=`${p}(${r[c]}) `}}return t&&!r.z&&(a+="translateZ(0)"),a=a.trim(),i?a=i(r,s?"":a):o&&s&&(a="none"),a}const vc=r=>t=>typeof t=="string"&&t.startsWith(r),wc=vc("--"),ln=vc("var(--"),Mh=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,Bh=(r,t)=>t&&typeof r=="number"?t.transform(r):r,Ot=(r,t,o)=>Math.min(Math.max(o,r),t),dr={test:r=>typeof r=="number",parse:parseFloat,transform:r=>r},$r={...dr,transform:r=>Ot(0,1,r)},lo={...dr,default:1},Fr=r=>Math.round(r*1e5)/1e5,ps=/(-)?([\d]*\.?[\d])+/g,jc=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Nh=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function ro(r){return typeof r=="string"}const oo=r=>({test:t=>ro(t)&&t.endsWith(r)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${r}`}),Nt=oo("deg"),kt=oo("%"),he=oo("px"),Wh=oo("vh"),Dh=oo("vw"),Vi={...kt,parse:r=>kt.parse(r)/100,transform:r=>kt.transform(r*100)},Ui={...dr,transform:Math.round},Sc={borderWidth:he,borderTopWidth:he,borderRightWidth:he,borderBottomWidth:he,borderLeftWidth:he,borderRadius:he,radius:he,borderTopLeftRadius:he,borderTopRightRadius:he,borderBottomRightRadius:he,borderBottomLeftRadius:he,width:he,maxWidth:he,height:he,maxHeight:he,size:he,top:he,right:he,bottom:he,left:he,padding:he,paddingTop:he,paddingRight:he,paddingBottom:he,paddingLeft:he,margin:he,marginTop:he,marginRight:he,marginBottom:he,marginLeft:he,rotate:Nt,rotateX:Nt,rotateY:Nt,rotateZ:Nt,scale:lo,scaleX:lo,scaleY:lo,scaleZ:lo,skew:Nt,skewX:Nt,skewY:Nt,distance:he,translateX:he,translateY:he,translateZ:he,x:he,y:he,z:he,perspective:he,transformPerspective:he,opacity:$r,originX:Vi,originY:Vi,originZ:he,zIndex:Ui,fillOpacity:$r,strokeOpacity:$r,numOctaves:Ui};function $n(r,t,o,s){const{style:i,vars:a,transform:l,transformOrigin:c}=r;let p=!1,d=!1,m=!0;for(const u in t){const h=t[u];if(wc(u)){a[u]=h;continue}const b=Sc[u],j=Bh(h,b);if(cr.has(u)){if(p=!0,l[u]=j,!m)continue;h!==(b.default||0)&&(m=!1)}else u.startsWith("origin")?(d=!0,c[u]=j):i[u]=j}if(t.transform||(p||s?i.transform=Eh(r.transform,o,m,s):i.transform&&(i.transform="none")),d){const{originX:u="50%",originY:h="50%",originZ:b=0}=c;i.transformOrigin=`${u} ${h} ${b}`}}const Fn=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function kc(r,t,o){for(const s in t)!ot(t[s])&&!bc(s,o)&&(r[s]=t[s])}function $h({transformTemplate:r},t,o){return y.useMemo(()=>{const s=Fn();return $n(s,t,{enableHardwareAcceleration:!o},r),Object.assign({},s.vars,s.style)},[t])}function Fh(r,t,o){const s=r.style||{},i={};return kc(i,s,r),Object.assign(i,$h(r,t,o)),r.transformValues?r.transformValues(i):i}function Oh(r,t,o){const s={},i=Fh(r,t,o);return r.drag&&r.dragListener!==!1&&(s.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=r.drag===!0?"none":`pan-${r.drag==="x"?"y":"x"}`),r.tabIndex===void 0&&(r.onTap||r.onTapStart||r.whileTap)&&(s.tabIndex=0),s.style=i,s}const qh=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Bo(r){return r.startsWith("while")||r.startsWith("drag")&&r!=="draggable"||r.startsWith("layout")||r.startsWith("onTap")||r.startsWith("onPan")||r.startsWith("onLayout")||qh.has(r)}let Cc=r=>!Bo(r);function Vh(r){r&&(Cc=t=>t.startsWith("on")?!Bo(t):r(t))}try{Vh(require("@emotion/is-prop-valid").default)}catch{}function Uh(r,t,o){const s={};for(const i in r)i==="values"&&typeof r.values=="object"||(Cc(i)||o===!0&&Bo(i)||!t&&!Bo(i)||r.draggable&&i.startsWith("onDrag"))&&(s[i]=r[i]);return s}function Hi(r,t,o){return typeof r=="string"?r:he.transform(t+o*r)}function Hh(r,t,o){const s=Hi(t,r.x,r.width),i=Hi(o,r.y,r.height);return`${s} ${i}`}const Yh={offset:"stroke-dashoffset",array:"stroke-dasharray"},Qh={offset:"strokeDashoffset",array:"strokeDasharray"};function Gh(r,t,o=1,s=0,i=!0){r.pathLength=1;const a=i?Yh:Qh;r[a.offset]=he.transform(-s);const l=he.transform(t),c=he.transform(o);r[a.array]=`${l} ${c}`}function On(r,{attrX:t,attrY:o,attrScale:s,originX:i,originY:a,pathLength:l,pathSpacing:c=1,pathOffset:p=0,...d},m,u,h){if($n(r,d,m,h),u){r.style.viewBox&&(r.attrs.viewBox=r.style.viewBox);return}r.attrs=r.style,r.style={};const{attrs:b,style:j,dimensions:_}=r;b.transform&&(_&&(j.transform=b.transform),delete b.transform),_&&(i!==void 0||a!==void 0||j.transform)&&(j.transformOrigin=Hh(_,i!==void 0?i:.5,a!==void 0?a:.5)),t!==void 0&&(b.x=t),o!==void 0&&(b.y=o),s!==void 0&&(b.scale=s),l!==void 0&&Gh(b,l,c,p,!1)}const _c=()=>({...Fn(),attrs:{}}),qn=r=>typeof r=="string"&&r.toLowerCase()==="svg";function Kh(r,t,o,s){const i=y.useMemo(()=>{const a=_c();return On(a,t,{enableHardwareAcceleration:!1},qn(s),r.transformTemplate),{...a.attrs,style:{...a.style}}},[t]);if(r.style){const a={};kc(a,r.style,r),i.style={...a,...i.style}}return i}function Xh(r=!1){return(o,s,i,{latestValues:a},l)=>{const p=(Dn(o)?Kh:Oh)(s,a,l,o),m={...Uh(s,typeof o=="string",r),...p,ref:i},{children:u}=s,h=y.useMemo(()=>ot(u)?u.get():u,[u]);return y.createElement(o,{...m,children:h})}}function Tc(r,{style:t,vars:o},s,i){Object.assign(r.style,t,i&&i.getProjectionStyles(s));for(const a in o)r.style.setProperty(a,o[a])}const Ac=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Rc(r,t,o,s){Tc(r,t,void 0,s);for(const i in t.attrs)r.setAttribute(Ac.has(i)?i:Mn(i),t.attrs[i])}function Vn(r,t){const{style:o}=r,s={};for(const i in o)(ot(o[i])||t.style&&ot(t.style[i])||bc(i,r))&&(s[i]=o[i]);return s}function Pc(r,t){const o=Vn(r,t);for(const s in r)if(ot(r[s])||ot(t[s])){const i=to.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;o[i]=r[s]}return o}function Un(r,t,o,s={},i={}){return typeof t=="function"&&(t=t(o!==void 0?o:r.custom,s,i)),typeof t=="string"&&(t=r.variants&&r.variants[t]),typeof t=="function"&&(t=t(o!==void 0?o:r.custom,s,i)),t}function Ic(r){const t=y.useRef(null);return t.current===null&&(t.current=r()),t.current}const No=r=>Array.isArray(r),Zh=r=>!!(r&&typeof r=="object"&&r.mix&&r.toValue),Jh=r=>No(r)?r[r.length-1]||0:r;function _o(r){const t=ot(r)?r.get():r;return Zh(t)?t.toValue():t}function ef({scrapeMotionValuesFromProps:r,createRenderState:t,onMount:o},s,i,a){const l={latestValues:tf(s,i,a,r),renderState:t()};return o&&(l.mount=c=>o(s,c,l)),l}const Lc=r=>(t,o)=>{const s=y.useContext(is),i=y.useContext(as),a=()=>ef(r,t,s,i);return o?a():Ic(a)};function tf(r,t,o,s){const i={},a=s(r,{});for(const h in a)i[h]=_o(a[h]);let{initial:l,animate:c}=r;const p=ds(r),d=yc(r);t&&d&&!p&&r.inherit!==!1&&(l===void 0&&(l=t.initial),c===void 0&&(c=t.animate));let m=o?o.initial===!1:!1;m=m||l===!1;const u=m?c:l;return u&&typeof u!="boolean"&&!cs(u)&&(Array.isArray(u)?u:[u]).forEach(b=>{const j=Un(r,b);if(!j)return;const{transitionEnd:_,transition:S,...R}=j;for(const I in R){let C=R[I];if(Array.isArray(C)){const z=m?C.length-1:0;C=C[z]}C!==null&&(i[I]=C)}for(const I in _)i[I]=_[I]}),i}const We=r=>r;class Yi{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const o=this.order.indexOf(t);o!==-1&&(this.order.splice(o,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function rf(r){let t=new Yi,o=new Yi,s=0,i=!1,a=!1;const l=new WeakSet,c={schedule:(p,d=!1,m=!1)=>{const u=m&&i,h=u?t:o;return d&&l.add(p),h.add(p)&&u&&i&&(s=t.order.length),p},cancel:p=>{o.remove(p),l.delete(p)},process:p=>{if(i){a=!0;return}if(i=!0,[t,o]=[o,t],o.clear(),s=t.order.length,s)for(let d=0;d<s;d++){const m=t.order[d];m(p),l.has(m)&&(c.schedule(m),r())}i=!1,a&&(a=!1,c.process(p))}};return c}const co=["prepare","read","update","preRender","render","postRender"],of=40;function sf(r,t){let o=!1,s=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=co.reduce((u,h)=>(u[h]=rf(()=>o=!0),u),{}),l=u=>a[u].process(i),c=()=>{const u=performance.now();o=!1,i.delta=s?1e3/60:Math.max(Math.min(u-i.timestamp,of),1),i.timestamp=u,i.isProcessing=!0,co.forEach(l),i.isProcessing=!1,o&&t&&(s=!1,r(c))},p=()=>{o=!0,s=!0,i.isProcessing||r(c)};return{schedule:co.reduce((u,h)=>{const b=a[h];return u[h]=(j,_=!1,S=!1)=>(o||p(),b.schedule(j,_,S)),u},{}),cancel:u=>co.forEach(h=>a[h].cancel(u)),state:i,steps:a}}const{schedule:Pe,cancel:It,state:He,steps:ks}=sf(typeof requestAnimationFrame<"u"?requestAnimationFrame:We,!0),nf={useVisualState:Lc({scrapeMotionValuesFromProps:Pc,createRenderState:_c,onMount:(r,t,{renderState:o,latestValues:s})=>{Pe.read(()=>{try{o.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{o.dimensions={x:0,y:0,width:0,height:0}}}),Pe.render(()=>{On(o,s,{enableHardwareAcceleration:!1},qn(t.tagName),r.transformTemplate),Rc(t,o)})}})},af={useVisualState:Lc({scrapeMotionValuesFromProps:Vn,createRenderState:Fn})};function lf(r,{forwardMotionProps:t=!1},o,s){return{...Dn(r)?nf:af,preloadedFeatures:o,useRender:Xh(t),createVisualElement:s,Component:r}}function At(r,t,o,s={passive:!0}){return r.addEventListener(t,o,s),()=>r.removeEventListener(t,o)}const zc=r=>r.pointerType==="mouse"?typeof r.button!="number"||r.button<=0:r.isPrimary!==!1;function us(r,t="page"){return{point:{x:r[t+"X"],y:r[t+"Y"]}}}const cf=r=>t=>zc(t)&&r(t,us(t));function Rt(r,t,o,s){return At(r,t,cf(o),s)}const df=(r,t)=>o=>t(r(o)),Ft=(...r)=>r.reduce(df);function Ec(r){let t=null;return()=>{const o=()=>{t=null};return t===null?(t=r,o):!1}}const Qi=Ec("dragHorizontal"),Gi=Ec("dragVertical");function Mc(r){let t=!1;if(r==="y")t=Gi();else if(r==="x")t=Qi();else{const o=Qi(),s=Gi();o&&s?t=()=>{o(),s()}:(o&&o(),s&&s())}return t}function Bc(){const r=Mc(!0);return r?(r(),!1):!0}class Ut{constructor(t){this.isMounted=!1,this.node=t}update(){}}function Ki(r,t){const o="pointer"+(t?"enter":"leave"),s="onHover"+(t?"Start":"End"),i=(a,l)=>{if(a.pointerType==="touch"||Bc())return;const c=r.getProps();r.animationState&&c.whileHover&&r.animationState.setActive("whileHover",t),c[s]&&Pe.update(()=>c[s](a,l))};return Rt(r.current,o,i,{passive:!r.getProps()[s]})}class pf extends Ut{mount(){this.unmount=Ft(Ki(this.node,!0),Ki(this.node,!1))}unmount(){}}class uf extends Ut{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ft(At(this.node.current,"focus",()=>this.onFocus()),At(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Nc=(r,t)=>t?r===t?!0:Nc(r,t.parentElement):!1;function Cs(r,t){if(!t)return;const o=new PointerEvent("pointer"+r);t(o,us(o))}class mf extends Ut{constructor(){super(...arguments),this.removeStartListeners=We,this.removeEndListeners=We,this.removeAccessibleListeners=We,this.startPointerPress=(t,o)=>{if(this.isPressing)return;this.removeEndListeners();const s=this.node.getProps(),a=Rt(window,"pointerup",(c,p)=>{if(!this.checkPressEnd())return;const{onTap:d,onTapCancel:m,globalTapTarget:u}=this.node.getProps();Pe.update(()=>{!u&&!Nc(this.node.current,c.target)?m&&m(c,p):d&&d(c,p)})},{passive:!(s.onTap||s.onPointerUp)}),l=Rt(window,"pointercancel",(c,p)=>this.cancelPress(c,p),{passive:!(s.onTapCancel||s.onPointerCancel)});this.removeEndListeners=Ft(a,l),this.startPress(t,o)},this.startAccessiblePress=()=>{const t=a=>{if(a.key!=="Enter"||this.isPressing)return;const l=c=>{c.key!=="Enter"||!this.checkPressEnd()||Cs("up",(p,d)=>{const{onTap:m}=this.node.getProps();m&&Pe.update(()=>m(p,d))})};this.removeEndListeners(),this.removeEndListeners=At(this.node.current,"keyup",l),Cs("down",(c,p)=>{this.startPress(c,p)})},o=At(this.node.current,"keydown",t),s=()=>{this.isPressing&&Cs("cancel",(a,l)=>this.cancelPress(a,l))},i=At(this.node.current,"blur",s);this.removeAccessibleListeners=Ft(o,i)}}startPress(t,o){this.isPressing=!0;const{onTapStart:s,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),s&&Pe.update(()=>s(t,o))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Bc()}cancelPress(t,o){if(!this.checkPressEnd())return;const{onTapCancel:s}=this.node.getProps();s&&Pe.update(()=>s(t,o))}mount(){const t=this.node.getProps(),o=Rt(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),s=At(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Ft(o,s)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const cn=new WeakMap,_s=new WeakMap,gf=r=>{const t=cn.get(r.target);t&&t(r)},hf=r=>{r.forEach(gf)};function ff({root:r,...t}){const o=r||document;_s.has(o)||_s.set(o,{});const s=_s.get(o),i=JSON.stringify(t);return s[i]||(s[i]=new IntersectionObserver(hf,{root:r,...t})),s[i]}function yf(r,t,o){const s=ff(t);return cn.set(r,o),s.observe(r),()=>{cn.delete(r),s.unobserve(r)}}const xf={some:0,all:1};class bf extends Ut{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:o,margin:s,amount:i="some",once:a}=t,l={root:o?o.current:void 0,rootMargin:s,threshold:typeof i=="number"?i:xf[i]},c=p=>{const{isIntersecting:d}=p;if(this.isInView===d||(this.isInView=d,a&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:m,onViewportLeave:u}=this.node.getProps(),h=d?m:u;h&&h(p)};return yf(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:o}=this.node;["amount","margin","root"].some(vf(t,o))&&this.startObserver()}unmount(){}}function vf({viewport:r={}},{viewport:t={}}={}){return o=>r[o]!==t[o]}const wf={inView:{Feature:bf},tap:{Feature:mf},focus:{Feature:uf},hover:{Feature:pf}};function Wc(r,t){if(!Array.isArray(t))return!1;const o=t.length;if(o!==r.length)return!1;for(let s=0;s<o;s++)if(t[s]!==r[s])return!1;return!0}function jf(r){const t={};return r.values.forEach((o,s)=>t[s]=o.get()),t}function Sf(r){const t={};return r.values.forEach((o,s)=>t[s]=o.getVelocity()),t}function ms(r,t,o){const s=r.getProps();return Un(s,t,o!==void 0?o:s.custom,jf(r),Sf(r))}let Hn=We;const ir=r=>r*1e3,Pt=r=>r/1e3,kf={current:!1},Dc=r=>Array.isArray(r)&&typeof r[0]=="number";function $c(r){return!!(!r||typeof r=="string"&&Fc[r]||Dc(r)||Array.isArray(r)&&r.every($c))}const Wr=([r,t,o,s])=>`cubic-bezier(${r}, ${t}, ${o}, ${s})`,Fc={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Wr([0,.65,.55,1]),circOut:Wr([.55,0,1,.45]),backIn:Wr([.31,.01,.66,-.59]),backOut:Wr([.33,1.53,.69,.99])};function Oc(r){if(r)return Dc(r)?Wr(r):Array.isArray(r)?r.map(Oc):Fc[r]}function Cf(r,t,o,{delay:s=0,duration:i,repeat:a=0,repeatType:l="loop",ease:c,times:p}={}){const d={[t]:o};p&&(d.offset=p);const m=Oc(c);return Array.isArray(m)&&(d.easing=m),r.animate(d,{delay:s,duration:i,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"})}function _f(r,{repeat:t,repeatType:o="loop"}){const s=t&&o!=="loop"&&t%2===1?0:r.length-1;return r[s]}const qc=(r,t,o)=>(((1-3*o+3*t)*r+(3*o-6*t))*r+3*t)*r,Tf=1e-7,Af=12;function Rf(r,t,o,s,i){let a,l,c=0;do l=t+(o-t)/2,a=qc(l,s,i)-r,a>0?o=l:t=l;while(Math.abs(a)>Tf&&++c<Af);return l}function so(r,t,o,s){if(r===t&&o===s)return We;const i=a=>Rf(a,0,1,r,o);return a=>a===0||a===1?a:qc(i(a),t,s)}const Pf=so(.42,0,1,1),If=so(0,0,.58,1),Vc=so(.42,0,.58,1),Lf=r=>Array.isArray(r)&&typeof r[0]!="number",Uc=r=>t=>t<=.5?r(2*t)/2:(2-r(2*(1-t)))/2,Hc=r=>t=>1-r(1-t),Yn=r=>1-Math.sin(Math.acos(r)),Yc=Hc(Yn),zf=Uc(Yn),Qc=so(.33,1.53,.69,.99),Qn=Hc(Qc),Ef=Uc(Qn),Mf=r=>(r*=2)<1?.5*Qn(r):.5*(2-Math.pow(2,-10*(r-1))),Bf={linear:We,easeIn:Pf,easeInOut:Vc,easeOut:If,circIn:Yn,circInOut:zf,circOut:Yc,backIn:Qn,backInOut:Ef,backOut:Qc,anticipate:Mf},Xi=r=>{if(Array.isArray(r)){Hn(r.length===4);const[t,o,s,i]=r;return so(t,o,s,i)}else if(typeof r=="string")return Bf[r];return r},Gn=(r,t)=>o=>!!(ro(o)&&Nh.test(o)&&o.startsWith(r)||t&&Object.prototype.hasOwnProperty.call(o,t)),Gc=(r,t,o)=>s=>{if(!ro(s))return s;const[i,a,l,c]=s.match(ps);return{[r]:parseFloat(i),[t]:parseFloat(a),[o]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},Nf=r=>Ot(0,255,r),Ts={...dr,transform:r=>Math.round(Nf(r))},tr={test:Gn("rgb","red"),parse:Gc("red","green","blue"),transform:({red:r,green:t,blue:o,alpha:s=1})=>"rgba("+Ts.transform(r)+", "+Ts.transform(t)+", "+Ts.transform(o)+", "+Fr($r.transform(s))+")"};function Wf(r){let t="",o="",s="",i="";return r.length>5?(t=r.substring(1,3),o=r.substring(3,5),s=r.substring(5,7),i=r.substring(7,9)):(t=r.substring(1,2),o=r.substring(2,3),s=r.substring(3,4),i=r.substring(4,5),t+=t,o+=o,s+=s,i+=i),{red:parseInt(t,16),green:parseInt(o,16),blue:parseInt(s,16),alpha:i?parseInt(i,16)/255:1}}const dn={test:Gn("#"),parse:Wf,transform:tr.transform},br={test:Gn("hsl","hue"),parse:Gc("hue","saturation","lightness"),transform:({hue:r,saturation:t,lightness:o,alpha:s=1})=>"hsla("+Math.round(r)+", "+kt.transform(Fr(t))+", "+kt.transform(Fr(o))+", "+Fr($r.transform(s))+")"},Xe={test:r=>tr.test(r)||dn.test(r)||br.test(r),parse:r=>tr.test(r)?tr.parse(r):br.test(r)?br.parse(r):dn.parse(r),transform:r=>ro(r)?r:r.hasOwnProperty("red")?tr.transform(r):br.transform(r)},ze=(r,t,o)=>-o*r+o*t+r;function As(r,t,o){return o<0&&(o+=1),o>1&&(o-=1),o<1/6?r+(t-r)*6*o:o<1/2?t:o<2/3?r+(t-r)*(2/3-o)*6:r}function Df({hue:r,saturation:t,lightness:o,alpha:s}){r/=360,t/=100,o/=100;let i=0,a=0,l=0;if(!t)i=a=l=o;else{const c=o<.5?o*(1+t):o+t-o*t,p=2*o-c;i=As(p,c,r+1/3),a=As(p,c,r),l=As(p,c,r-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:s}}const Rs=(r,t,o)=>{const s=r*r;return Math.sqrt(Math.max(0,o*(t*t-s)+s))},$f=[dn,tr,br],Ff=r=>$f.find(t=>t.test(r));function Zi(r){const t=Ff(r);let o=t.parse(r);return t===br&&(o=Df(o)),o}const Kc=(r,t)=>{const o=Zi(r),s=Zi(t),i={...o};return a=>(i.red=Rs(o.red,s.red,a),i.green=Rs(o.green,s.green,a),i.blue=Rs(o.blue,s.blue,a),i.alpha=ze(o.alpha,s.alpha,a),tr.transform(i))};function Of(r){var t,o;return isNaN(r)&&ro(r)&&(((t=r.match(ps))===null||t===void 0?void 0:t.length)||0)+(((o=r.match(jc))===null||o===void 0?void 0:o.length)||0)>0}const Xc={regex:Mh,countKey:"Vars",token:"${v}",parse:We},Zc={regex:jc,countKey:"Colors",token:"${c}",parse:Xe.parse},Jc={regex:ps,countKey:"Numbers",token:"${n}",parse:dr.parse};function Ps(r,{regex:t,countKey:o,token:s,parse:i}){const a=r.tokenised.match(t);a&&(r["num"+o]=a.length,r.tokenised=r.tokenised.replace(t,s),r.values.push(...a.map(i)))}function Wo(r){const t=r.toString(),o={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return o.value.includes("var(--")&&Ps(o,Xc),Ps(o,Zc),Ps(o,Jc),o}function ed(r){return Wo(r).values}function td(r){const{values:t,numColors:o,numVars:s,tokenised:i}=Wo(r),a=t.length;return l=>{let c=i;for(let p=0;p<a;p++)p<s?c=c.replace(Xc.token,l[p]):p<s+o?c=c.replace(Zc.token,Xe.transform(l[p])):c=c.replace(Jc.token,Fr(l[p]));return c}}const qf=r=>typeof r=="number"?0:r;function Vf(r){const t=ed(r);return td(r)(t.map(qf))}const qt={test:Of,parse:ed,createTransformer:td,getAnimatableNone:Vf},rd=(r,t)=>o=>`${o>0?t:r}`;function od(r,t){return typeof r=="number"?o=>ze(r,t,o):Xe.test(r)?Kc(r,t):r.startsWith("var(")?rd(r,t):nd(r,t)}const sd=(r,t)=>{const o=[...r],s=o.length,i=r.map((a,l)=>od(a,t[l]));return a=>{for(let l=0;l<s;l++)o[l]=i[l](a);return o}},Uf=(r,t)=>{const o={...r,...t},s={};for(const i in o)r[i]!==void 0&&t[i]!==void 0&&(s[i]=od(r[i],t[i]));return i=>{for(const a in s)o[a]=s[a](i);return o}},nd=(r,t)=>{const o=qt.createTransformer(t),s=Wo(r),i=Wo(t);return s.numVars===i.numVars&&s.numColors===i.numColors&&s.numNumbers>=i.numNumbers?Ft(sd(s.values,i.values),o):rd(r,t)},Qr=(r,t,o)=>{const s=t-r;return s===0?1:(o-r)/s},Ji=(r,t)=>o=>ze(r,t,o);function Hf(r){return typeof r=="number"?Ji:typeof r=="string"?Xe.test(r)?Kc:nd:Array.isArray(r)?sd:typeof r=="object"?Uf:Ji}function Yf(r,t,o){const s=[],i=o||Hf(r[0]),a=r.length-1;for(let l=0;l<a;l++){let c=i(r[l],r[l+1]);if(t){const p=Array.isArray(t)?t[l]||We:t;c=Ft(p,c)}s.push(c)}return s}function id(r,t,{clamp:o=!0,ease:s,mixer:i}={}){const a=r.length;if(Hn(a===t.length),a===1)return()=>t[0];r[0]>r[a-1]&&(r=[...r].reverse(),t=[...t].reverse());const l=Yf(t,s,i),c=l.length,p=d=>{let m=0;if(c>1)for(;m<r.length-2&&!(d<r[m+1]);m++);const u=Qr(r[m],r[m+1],d);return l[m](u)};return o?d=>p(Ot(r[0],r[a-1],d)):p}function Qf(r,t){const o=r[r.length-1];for(let s=1;s<=t;s++){const i=Qr(0,t,s);r.push(ze(o,1,i))}}function Gf(r){const t=[0];return Qf(t,r.length-1),t}function Kf(r,t){return r.map(o=>o*t)}function Xf(r,t){return r.map(()=>t||Vc).splice(0,r.length-1)}function Do({duration:r=300,keyframes:t,times:o,ease:s="easeInOut"}){const i=Lf(s)?s.map(Xi):Xi(s),a={done:!1,value:t[0]},l=Kf(o&&o.length===t.length?o:Gf(t),r),c=id(l,t,{ease:Array.isArray(i)?i:Xf(t,i)});return{calculatedDuration:r,next:p=>(a.value=c(p),a.done=p>=r,a)}}function ad(r,t){return t?r*(1e3/t):0}const Zf=5;function ld(r,t,o){const s=Math.max(t-Zf,0);return ad(o-r(s),t-s)}const Is=.001,Jf=.01,e0=10,t0=.05,r0=1;function o0({duration:r=800,bounce:t=.25,velocity:o=0,mass:s=1}){let i,a,l=1-t;l=Ot(t0,r0,l),r=Ot(Jf,e0,Pt(r)),l<1?(i=d=>{const m=d*l,u=m*r,h=m-o,b=pn(d,l),j=Math.exp(-u);return Is-h/b*j},a=d=>{const u=d*l*r,h=u*o+o,b=Math.pow(l,2)*Math.pow(d,2)*r,j=Math.exp(-u),_=pn(Math.pow(d,2),l);return(-i(d)+Is>0?-1:1)*((h-b)*j)/_}):(i=d=>{const m=Math.exp(-d*r),u=(d-o)*r+1;return-Is+m*u},a=d=>{const m=Math.exp(-d*r),u=(o-d)*(r*r);return m*u});const c=5/r,p=n0(i,a,c);if(r=ir(r),isNaN(p))return{stiffness:100,damping:10,duration:r};{const d=Math.pow(p,2)*s;return{stiffness:d,damping:l*2*Math.sqrt(s*d),duration:r}}}const s0=12;function n0(r,t,o){let s=o;for(let i=1;i<s0;i++)s=s-r(s)/t(s);return s}function pn(r,t){return r*Math.sqrt(1-t*t)}const i0=["duration","bounce"],a0=["stiffness","damping","mass"];function ea(r,t){return t.some(o=>r[o]!==void 0)}function l0(r){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...r};if(!ea(r,a0)&&ea(r,i0)){const o=o0(r);t={...t,...o,mass:1},t.isResolvedFromDuration=!0}return t}function cd({keyframes:r,restDelta:t,restSpeed:o,...s}){const i=r[0],a=r[r.length-1],l={done:!1,value:i},{stiffness:c,damping:p,mass:d,duration:m,velocity:u,isResolvedFromDuration:h}=l0({...s,velocity:-Pt(s.velocity||0)}),b=u||0,j=p/(2*Math.sqrt(c*d)),_=a-i,S=Pt(Math.sqrt(c/d)),R=Math.abs(_)<5;o||(o=R?.01:2),t||(t=R?.005:.5);let I;if(j<1){const C=pn(S,j);I=z=>{const f=Math.exp(-j*S*z);return a-f*((b+j*S*_)/C*Math.sin(C*z)+_*Math.cos(C*z))}}else if(j===1)I=C=>a-Math.exp(-S*C)*(_+(b+S*_)*C);else{const C=S*Math.sqrt(j*j-1);I=z=>{const f=Math.exp(-j*S*z),P=Math.min(C*z,300);return a-f*((b+j*S*_)*Math.sinh(P)+C*_*Math.cosh(P))/C}}return{calculatedDuration:h&&m||null,next:C=>{const z=I(C);if(h)l.done=C>=m;else{let f=b;C!==0&&(j<1?f=ld(I,C,z):f=0);const P=Math.abs(f)<=o,w=Math.abs(a-z)<=t;l.done=P&&w}return l.value=l.done?a:z,l}}}function ta({keyframes:r,velocity:t=0,power:o=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:l,min:c,max:p,restDelta:d=.5,restSpeed:m}){const u=r[0],h={done:!1,value:u},b=O=>c!==void 0&&O<c||p!==void 0&&O>p,j=O=>c===void 0?p:p===void 0||Math.abs(c-O)<Math.abs(p-O)?c:p;let _=o*t;const S=u+_,R=l===void 0?S:l(S);R!==S&&(_=R-u);const I=O=>-_*Math.exp(-O/s),C=O=>R+I(O),z=O=>{const V=I(O),re=C(O);h.done=Math.abs(V)<=d,h.value=h.done?R:re};let f,P;const w=O=>{b(h.value)&&(f=O,P=cd({keyframes:[h.value,j(h.value)],velocity:ld(C,O,h.value),damping:i,stiffness:a,restDelta:d,restSpeed:m}))};return w(0),{calculatedDuration:null,next:O=>{let V=!1;return!P&&f===void 0&&(V=!0,z(O),w(O)),f!==void 0&&O>f?P.next(O-f):(!V&&z(O),h)}}}const c0=r=>{const t=({timestamp:o})=>r(o);return{start:()=>Pe.update(t,!0),stop:()=>It(t),now:()=>He.isProcessing?He.timestamp:performance.now()}},ra=2e4;function oa(r){let t=0;const o=50;let s=r.next(t);for(;!s.done&&t<ra;)t+=o,s=r.next(t);return t>=ra?1/0:t}const d0={decay:ta,inertia:ta,tween:Do,keyframes:Do,spring:cd};function $o({autoplay:r=!0,delay:t=0,driver:o=c0,keyframes:s,type:i="keyframes",repeat:a=0,repeatDelay:l=0,repeatType:c="loop",onPlay:p,onStop:d,onComplete:m,onUpdate:u,...h}){let b=1,j=!1,_,S;const R=()=>{S=new Promise(A=>{_=A})};R();let I;const C=d0[i]||Do;let z;C!==Do&&typeof s[0]!="number"&&(z=id([0,100],s,{clamp:!1}),s=[0,100]);const f=C({...h,keyframes:s});let P;c==="mirror"&&(P=C({...h,keyframes:[...s].reverse(),velocity:-(h.velocity||0)}));let w="idle",O=null,V=null,re=null;f.calculatedDuration===null&&a&&(f.calculatedDuration=oa(f));const{calculatedDuration:Q}=f;let oe=1/0,K=1/0;Q!==null&&(oe=Q+l,K=oe*(a+1)-l);let Y=0;const W=A=>{if(V===null)return;b>0&&(V=Math.min(V,A)),b<0&&(V=Math.min(A-K/b,V)),O!==null?Y=O:Y=Math.round(A-V)*b;const ee=Y-t*(b>=0?1:-1),U=b>=0?ee<0:ee>K;Y=Math.max(ee,0),w==="finished"&&O===null&&(Y=K);let q=Y,ie=f;if(a){const ae=Math.min(Y,K)/oe;let de=Math.floor(ae),je=ae%1;!je&&ae>=1&&(je=1),je===1&&de--,de=Math.min(de,a+1),!!(de%2)&&(c==="reverse"?(je=1-je,l&&(je-=l/oe)):c==="mirror"&&(ie=P)),q=Ot(0,1,je)*oe}const ce=U?{done:!1,value:s[0]}:ie.next(q);z&&(ce.value=z(ce.value));let{done:J}=ce;!U&&Q!==null&&(J=b>=0?Y>=K:Y<=0);const X=O===null&&(w==="finished"||w==="running"&&J);return u&&u(ce.value),X&&k(),ce},$=()=>{I&&I.stop(),I=void 0},L=()=>{w="idle",$(),_(),R(),V=re=null},k=()=>{w="finished",m&&m(),$(),_()},v=()=>{if(j)return;I||(I=o(W));const A=I.now();p&&p(),O!==null?V=A-O:(!V||w==="finished")&&(V=A),w==="finished"&&R(),re=V,O=null,w="running",I.start()};r&&v();const g={then(A,ee){return S.then(A,ee)},get time(){return Pt(Y)},set time(A){A=ir(A),Y=A,O!==null||!I||b===0?O=A:V=I.now()-A/b},get duration(){const A=f.calculatedDuration===null?oa(f):f.calculatedDuration;return Pt(A)},get speed(){return b},set speed(A){A===b||!I||(b=A,g.time=Pt(Y))},get state(){return w},play:v,pause:()=>{w="paused",O=Y},stop:()=>{j=!0,w!=="idle"&&(w="idle",d&&d(),L())},cancel:()=>{re!==null&&W(re),L()},complete:()=>{w="finished"},sample:A=>(V=0,W(A))};return g}function p0(r){let t;return()=>(t===void 0&&(t=r()),t)}const u0=p0(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),m0=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),po=10,g0=2e4,h0=(r,t)=>t.type==="spring"||r==="backgroundColor"||!$c(t.ease);function f0(r,t,{onUpdate:o,onComplete:s,...i}){if(!(u0()&&m0.has(t)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let l=!1,c,p,d=!1;const m=()=>{p=new Promise(C=>{c=C})};m();let{keyframes:u,duration:h=300,ease:b,times:j}=i;if(h0(t,i)){const C=$o({...i,repeat:0,delay:0});let z={done:!1,value:u[0]};const f=[];let P=0;for(;!z.done&&P<g0;)z=C.sample(P),f.push(z.value),P+=po;j=void 0,u=f,h=P-po,b="linear"}const _=Cf(r.owner.current,t,u,{...i,duration:h,ease:b,times:j}),S=()=>{d=!1,_.cancel()},R=()=>{d=!0,Pe.update(S),c(),m()};return _.onfinish=()=>{d||(r.set(_f(u,i)),s&&s(),R())},{then(C,z){return p.then(C,z)},attachTimeline(C){return _.timeline=C,_.onfinish=null,We},get time(){return Pt(_.currentTime||0)},set time(C){_.currentTime=ir(C)},get speed(){return _.playbackRate},set speed(C){_.playbackRate=C},get duration(){return Pt(h)},play:()=>{l||(_.play(),It(S))},pause:()=>_.pause(),stop:()=>{if(l=!0,_.playState==="idle")return;const{currentTime:C}=_;if(C){const z=$o({...i,autoplay:!1});r.setWithVelocity(z.sample(C-po).value,z.sample(C).value,po)}R()},complete:()=>{d||_.finish()},cancel:R}}function y0({keyframes:r,delay:t,onUpdate:o,onComplete:s}){const i=()=>(o&&o(r[r.length-1]),s&&s(),{time:0,speed:1,duration:0,play:We,pause:We,stop:We,then:a=>(a(),Promise.resolve()),cancel:We,complete:We});return t?$o({keyframes:[0,1],duration:0,delay:t,onComplete:i}):i()}const x0={type:"spring",stiffness:500,damping:25,restSpeed:10},b0=r=>({type:"spring",stiffness:550,damping:r===0?2*Math.sqrt(550):30,restSpeed:10}),v0={type:"keyframes",duration:.8},w0={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},j0=(r,{keyframes:t})=>t.length>2?v0:cr.has(r)?r.startsWith("scale")?b0(t[1]):x0:w0,un=(r,t)=>r==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(qt.test(t)||t==="0")&&!t.startsWith("url(")),S0=new Set(["brightness","contrast","saturate","opacity"]);function k0(r){const[t,o]=r.slice(0,-1).split("(");if(t==="drop-shadow")return r;const[s]=o.match(ps)||[];if(!s)return r;const i=o.replace(s,"");let a=S0.has(t)?1:0;return s!==o&&(a*=100),t+"("+a+i+")"}const C0=/([a-z-]*)\(.*?\)/g,mn={...qt,getAnimatableNone:r=>{const t=r.match(C0);return t?t.map(k0).join(" "):r}},_0={...Sc,color:Xe,backgroundColor:Xe,outlineColor:Xe,fill:Xe,stroke:Xe,borderColor:Xe,borderTopColor:Xe,borderRightColor:Xe,borderBottomColor:Xe,borderLeftColor:Xe,filter:mn,WebkitFilter:mn},Kn=r=>_0[r];function dd(r,t){let o=Kn(r);return o!==mn&&(o=qt),o.getAnimatableNone?o.getAnimatableNone(t):void 0}const pd=r=>/^0[^.\s]+$/.test(r);function T0(r){if(typeof r=="number")return r===0;if(r!==null)return r==="none"||r==="0"||pd(r)}function A0(r,t,o,s){const i=un(t,o);let a;Array.isArray(o)?a=[...o]:a=[null,o];const l=s.from!==void 0?s.from:r.get();let c;const p=[];for(let d=0;d<a.length;d++)a[d]===null&&(a[d]=d===0?l:a[d-1]),T0(a[d])&&p.push(d),typeof a[d]=="string"&&a[d]!=="none"&&a[d]!=="0"&&(c=a[d]);if(i&&p.length&&c)for(let d=0;d<p.length;d++){const m=p[d];a[m]=dd(t,c)}return a}function R0({when:r,delay:t,delayChildren:o,staggerChildren:s,staggerDirection:i,repeat:a,repeatType:l,repeatDelay:c,from:p,elapsed:d,...m}){return!!Object.keys(m).length}function Xn(r,t){return r[t]||r.default||r}const P0={skipAnimations:!1},Zn=(r,t,o,s={})=>i=>{const a=Xn(s,r)||{},l=a.delay||s.delay||0;let{elapsed:c=0}=s;c=c-ir(l);const p=A0(t,r,o,a),d=p[0],m=p[p.length-1],u=un(r,d),h=un(r,m);let b={keyframes:p,velocity:t.getVelocity(),ease:"easeOut",...a,delay:-c,onUpdate:j=>{t.set(j),a.onUpdate&&a.onUpdate(j)},onComplete:()=>{i(),a.onComplete&&a.onComplete()}};if(R0(a)||(b={...b,...j0(r,b)}),b.duration&&(b.duration=ir(b.duration)),b.repeatDelay&&(b.repeatDelay=ir(b.repeatDelay)),!u||!h||kf.current||a.type===!1||P0.skipAnimations)return y0(b);if(!s.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const j=f0(t,r,b);if(j)return j}return $o(b)};function Fo(r){return!!(ot(r)&&r.add)}const ud=r=>/^\-?\d*\.?\d+$/.test(r);function Jn(r,t){r.indexOf(t)===-1&&r.push(t)}function ei(r,t){const o=r.indexOf(t);o>-1&&r.splice(o,1)}class ti{constructor(){this.subscriptions=[]}add(t){return Jn(this.subscriptions,t),()=>ei(this.subscriptions,t)}notify(t,o,s){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,o,s);else for(let a=0;a<i;a++){const l=this.subscriptions[a];l&&l(t,o,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const I0=r=>!isNaN(parseFloat(r));class L0{constructor(t,o={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(s,i=!0)=>{this.prev=this.current,this.current=s;const{delta:a,timestamp:l}=He;this.lastUpdated!==l&&(this.timeDelta=a,this.lastUpdated=l,Pe.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Pe.postRender(this.velocityCheck),this.velocityCheck=({timestamp:s})=>{s!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=I0(this.current),this.owner=o.owner}onChange(t){return this.on("change",t)}on(t,o){this.events[t]||(this.events[t]=new ti);const s=this.events[t].add(o);return t==="change"?()=>{s(),Pe.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,o){this.passiveEffect=t,this.stopPassiveEffect=o}set(t,o=!0){!o||!this.passiveEffect?this.updateAndNotify(t,o):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,o,s){this.set(o),this.prev=t,this.timeDelta=s}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?ad(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(o=>{this.hasAnimated=!0,this.animation=t(o),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ar(r,t){return new L0(r,t)}const md=r=>t=>t.test(r),z0={test:r=>r==="auto",parse:r=>r},gd=[dr,he,kt,Nt,Dh,Wh,z0],Mr=r=>gd.find(md(r)),E0=[...gd,Xe,qt],M0=r=>E0.find(md(r));function B0(r,t,o){r.hasValue(t)?r.getValue(t).set(o):r.addValue(t,Ar(o))}function N0(r,t){const o=ms(r,t);let{transitionEnd:s={},transition:i={},...a}=o?r.makeTargetAnimatable(o,!1):{};a={...a,...s};for(const l in a){const c=Jh(a[l]);B0(r,l,c)}}function W0(r,t,o){var s,i;const a=Object.keys(t).filter(c=>!r.hasValue(c)),l=a.length;if(l)for(let c=0;c<l;c++){const p=a[c],d=t[p];let m=null;Array.isArray(d)&&(m=d[0]),m===null&&(m=(i=(s=o[p])!==null&&s!==void 0?s:r.readValue(p))!==null&&i!==void 0?i:t[p]),m!=null&&(typeof m=="string"&&(ud(m)||pd(m))?m=parseFloat(m):!M0(m)&&qt.test(d)&&(m=dd(p,d)),r.addValue(p,Ar(m,{owner:r})),o[p]===void 0&&(o[p]=m),m!==null&&r.setBaseTarget(p,m))}}function D0(r,t){return t?(t[r]||t.default||t).from:void 0}function $0(r,t,o){const s={};for(const i in r){const a=D0(i,t);if(a!==void 0)s[i]=a;else{const l=o.getValue(i);l&&(s[i]=l.get())}}return s}function F0({protectedKeys:r,needsAnimating:t},o){const s=r.hasOwnProperty(o)&&t[o]!==!0;return t[o]=!1,s}function O0(r,t){const o=r.get();if(Array.isArray(t)){for(let s=0;s<t.length;s++)if(t[s]!==o)return!0}else return o!==t}function hd(r,t,{delay:o=0,transitionOverride:s,type:i}={}){let{transition:a=r.getDefaultTransition(),transitionEnd:l,...c}=r.makeTargetAnimatable(t);const p=r.getValue("willChange");s&&(a=s);const d=[],m=i&&r.animationState&&r.animationState.getState()[i];for(const u in c){const h=r.getValue(u),b=c[u];if(!h||b===void 0||m&&F0(m,u))continue;const j={delay:o,elapsed:0,...Xn(a||{},u)};if(window.HandoffAppearAnimations){const R=r.getProps()[fc];if(R){const I=window.HandoffAppearAnimations(R,u,h,Pe);I!==null&&(j.elapsed=I,j.isHandoff=!0)}}let _=!j.isHandoff&&!O0(h,b);if(j.type==="spring"&&(h.getVelocity()||j.velocity)&&(_=!1),h.animation&&(_=!1),_)continue;h.start(Zn(u,h,b,r.shouldReduceMotion&&cr.has(u)?{type:!1}:j));const S=h.animation;Fo(p)&&(p.add(u),S.then(()=>p.remove(u))),d.push(S)}return l&&Promise.all(d).then(()=>{l&&N0(r,l)}),d}function gn(r,t,o={}){const s=ms(r,t,o.custom);let{transition:i=r.getDefaultTransition()||{}}=s||{};o.transitionOverride&&(i=o.transitionOverride);const a=s?()=>Promise.all(hd(r,s,o)):()=>Promise.resolve(),l=r.variantChildren&&r.variantChildren.size?(p=0)=>{const{delayChildren:d=0,staggerChildren:m,staggerDirection:u}=i;return q0(r,t,d+p,m,u,o)}:()=>Promise.resolve(),{when:c}=i;if(c){const[p,d]=c==="beforeChildren"?[a,l]:[l,a];return p().then(()=>d())}else return Promise.all([a(),l(o.delay)])}function q0(r,t,o=0,s=0,i=1,a){const l=[],c=(r.variantChildren.size-1)*s,p=i===1?(d=0)=>d*s:(d=0)=>c-d*s;return Array.from(r.variantChildren).sort(V0).forEach((d,m)=>{d.notify("AnimationStart",t),l.push(gn(d,t,{...a,delay:o+p(m)}).then(()=>d.notify("AnimationComplete",t)))}),Promise.all(l)}function V0(r,t){return r.sortNodePosition(t)}function U0(r,t,o={}){r.notify("AnimationStart",t);let s;if(Array.isArray(t)){const i=t.map(a=>gn(r,a,o));s=Promise.all(i)}else if(typeof t=="string")s=gn(r,t,o);else{const i=typeof t=="function"?ms(r,t,o.custom):t;s=Promise.all(hd(r,i,o))}return s.then(()=>r.notify("AnimationComplete",t))}const H0=[...Bn].reverse(),Y0=Bn.length;function Q0(r){return t=>Promise.all(t.map(({animation:o,options:s})=>U0(r,o,s)))}function G0(r){let t=Q0(r);const o=X0();let s=!0;const i=(p,d)=>{const m=ms(r,d);if(m){const{transition:u,transitionEnd:h,...b}=m;p={...p,...b,...h}}return p};function a(p){t=p(r)}function l(p,d){const m=r.getProps(),u=r.getVariantContext(!0)||{},h=[],b=new Set;let j={},_=1/0;for(let R=0;R<Y0;R++){const I=H0[R],C=o[I],z=m[I]!==void 0?m[I]:u[I],f=Hr(z),P=I===d?C.isActive:null;P===!1&&(_=R);let w=z===u[I]&&z!==m[I]&&f;if(w&&s&&r.manuallyAnimateOnMount&&(w=!1),C.protectedKeys={...j},!C.isActive&&P===null||!z&&!C.prevProp||cs(z)||typeof z=="boolean")continue;let V=K0(C.prevProp,z)||I===d&&C.isActive&&!w&&f||R>_&&f,re=!1;const Q=Array.isArray(z)?z:[z];let oe=Q.reduce(i,{});P===!1&&(oe={});const{prevResolvedValues:K={}}=C,Y={...K,...oe},W=$=>{V=!0,b.has($)&&(re=!0,b.delete($)),C.needsAnimating[$]=!0};for(const $ in Y){const L=oe[$],k=K[$];if(j.hasOwnProperty($))continue;let v=!1;No(L)&&No(k)?v=!Wc(L,k):v=L!==k,v?L!==void 0?W($):b.add($):L!==void 0&&b.has($)?W($):C.protectedKeys[$]=!0}C.prevProp=z,C.prevResolvedValues=oe,C.isActive&&(j={...j,...oe}),s&&r.blockInitialAnimation&&(V=!1),V&&(!w||re)&&h.push(...Q.map($=>({animation:$,options:{type:I,...p}})))}if(b.size){const R={};b.forEach(I=>{const C=r.getBaseTarget(I);C!==void 0&&(R[I]=C)}),h.push({animation:R})}let S=!!h.length;return s&&(m.initial===!1||m.initial===m.animate)&&!r.manuallyAnimateOnMount&&(S=!1),s=!1,S?t(h):Promise.resolve()}function c(p,d,m){var u;if(o[p].isActive===d)return Promise.resolve();(u=r.variantChildren)===null||u===void 0||u.forEach(b=>{var j;return(j=b.animationState)===null||j===void 0?void 0:j.setActive(p,d)}),o[p].isActive=d;const h=l(m,p);for(const b in o)o[b].protectedKeys={};return h}return{animateChanges:l,setActive:c,setAnimateFunction:a,getState:()=>o}}function K0(r,t){return typeof t=="string"?t!==r:Array.isArray(t)?!Wc(t,r):!1}function Yt(r=!1){return{isActive:r,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function X0(){return{animate:Yt(!0),whileInView:Yt(),whileHover:Yt(),whileTap:Yt(),whileDrag:Yt(),whileFocus:Yt(),exit:Yt()}}class Z0 extends Ut{constructor(t){super(t),t.animationState||(t.animationState=G0(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),cs(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:o}=this.node.prevProps||{};t!==o&&this.updateAnimationControlsSubscription()}unmount(){}}let J0=0;class ey extends Ut{constructor(){super(...arguments),this.id=J0++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:o,custom:s}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const a=this.node.animationState.setActive("exit",!t,{custom:s??this.node.getProps().custom});o&&!t&&a.then(()=>o(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const ty={animation:{Feature:Z0},exit:{Feature:ey}},sa=(r,t)=>Math.abs(r-t);function ry(r,t){const o=sa(r.x,t.x),s=sa(r.y,t.y);return Math.sqrt(o**2+s**2)}class fd{constructor(t,o,{transformPagePoint:s,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const u=zs(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,b=ry(u.offset,{x:0,y:0})>=3;if(!h&&!b)return;const{point:j}=u,{timestamp:_}=He;this.history.push({...j,timestamp:_});const{onStart:S,onMove:R}=this.handlers;h||(S&&S(this.lastMoveEvent,u),this.startEvent=this.lastMoveEvent),R&&R(this.lastMoveEvent,u)},this.handlePointerMove=(u,h)=>{this.lastMoveEvent=u,this.lastMoveEventInfo=Ls(h,this.transformPagePoint),Pe.update(this.updatePoint,!0)},this.handlePointerUp=(u,h)=>{this.end();const{onEnd:b,onSessionEnd:j,resumeAnimation:_}=this.handlers;if(this.dragSnapToOrigin&&_&&_(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=zs(u.type==="pointercancel"?this.lastMoveEventInfo:Ls(h,this.transformPagePoint),this.history);this.startEvent&&b&&b(u,S),j&&j(u,S)},!zc(t))return;this.dragSnapToOrigin=a,this.handlers=o,this.transformPagePoint=s,this.contextWindow=i||window;const l=us(t),c=Ls(l,this.transformPagePoint),{point:p}=c,{timestamp:d}=He;this.history=[{...p,timestamp:d}];const{onSessionStart:m}=o;m&&m(t,zs(c,this.history)),this.removeListeners=Ft(Rt(this.contextWindow,"pointermove",this.handlePointerMove),Rt(this.contextWindow,"pointerup",this.handlePointerUp),Rt(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),It(this.updatePoint)}}function Ls(r,t){return t?{point:t(r.point)}:r}function na(r,t){return{x:r.x-t.x,y:r.y-t.y}}function zs({point:r},t){return{point:r,delta:na(r,yd(t)),offset:na(r,oy(t)),velocity:sy(t,.1)}}function oy(r){return r[0]}function yd(r){return r[r.length-1]}function sy(r,t){if(r.length<2)return{x:0,y:0};let o=r.length-1,s=null;const i=yd(r);for(;o>=0&&(s=r[o],!(i.timestamp-s.timestamp>ir(t)));)o--;if(!s)return{x:0,y:0};const a=Pt(i.timestamp-s.timestamp);if(a===0)return{x:0,y:0};const l={x:(i.x-s.x)/a,y:(i.y-s.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function dt(r){return r.max-r.min}function hn(r,t=0,o=.01){return Math.abs(r-t)<=o}function ia(r,t,o,s=.5){r.origin=s,r.originPoint=ze(t.min,t.max,r.origin),r.scale=dt(o)/dt(t),(hn(r.scale,1,1e-4)||isNaN(r.scale))&&(r.scale=1),r.translate=ze(o.min,o.max,r.origin)-r.originPoint,(hn(r.translate)||isNaN(r.translate))&&(r.translate=0)}function Or(r,t,o,s){ia(r.x,t.x,o.x,s?s.originX:void 0),ia(r.y,t.y,o.y,s?s.originY:void 0)}function aa(r,t,o){r.min=o.min+t.min,r.max=r.min+dt(t)}function ny(r,t,o){aa(r.x,t.x,o.x),aa(r.y,t.y,o.y)}function la(r,t,o){r.min=t.min-o.min,r.max=r.min+dt(t)}function qr(r,t,o){la(r.x,t.x,o.x),la(r.y,t.y,o.y)}function iy(r,{min:t,max:o},s){return t!==void 0&&r<t?r=s?ze(t,r,s.min):Math.max(r,t):o!==void 0&&r>o&&(r=s?ze(o,r,s.max):Math.min(r,o)),r}function ca(r,t,o){return{min:t!==void 0?r.min+t:void 0,max:o!==void 0?r.max+o-(r.max-r.min):void 0}}function ay(r,{top:t,left:o,bottom:s,right:i}){return{x:ca(r.x,o,i),y:ca(r.y,t,s)}}function da(r,t){let o=t.min-r.min,s=t.max-r.max;return t.max-t.min<r.max-r.min&&([o,s]=[s,o]),{min:o,max:s}}function ly(r,t){return{x:da(r.x,t.x),y:da(r.y,t.y)}}function cy(r,t){let o=.5;const s=dt(r),i=dt(t);return i>s?o=Qr(t.min,t.max-s,r.min):s>i&&(o=Qr(r.min,r.max-i,t.min)),Ot(0,1,o)}function dy(r,t){const o={};return t.min!==void 0&&(o.min=t.min-r.min),t.max!==void 0&&(o.max=t.max-r.min),o}const fn=.35;function py(r=fn){return r===!1?r=0:r===!0&&(r=fn),{x:pa(r,"left","right"),y:pa(r,"top","bottom")}}function pa(r,t,o){return{min:ua(r,t),max:ua(r,o)}}function ua(r,t){return typeof r=="number"?r:r[t]||0}const ma=()=>({translate:0,scale:1,origin:0,originPoint:0}),vr=()=>({x:ma(),y:ma()}),ga=()=>({min:0,max:0}),De=()=>({x:ga(),y:ga()});function mt(r){return[r("x"),r("y")]}function xd({top:r,left:t,right:o,bottom:s}){return{x:{min:t,max:o},y:{min:r,max:s}}}function uy({x:r,y:t}){return{top:t.min,right:r.max,bottom:t.max,left:r.min}}function my(r,t){if(!t)return r;const o=t({x:r.left,y:r.top}),s=t({x:r.right,y:r.bottom});return{top:o.y,left:o.x,bottom:s.y,right:s.x}}function Es(r){return r===void 0||r===1}function yn({scale:r,scaleX:t,scaleY:o}){return!Es(r)||!Es(t)||!Es(o)}function Gt(r){return yn(r)||bd(r)||r.z||r.rotate||r.rotateX||r.rotateY}function bd(r){return ha(r.x)||ha(r.y)}function ha(r){return r&&r!=="0%"}function Oo(r,t,o){const s=r-o,i=t*s;return o+i}function fa(r,t,o,s,i){return i!==void 0&&(r=Oo(r,i,s)),Oo(r,o,s)+t}function xn(r,t=0,o=1,s,i){r.min=fa(r.min,t,o,s,i),r.max=fa(r.max,t,o,s,i)}function vd(r,{x:t,y:o}){xn(r.x,t.translate,t.scale,t.originPoint),xn(r.y,o.translate,o.scale,o.originPoint)}function gy(r,t,o,s=!1){const i=o.length;if(!i)return;t.x=t.y=1;let a,l;for(let c=0;c<i;c++){a=o[c],l=a.projectionDelta;const p=a.instance;p&&p.style&&p.style.display==="contents"||(s&&a.options.layoutScroll&&a.scroll&&a!==a.root&&wr(r,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(t.x*=l.x.scale,t.y*=l.y.scale,vd(r,l)),s&&Gt(a.latestValues)&&wr(r,a.latestValues))}t.x=ya(t.x),t.y=ya(t.y)}function ya(r){return Number.isInteger(r)||r>1.0000000000001||r<.999999999999?r:1}function Wt(r,t){r.min=r.min+t,r.max=r.max+t}function xa(r,t,[o,s,i]){const a=t[i]!==void 0?t[i]:.5,l=ze(r.min,r.max,a);xn(r,t[o],t[s],l,t.scale)}const hy=["x","scaleX","originX"],fy=["y","scaleY","originY"];function wr(r,t){xa(r.x,t,hy),xa(r.y,t,fy)}function wd(r,t){return xd(my(r.getBoundingClientRect(),t))}function yy(r,t,o){const s=wd(r,o),{scroll:i}=t;return i&&(Wt(s.x,i.offset.x),Wt(s.y,i.offset.y)),s}const jd=({current:r})=>r?r.ownerDocument.defaultView:null,xy=new WeakMap;class by{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=De(),this.visualElement=t}start(t,{snapToCursor:o=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=m=>{const{dragSnapToOrigin:u}=this.getProps();u?this.pauseAnimation():this.stopAnimation(),o&&this.snapToCursor(us(m,"page").point)},a=(m,u)=>{const{drag:h,dragPropagation:b,onDragStart:j}=this.getProps();if(h&&!b&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Mc(h),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),mt(S=>{let R=this.getAxisMotionValue(S).get()||0;if(kt.test(R)){const{projection:I}=this.visualElement;if(I&&I.layout){const C=I.layout.layoutBox[S];C&&(R=dt(C)*(parseFloat(R)/100))}}this.originPoint[S]=R}),j&&Pe.update(()=>j(m,u),!1,!0);const{animationState:_}=this.visualElement;_&&_.setActive("whileDrag",!0)},l=(m,u)=>{const{dragPropagation:h,dragDirectionLock:b,onDirectionLock:j,onDrag:_}=this.getProps();if(!h&&!this.openGlobalLock)return;const{offset:S}=u;if(b&&this.currentDirection===null){this.currentDirection=vy(S),this.currentDirection!==null&&j&&j(this.currentDirection);return}this.updateAxis("x",u.point,S),this.updateAxis("y",u.point,S),this.visualElement.render(),_&&_(m,u)},c=(m,u)=>this.stop(m,u),p=()=>mt(m=>{var u;return this.getAnimationState(m)==="paused"&&((u=this.getAxisMotionValue(m).animation)===null||u===void 0?void 0:u.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new fd(t,{onSessionStart:i,onStart:a,onMove:l,onSessionEnd:c,resumeAnimation:p},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:jd(this.visualElement)})}stop(t,o){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:i}=o;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&Pe.update(()=>a(t,o))}cancel(){this.isDragging=!1;const{projection:t,animationState:o}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),o&&o.setActive("whileDrag",!1)}updateAxis(t,o,s){const{drag:i}=this.getProps();if(!s||!uo(t,i,this.currentDirection))return;const a=this.getAxisMotionValue(t);let l=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(l=iy(l,this.constraints[t],this.elastic[t])),a.set(l)}resolveConstraints(){var t;const{dragConstraints:o,dragElastic:s}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,a=this.constraints;o&&xr(o)?this.constraints||(this.constraints=this.resolveRefConstraints()):o&&i?this.constraints=ay(i.layoutBox,o):this.constraints=!1,this.elastic=py(s),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&mt(l=>{this.getAxisMotionValue(l)&&(this.constraints[l]=dy(i.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:o}=this.getProps();if(!t||!xr(t))return!1;const s=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=yy(s,i.root,this.visualElement.getTransformPagePoint());let l=ly(i.layout.layoutBox,a);if(o){const c=o(uy(l));this.hasMutatedConstraints=!!c,c&&(l=xd(c))}return l}startAnimation(t){const{drag:o,dragMomentum:s,dragElastic:i,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),p=this.constraints||{},d=mt(m=>{if(!uo(m,o,this.currentDirection))return;let u=p&&p[m]||{};l&&(u={min:0,max:0});const h=i?200:1e6,b=i?40:1e7,j={type:"inertia",velocity:s?t[m]:0,bounceStiffness:h,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...a,...u};return this.startAxisValueAnimation(m,j)});return Promise.all(d).then(c)}startAxisValueAnimation(t,o){const s=this.getAxisMotionValue(t);return s.start(Zn(t,s,0,o))}stopAnimation(){mt(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){mt(t=>{var o;return(o=this.getAxisMotionValue(t).animation)===null||o===void 0?void 0:o.pause()})}getAnimationState(t){var o;return(o=this.getAxisMotionValue(t).animation)===null||o===void 0?void 0:o.state}getAxisMotionValue(t){const o="_drag"+t.toUpperCase(),s=this.visualElement.getProps(),i=s[o];return i||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){mt(o=>{const{drag:s}=this.getProps();if(!uo(o,s,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(o);if(i&&i.layout){const{min:l,max:c}=i.layout.layoutBox[o];a.set(t[o]-ze(l,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:o}=this.getProps(),{projection:s}=this.visualElement;if(!xr(o)||!s||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};mt(l=>{const c=this.getAxisMotionValue(l);if(c){const p=c.get();i[l]=cy({min:p,max:p},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),mt(l=>{if(!uo(l,t,null))return;const c=this.getAxisMotionValue(l),{min:p,max:d}=this.constraints[l];c.set(ze(p,d,i[l]))})}addListeners(){if(!this.visualElement.current)return;xy.set(this.visualElement,this);const t=this.visualElement.current,o=Rt(t,"pointerdown",p=>{const{drag:d,dragListener:m=!0}=this.getProps();d&&m&&this.start(p)}),s=()=>{const{dragConstraints:p}=this.getProps();xr(p)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",s);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),s();const l=At(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",({delta:p,hasLayoutChanged:d})=>{this.isDragging&&d&&(mt(m=>{const u=this.getAxisMotionValue(m);u&&(this.originPoint[m]+=p[m].translate,u.set(u.get()+p[m].translate))}),this.visualElement.render())});return()=>{l(),o(),a(),c&&c()}}getProps(){const t=this.visualElement.getProps(),{drag:o=!1,dragDirectionLock:s=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:l=fn,dragMomentum:c=!0}=t;return{...t,drag:o,dragDirectionLock:s,dragPropagation:i,dragConstraints:a,dragElastic:l,dragMomentum:c}}}function uo(r,t,o){return(t===!0||t===r)&&(o===null||o===r)}function vy(r,t=10){let o=null;return Math.abs(r.y)>t?o="y":Math.abs(r.x)>t&&(o="x"),o}class wy extends Ut{constructor(t){super(t),this.removeGroupControls=We,this.removeListeners=We,this.controls=new by(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||We}unmount(){this.removeGroupControls(),this.removeListeners()}}const ba=r=>(t,o)=>{r&&Pe.update(()=>r(t,o))};class jy extends Ut{constructor(){super(...arguments),this.removePointerDownListener=We}onPointerDown(t){this.session=new fd(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:jd(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:o,onPan:s,onPanEnd:i}=this.node.getProps();return{onSessionStart:ba(t),onStart:ba(o),onMove:s,onEnd:(a,l)=>{delete this.session,i&&Pe.update(()=>i(a,l))}}}mount(){this.removePointerDownListener=Rt(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function Sy(){const r=y.useContext(as);if(r===null)return[!0,null];const{isPresent:t,onExitComplete:o,register:s}=r,i=y.useId();return y.useEffect(()=>s(i),[]),!t&&o?[!1,()=>o&&o(i)]:[!0]}const To={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function va(r,t){return t.max===t.min?0:r/(t.max-t.min)*100}const Br={correct:(r,t)=>{if(!t.target)return r;if(typeof r=="string")if(he.test(r))r=parseFloat(r);else return r;const o=va(r,t.target.x),s=va(r,t.target.y);return`${o}% ${s}%`}},ky={correct:(r,{treeScale:t,projectionDelta:o})=>{const s=r,i=qt.parse(r);if(i.length>5)return s;const a=qt.createTransformer(r),l=typeof i[0]!="number"?1:0,c=o.x.scale*t.x,p=o.y.scale*t.y;i[0+l]/=c,i[1+l]/=p;const d=ze(c,p,.5);return typeof i[2+l]=="number"&&(i[2+l]/=d),typeof i[3+l]=="number"&&(i[3+l]/=d),a(i)}};class Cy extends Me.Component{componentDidMount(){const{visualElement:t,layoutGroup:o,switchLayoutGroup:s,layoutId:i}=this.props,{projection:a}=t;Ih(_y),a&&(o.group&&o.group.add(a),s&&s.register&&i&&s.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),To.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:o,visualElement:s,drag:i,isPresent:a}=this.props,l=s.projection;return l&&(l.isPresent=a,i||t.layoutDependency!==o||o===void 0?l.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?l.promote():l.relegate()||Pe.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:o,switchLayoutGroup:s}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),o&&o.group&&o.group.remove(i),s&&s.deregister&&s.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Sd(r){const[t,o]=Sy(),s=y.useContext(Wn);return Me.createElement(Cy,{...r,layoutGroup:s,switchLayoutGroup:y.useContext(xc),isPresent:t,safeToRemove:o})}const _y={borderRadius:{...Br,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Br,borderTopRightRadius:Br,borderBottomLeftRadius:Br,borderBottomRightRadius:Br,boxShadow:ky},kd=["TopLeft","TopRight","BottomLeft","BottomRight"],Ty=kd.length,wa=r=>typeof r=="string"?parseFloat(r):r,ja=r=>typeof r=="number"||he.test(r);function Ay(r,t,o,s,i,a){i?(r.opacity=ze(0,o.opacity!==void 0?o.opacity:1,Ry(s)),r.opacityExit=ze(t.opacity!==void 0?t.opacity:1,0,Py(s))):a&&(r.opacity=ze(t.opacity!==void 0?t.opacity:1,o.opacity!==void 0?o.opacity:1,s));for(let l=0;l<Ty;l++){const c=`border${kd[l]}Radius`;let p=Sa(t,c),d=Sa(o,c);if(p===void 0&&d===void 0)continue;p||(p=0),d||(d=0),p===0||d===0||ja(p)===ja(d)?(r[c]=Math.max(ze(wa(p),wa(d),s),0),(kt.test(d)||kt.test(p))&&(r[c]+="%")):r[c]=d}(t.rotate||o.rotate)&&(r.rotate=ze(t.rotate||0,o.rotate||0,s))}function Sa(r,t){return r[t]!==void 0?r[t]:r.borderRadius}const Ry=Cd(0,.5,Yc),Py=Cd(.5,.95,We);function Cd(r,t,o){return s=>s<r?0:s>t?1:o(Qr(r,t,s))}function ka(r,t){r.min=t.min,r.max=t.max}function ut(r,t){ka(r.x,t.x),ka(r.y,t.y)}function Ca(r,t,o,s,i){return r-=t,r=Oo(r,1/o,s),i!==void 0&&(r=Oo(r,1/i,s)),r}function Iy(r,t=0,o=1,s=.5,i,a=r,l=r){if(kt.test(t)&&(t=parseFloat(t),t=ze(l.min,l.max,t/100)-l.min),typeof t!="number")return;let c=ze(a.min,a.max,s);r===a&&(c-=t),r.min=Ca(r.min,t,o,c,i),r.max=Ca(r.max,t,o,c,i)}function _a(r,t,[o,s,i],a,l){Iy(r,t[o],t[s],t[i],t.scale,a,l)}const Ly=["x","scaleX","originX"],zy=["y","scaleY","originY"];function Ta(r,t,o,s){_a(r.x,t,Ly,o?o.x:void 0,s?s.x:void 0),_a(r.y,t,zy,o?o.y:void 0,s?s.y:void 0)}function Aa(r){return r.translate===0&&r.scale===1}function _d(r){return Aa(r.x)&&Aa(r.y)}function Ey(r,t){return r.x.min===t.x.min&&r.x.max===t.x.max&&r.y.min===t.y.min&&r.y.max===t.y.max}function Td(r,t){return Math.round(r.x.min)===Math.round(t.x.min)&&Math.round(r.x.max)===Math.round(t.x.max)&&Math.round(r.y.min)===Math.round(t.y.min)&&Math.round(r.y.max)===Math.round(t.y.max)}function Ra(r){return dt(r.x)/dt(r.y)}class My{constructor(){this.members=[]}add(t){Jn(this.members,t),t.scheduleRender()}remove(t){if(ei(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const o=this.members[this.members.length-1];o&&this.promote(o)}}relegate(t){const o=this.members.findIndex(i=>t===i);if(o===0)return!1;let s;for(let i=o;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){s=a;break}}return s?(this.promote(s),!0):!1}promote(t,o){const s=this.lead;if(t!==s&&(this.prevLead=s,this.lead=t,t.show(),s)){s.instance&&s.scheduleRender(),t.scheduleRender(),t.resumeFrom=s,o&&(t.resumeFrom.preserveOpacity=!0),s.snapshot&&(t.snapshot=s.snapshot,t.snapshot.latestValues=s.animationValues||s.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:o,resumingFrom:s}=t;o.onExitComplete&&o.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Pa(r,t,o){let s="";const i=r.x.translate/t.x,a=r.y.translate/t.y;if((i||a)&&(s=`translate3d(${i}px, ${a}px, 0) `),(t.x!==1||t.y!==1)&&(s+=`scale(${1/t.x}, ${1/t.y}) `),o){const{rotate:p,rotateX:d,rotateY:m}=o;p&&(s+=`rotate(${p}deg) `),d&&(s+=`rotateX(${d}deg) `),m&&(s+=`rotateY(${m}deg) `)}const l=r.x.scale*t.x,c=r.y.scale*t.y;return(l!==1||c!==1)&&(s+=`scale(${l}, ${c})`),s||"none"}const By=(r,t)=>r.depth-t.depth;class Ny{constructor(){this.children=[],this.isDirty=!1}add(t){Jn(this.children,t),this.isDirty=!0}remove(t){ei(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(By),this.isDirty=!1,this.children.forEach(t)}}function Wy(r,t){const o=performance.now(),s=({timestamp:i})=>{const a=i-o;a>=t&&(It(s),r(a-t))};return Pe.read(s,!0),()=>It(s)}function Dy(r){window.MotionDebug&&window.MotionDebug.record(r)}function $y(r){return r instanceof SVGElement&&r.tagName!=="svg"}function Fy(r,t,o){const s=ot(r)?r:Ar(r);return s.start(Zn("",s,t,o)),s.animation}const Ia=["","X","Y","Z"],Oy={visibility:"hidden"},La=1e3;let qy=0;const Kt={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Ad({attachResizeListener:r,defaultParent:t,measureScroll:o,checkIsScrollRoot:s,resetTransform:i}){return class{constructor(l={},c=t?.()){this.id=qy++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Kt.totalNodes=Kt.resolvedTargetDeltas=Kt.recalculatedProjection=0,this.nodes.forEach(Hy),this.nodes.forEach(Xy),this.nodes.forEach(Zy),this.nodes.forEach(Yy),Dy(Kt)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let p=0;p<this.path.length;p++)this.path[p].shouldResetTransform=!0;this.root===this&&(this.nodes=new Ny)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new ti),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const p=this.eventHandlers.get(l);p&&p.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,c=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=$y(l),this.instance=l;const{layoutId:p,layout:d,visualElement:m}=this.options;if(m&&!m.current&&m.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),c&&(d||p)&&(this.isLayoutDirty=!0),r){let u;const h=()=>this.root.updateBlockedByResize=!1;r(l,()=>{this.root.updateBlockedByResize=!0,u&&u(),u=Wy(h,250),To.hasAnimatedSinceResize&&(To.hasAnimatedSinceResize=!1,this.nodes.forEach(Ea))})}p&&this.root.registerSharedNode(p,this),this.options.animate!==!1&&m&&(p||d)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:h,hasRelativeTargetChanged:b,layout:j})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||m.getDefaultTransition()||ox,{onLayoutAnimationStart:S,onLayoutAnimationComplete:R}=m.getProps(),I=!this.targetLayout||!Td(this.targetLayout,j)||b,C=!h&&b;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||C||h&&(I||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(u,C);const z={...Xn(_,"layout"),onPlay:S,onComplete:R};(m.shouldReduceMotion||this.options.layoutRoot)&&(z.delay=0,z.type=!1),this.startAnimation(z)}else h||Ea(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=j})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,It(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Jy),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const u=this.path[m];u.shouldResetTransform=!0,u.updateScroll("snapshot"),u.options.layoutRoot&&u.willUpdate(!1)}const{layoutId:c,layout:p}=this.options;if(c===void 0&&!p)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(za);return}this.isUpdating||this.nodes.forEach(Gy),this.isUpdating=!1,this.nodes.forEach(Ky),this.nodes.forEach(Vy),this.nodes.forEach(Uy),this.clearAllSnapshots();const c=performance.now();He.delta=Ot(0,1e3/60,c-He.timestamp),He.timestamp=c,He.isProcessing=!0,ks.update.process(He),ks.preRender.process(He),ks.render.process(He),He.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(Qy),this.sharedNodes.forEach(ex)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Pe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Pe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let p=0;p<this.path.length;p++)this.path[p].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=De(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c&&(this.scroll={animationId:this.root.animationId,phase:l,isRoot:s(this.instance),offset:o(this.instance)})}resetTransform(){if(!i)return;const l=this.isLayoutDirty||this.shouldResetTransform,c=this.projectionDelta&&!_d(this.projectionDelta),p=this.getTransformTemplate(),d=p?p(this.latestValues,""):void 0,m=d!==this.prevTransformTemplateValue;l&&(c||Gt(this.latestValues)||m)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let p=this.removeElementScroll(c);return l&&(p=this.removeTransform(p)),sx(p),{animationId:this.root.animationId,measuredBox:c,layoutBox:p,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return De();const c=l.measureViewportBox(),{scroll:p}=this.root;return p&&(Wt(c.x,p.offset.x),Wt(c.y,p.offset.y)),c}removeElementScroll(l){const c=De();ut(c,l);for(let p=0;p<this.path.length;p++){const d=this.path[p],{scroll:m,options:u}=d;if(d!==this.root&&m&&u.layoutScroll){if(m.isRoot){ut(c,l);const{scroll:h}=this.root;h&&(Wt(c.x,-h.offset.x),Wt(c.y,-h.offset.y))}Wt(c.x,m.offset.x),Wt(c.y,m.offset.y)}}return c}applyTransform(l,c=!1){const p=De();ut(p,l);for(let d=0;d<this.path.length;d++){const m=this.path[d];!c&&m.options.layoutScroll&&m.scroll&&m!==m.root&&wr(p,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),Gt(m.latestValues)&&wr(p,m.latestValues)}return Gt(this.latestValues)&&wr(p,this.latestValues),p}removeTransform(l){const c=De();ut(c,l);for(let p=0;p<this.path.length;p++){const d=this.path[p];if(!d.instance||!Gt(d.latestValues))continue;yn(d.latestValues)&&d.updateSnapshot();const m=De(),u=d.measurePageBox();ut(m,u),Ta(c,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,m)}return Gt(this.latestValues)&&Ta(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==He.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var c;const p=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=p.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=p.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=p.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==p;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:u,layoutId:h}=this.options;if(!(!this.layout||!(u||h))){if(this.resolvedRelativeTargetAt=He.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=De(),this.relativeTargetOrigin=De(),qr(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),ut(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=De(),this.targetWithTransforms=De()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),ny(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ut(this.target,this.layout.layoutBox),vd(this.target,this.targetDelta)):ut(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=De(),this.relativeTargetOrigin=De(),qr(this.relativeTargetOrigin,this.target,b.target),ut(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Kt.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||yn(this.parent.latestValues)||bd(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var l;const c=this.getLead(),p=!!this.resumingFrom||this!==c;let d=!0;if((this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty)&&(d=!1),p&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===He.timestamp&&(d=!1),d)return;const{layout:m,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||u))return;ut(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,b=this.treeScale.y;gy(this.layoutCorrected,this.treeScale,this.path,p),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox);const{target:j}=c;if(!j){this.projectionTransform&&(this.projectionDelta=vr(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=vr(),this.projectionDeltaWithTransform=vr());const _=this.projectionTransform;Or(this.projectionDelta,this.layoutCorrected,j,this.latestValues),this.projectionTransform=Pa(this.projectionDelta,this.treeScale),(this.projectionTransform!==_||this.treeScale.x!==h||this.treeScale.y!==b)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",j)),Kt.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),l){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(l,c=!1){const p=this.snapshot,d=p?p.latestValues:{},m={...this.latestValues},u=vr();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const h=De(),b=p?p.source:void 0,j=this.layout?this.layout.source:void 0,_=b!==j,S=this.getStack(),R=!S||S.members.length<=1,I=!!(_&&!R&&this.options.crossfade===!0&&!this.path.some(rx));this.animationProgress=0;let C;this.mixTargetDelta=z=>{const f=z/1e3;Ma(u.x,l.x,f),Ma(u.y,l.y,f),this.setTargetDelta(u),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(qr(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),tx(this.relativeTarget,this.relativeTargetOrigin,h,f),C&&Ey(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=De()),ut(C,this.relativeTarget)),_&&(this.animationValues=m,Ay(m,d,this.latestValues,f,I,R)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=f},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(It(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Pe.update(()=>{To.hasAnimatedSinceResize=!0,this.currentAnimation=Fy(0,La,{...l,onUpdate:c=>{this.mixTargetDelta(c),l.onUpdate&&l.onUpdate(c)},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(La),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:p,layout:d,latestValues:m}=l;if(!(!c||!p||!d)){if(this!==l&&this.layout&&d&&Rd(this.options.animationType,this.layout.layoutBox,d.layoutBox)){p=this.target||De();const u=dt(this.layout.layoutBox.x);p.x.min=l.target.x.min,p.x.max=p.x.min+u;const h=dt(this.layout.layoutBox.y);p.y.min=l.target.y.min,p.y.max=p.y.min+h}ut(c,p),wr(c,m),Or(this.projectionDeltaWithTransform,this.layoutCorrected,c,m)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new My),this.sharedNodes.get(l).add(c);const d=c.options.initialPromotionConfig;c.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var l;const{layoutId:c}=this.options;return c?((l=this.getStack())===null||l===void 0?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:c}=this.options;return c?(l=this.getStack())===null||l===void 0?void 0:l.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:p}={}){const d=this.getStack();d&&d.promote(this,p),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:p}=l;if((p.rotate||p.rotateX||p.rotateY||p.rotateZ)&&(c=!0),!c)return;const d={};for(let m=0;m<Ia.length;m++){const u="rotate"+Ia[m];p[u]&&(d[u]=p[u],l.setStaticValue(u,0))}l.render();for(const m in d)l.setStaticValue(m,d[m]);l.scheduleRender()}getProjectionStyles(l){var c,p;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Oy;const d={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=_o(l?.pointerEvents)||"",d.transform=m?m(this.latestValues,""):"none",d;const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){const _={};return this.options.layoutId&&(_.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,_.pointerEvents=_o(l?.pointerEvents)||""),this.hasProjected&&!Gt(this.latestValues)&&(_.transform=m?m({},""):"none",this.hasProjected=!1),_}const h=u.animationValues||u.latestValues;this.applyTransformsToTarget(),d.transform=Pa(this.projectionDeltaWithTransform,this.treeScale,h),m&&(d.transform=m(h,d.transform));const{x:b,y:j}=this.projectionDelta;d.transformOrigin=`${b.origin*100}% ${j.origin*100}% 0`,u.animationValues?d.opacity=u===this?(p=(c=h.opacity)!==null&&c!==void 0?c:this.latestValues.opacity)!==null&&p!==void 0?p:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:d.opacity=u===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const _ in Mo){if(h[_]===void 0)continue;const{correct:S,applyTo:R}=Mo[_],I=d.transform==="none"?h[_]:S(h[_],u);if(R){const C=R.length;for(let z=0;z<C;z++)d[R[z]]=I}else d[_]=I}return this.options.layoutId&&(d.pointerEvents=u===this?_o(l?.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var c;return(c=l.currentAnimation)===null||c===void 0?void 0:c.stop()}),this.root.nodes.forEach(za),this.root.sharedNodes.clear()}}}function Vy(r){r.updateLayout()}function Uy(r){var t;const o=((t=r.resumeFrom)===null||t===void 0?void 0:t.snapshot)||r.snapshot;if(r.isLead()&&r.layout&&o&&r.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:i}=r.layout,{animationType:a}=r.options,l=o.source!==r.layout.source;a==="size"?mt(u=>{const h=l?o.measuredBox[u]:o.layoutBox[u],b=dt(h);h.min=s[u].min,h.max=h.min+b}):Rd(a,o.layoutBox,s)&&mt(u=>{const h=l?o.measuredBox[u]:o.layoutBox[u],b=dt(s[u]);h.max=h.min+b,r.relativeTarget&&!r.currentAnimation&&(r.isProjectionDirty=!0,r.relativeTarget[u].max=r.relativeTarget[u].min+b)});const c=vr();Or(c,s,o.layoutBox);const p=vr();l?Or(p,r.applyTransform(i,!0),o.measuredBox):Or(p,s,o.layoutBox);const d=!_d(c);let m=!1;if(!r.resumeFrom){const u=r.getClosestProjectingParent();if(u&&!u.resumeFrom){const{snapshot:h,layout:b}=u;if(h&&b){const j=De();qr(j,o.layoutBox,h.layoutBox);const _=De();qr(_,s,b.layoutBox),Td(j,_)||(m=!0),u.options.layoutRoot&&(r.relativeTarget=_,r.relativeTargetOrigin=j,r.relativeParent=u)}}}r.notifyListeners("didUpdate",{layout:s,snapshot:o,delta:p,layoutDelta:c,hasLayoutChanged:d,hasRelativeTargetChanged:m})}else if(r.isLead()){const{onExitComplete:s}=r.options;s&&s()}r.options.transition=void 0}function Hy(r){Kt.totalNodes++,r.parent&&(r.isProjecting()||(r.isProjectionDirty=r.parent.isProjectionDirty),r.isSharedProjectionDirty||(r.isSharedProjectionDirty=!!(r.isProjectionDirty||r.parent.isProjectionDirty||r.parent.isSharedProjectionDirty)),r.isTransformDirty||(r.isTransformDirty=r.parent.isTransformDirty))}function Yy(r){r.isProjectionDirty=r.isSharedProjectionDirty=r.isTransformDirty=!1}function Qy(r){r.clearSnapshot()}function za(r){r.clearMeasurements()}function Gy(r){r.isLayoutDirty=!1}function Ky(r){const{visualElement:t}=r.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),r.resetTransform()}function Ea(r){r.finishAnimation(),r.targetDelta=r.relativeTarget=r.target=void 0,r.isProjectionDirty=!0}function Xy(r){r.resolveTargetDelta()}function Zy(r){r.calcProjection()}function Jy(r){r.resetRotation()}function ex(r){r.removeLeadSnapshot()}function Ma(r,t,o){r.translate=ze(t.translate,0,o),r.scale=ze(t.scale,1,o),r.origin=t.origin,r.originPoint=t.originPoint}function Ba(r,t,o,s){r.min=ze(t.min,o.min,s),r.max=ze(t.max,o.max,s)}function tx(r,t,o,s){Ba(r.x,t.x,o.x,s),Ba(r.y,t.y,o.y,s)}function rx(r){return r.animationValues&&r.animationValues.opacityExit!==void 0}const ox={duration:.45,ease:[.4,0,.1,1]},Na=r=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(r),Wa=Na("applewebkit/")&&!Na("chrome/")?Math.round:We;function Da(r){r.min=Wa(r.min),r.max=Wa(r.max)}function sx(r){Da(r.x),Da(r.y)}function Rd(r,t,o){return r==="position"||r==="preserve-aspect"&&!hn(Ra(t),Ra(o),.2)}const nx=Ad({attachResizeListener:(r,t)=>At(r,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ms={current:void 0},Pd=Ad({measureScroll:r=>({x:r.scrollLeft,y:r.scrollTop}),defaultParent:()=>{if(!Ms.current){const r=new nx({});r.mount(window),r.setOptions({layoutScroll:!0}),Ms.current=r}return Ms.current},resetTransform:(r,t)=>{r.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:r=>window.getComputedStyle(r).position==="fixed"}),ix={pan:{Feature:jy},drag:{Feature:wy,ProjectionNode:Pd,MeasureLayout:Sd}},ax=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function lx(r){const t=ax.exec(r);if(!t)return[,];const[,o,s]=t;return[o,s]}function bn(r,t,o=1){const[s,i]=lx(r);if(!s)return;const a=window.getComputedStyle(t).getPropertyValue(s);if(a){const l=a.trim();return ud(l)?parseFloat(l):l}else return ln(i)?bn(i,t,o+1):i}function cx(r,{...t},o){const s=r.current;if(!(s instanceof Element))return{target:t,transitionEnd:o};o&&(o={...o}),r.values.forEach(i=>{const a=i.get();if(!ln(a))return;const l=bn(a,s);l&&i.set(l)});for(const i in t){const a=t[i];if(!ln(a))continue;const l=bn(a,s);l&&(t[i]=l,o||(o={}),o[i]===void 0&&(o[i]=a))}return{target:t,transitionEnd:o}}const dx=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Id=r=>dx.has(r),px=r=>Object.keys(r).some(Id),$a=r=>r===dr||r===he,Fa=(r,t)=>parseFloat(r.split(", ")[t]),Oa=(r,t)=>(o,{transform:s})=>{if(s==="none"||!s)return 0;const i=s.match(/^matrix3d\((.+)\)$/);if(i)return Fa(i[1],t);{const a=s.match(/^matrix\((.+)\)$/);return a?Fa(a[1],r):0}},ux=new Set(["x","y","z"]),mx=to.filter(r=>!ux.has(r));function gx(r){const t=[];return mx.forEach(o=>{const s=r.getValue(o);s!==void 0&&(t.push([o,s.get()]),s.set(o.startsWith("scale")?1:0))}),t.length&&r.render(),t}const Rr={width:({x:r},{paddingLeft:t="0",paddingRight:o="0"})=>r.max-r.min-parseFloat(t)-parseFloat(o),height:({y:r},{paddingTop:t="0",paddingBottom:o="0"})=>r.max-r.min-parseFloat(t)-parseFloat(o),top:(r,{top:t})=>parseFloat(t),left:(r,{left:t})=>parseFloat(t),bottom:({y:r},{top:t})=>parseFloat(t)+(r.max-r.min),right:({x:r},{left:t})=>parseFloat(t)+(r.max-r.min),x:Oa(4,13),y:Oa(5,14)};Rr.translateX=Rr.x;Rr.translateY=Rr.y;const hx=(r,t,o)=>{const s=t.measureViewportBox(),i=t.current,a=getComputedStyle(i),{display:l}=a,c={};l==="none"&&t.setStaticValue("display",r.display||"block"),o.forEach(d=>{c[d]=Rr[d](s,a)}),t.render();const p=t.measureViewportBox();return o.forEach(d=>{const m=t.getValue(d);m&&m.jump(c[d]),r[d]=Rr[d](p,a)}),r},fx=(r,t,o={},s={})=>{t={...t},s={...s};const i=Object.keys(t).filter(Id);let a=[],l=!1;const c=[];if(i.forEach(p=>{const d=r.getValue(p);if(!r.hasValue(p))return;let m=o[p],u=Mr(m);const h=t[p];let b;if(No(h)){const j=h.length,_=h[0]===null?1:0;m=h[_],u=Mr(m);for(let S=_;S<j&&h[S]!==null;S++)b?Hn(Mr(h[S])===b):b=Mr(h[S])}else b=Mr(h);if(u!==b)if($a(u)&&$a(b)){const j=d.get();typeof j=="string"&&d.set(parseFloat(j)),typeof h=="string"?t[p]=parseFloat(h):Array.isArray(h)&&b===he&&(t[p]=h.map(parseFloat))}else u?.transform&&b?.transform&&(m===0||h===0)?m===0?d.set(b.transform(m)):t[p]=u.transform(h):(l||(a=gx(r),l=!0),c.push(p),s[p]=s[p]!==void 0?s[p]:t[p],d.jump(h))}),c.length){const p=c.indexOf("height")>=0?window.pageYOffset:null,d=hx(t,r,c);return a.length&&a.forEach(([m,u])=>{r.getValue(m).set(u)}),r.render(),ls&&p!==null&&window.scrollTo({top:p}),{target:d,transitionEnd:s}}else return{target:t,transitionEnd:s}};function yx(r,t,o,s){return px(t)?fx(r,t,o,s):{target:t,transitionEnd:s}}const xx=(r,t,o,s)=>{const i=cx(r,t,s);return t=i.target,s=i.transitionEnd,yx(r,t,o,s)},vn={current:null},Ld={current:!1};function bx(){if(Ld.current=!0,!!ls)if(window.matchMedia){const r=window.matchMedia("(prefers-reduced-motion)"),t=()=>vn.current=r.matches;r.addListener(t),t()}else vn.current=!1}function vx(r,t,o){const{willChange:s}=t;for(const i in t){const a=t[i],l=o[i];if(ot(a))r.addValue(i,a),Fo(s)&&s.add(i);else if(ot(l))r.addValue(i,Ar(a,{owner:r})),Fo(s)&&s.remove(i);else if(l!==a)if(r.hasValue(i)){const c=r.getValue(i);!c.hasAnimated&&c.set(a)}else{const c=r.getStaticValue(i);r.addValue(i,Ar(c!==void 0?c:a,{owner:r}))}}for(const i in o)t[i]===void 0&&r.removeValue(i);return t}const qa=new WeakMap,zd=Object.keys(Yr),wx=zd.length,Va=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],jx=Nn.length;class Sx{constructor({parent:t,props:o,presenceContext:s,reducedMotionConfig:i,visualState:a},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Pe.render(this.render,!1,!0);const{latestValues:c,renderState:p}=a;this.latestValues=c,this.baseTarget={...c},this.initialValues=o.initial?{...c}:{},this.renderState=p,this.parent=t,this.props=o,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.isControllingVariants=ds(o),this.isVariantNode=yc(o),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...m}=this.scrapeMotionValuesFromProps(o,{});for(const u in m){const h=m[u];c[u]!==void 0&&ot(h)&&(h.set(c[u],!1),Fo(d)&&d.add(u))}}scrapeMotionValuesFromProps(t,o){return{}}mount(t){this.current=t,qa.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((o,s)=>this.bindToMotionValue(s,o)),Ld.current||bx(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:vn.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){qa.delete(this.current),this.projection&&this.projection.unmount(),It(this.notifyUpdate),It(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,o){const s=cr.has(t),i=o.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&Pe.update(this.notifyUpdate,!1,!0),s&&this.projection&&(this.projection.isTransformDirty=!0)}),a=o.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{i(),a()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...o},s,i,a){let l,c;for(let p=0;p<wx;p++){const d=zd[p],{isEnabled:m,Feature:u,ProjectionNode:h,MeasureLayout:b}=Yr[d];h&&(l=h),m(o)&&(!this.features[d]&&u&&(this.features[d]=new u(this)),b&&(c=b))}if((this.type==="html"||this.type==="svg")&&!this.projection&&l){this.projection=new l(this.latestValues,this.parent&&this.parent.projection);const{layoutId:p,layout:d,drag:m,dragConstraints:u,layoutScroll:h,layoutRoot:b}=o;this.projection.setOptions({layoutId:p,layout:d,alwaysMeasureLayout:!!m||u&&xr(u),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof d=="string"?d:"both",initialPromotionConfig:a,layoutScroll:h,layoutRoot:b})}return c}updateFeatures(){for(const t in this.features){const o=this.features[t];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):De()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,o){this.latestValues[t]=o}makeTargetAnimatable(t,o=!0){return this.makeTargetAnimatableFromInstance(t,this.props,o)}update(t,o){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=o;for(let s=0;s<Va.length;s++){const i=Va[s];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a=t["on"+i];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=vx(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const s=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(s.initial=this.props.initial),s}const o={};for(let s=0;s<jx;s++){const i=Nn[s],a=this.props[i];(Hr(a)||a===!1)&&(o[i]=a)}return o}addVariantChild(t){const o=this.getClosestVariantNode();if(o)return o.variantChildren&&o.variantChildren.add(t),()=>o.variantChildren.delete(t)}addValue(t,o){o!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,o)),this.values.set(t,o),this.latestValues[t]=o.get()}removeValue(t){this.values.delete(t);const o=this.valueSubscriptions.get(t);o&&(o(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,o){if(this.props.values&&this.props.values[t])return this.props.values[t];let s=this.values.get(t);return s===void 0&&o!==void 0&&(s=Ar(o,{owner:this}),this.addValue(t,s)),s}readValue(t){var o;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(o=this.getBaseTargetFromProps(this.props,t))!==null&&o!==void 0?o:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,o){this.baseTarget[t]=o}getBaseTarget(t){var o;const{initial:s}=this.props,i=typeof s=="string"||typeof s=="object"?(o=Un(this.props,s))===null||o===void 0?void 0:o[t]:void 0;if(s&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!ot(a)?a:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,o){return this.events[t]||(this.events[t]=new ti),this.events[t].add(o)}notify(t,...o){this.events[t]&&this.events[t].notify(...o)}}class Ed extends Sx{sortInstanceNodePosition(t,o){return t.compareDocumentPosition(o)&2?1:-1}getBaseTargetFromProps(t,o){return t.style?t.style[o]:void 0}removeValueFromRenderState(t,{vars:o,style:s}){delete o[t],delete s[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:o,...s},{transformValues:i},a){let l=$0(s,t||{},this);if(i&&(o&&(o=i(o)),s&&(s=i(s)),l&&(l=i(l))),a){W0(this,s,l);const c=xx(this,s,l,o);o=c.transitionEnd,s=c.target}return{transition:t,transitionEnd:o,...s}}}function kx(r){return window.getComputedStyle(r)}class Cx extends Ed{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,o){if(cr.has(o)){const s=Kn(o);return s&&s.default||0}else{const s=kx(t),i=(wc(o)?s.getPropertyValue(o):s[o])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:o}){return wd(t,o)}build(t,o,s,i){$n(t,o,s,i.transformTemplate)}scrapeMotionValuesFromProps(t,o){return Vn(t,o)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;ot(t)&&(this.childSubscription=t.on("change",o=>{this.current&&(this.current.textContent=`${o}`)}))}renderInstance(t,o,s,i){Tc(t,o,s,i)}}class _x extends Ed{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,o){return t[o]}readValueFromInstance(t,o){if(cr.has(o)){const s=Kn(o);return s&&s.default||0}return o=Ac.has(o)?o:Mn(o),t.getAttribute(o)}measureInstanceViewportBox(){return De()}scrapeMotionValuesFromProps(t,o){return Pc(t,o)}build(t,o,s,i){On(t,o,s,this.isSVGTag,i.transformTemplate)}renderInstance(t,o,s,i){Rc(t,o,s,i)}mount(t){this.isSVGTag=qn(t.tagName),super.mount(t)}}const Tx=(r,t)=>Dn(r)?new _x(t,{enableHardwareAcceleration:!1}):new Cx(t,{enableHardwareAcceleration:!0}),Ax={layout:{ProjectionNode:Pd,MeasureLayout:Sd}},Rx={...ty,...wf,...ix,...Ax},Fe=Rh((r,t)=>lf(r,t,Rx,Tx));function Md(){const r=y.useRef(!1);return En(()=>(r.current=!0,()=>{r.current=!1}),[]),r}function Px(){const r=Md(),[t,o]=y.useState(0),s=y.useCallback(()=>{r.current&&o(t+1)},[t]);return[y.useCallback(()=>Pe.postRender(s),[s]),t]}class Ix extends y.Component{getSnapshotBeforeUpdate(t){const o=this.props.childRef.current;if(o&&t.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=o.offsetHeight||0,s.width=o.offsetWidth||0,s.top=o.offsetTop,s.left=o.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Lx({children:r,isPresent:t}){const o=y.useId(),s=y.useRef(null),i=y.useRef({width:0,height:0,top:0,left:0});return y.useInsertionEffect(()=>{const{width:a,height:l,top:c,left:p}=i.current;if(t||!s.current||!a||!l)return;s.current.dataset.motionPopId=o;const d=document.createElement("style");return document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${l}px !important;
            top: ${c}px !important;
            left: ${p}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[t]),y.createElement(Ix,{isPresent:t,childRef:s,sizeRef:i},y.cloneElement(r,{ref:s}))}const Bs=({children:r,initial:t,isPresent:o,onExitComplete:s,custom:i,presenceAffectsLayout:a,mode:l})=>{const c=Ic(zx),p=y.useId(),d=y.useMemo(()=>({id:p,initial:t,isPresent:o,custom:i,onExitComplete:m=>{c.set(m,!0);for(const u of c.values())if(!u)return;s&&s()},register:m=>(c.set(m,!1),()=>c.delete(m))}),a?void 0:[o]);return y.useMemo(()=>{c.forEach((m,u)=>c.set(u,!1))},[o]),y.useEffect(()=>{!o&&!c.size&&s&&s()},[o]),l==="popLayout"&&(r=y.createElement(Lx,{isPresent:o},r)),y.createElement(as.Provider,{value:d},r)};function zx(){return new Map}function Ex(r){return y.useEffect(()=>()=>r(),[])}const Xt=r=>r.key||"";function Mx(r,t){r.forEach(o=>{const s=Xt(o);t.set(s,o)})}function Bx(r){const t=[];return y.Children.forEach(r,o=>{y.isValidElement(o)&&t.push(o)}),t}const ri=({children:r,custom:t,initial:o=!0,onExitComplete:s,exitBeforeEnter:i,presenceAffectsLayout:a=!0,mode:l="sync"})=>{const c=y.useContext(Wn).forceRender||Px()[0],p=Md(),d=Bx(r);let m=d;const u=y.useRef(new Map).current,h=y.useRef(m),b=y.useRef(new Map).current,j=y.useRef(!0);if(En(()=>{j.current=!1,Mx(d,b),h.current=m}),Ex(()=>{j.current=!0,b.clear(),u.clear()}),j.current)return y.createElement(y.Fragment,null,m.map(I=>y.createElement(Bs,{key:Xt(I),isPresent:!0,initial:o?void 0:!1,presenceAffectsLayout:a,mode:l},I)));m=[...m];const _=h.current.map(Xt),S=d.map(Xt),R=_.length;for(let I=0;I<R;I++){const C=_[I];S.indexOf(C)===-1&&!u.has(C)&&u.set(C,void 0)}return l==="wait"&&u.size&&(m=[]),u.forEach((I,C)=>{if(S.indexOf(C)!==-1)return;const z=b.get(C);if(!z)return;const f=_.indexOf(C);let P=I;if(!P){const w=()=>{u.delete(C);const O=Array.from(b.keys()).filter(V=>!S.includes(V));if(O.forEach(V=>b.delete(V)),h.current=d.filter(V=>{const re=Xt(V);return re===C||O.includes(re)}),!u.size){if(p.current===!1)return;c(),s&&s()}};P=y.createElement(Bs,{key:Xt(z),isPresent:!1,onExitComplete:w,custom:t,presenceAffectsLayout:a,mode:l},z),u.set(C,P)}m.splice(f,0,P)}),m=m.map(I=>{const C=I.key;return u.has(C)?I:y.createElement(Bs,{key:Xt(I),isPresent:!0,presenceAffectsLayout:a,mode:l},I)}),y.createElement(y.Fragment,null,u.size?m:m.map(I=>y.cloneElement(I)))};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Wx=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,o,s)=>s?s.toUpperCase():o.toLowerCase()),Ua=r=>{const t=Wx(r);return t.charAt(0).toUpperCase()+t.slice(1)},Bd=(...r)=>r.filter((t,o,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===o).join(" ").trim(),Dx=r=>{for(const t in r)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $x={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=y.forwardRef(({color:r="currentColor",size:t=24,strokeWidth:o=2,absoluteStrokeWidth:s,className:i="",children:a,iconNode:l,...c},p)=>y.createElement("svg",{ref:p,...$x,width:t,height:t,stroke:r,strokeWidth:s?Number(o)*24/Number(t):o,className:Bd("lucide",i),...!a&&!Dx(c)&&{"aria-hidden":"true"},...c},[...l.map(([d,m])=>y.createElement(d,m)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=(r,t)=>{const o=y.forwardRef(({className:s,...i},a)=>y.createElement(Fx,{ref:a,iconNode:t,className:Bd(`lucide-${Nx(Ua(r))}`,`lucide-${r}`,s),...i}));return o.displayName=Ua(r),o};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],qx=be("award",Ox);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=[["path",{d:"M 22 14 L 22 10",key:"nqc4tb"}],["rect",{x:"2",y:"6",width:"16",height:"12",rx:"2",key:"13zb55"}]],Nd=be("battery",Vx);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],Hx=be("building-2",Ux);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yx=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],oi=be("building",Yx);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],Wd=be("calculator",Qx);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ht=be("calendar",Gx);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Dd=be("chevron-right",Kx);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Lt=be("circle-alert",Xx);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ne=be("circle-check-big",Zx);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],rr=be("circle-x",Jx);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],lt=be("clock",e1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],r1=be("credit-card",t1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Ha=be("dollar-sign",o1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],wn=be("download",s1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n1=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],i1=be("external-link",n1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ya=be("eye",a1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Le=be("file-text",l1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],d1=be("file",c1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p1=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],u1=be("funnel",p1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]],jn=be("git-compare",m1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],h1=be("grid-3x3",g1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Gr=be("house",f1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y1=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],x1=be("image",y1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],v1=be("info",b1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w1=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],$d=be("mail",w1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j1=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],$t=be("map-pin",j1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],gs=be("phone",S1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ns=be("plus",k1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],jr=be("refresh-cw",C1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _1=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Fd=be("search",_1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],A1=be("settings",T1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Qa=be("shield-check",R1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Kr=be("shield",P1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],L1=be("shopping-cart",I1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Ao=be("star",z1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Ga=be("sun",E1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],B1=be("table",M1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],W1=be("target",N1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]],$1=be("thumbs-down",D1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],O1=be("thumbs-up",F1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],V1=be("trash-2",q1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],si=be("trending-up",U1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Od=be("triangle-alert",H1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Zt=be("upload",Y1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],G1=be("user",Q1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],qd=be("users",K1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],qo=be("x",X1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],gt=be("zap",Z1),J1=te(Fe.div)`
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 16px;
  border-radius: 12px;
  font-size: 14px;
  font-weight: 600;
  cursor: ${r=>r.status==="not_verified"?"pointer":"default"};
  transition: all 0.2s cubic-bezier(0.16, 1, 0.3, 1);
  backdrop-filter: blur(8px);
  border: 2px solid;
  position: relative;
  overflow: hidden;
  
  /* SAMA-compliant security visual indicators */
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.6s ease;
  }
  
  ${r=>{const t="#3eb2b1";switch(r.status){case"verified":return`
          background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(22, 163, 74, 0.15));
          color: #15803d;
          border-color: #22c55e;
          box-shadow: 0 4px 12px rgba(34, 197, 94, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.1);
          
          &:hover::before {
            left: 100%;
          }
        `;case"pending":return`
          background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(217, 119, 6, 0.15));
          color: #d97706;
          border-color: #f59e0b;
          box-shadow: 0 4px 12px rgba(245, 158, 11, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.1);
          
          &:hover::before {
            left: 100%;
          }
        `;case"rejected":return`
          background: linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(220, 38, 38, 0.15));
          color: #dc2626;
          border-color: #ef4444;
          box-shadow: 0 4px 12px rgba(239, 68, 68, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.1);
          
          &:hover::before {
            left: 100%;
          }
        `;case"not_verified":default:return`
          background: linear-gradient(135deg, rgba(62, 178, 177, 0.1), rgba(45, 154, 153, 0.15));
          color: ${t};
          border-color: ${t};
          box-shadow: 0 4px 12px rgba(62, 178, 177, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.1);
          
          &:hover {
            background: linear-gradient(135deg, rgba(62, 178, 177, 0.15), rgba(45, 154, 153, 0.2));
            transform: translateY(-1px);
            box-shadow: 0 6px 16px rgba(62, 178, 177, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.1);
          }
          
          &:hover::before {
            left: 100%;
          }
          
          &:active {
            transform: translateY(0);
            box-shadow: 0 4px 12px rgba(62, 178, 177, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.1);
          }
        `}}}
  
  /* Mobile-first responsive design */
  @media (max-width: 768px) {
    font-size: 12px;
    padding: 6px 12px;
    gap: 6px;
  }
  
  /* RTL support */
  [dir="rtl"] & {
    direction: rtl;
  }
  
  /* High contrast accessibility */
  @media (prefers-contrast: high) {
    border-width: 3px;
    font-weight: 800;
  }
  
  /* Reduced motion accessibility */
  @media (prefers-reduced-motion: reduce) {
    transition: none;
    &::before {
      transition: none;
    }
  }
  
  /* Performance optimization */
  will-change: transform, box-shadow;
`,eb=te.div`
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  
  /* Icon animation for pending status */
  ${r=>r.status==="pending"&&`
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    
    @keyframes pulse {
      0%, 100% {
        opacity: 1;
      }
      50% {
        opacity: 0.7;
      }
    }
    
    /* Respect reduced motion */
    @media (prefers-reduced-motion: reduce) {
      animation: none;
    }
  `}
`,tb=te.span`
  font-weight: 600;
  letter-spacing: -0.01em;
  white-space: nowrap;
  
  /* Mobile responsive text */
  @media (max-width: 480px) {
    display: none;
  }
`,rb=te.span`
  font-weight: 500;
  opacity: 0.9;
  
  /* Mobile responsive text */
  @media (max-width: 480px) {
    display: none;
  }
`,Vo=({status:r,className:t,onClick:o,showUploadPrompt:s=!0})=>{const{t:i}=ve(),a=Be();console.log("🔍 VerificationBadge received status:",{status:r,showUploadPrompt:s,willShowUploadLink:r==="not_verified"&&s});const l=()=>{o?o():r==="not_verified"&&a("/dashboard/documents")},c=()=>{switch(r){case"verified":return e.jsx(Ne,{size:16});case"pending":return e.jsx(lt,{size:16});case"rejected":return e.jsx(Od,{size:16});case"not_verified":default:return s?e.jsx(i1,{size:16}):e.jsx(Kr,{size:16})}},p=()=>{switch(r){case"verified":return i("userApp.profile.verification.verified");case"pending":return i("userApp.profile.verification.pending");case"rejected":return i("userApp.profile.verification.rejected");case"not_verified":default:return i(s?"userApp.profile.verification.upload_documents":"userApp.profile.verification.not_verified")}},d=()=>{switch(r){case"verified":return i("userApp.profile.verification.aria.verified");case"pending":return i("userApp.profile.verification.aria.pending");case"rejected":return i("userApp.profile.verification.aria.rejected");case"not_verified":default:return i(s?"userApp.profile.verification.aria.upload_documents":"userApp.profile.verification.aria.not_verified")}};return e.jsxs(J1,{status:r,className:t,onClick:l,whileHover:r==="not_verified"?{scale:1.02}:void 0,whileTap:r==="not_verified"?{scale:.98}:void 0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3,ease:[.16,1,.3,1]},role:r==="not_verified"?"button":"status",tabIndex:r==="not_verified"?0:-1,"aria-label":d(),onKeyDown:m=>{r==="not_verified"&&(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),l())},children:[e.jsx(eb,{status:r,children:c()}),r==="not_verified"&&s?e.jsx(rb,{children:p()}):e.jsx(tb,{children:p()})]})},Ka=({user:r,onUpdate:t})=>{const{t:o,i18n:s}=ve(),i=s.language==="ar",[a,l]=y.useState("personal"),[c,p]=y.useState(null),[d,m]=y.useState(r),[u,h]=y.useState(null),[b,j]=y.useState(!0),[_,S]=y.useState("not_verified"),[R,I]=y.useState(!0),[C,z]=y.useState(r);y.useEffect(()=>xe.subscribe(T=>{T.user&&(console.log("🔄 User data updated from auth service:",T.user),m(T.user))}),[]),y.useEffect(()=>{const D=async()=>{try{j(!0);const T=d.role==="CONTRACTOR";console.log(`📥 Loading ${T?"contractor":"user"} profile...`);const G=T?await xt.getProfileData():await fr.getProfile();if(G.success&&G.profile){console.log(`✅ ${T?"Contractor":"User"} profile loaded successfully:`,G.profile),h(G.profile),G.profile.verificationStatus&&(console.log("🔍 Updating verification status from profile:",G.profile.verificationStatus),S(G.profile.verificationStatus));const ne={...d,id:d.id,email:d.email,first_name:d.first_name,last_name:d.last_name,role:d.role,phone:d.phone,national_id:d.national_id,region:G.profile.region,city:G.profile.city,district:G.profile.district,street_address:G.profile.streetAddress,landmark:G.profile.landmark,postal_code:G.profile.postalCode,property_type:G.profile.propertyType,property_ownership:G.profile.propertyOwnership,roof_size:G.profile.roofSize?.toString(),gps_latitude:G.profile.gpsLatitude?.toString(),gps_longitude:G.profile.gpsLongitude?.toString(),electricity_consumption:G.profile.electricityConsumption,electricity_meter_number:G.profile.electricityMeterNumber,preferred_language:G.profile.preferredLanguage,email_notifications:G.profile.emailNotifications,sms_notifications:G.profile.smsNotifications,marketing_consent:G.profile.marketingConsent};console.log("🔗 Merged user data:",ne),m(ne),z(ne)}else console.log("⚠️ No user profile found or failed to load:",G.error)}catch(T){console.error("❌ Error loading user profile:",T)}finally{j(!1)}};d.id&&D()},[d.id]),y.useEffect(()=>{const D=async()=>{try{if(I(!0),console.log("🔍 Loading verification status for user:",d.id),console.log("🔍 Current verification status before API call:",_),_==="not_verified"){console.log("🔍 Current status is not_verified, fetching from API...");const G=d.role==="CONTRACTOR"?await xt.getVerificationStatus(d.id):await fr.getVerificationStatus(d.id);console.log("✅ Verification status loaded from API:",G),console.log("🔍 VERIFICATION STATUS DEBUG:",{receivedStatus:G,currentVerificationState:_,aboutToSetStatus:G,willUpdate:G!==_}),S(G)}else console.log("✅ Verification status already loaded from profile:",_)}catch(T){console.error("❌ Failed to load verification status:",T),S("not_verified")}finally{I(!1)}};d.id&&D()},[d.id,_]);const[f,P]=y.useState({personal:{first_name:d.first_name||"",last_name:d.last_name||"",phone:d.phone||"",email:d.email||""},address:{region:d.region||"",city:d.city||"",district:d.district||"",street_address:d.street_address||"",landmark:d.landmark||"",postal_code:d.postal_code||"",gps_latitude:d.gps_latitude||"",gps_longitude:d.gps_longitude||""},property:{property_type:d.propertyType||d.property_type||"",property_ownership:d.propertyOwnership||d.property_ownership||"",roof_size:d.roofSize||d.roof_size||"",electricity_consumption:d.electricityConsumption||d.electricity_consumption||"",electricity_meter_number:d.electricityMeterNumber||d.electricity_meter_number||""},employment:{employment_status:d.employment_status||"",employer_name:d.employer_name||"",job_title:d.job_title||"",monthly_income:d.monthly_income||"",years_employed:d.years_employed||""},preferences:{preferred_language:d.preferred_language||"ar",email_notifications:d.email_notifications||!0,sms_notifications:d.sms_notifications||!0,marketing_consent:d.marketing_consent||!1}});y.useEffect(()=>{console.log("📋 Updating form data with new user data:",d),P({personal:{first_name:d.first_name||"",last_name:d.last_name||"",phone:d.phone||"",email:d.email||""},address:{region:d.region||"",city:d.city||"",district:d.district||"",street_address:d.street_address||"",landmark:d.landmark||"",postal_code:d.postal_code||"",gps_latitude:d.gps_latitude||"",gps_longitude:d.gps_longitude||""},property:{property_type:d.propertyType||d.property_type||"",property_ownership:d.propertyOwnership||d.property_ownership||"",roof_size:d.roofSize||d.roof_size||"",electricity_consumption:d.electricityConsumption||d.electricity_consumption||"",electricity_meter_number:d.electricityMeterNumber||d.electricity_meter_number||""},employment:{employment_status:d.employment_status||"",employer_name:d.employer_name||"",job_title:d.job_title||"",monthly_income:d.monthly_income||"",years_employed:d.years_employed||""},preferences:{preferred_language:d.preferred_language||"ar",email_notifications:d.email_notifications||!0,sms_notifications:d.sms_notifications||!0,marketing_consent:d.marketing_consent||!1}})},[d]);const O=(()=>{const D=[C.first_name,C.last_name,C.email,C.phone,C.national_id,C.region,C.city,C.district,C.street_address,C.postal_code,C.propertyType||C.property_type,C.propertyOwnership||C.property_ownership,C.roofSize||C.roof_size,C.electricityConsumption||C.electricity_consumption,C.electricityMeterNumber||C.electricity_meter_number,C.employment_status,C.monthly_income],T=[C.landmark,C.employer_name,C.job_title,C.years_employed,C.gps_latitude,C.gps_longitude,C.preferred_language],G=D.filter(x=>x&&x.toString().trim()!=="").length,ne=T.filter(x=>x&&x.toString().trim()!=="").length,se=G/D.length*80,E=ne/T.length*20;return Math.round(se+E)})(),V=()=>d.first_name&&d.last_name?`${d.first_name.charAt(0)}${d.last_name.charAt(0)}`.toUpperCase():d.first_name?d.first_name.charAt(0).toUpperCase():d.last_name?d.last_name.charAt(0).toUpperCase():d.email.charAt(0).toUpperCase(),re=(D,T)=>{switch(D){case"first_name":case"last_name":return T.replace(/[^a-zA-Z\u0600-\u06FF\s]/g,"").slice(0,25);case"phone":const G=T.replace(/\D/g,"");if(G.startsWith("966")){const F=G.slice(3,12);return F.length>0?`+966${F}`:"+966"}else if(G.startsWith("0")){const F=G.slice(1,10);return F.length>0?`+966${F}`:"+966"}else{const F=G.slice(0,9);return F.length>0?`+966${F}`:"+966"}case"national_id":const ne=T.replace(/\D/g,"");return ne.length===0?"":ne[0]!=="1"&&ne[0]!=="2"?ne[0]==="1"||ne[0]==="2"?ne.slice(0,10):"":ne.slice(0,10);case"city":case"district":return T.replace(/[^a-zA-Z\u0600-\u06FF\s-]/g,"").slice(0,30);case"street_address":return T.replace(/[^a-zA-Z0-9\u0600-\u06FF\s.,/-]/g,"").slice(0,50);case"landmark":return T.replace(/[^a-zA-Z0-9\u0600-\u06FF\s.,/-]/g,"").slice(0,50);case"postal_code":return T.replace(/\D/g,"").slice(0,5);case"employer_name":case"job_title":return T.replace(/[^a-zA-Z\u0600-\u06FF\s.,&-]/g,"").slice(0,50);case"monthly_income":const se=T.replace(/\D/g,"").slice(0,7);return se==="0"?"":se;case"years_employed":const E=T.replace(/\D/g,"").slice(0,2);return E==="0"?"":Math.min(parseInt(E)||0,50).toString();case"roof_size":const x=T.replace(/\D/g,"").slice(0,5);if(x==="")return"";const B=parseInt(x)||0;return B<10&&x!==""?"10":Math.min(B,1e4).toString();case"electricity_meter_number":return T.replace(/[^A-Z0-9]/g,"").slice(0,15);default:return T}},Q=(D,T)=>{switch(D){case"first_name":case"last_name":return T.length<2?{isValid:!1,message:"Name must be at least 2 characters"}:T.length>25?{isValid:!1,message:"Name must be 25 characters or less"}:/^[a-zA-Z\u0600-\u06FF\s-]+$/.test(T)?{isValid:!0}:{isValid:!1,message:"Name can only contain letters, spaces, and hyphens"};case"phone":return T.startsWith("+966")?T.length!==13?{isValid:!1,message:"Phone must be 13 characters (+966xxxxxxxxx)"}:{isValid:!0}:{isValid:!1,message:"Phone must start with +966"};case"national_id":return T.length!==10?{isValid:!1,message:o("validation.nationalIdLength")||"National ID must be exactly 10 digits"}:/^[12]/.test(T)?{isValid:!0}:{isValid:!1,message:o("validation.nationalIdStart")||"National ID must start with 1 or 2"};case"city":case"district":return T.length<2?{isValid:!1,message:o("validation.cityMinLength")||"City must be at least 2 characters"}:T.length>30?{isValid:!1,message:o("validation.cityMaxLength")||"City must be 30 characters or less"}:{isValid:!0};case"street_address":return T.length<5?{isValid:!1,message:o("validation.streetMinLength")||"Street address must be at least 5 characters"}:T.length>50?{isValid:!1,message:o("validation.streetMaxLength")||"Street address must be 50 characters or less"}:{isValid:!0};case"postal_code":return T.length!==5?{isValid:!1,message:o("validation.postalCodeLength")||"Postal code must be exactly 5 digits"}:{isValid:!0};case"monthly_income":const G=parseInt(T)||0;return G<3e3?{isValid:!1,message:o("validation.incomeMinimum")||"Monthly income must be at least 3,000 SAR"}:G>9999999?{isValid:!1,message:o("validation.incomeMaximum")||"Monthly income cannot exceed 9,999,999 SAR"}:{isValid:!0};case"years_employed":return(parseInt(T)||0)>50?{isValid:!1,message:o("validation.yearsMaximum")||"Years employed cannot exceed 50"}:{isValid:!0};case"roof_size":const se=parseInt(T)||0;return se<10?{isValid:!1,message:o("validation.roofSizeMinimum")||"Roof size must be at least 10 square meters"}:se>1e4?{isValid:!1,message:o("validation.roofSizeMaximum")||"Roof size cannot exceed 10,000 square meters"}:{isValid:!0};case"electricity_meter_number":return T.length<6?{isValid:!1,message:o("validation.meterNumberMinLength")||"Meter number must be at least 6 characters"}:T.length>15?{isValid:!1,message:o("validation.meterNumberMaxLength")||"Meter number cannot exceed 15 characters"}:{isValid:!0};case"employer_name":return T.length>0&&T.length<2?{isValid:!1,message:o("validation.employerMinLength")||"Employer name must be at least 2 characters"}:{isValid:!0};case"job_title":return T.length>0&&T.length<2?{isValid:!1,message:o("validation.jobTitleMinLength")||"Job title must be at least 2 characters"}:{isValid:!0};default:return{isValid:!0}}},oe=(D,T,G)=>{const ne=re(T,G),se=Q(T,ne);me(E=>({...E,[T]:se})),ae(E=>{const x={...E};return delete x[T],x}),P(E=>({...E,[D]:{...E[D],[T]:ne}}))},K=(D,T,G)=>{if(!T||T===""){if(({personal:["first_name","last_name"],address:["region","city","postal_code"],property:["property_type","property_ownership","roof_size","electricity_consumption","electricity_meter_number"],employment:["employment_status"],preferences:[]}[G]||[]).includes(D))switch(D){case"first_name":return o("auth.register.validation.firstNameRequired")||o("validation.firstName_required")||"First name is required";case"last_name":return o("auth.register.validation.lastNameRequired")||o("validation.lastName_required")||"Last name is required";case"region":return o("auth.register.validation.regionRequired")||"Region is required";case"city":return o("auth.register.validation.cityRequired")||"City is required";case"postal_code":return o("auth.register.validation.postalCodeRequired")||"Postal code is required";case"property_type":return o("auth.register.validation.propertyTypeRequired")||"Property type is required";case"property_ownership":return o("auth.register.validation.propertyOwnershipRequired")||"Property ownership is required";case"roof_size":return o("auth.register.validation.roofSizeRequired")||"Roof size is required";case"electricity_consumption":return o("auth.register.validation.electricityConsumptionRequired")||"Electricity consumption is required";case"electricity_meter_number":return o("auth.register.validation.meterNumberRequired")||"Meter number is required";case"employment_status":return o("auth.register.validation.employmentStatusRequired")||"Employment status is required";default:return o(`auth.register.validation.${D}Required`)||`${D.replace("_"," ")} is required`}return null}switch(D){case"first_name":case"last_name":if(T.length>25)return"Name must be 25 characters or less";if(!/^[a-zA-Z\u0600-\u06FF\s-]+$/.test(T))return"Name can only contain letters, spaces, and hyphens";break;case"postal_code":if(!/^\d{5}$/.test(T))return"Postal code must be exactly 5 digits";break;case"city":case"district":if(T.length>30)return o("auth.register.validation.cityMaxLength")||"City name must be 30 characters or less";if(!/^[a-zA-Z\u0600-\u06FF\s-]+$/.test(T))return o("auth.register.validation.cityInvalid")||"City name can only contain letters, spaces, and hyphens";break;case"street_address":if(T.length>50)return o("auth.register.validation.streetAddressMaxLength")||"Street address must be 50 characters or less";break;case"landmark":if(T.length>50)return o("auth.register.validation.landmarkMaxLength")||"Landmark must be 50 characters or less";break;case"roof_size":const ne=Number(T);if(isNaN(ne)||ne<10||ne>1e4)return o("auth.register.validation.roofSizeInvalid")||"Roof size must be between 10 and 10,000 square meters";break;case"electricity_meter_number":if(T.length<6||T.length>15)return o("auth.register.validation.meterNumberLength")||"Meter number must be between 6 and 15 characters";if(!/^[A-Z0-9]+$/.test(T))return o("auth.register.validation.meterNumberInvalid")||"Meter number can only contain letters and numbers";break;case"property_type":if(!["VILLA","APARTMENT","DUPLEX","TOWNHOUSE","COMMERCIAL","INDUSTRIAL","OTHER"].includes(T))return o("auth.register.validation.propertyTypeRequired")||"Please select a valid property type";break;case"property_ownership":if(!["OWNED","RENTED","LEASED","FAMILY_OWNED"].includes(T))return o("auth.register.validation.propertyOwnershipRequired")||"Please select a valid ownership type";break;case"region":if(!["riyadh","makkah","eastern","asir","tabuk","qassim","hail","northern","jazan","najran","bahah","jouf","madinah"].includes(T.toLowerCase()))return o("auth.register.validation.regionInvalid")||"Please select a valid region";break}return null},Y=(D,T)=>{const G={};return console.log(`🔍 Validating section: ${D} with data:`,T),Object.keys(T).forEach(ne=>{const se=K(ne,T[ne],D);se?(console.log(`❌ Field '${ne}' validation failed:`,se),G[ne]=se):console.log(`✅ Field '${ne}' validation passed`)}),G},W=async D=>{const T=f[D];console.log("🔄 Saving section:",D,"with data:",T),ae({}),je(""),console.log("🔍 Validating section data...");const G=Y(D,T);if(console.log("📋 Validation result:",G),Object.keys(G).length>0){console.error("❌ Validation failed:",G),ae(G);return}console.log("✅ Validation passed"),J(!0);try{const ne=["first_name","last_name","email","phone"],se={},E={};Object.keys(T).forEach(F=>{const Z=T[F];if(Z!=null&&Z!=="")if(ne.includes(F))se[F]=Z;else switch(F){case"street_address":E.streetAddress=Z;break;case"postal_code":E.postalCode=Z;break;case"property_type":E.propertyType=Z;break;case"property_ownership":E.propertyOwnership=Z;break;case"roof_size":E.roofSize=Number(Z);break;case"electricity_consumption":E.electricityConsumption=Z;break;case"electricity_meter_number":E.electricityMeterNumber=Z;break;case"gps_latitude":E.gpsLatitude=Number(Z);break;case"gps_longitude":E.gpsLongitude=Number(Z);break;case"preferred_language":E.preferredLanguage=Z;break;case"email_notifications":E.emailNotifications=!!Z;break;case"sms_notifications":E.smsNotifications=!!Z;break;case"marketing_consent":E.marketingConsent=!!Z;break;case"employment_status":E.employmentStatus=Z;break;case"employer_name":E.employerName=Z;break;case"job_title":E.jobTitle=Z;break;case"monthly_income":E.monthlyIncome=Number(Z);break;case"years_employed":E.yearsEmployed=Number(Z);break;default:E[F]=Z}}),console.log("📤 Auth data:",se),console.log("📤 Profile data:",E);let x={success:!0},B={success:!0};if(Object.keys(se).length>0&&(console.log("🔄 Updating auth service..."),x=await xe.updateCurrentUser(se),!x.success)){ae({general:x.error||"Failed to update personal information"});return}if(Object.keys(E).length>0){const F=d.role==="CONTRACTOR",Z=F?"contractor service":"user service";if(console.log(`🔄 Updating ${Z} with data:`,E),F?B=await xt.updateProfile(d.id,"profile",E):B=await fr.updateProfile(void 0,E),console.log(`📨 ${Z} response:`,B),!B.success){console.error(`❌ ${Z} update failed:`,B.error),ae({general:B.error||"Failed to update profile information"});return}console.log(`✅ ${Z} update successful`)}else console.log("ℹ️ No profile data to update");if(x.success&&B.success){je(o("userApp.profile.updateSuccess"));try{const le=d.role==="CONTRACTOR"?await xt.getVerificationStatus(d.id):await fr.getVerificationStatus(d.id);console.log("🔍 Refreshed verification status after profile update:",le),S(le)}catch(Z){console.warn("Failed to refresh verification status after profile update:",Z)}(await xe.refreshUserData()).success&&(console.log("✅ User data refreshed after profile update"),z(xe.getCurrentUser())),D==="preferences"&&T.preferred_language&&s.changeLanguage(T.preferred_language),t?.(D,T),p(null),setTimeout(()=>je(""),3e3)}}catch(ne){console.error("Profile update error:",ne),ae({general:ne.message||"An unexpected error occurred"})}finally{J(!1)}},$=D=>{const T={personal:{first_name:d.first_name||"",last_name:d.last_name||"",phone:d.phone||"",email:d.email||""},address:{region:d.region||"",city:d.city||"",district:d.district||"",street_address:d.street_address||"",landmark:d.landmark||"",postal_code:d.postal_code||"",gps_latitude:d.gps_latitude||"",gps_longitude:d.gps_longitude||""},verification:{national_id:d.national_id||"",sama_verified:d.sama_verified||!1,nafath_verified:d.nafath_verified||!1},employment:{employment_status:d.employment_status||"",employer_name:d.employer_name||"",job_title:d.job_title||"",monthly_income:d.monthly_income||"",years_employed:d.years_employed||""},property:{property_type:d.propertyType||d.property_type||"",property_ownership:d.propertyOwnership||d.property_ownership||"",roof_size:d.roofSize||d.roof_size||"",electricity_consumption:d.electricityConsumption||d.electricity_consumption||"",electricity_meter_number:d.electricityMeterNumber||d.electricity_meter_number||""},preferences:{preferred_language:d.preferred_language||"ar",email_notifications:d.email_notifications||!0,sms_notifications:d.sms_notifications||!0,marketing_consent:d.marketing_consent||!1}};P(G=>({...G,[D]:T[D]})),p(null)},L=async()=>{try{N();const D=await Ae();P(T=>({...T,address:{...T.address,landmark:D.landmark,gps_latitude:D.latitude.toString(),gps_longitude:D.longitude.toString()}})),je(o("userApp.profile.locationSuccess")),setTimeout(()=>je(""),3e3)}catch(D){console.error("Error getting location:",D)}},k=D=>{const T={width:"20px",height:"20px",fill:"currentColor"};switch(D){case"personal":return e.jsx("svg",{style:T,viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 7.5V9C15 10.66 13.66 12 12 12S9 10.66 9 12V9L3 7.5V9C3 11.81 5.19 14 8 14V22H10V16H14V22H16V14C18.81 14 21 11.81 21 9Z"})});case"address":return e.jsx("svg",{style:T,viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9C5 14.25 12 22 12 22S19 14.25 19 9C19 5.13 15.87 2 12 2ZM12 11.5C10.62 11.5 9.5 10.38 9.5 9S10.62 6.5 12 6.5S14.5 7.62 14.5 9S13.38 11.5 12 11.5Z"})});case"verification":return e.jsx("svg",{style:T,viewBox:"0 0 24 24",children:e.jsx("path",{d:"M23 12L20.56 9.22L20.9 5.54L17.29 4.72L15.4 1.54L12 3L8.6 1.54L6.71 4.72L3.1 5.53L3.44 9.21L1 12L3.44 14.78L3.1 18.47L6.71 19.29L8.6 22.47L12 21L15.4 22.46L17.29 19.28L20.9 18.46L20.56 14.78L23 12ZM10 17L6 13L7.41 11.59L10 14.17L16.59 7.58L18 9L10 17Z"})});case"employment":return e.jsx("svg",{style:T,viewBox:"0 0 24 24",children:e.jsx("path",{d:"M20 6H16V4C16 2.89 15.11 2 14 2H10C8.89 2 8 2.89 8 4V6H4C2.89 6 2 6.89 2 8V19C2 20.11 2.89 21 4 21H20C21.11 21 22 20.11 22 19V8C22 6.89 21.11 6 20 6ZM10 4H14V6H10V4ZM20 19H4V8H8V10H10V8H14V10H16V8H20V19Z"})});case"property":return e.jsx("svg",{style:T,viewBox:"0 0 24 24",children:e.jsx("path",{d:"M10 20V14H14V20H19V12H22L12 3L2 12H5V20H10Z"})});case"preferences":return e.jsx("svg",{style:T,viewBox:"0 0 24 24",children:e.jsx("path",{d:"M19.14 12.94C19.18 12.64 19.2 12.33 19.2 12S19.18 11.36 19.14 11.06L21.16 9.48C21.34 9.34 21.39 9.07 21.28 8.87L19.36 5.55C19.24 5.33 18.99 5.26 18.77 5.33L16.38 6.29C15.93 5.93 15.45 5.64 14.92 5.43L14.6 2.83C14.57 2.6 14.37 2.43 14.12 2.43H10.3C10.05 2.43 9.85 2.6 9.82 2.83L9.5 5.43C8.97 5.64 8.5 5.92 8.04 6.29L5.65 5.33C5.43 5.25 5.18 5.33 5.06 5.55L3.14 8.87C3.03 9.07 3.08 9.34 3.27 9.48L5.29 11.06C5.25 11.36 5.23 11.67 5.23 12S5.25 12.64 5.29 12.94L3.27 14.52C3.09 14.66 3.04 14.93 3.15 15.13L5.07 18.45C5.19 18.67 5.44 18.74 5.66 18.67L8.05 17.71C8.5 18.07 8.98 18.36 9.51 18.57L9.83 21.17C9.86 21.4 10.06 21.57 10.31 21.57H14.13C14.38 21.57 14.58 21.4 14.61 21.17L14.93 18.57C15.46 18.36 15.94 18.08 16.39 17.71L18.78 18.67C19 18.75 19.25 18.67 19.37 18.45L21.29 15.13C21.4 14.93 21.35 14.66 21.16 14.52L19.14 12.94ZM12.22 16C9.93 16 8.08 14.15 8.08 11.86S9.93 7.72 12.22 7.72S16.36 9.57 16.36 11.86S14.51 16 12.22 16Z"})});default:return null}},v=[{id:"personal",label:o("userApp.profile.tabs.personal"),icon:k("personal")},{id:"address",label:o("userApp.profile.tabs.address"),icon:k("address")},{id:"property",label:o("userApp.profile.tabs.property"),icon:k("property")},{id:"employment",label:o("userApp.profile.tabs.employment"),icon:k("employment")},{id:"preferences",label:o("userApp.profile.tabs.preferences"),icon:k("preferences")}],[g,A]=y.useState(window.innerWidth<768),[ee,U]=y.useState(window.innerWidth>=768&&window.innerWidth<1200),[q,ie]=y.useState(window.innerWidth>=1200),[ce,J]=y.useState(!1),[X,ae]=y.useState({}),[de,je]=y.useState(""),[fe,me]=y.useState({}),{getCurrentLocation:Ae,loading:qe,error:Qe,clearError:N}=ql({timeout:15e3,enableHighAccuracy:!0});y.useEffect(()=>{const D=()=>{const T=window.innerWidth;A(T<768),U(T>=768&&T<1200),ie(T>=1200)};return window.addEventListener("resize",D),D(),()=>window.removeEventListener("resize",D)},[]);const M={container:{width:"100%",minHeight:"100vh",background:"transparent",padding:g?"16px":"24px"},card:{width:"100%",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",borderRadius:"16px",border:"1px solid rgba(62, 178, 177, 0.2)",boxShadow:"0 8px 32px rgba(62, 178, 177, 0.12)",overflow:"hidden",minHeight:"calc(100vh - 4rem)"},stickyHeader:{position:"sticky",top:0,zIndex:10,background:"rgba(255, 255, 255, 0.98)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",borderBottom:"1px solid rgba(62, 178, 177, 0.15)",padding:g?"1rem":"1.5rem 2rem",display:"flex",justifyContent:"space-between",alignItems:"center"},headerLeft:{display:"flex",alignItems:"center",gap:"1rem"},headerRight:{display:"flex",alignItems:"center",gap:"1rem"},contentLayout:{display:"grid",gridTemplateColumns:g?"1fr":i?"1fr 280px":"280px 1fr",minHeight:"calc(100vh - 8rem)",direction:i?"rtl":"ltr"},leftSidebar:{background:"rgba(62, 178, 177, 0.03)",borderRight:g||i?"none":"1px solid rgba(62, 178, 177, 0.15)",borderLeft:g?"none":i?"1px solid rgba(62, 178, 177, 0.15)":"none",padding:g?"1rem":"2rem 1.5rem",display:g?"none":"flex",flexDirection:"column",gap:"0.5rem",order:i?2:1},mobileMenu:{display:g?"flex":"none",padding:"1rem",borderBottom:"1px solid rgba(62, 178, 177, 0.15)",background:"rgba(62, 178, 177, 0.03)",overflowX:"auto",gap:"0.5rem",scrollbarWidth:"none",msOverflowStyle:"none",direction:i?"rtl":"ltr","&::-webkit-scrollbar":{display:"none"}},menuItem:{display:"flex",alignItems:"center",justifyContent:g?"center":"flex-start",gap:g?"0.25rem":"0.75rem",padding:g?"0.75rem 1rem":"1rem 1.25rem",borderRadius:g?"20px":"12px",background:"transparent",border:"none",cursor:"pointer",fontSize:g?"0.75rem":"0.875rem",fontWeight:"500",color:"#6b7280",transition:"all 0.2s ease-in-out",textAlign:g?"center":i?"right":"left",whiteSpace:"nowrap",minWidth:g?"80px":"auto",width:g?"auto":"100%",flex:g?"0 0 auto":"none",direction:i?"rtl":"ltr"},activeMenuItem:{background:"rgba(62, 178, 177, 0.1)",color:"#3eb2b1",fontWeight:"600"},rightContent:{padding:g?"1.5rem":"2rem",overflow:"auto",order:i?1:2,direction:i?"rtl":"ltr"},profileInfo:{display:"flex",alignItems:"center",gap:"1rem",direction:i?"rtl":"ltr"},compactProgress:{display:"flex",flexDirection:g?"column":"row",alignItems:"center",gap:"1rem",minWidth:g?"auto":"200px"},avatar:{width:"60px",height:"60px",background:"linear-gradient(135deg, #3eb2b1 0%, #22d3db 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.5rem",fontWeight:"700",color:"#ffffff",boxShadow:"0 8px 24px rgba(62, 178, 177, 0.25)",flexShrink:0},userInfo:{display:"flex",flexDirection:"column",gap:"0.25rem",textAlign:i?"right":"left",direction:i?"rtl":"ltr"},name:{fontSize:g?"1.125rem":"1.25rem",fontWeight:"700",color:"#1a1a1a",margin:0,lineHeight:1.2,textAlign:i?"right":"left"},email:{fontSize:g?"0.75rem":"0.813rem",color:"#6b7280",margin:0,lineHeight:1.2},progressCircle:{display:"flex",alignItems:"center",gap:"0.75rem"},progressText:{fontSize:g?"1.5rem":"2rem",fontWeight:"700",background:"linear-gradient(135deg, #3eb2b1 0%, #22d3db 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},formContainer:{maxWidth:"800px",margin:"0 auto",direction:i?"rtl":"ltr"},formHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",paddingBottom:"1rem",borderBottom:"1px solid rgba(62, 178, 177, 0.15)"},formTitle:{fontSize:g?"1.25rem":"1.5rem",fontWeight:"700",color:"#1a1a1a",margin:0,textAlign:i?"right":"left",direction:i?"rtl":"ltr"},editButton:{background:"rgba(62, 178, 177, 0.1)",color:"#3eb2b1",border:"none",borderRadius:g?"8px":"6px",padding:g?"0.5rem 1rem":"0.375rem 0.75rem",fontSize:g?"0.813rem":"0.75rem",fontWeight:"600",cursor:"pointer",transition:n.transitions.fast,minHeight:g?"36px":"auto",touchAction:"manipulation"},fieldsGrid:{display:"grid",gridTemplateColumns:g?"1fr":"repeat(2, 1fr)",gap:g?"1.5rem 0":"1.5rem 2rem",alignItems:"start"},field:{marginBottom:0,display:"flex",flexDirection:"column",width:"100%"},label:{fontSize:"0.875rem",color:"#6b7280",fontWeight:"600",marginBottom:"0.5rem",display:"block",lineHeight:1.2,textAlign:i?"right":"left",direction:i?"rtl":"ltr"},value:{fontSize:g?"1rem":"0.938rem",color:"#1a1a1a",fontWeight:"500",lineHeight:1.4,padding:g?"0.875rem 0":"0.75rem 0",minHeight:"1.5rem",wordBreak:"break-word",textAlign:i?"right":"left",direction:i?"rtl":"ltr"},input:{width:"100%",padding:g?"1rem":"0.875rem 1rem",fontSize:g?"1rem":"0.938rem",color:"#1a1a1a",background:"rgba(62, 178, 177, 0.05)",border:"2px solid rgba(62, 178, 177, 0.2)",borderRadius:g?"12px":"8px",outline:"none",transition:"all 0.2s ease-in-out",fontFamily:n.typography.fonts.primary,minHeight:g?"52px":"44px",touchAction:"manipulation",textAlign:i?"right":"left",direction:i?"rtl":"ltr"},inputValid:{borderColor:"#10b981",background:"rgba(16, 185, 129, 0.05)",boxShadow:"0 0 0 3px rgba(16, 185, 129, 0.1)"},inputInvalid:{borderColor:"#ef4444",background:"rgba(239, 68, 68, 0.05)",boxShadow:"0 0 0 3px rgba(239, 68, 68, 0.1)"},validationMessage:{fontSize:"0.75rem",fontWeight:"500",marginTop:"0.25rem",display:"flex",alignItems:"center",gap:"0.25rem"},validationSuccess:{color:"#10b981"},validationError:{color:"#ef4444"},characterCount:{fontSize:"0.75rem",color:"#6b7280",textAlign:i?"left":"right",marginTop:"0.25rem",direction:i?"rtl":"ltr"},empty:{fontSize:g?"1rem":"0.938rem",color:"#9ca3af",fontStyle:"italic",lineHeight:g?1.5:1.4,textAlign:i?"right":"left",direction:i?"rtl":"ltr"},buttonGroup:{display:"flex",flexDirection:g?"column":"row",gap:g?"0.75rem":"1rem",marginTop:g?"1.5rem":"2rem",justifyContent:g?"stretch":"flex-end"},saveButton:{background:"linear-gradient(135deg, #3eb2b1 0%, #22d3db 100%)",color:"#ffffff",border:"none",borderRadius:g?"12px":"8px",padding:g?"1rem 1.5rem":"0.75rem 1.5rem",fontSize:g?"1rem":"0.875rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease-in-out",minHeight:g?"52px":"44px",boxShadow:"0 4px 12px rgba(62, 178, 177, 0.3)","&:hover":{transform:"translateY(-1px)",boxShadow:"0 6px 16px rgba(62, 178, 177, 0.4)"}},cancelButton:{background:"rgba(107, 114, 128, 0.1)",color:"#6b7280",border:"2px solid rgba(107, 114, 128, 0.2)",borderRadius:g?"12px":"8px",padding:g?"1rem 1.5rem":"0.75rem 1.5rem",fontSize:g?"1rem":"0.875rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease-in-out",minHeight:g?"52px":"44px","&:hover":{background:"rgba(107, 114, 128, 0.15)",borderColor:"rgba(107, 114, 128, 0.3)"}},progressInfo:{display:g?"none":"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem"},progressBar:{width:"60px",height:"6px",background:"rgba(0, 0, 0, 0.1)",borderRadius:"3px",overflow:"hidden"},progressFill:{height:"100%",background:"linear-gradient(90deg, #3eb2b1 0%, #22d3db 100%)",width:`${O}%`,borderRadius:"3px",transition:"width 0.5s ease-out"},emptyState:{display:"flex",alignItems:"center",justifyContent:"center",height:"400px",color:"#6b7280",fontSize:"1rem",textAlign:"center"},locationButton:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",width:"100%",padding:g?"1rem 1.5rem":"0.875rem 1.25rem",background:"linear-gradient(135deg, #3eb2b1 0%, #22d3db 100%)",color:"#ffffff",border:"none",borderRadius:g?"12px":"8px",fontSize:g?"0.938rem":"0.875rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease-in-out",minHeight:g?"52px":"44px",boxShadow:"0 4px 12px rgba(62, 178, 177, 0.3)",touchAction:"manipulation"},locationButtonDisabled:{opacity:.7,cursor:"not-allowed"},locationIcon:{width:"18px",height:"18px",fill:"currentColor"},gpsFieldsContainer:{gridColumn:"1 / -1",display:"flex",flexDirection:"column",gap:"1.25rem",padding:g?"1.25rem":"1.5rem",background:"rgba(62, 178, 177, 0.03)",borderRadius:"12px",border:"1px solid rgba(62, 178, 177, 0.15)",marginTop:"1rem"},gpsFieldsHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.5rem"},gpsFieldsTitle:{fontSize:"0.875rem",fontWeight:"600",color:"#6b7280",margin:0},gpsFieldsGrid:{display:"grid",gridTemplateColumns:g?"1fr":"repeat(2, 1fr)",gap:g?"1.25rem":"1.5rem 2rem",alignItems:"start",direction:i?"rtl":"ltr"},gpsField:{display:"flex",flexDirection:"column",gap:"0.5rem",width:"100%"}},ue=()=>{if(!a)return e.jsx("div",{style:M.emptyState,children:o("userApp.profile.selectSection")});const D=c===a,G={personal:[{field:"first_name",label:o("auth.register.firstName"),value:d.first_name||""},{field:"last_name",label:o("auth.register.lastName"),value:d.last_name||""},{field:"phone",label:o("auth.register.phone"),value:d.phone||"",type:"tel",readOnly:!0,verificationStatus:d.phone_verified},{field:"email",label:o("auth.register.email"),value:d.email,type:"email",readOnly:!0,verificationStatus:d.email_verified}],address:[{field:"region",label:o("auth.register.region"),value:d.region||"",type:"dropdown",options:[{value:"riyadh",label:o("auth.register.regions.riyadh")},{value:"makkah",label:o("auth.register.regions.makkah")},{value:"eastern",label:o("auth.register.regions.eastern")},{value:"asir",label:o("auth.register.regions.asir")},{value:"tabuk",label:o("auth.register.regions.tabuk")},{value:"qassim",label:o("auth.register.regions.qassim")},{value:"hail",label:o("auth.register.regions.hail")},{value:"northern",label:o("auth.register.regions.northern")},{value:"jazan",label:o("auth.register.regions.jazan")},{value:"najran",label:o("auth.register.regions.najran")},{value:"bahah",label:o("auth.register.regions.bahah")},{value:"jouf",label:o("auth.register.regions.jouf")},{value:"madinah",label:o("auth.register.regions.madinah")}]},{field:"city",label:o("auth.register.city"),value:d.city||""},{field:"district",label:o("auth.register.district"),value:d.district||""},{field:"street_address",label:o("auth.register.streetAddress"),value:d.street_address||""},{field:"postal_code",label:o("userApp.profile.postalCode"),value:d.postal_code||""}],verification:[{field:"national_id",label:o("auth.register.nationalId"),value:d.national_id||""},{field:"sama_verified",label:o("userApp.profile.samaVerified"),value:d.sama_verified?o("common.yes"):o("common.no")},{field:"nafath_verified",label:o("userApp.profile.nafathVerified"),value:d.nafath_verified?o("common.yes"):o("common.no")}],employment:[{field:"employment_status",label:o("auth.register.employmentStatus"),value:d.employment_status||"",type:"dropdown",options:[{value:"government",label:o("auth.register.employment.government")},{value:"private",label:o("auth.register.employment.private")},{value:"selfEmployed",label:o("auth.register.employment.selfEmployed")},{value:"retired",label:o("auth.register.employment.retired")},{value:"student",label:o("auth.register.employment.student")}]},{field:"employer_name",label:o("auth.register.employerName"),value:d.employer_name||""},{field:"job_title",label:o("userApp.profile.jobTitle"),value:d.job_title||""},{field:"monthly_income",label:o("auth.register.monthlyIncome"),value:d.monthly_income||"",type:"number"},{field:"years_employed",label:o("userApp.profile.yearsEmployed"),value:d.years_employed||"",type:"number"}],property:[{field:"property_type",label:o("auth.register.propertyType"),value:d.propertyType||d.property_type||"",type:"dropdown",options:[{value:"VILLA",label:o("auth.register.propertyTypes.villa")},{value:"APARTMENT",label:o("auth.register.propertyTypes.apartment")},{value:"DUPLEX",label:o("auth.register.propertyTypes.duplex")},{value:"TOWNHOUSE",label:o("auth.register.propertyTypes.townhouse")},{value:"COMMERCIAL",label:o("auth.register.propertyTypes.commercial")},{value:"INDUSTRIAL",label:"Industrial"},{value:"OTHER",label:o("auth.register.propertyTypes.other")}]},{field:"property_ownership",label:o("auth.register.propertyOwnership"),value:d.propertyOwnership||d.property_ownership||"",type:"dropdown",options:[{value:"OWNED",label:o("auth.register.propertyOwnershipTypes.owned")},{value:"RENTED",label:o("auth.register.propertyOwnershipTypes.rented")},{value:"LEASED",label:o("auth.register.propertyOwnershipTypes.leased")},{value:"FAMILY_OWNED",label:"Family Owned"}]},{field:"roof_size",label:o("auth.register.roofSize"),value:d.roofSize||d.roof_size||"",type:"number",unit:"m²"},{field:"electricity_consumption",label:o("userApp.profile.electricityConsumption"),value:d.electricityConsumption||d.electricity_consumption||"",type:"dropdown",options:[{value:"0_200",label:"0-200 kWh"},{value:"200_400",label:"200-400 kWh"},{value:"400_600",label:"400-600 kWh"},{value:"600_800",label:"600-800 kWh"},{value:"800_1000",label:"800-1000 kWh"},{value:"1000_1200",label:"1000-1200 kWh"},{value:"1200_1500",label:"1200-1500 kWh"},{value:"1500_PLUS",label:"1500+ kWh"}]},{field:"electricity_meter_number",label:o("auth.register.electricityMeterNumber"),value:d.electricityMeterNumber||d.electricity_meter_number||""}],preferences:[{field:"preferred_language",label:o("userApp.profile.preferredLanguage"),value:d.preferred_language||"en",type:"language"},{field:"email_notifications",label:o("userApp.profile.emailNotifications"),value:d.email_notifications??!0,type:"toggle"},{field:"sms_notifications",label:o("userApp.profile.smsNotifications"),value:d.sms_notifications??!0,type:"toggle"},{field:"marketing_consent",label:o("userApp.profile.marketingConsent"),value:d.marketing_consent??!1,type:"toggle"}]}[a]||[],ne=v.find(se=>se.id===a);return e.jsxs("div",{style:M.formContainer,children:[e.jsxs("div",{style:M.formHeader,children:[e.jsx("h2",{style:M.formTitle,children:ne?.label}),e.jsx("button",{style:M.editButton,onClick:()=>p(D?null:a),children:o(D?"common.cancel":"common.edit")})]}),e.jsx("div",{style:M.fieldsGrid,children:G.map(se=>{const{field:E,label:x,value:B,type:F,options:Z,readOnly:le,verificationStatus:ge}=se,ye=["sama_verified","nafath_verified","email"].includes(E)||le,Ze=F==="toggle",Te=F==="toggle"||F==="language"?f[a][E]:B,Ue=(pe=>pe.includes("date")?"date":pe.includes("email")?"email":pe.includes("phone")?"tel":pe.includes("income")||pe.includes("amount")||pe.includes("size")?"number":pe==="special_requirements"?"textarea":"text")(E);return e.jsxs("div",{style:M.field,children:[e.jsxs("label",{style:M.label,children:[x,ge!==void 0&&e.jsx("span",{style:{marginLeft:i?"0":"0.5rem",marginRight:i?"0.5rem":"0",fontSize:"0.875rem",color:ge?"#10B981":"#EF4444",fontWeight:500},children:ge?"✓":"✗"})]}),F==="language"?D?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"0.75rem",background:"rgba(255, 255, 255, 0.6)",borderRadius:"12px",border:"1px solid rgba(62, 178, 177, 0.2)"},children:[e.jsxs("button",{style:{position:"relative",width:"80px",height:"36px",borderRadius:"18px",border:"none",cursor:"pointer",transition:"all 0.3s ease",background:"linear-gradient(135deg, #3eb2b1 0%, #22d3db 100%)",boxShadow:"0 4px 12px rgba(62, 178, 177, 0.3)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"2px"},onClick:()=>{const pe=Te==="en"?"ar":"en";P(pt=>({...pt,preferences:{...pt.preferences,[E]:pe}}))},children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"600",color:Te==="en"?"#ffffff":"rgba(255,255,255,0.5)",flex:1,textAlign:"center"},children:"EN"}),e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"600",color:Te==="ar"?"#ffffff":"rgba(255,255,255,0.5)",flex:1,textAlign:"center"},children:"AR"}),e.jsx("div",{style:{position:"absolute",top:"2px",left:Te==="en"?"2px":"42px",width:"36px",height:"32px",borderRadius:"16px",background:"#ffffff",transition:"all 0.3s ease",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"700",color:"#3eb2b1"},children:Te==="en"?"EN":"ع"})]}),e.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#3eb2b1"},children:Te==="en"?"English":"العربية"})]}):e.jsx("div",{style:{...Te?M.value:M.empty},children:Te==="en"?"English":"العربية"}):Ze?D?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"0.75rem",background:"rgba(255, 255, 255, 0.6)",borderRadius:"12px",border:"1px solid rgba(62, 178, 177, 0.2)"},children:[e.jsx("button",{style:{position:"relative",width:"52px",height:"28px",borderRadius:"14px",border:"none",cursor:"pointer",transition:"all 0.3s ease",background:Te?"linear-gradient(135deg, #3eb2b1 0%, #22d3db 100%)":"#e5e7eb",boxShadow:Te?"0 4px 12px rgba(62, 178, 177, 0.3)":"0 2px 4px rgba(0, 0, 0, 0.1)"},onClick:()=>{const pe=!Te;P(pt=>({...pt,preferences:{...pt.preferences,[E]:pe}}))},children:e.jsx("div",{style:{position:"absolute",top:"2px",left:Te?"26px":"2px",width:"24px",height:"24px",borderRadius:"12px",background:"#ffffff",transition:"all 0.3s ease",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)"}})}),e.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:Te?"#3eb2b1":"#6b7280"},children:o(E==="marketing_consent"?Te?"common.yes":"common.no":Te?"common.enabled":"common.disabled")})]}):e.jsx("div",{style:{...Te?M.value:M.empty},children:o(E==="marketing_consent"?Te?"common.yes":"common.no":Te?"common.enabled":"common.disabled")}):D&&!ye?F==="dropdown"?e.jsxs("select",{style:M.input,value:f[a][E],onChange:pe=>oe(a,E,pe.target.value),children:[e.jsx("option",{value:"",children:o("common.selectOption")}),Z?.map(pe=>e.jsx("option",{value:pe.value,children:pe.label},pe.value))]}):Ue==="textarea"?e.jsx("textarea",{style:{...M.input,minHeight:"80px",resize:"vertical"},value:f[a][E],onChange:pe=>oe(a,E,pe.target.value),placeholder:o(`userApp.profile.placeholder.${E}`)}):e.jsxs("div",{style:{width:"100%"},children:[e.jsx("input",{type:Ue,style:{...M.input,...fe[E]?.isValid===!0?M.inputValid:{},...fe[E]?.isValid===!1?M.inputInvalid:{}},value:f[a][E],onChange:pe=>oe(a,E,pe.target.value),placeholder:o(`userApp.profile.placeholder.${E}`),min:Ue==="number"&&E.includes("income")?"0":void 0,step:Ue==="number"?"0.01":void 0,maxLength:["first_name","last_name"].includes(E)?25:["city","district"].includes(E)?30:["street_address","landmark","employer_name","job_title"].includes(E)?50:E==="postal_code"?5:E==="national_id"?10:E==="electricity_meter_number"?15:void 0}),["first_name","last_name","city","district","street_address","landmark","employer_name","job_title"].includes(E)&&e.jsxs("div",{style:M.characterCount,children:[f[a][E].length," / ",["first_name","last_name"].includes(E)?25:["city","district"].includes(E)?30:50]}),fe[E]&&!fe[E].isValid&&e.jsxs("div",{style:{...M.validationMessage,...M.validationError},children:[e.jsx("svg",{style:{width:"14px",height:"14px",fill:"currentColor"},viewBox:"0 0 24 24",children:e.jsx("path",{d:"M13 13H11V7H13M13 17H11V15H13M12 2A10 10 0 0 0 2 12A10 10 0 0 0 12 22A10 10 0 0 0 22 12A10 10 0 0 0 12 2Z"})}),fe[E].message]}),fe[E]&&fe[E].isValid&&f[a][E]&&e.jsxs("div",{style:{...M.validationMessage,...M.validationSuccess},children:[e.jsx("svg",{style:{width:"14px",height:"14px",fill:"currentColor"},viewBox:"0 0 24 24",children:e.jsx("path",{d:"M9 16.17L4.83 12L3.41 13.41L9 19L21 7L19.59 5.59L9 16.17Z"})}),o("validation.validInput")||"Valid"]})]}):e.jsx("div",{style:{...Te?M.value:M.empty,...ye?{background:"rgba(62, 178, 177, 0.05)",border:"1px solid rgba(62, 178, 177, 0.2)",borderRadius:"8px",padding:"0.75rem",fontSize:"0.875rem"}:{},...E==="phone_verified"||E==="email_verified"?{color:Te?.includes("✓")?"#10B981":"#EF4444",fontWeight:500}:{}},children:Te||o("userApp.profile.notProvided")})]},E)})}),a==="address"&&e.jsxs("div",{style:M.gpsFieldsContainer,children:[e.jsx("div",{style:M.gpsFieldsHeader,children:e.jsx("h3",{style:M.gpsFieldsTitle,children:o("userApp.profile.locationInfo")})}),D?e.jsxs("div",{children:[e.jsxs("button",{type:"button",style:{...M.locationButton,...qe?M.locationButtonDisabled:{}},onClick:L,disabled:qe,children:[e.jsx("svg",{style:M.locationIcon,viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9C5 14.25 12 22 12 22S19 14.25 19 9C19 5.13 15.87 2 12 2ZM12 11.5C10.62 11.5 9.5 10.38 9.5 9S10.62 6.5 12 6.5S14.5 7.62 14.5 9S13.38 11.5 12 11.5Z"})}),o(qe?"userApp.profile.gettingLocation":"userApp.profile.getMyLocation")]}),e.jsxs("div",{style:M.gpsFieldsGrid,children:[e.jsxs("div",{style:M.gpsField,children:[e.jsx("label",{style:M.label,children:o("userApp.profile.landmark")}),e.jsx("div",{style:{...M.input,backgroundColor:"rgba(255, 255, 255, 0.6)",cursor:"default",color:f.address.landmark?"#1a1a1a":"#9ca3af",fontStyle:f.address.landmark?"normal":"italic"},children:f.address.landmark||o("userApp.profile.clickToGetLocation")})]}),e.jsxs("div",{style:M.gpsField,children:[e.jsx("label",{style:M.label,children:o("userApp.profile.gpsCoordinates")}),e.jsx("div",{style:{...M.input,backgroundColor:"rgba(255, 255, 255, 0.6)",cursor:"default",color:f.address.gps_latitude?"#1a1a1a":"#9ca3af",fontStyle:f.address.gps_latitude?"normal":"italic"},children:f.address.gps_latitude&&f.address.gps_longitude?`${f.address.gps_latitude}, ${f.address.gps_longitude}`:o("userApp.profile.clickToGetLocation")})]})]}),Qe&&e.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",backgroundColor:"rgba(244, 67, 54, 0.1)",border:"1px solid rgba(244, 67, 54, 0.3)",borderRadius:"8px",color:"#d32f2f",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("svg",{style:{width:"16px",height:"16px",fill:"currentColor",flexShrink:0},viewBox:"0 0 24 24",children:e.jsx("path",{d:"M13 13H11V7H13M13 17H11V15H13M12 2A10 10 0 0 0 2 12A10 10 0 0 0 12 22A10 10 0 0 0 22 12A10 10 0 0 0 12 2Z"})}),o("userApp.profile.locationError"),": ",Qe]})]}):e.jsxs("div",{style:M.gpsFieldsGrid,children:[e.jsxs("div",{style:M.gpsField,children:[e.jsx("label",{style:M.label,children:o("userApp.profile.landmark")}),e.jsx("div",{style:d.landmark?M.value:M.empty,children:d.landmark||o("userApp.profile.notProvided")})]}),e.jsxs("div",{style:M.gpsField,children:[e.jsx("label",{style:M.label,children:o("userApp.profile.gpsCoordinates")}),e.jsx("div",{style:d.gps_latitude&&d.gps_longitude?M.value:M.empty,children:d.gps_latitude&&d.gps_longitude?`${d.gps_latitude}, ${d.gps_longitude}`:o("userApp.profile.notProvided")})]})]})]}),Object.keys(X).length>0&&e.jsx("div",{style:{marginTop:"1rem",padding:"0.75rem",backgroundColor:"rgba(244, 67, 54, 0.1)",border:"1px solid rgba(244, 67, 54, 0.3)",borderRadius:"8px",color:"#d32f2f"},children:X.general?e.jsx("div",{children:X.general}):e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Please fix the following errors:"}),Object.entries(X).map(([se,E])=>e.jsxs("div",{style:{fontSize:"0.875rem"},children:["• ",E]},se))]})}),de&&e.jsx("div",{style:{marginTop:"1rem",padding:"0.75rem",backgroundColor:"rgba(76, 175, 80, 0.1)",border:"1px solid rgba(76, 175, 80, 0.3)",borderRadius:"8px",color:"#2e7d32",fontWeight:"500"},children:de}),D&&e.jsxs("div",{style:M.buttonGroup,children:[e.jsx("button",{style:M.cancelButton,onClick:()=>$(a),disabled:ce,children:o("common.cancel")}),e.jsx("button",{style:{...M.saveButton,opacity:ce?.7:1,cursor:ce?"not-allowed":"pointer"},onClick:()=>W(a),disabled:ce,children:o(ce?"common.loading":"common.save")})]})]})};return e.jsx("div",{style:M.container,children:e.jsxs("div",{style:M.card,children:[e.jsxs("div",{style:M.stickyHeader,children:[e.jsx("div",{style:M.headerLeft,children:e.jsxs("div",{style:M.profileInfo,children:[e.jsx("div",{style:M.avatar,children:V()}),e.jsxs("div",{style:M.userInfo,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flexWrap:"wrap"},children:[e.jsx("h1",{style:M.name,children:`${d.first_name||""} ${d.last_name||""}`.trim()||d.email.split("@")[0]}),!R&&e.jsx(Vo,{status:_,showUploadPrompt:_==="not_verified"})]}),e.jsx("div",{style:M.email,children:d.email})]})]})}),e.jsx("div",{style:M.headerRight,children:e.jsx("div",{style:M.compactProgress,children:e.jsxs("div",{style:M.progressCircle,children:[e.jsxs("span",{style:M.progressText,children:[O,"%"]}),e.jsx("div",{style:M.progressInfo,children:e.jsx("div",{style:M.progressBar,children:e.jsx("div",{style:M.progressFill})})})]})})})]}),e.jsx("div",{style:M.mobileMenu,children:v.map(D=>e.jsx("button",{style:{...M.menuItem,...a===D.id?M.activeMenuItem:{}},onClick:()=>l(D.id),children:e.jsx("span",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:D.icon})},D.id))}),e.jsxs("div",{style:M.contentLayout,children:[e.jsx("div",{style:M.leftSidebar,children:v.map(D=>e.jsxs("button",{style:{...M.menuItem,...a===D.id?M.activeMenuItem:{}},onClick:()=>l(D.id),onMouseEnter:T=>{a!==D.id&&(T.currentTarget.style.background="rgba(62, 178, 177, 0.08)",T.currentTarget.style.color="#3eb2b1")},onMouseLeave:T=>{a!==D.id&&(T.currentTarget.style.background="transparent",T.currentTarget.style.color="#6b7280")},children:[e.jsx("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginRight:i?"0":"0.75rem",marginLeft:i?"0.75rem":"0"},children:D.icon}),e.jsx("span",{children:D.label})]},D.id))}),e.jsx("div",{style:M.rightContent,children:ue()})]})]})})},ob="modulepreload",sb=function(r){return"/"+r},Xa={},Ws=function(t,o,s){let i=Promise.resolve();if(o&&o.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=l?.nonce||l?.getAttribute("nonce");i=Promise.allSettled(o.map(p=>{if(p=sb(p),p in Xa)return;Xa[p]=!0;const d=p.endsWith(".css"),m=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${m}`))return;const u=document.createElement("link");if(u.rel=d?"stylesheet":ob,d||(u.as="script"),u.crossOrigin="",u.href=p,c&&u.setAttribute("nonce",c),document.head.appendChild(u),d)return new Promise((h,b)=>{u.addEventListener("load",h),u.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${p}`)))})}))}function a(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return i.then(l=>{for(const c of l||[])c.status==="rejected"&&a(c.reason);return t().catch(a)})};let nb={data:""},ib=r=>typeof window=="object"?((r?r.querySelector("#_goober"):window._goober)||Object.assign((r||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:r||nb,ab=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,lb=/\/\*[^]*?\*\/|  +/g,Za=/\n+/g,Dt=(r,t)=>{let o="",s="",i="";for(let a in r){let l=r[a];a[0]=="@"?a[1]=="i"?o=a+" "+l+";":s+=a[1]=="f"?Dt(l,a):a+"{"+Dt(l,a[1]=="k"?"":t)+"}":typeof l=="object"?s+=Dt(l,t?t.replace(/([^,])+/g,c=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,p=>/&/.test(p)?p.replace(/&/g,c):c?c+" "+p:p)):a):l!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Dt.p?Dt.p(a,l):a+":"+l+";")}return o+(t&&i?t+"{"+i+"}":i)+s},Ct={},Vd=r=>{if(typeof r=="object"){let t="";for(let o in r)t+=o+Vd(r[o]);return t}return r},cb=(r,t,o,s,i)=>{let a=Vd(r),l=Ct[a]||(Ct[a]=(p=>{let d=0,m=11;for(;d<p.length;)m=101*m+p.charCodeAt(d++)>>>0;return"go"+m})(a));if(!Ct[l]){let p=a!==r?r:(d=>{let m,u,h=[{}];for(;m=ab.exec(d.replace(lb,""));)m[4]?h.shift():m[3]?(u=m[3].replace(Za," ").trim(),h.unshift(h[0][u]=h[0][u]||{})):h[0][m[1]]=m[2].replace(Za," ").trim();return h[0]})(r);Ct[l]=Dt(i?{["@keyframes "+l]:p}:p,o?"":"."+l)}let c=o&&Ct.g?Ct.g:null;return o&&(Ct.g=Ct[l]),((p,d,m,u)=>{u?d.data=d.data.replace(u,p):d.data.indexOf(p)===-1&&(d.data=m?p+d.data:d.data+p)})(Ct[l],t,s,c),l},db=(r,t,o)=>r.reduce((s,i,a)=>{let l=t[a];if(l&&l.call){let c=l(o),p=c&&c.props&&c.props.className||/^go/.test(c)&&c;l=p?"."+p:c&&typeof c=="object"?c.props?"":Dt(c,""):c===!1?"":c}return s+i+(l??"")},"");function hs(r){let t=this||{},o=r.call?r(t.p):r;return cb(o.unshift?o.raw?db(o,[].slice.call(arguments,1),t.p):o.reduce((s,i)=>Object.assign(s,i&&i.call?i(t.p):i),{}):o,ib(t.target),t.g,t.o,t.k)}let Ud,Sn,kn;hs.bind({g:1});let zt=hs.bind({k:1});function pb(r,t,o,s){Dt.p=t,Ud=r,Sn=o,kn=s}function Ht(r,t){let o=this||{};return function(){let s=arguments;function i(a,l){let c=Object.assign({},a),p=c.className||i.className;o.p=Object.assign({theme:Sn&&Sn()},c),o.o=/ *go\d+/.test(p),c.className=hs.apply(o,s)+(p?" "+p:"");let d=r;return r[0]&&(d=c.as||r,delete c.as),kn&&d[0]&&kn(c),Ud(d,c)}return i}}var ub=r=>typeof r=="function",Cn=(r,t)=>ub(r)?r(t):r,mb=(()=>{let r=0;return()=>(++r).toString()})(),gb=(()=>{let r;return()=>{if(r===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");r=!t||t.matches}return r}})(),hb=20,Hd=(r,t)=>{switch(t.type){case 0:return{...r,toasts:[t.toast,...r.toasts].slice(0,hb)};case 1:return{...r,toasts:r.toasts.map(a=>a.id===t.toast.id?{...a,...t.toast}:a)};case 2:let{toast:o}=t;return Hd(r,{type:r.toasts.find(a=>a.id===o.id)?1:0,toast:o});case 3:let{toastId:s}=t;return{...r,toasts:r.toasts.map(a=>a.id===s||s===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return t.toastId===void 0?{...r,toasts:[]}:{...r,toasts:r.toasts.filter(a=>a.id!==t.toastId)};case 5:return{...r,pausedAt:t.time};case 6:let i=t.time-(r.pausedAt||0);return{...r,pausedAt:void 0,toasts:r.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+i}))}}},fb=[],Ds={toasts:[],pausedAt:void 0},ni=r=>{Ds=Hd(Ds,r),fb.forEach(t=>{t(Ds)})},yb=(r,t="blank",o)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:r,pauseDuration:0,...o,id:o?.id||mb()}),no=r=>(t,o)=>{let s=yb(t,r,o);return ni({type:2,toast:s}),s.id},it=(r,t)=>no("blank")(r,t);it.error=no("error");it.success=no("success");it.loading=no("loading");it.custom=no("custom");it.dismiss=r=>{ni({type:3,toastId:r})};it.remove=r=>ni({type:4,toastId:r});it.promise=(r,t,o)=>{let s=it.loading(t.loading,{...o,...o?.loading});return typeof r=="function"&&(r=r()),r.then(i=>{let a=t.success?Cn(t.success,i):void 0;return a?it.success(a,{id:s,...o,...o?.success}):it.dismiss(s),i}).catch(i=>{let a=t.error?Cn(t.error,i):void 0;a?it.error(a,{id:s,...o,...o?.error}):it.dismiss(s)}),r};var xb=zt`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,bb=zt`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,vb=zt`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,wb=Ht("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${xb} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${bb} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${r=>r.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${vb} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,jb=zt`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Sb=Ht("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${r=>r.secondary||"#e0e0e0"};
  border-right-color: ${r=>r.primary||"#616161"};
  animation: ${jb} 1s linear infinite;
`,kb=zt`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Cb=zt`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,_b=Ht("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${kb} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Cb} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${r=>r.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Tb=Ht("div")`
  position: absolute;
`,Ab=Ht("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Rb=zt`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Pb=Ht("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Rb} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Ib=({toast:r})=>{let{icon:t,type:o,iconTheme:s}=r;return t!==void 0?typeof t=="string"?y.createElement(Pb,null,t):t:o==="blank"?null:y.createElement(Ab,null,y.createElement(Sb,{...s}),o!=="loading"&&y.createElement(Tb,null,o==="error"?y.createElement(wb,{...s}):y.createElement(_b,{...s})))},Lb=r=>`
0% {transform: translate3d(0,${r*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,zb=r=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${r*-150}%,-1px) scale(.6); opacity:0;}
`,Eb="0%{opacity:0;} 100%{opacity:1;}",Mb="0%{opacity:1;} 100%{opacity:0;}",Bb=Ht("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Nb=Ht("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Wb=(r,t)=>{let o=r.includes("top")?1:-1,[s,i]=gb()?[Eb,Mb]:[Lb(o),zb(o)];return{animation:t?`${zt(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${zt(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}};y.memo(({toast:r,position:t,style:o,children:s})=>{let i=r.height?Wb(r.position||t||"top-center",r.visible):{opacity:0},a=y.createElement(Ib,{toast:r}),l=y.createElement(Nb,{...r.ariaProps},Cn(r.message,r));return y.createElement(Bb,{className:r.className,style:{...i,...o,...r.style}},typeof s=="function"?s({icon:a,message:l}):y.createElement(y.Fragment,null,a,l))});pb(y.createElement);hs`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;var ct=it;const Db="http://localhost";class at{constructor(){Ve(this,"baseURL");Ve(this,"authToken",null);this.baseURL=`${Db}:3003/api/documents`}setAuthToken(t){this.authToken=t}getUserIdFromToken(){if(!this.authToken)return"1f475729-c2e0-4b3d-a678-e4a4ea4d6cc0";try{const o=this.authToken.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),s=decodeURIComponent(atob(o).split("").map(function(a){return"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(s).userId||"1f475729-c2e0-4b3d-a678-e4a4ea4d6cc0"}catch(t){return console.error("Failed to decode token:",t),"1f475729-c2e0-4b3d-a678-e4a4ea4d6cc0"}}getAuthHeaders(){const t={Authorization:`Bearer ${this.authToken||"NO_TOKEN"}`,"Content-Type":"application/json"};return console.log("🔑 Document service auth headers:",t),console.log("🔑 Document service authToken:",this.authToken?.substring(0,20)+"..."),t}getMultipartHeaders(){return{Authorization:`Bearer ${this.authToken||"test-token"}`}}async uploadDocument(t,o,s,i){try{console.log("📤 DocumentService.uploadDocument called",{fileName:t.name,fileSize:t.size,categoryId:o,hasAuthToken:!!this.authToken,authToken:this.authToken?.substring(0,20)+"..."});const a=new FormData;a.append("file",t),a.append("categoryId",o),s&&a.append("metadata",JSON.stringify(s)),console.log("📋 Upload headers:",this.getMultipartHeaders()),console.log("🔗 Upload URL:",`${this.baseURL}/upload`);const l=await ke.post(`${this.baseURL}/upload`,a,{headers:this.getMultipartHeaders(),onUploadProgress:c=>{if(console.log("📊 Progress event:",c),i&&c.total){const p=Math.round(c.loaded*100/c.total);i({loaded:c.loaded,total:c.total,percentage:p,stage:p<100?"uploading":"virus_scanning",message:p<100?"Uploading file...":"Scanning for viruses..."})}},timeout:3e5});return console.log("✅ Upload successful:",l.data),l.data}catch(a){console.error("❌ Document upload failed:",a),console.error("❌ Error response:",a.response?.data),console.error("❌ Error status:",a.response?.status),console.error("❌ Error headers:",a.response?.headers);const l=a.response?.data?.error||a.response?.data?.message||a.message||"Upload failed";throw new Error(l)}}async getDocuments(t){try{console.log("📋 DocumentService.getDocuments called"),console.log("🔑 Auth token present:",!!this.authToken),console.log("🔗 Base URL:",this.baseURL),console.log("📋 Auth headers:",this.getAuthHeaders());const o=new URLSearchParams;t&&Object.entries(t).forEach(([i,a])=>{a!=null&&a!==""&&o.append(i,a.toString())}),console.log("📋 Final URL:",`${this.baseURL}/?${o.toString()}`);const s=await ke.get(`${this.baseURL}/?${o.toString()}`,{headers:this.getAuthHeaders()});return console.log("✅ Documents response:",s.data),console.log("✅ Documents count:",s.data.documents?.length||0),s.data}catch(o){throw console.error("❌ Failed to fetch documents:",o),console.error("❌ Error response data:",o.response?.data),console.error("❌ Error response status:",o.response?.status),console.error("❌ Error response headers:",o.response?.headers),new Error(o.response?.data?.message||"Failed to fetch documents")}}async getDocument(t){try{return(await ke.get(`${this.baseURL}/${t}`,{headers:this.getAuthHeaders()})).data}catch(o){throw console.error("Failed to fetch document:",o),new Error(o.response?.data?.message||"Failed to fetch document")}}async downloadDocument(t){try{return(await ke.get(`${this.baseURL}/${t}/download`,{headers:this.getAuthHeaders(),responseType:"blob"})).data}catch(o){throw console.error("Failed to download document:",o),new Error(o.response?.data?.message||"Failed to download document")}}async deleteDocument(t){try{console.log("Deleting document:",{documentId:t,baseURL:this.baseURL});const o=await ke.delete(`${this.baseURL}/${t}`,{headers:this.getAuthHeaders()});return console.log("Delete response:",o.data),!0}catch(o){throw console.error("Failed to delete document:",o),console.error("Error response:",o.response?.data),console.error("Error status:",o.response?.status),new Error(o.response?.data?.error||o.response?.data?.message||o.message||"Failed to delete document")}}async getCategories(){try{console.log("🔗 Fetching categories from:",`${this.baseURL}/categories/list`),console.log("🔑 Auth token present:",!!this.authToken),console.log("📋 Auth headers:",this.getAuthHeaders());const t=await ke.get(`${this.baseURL}/categories/list`,{headers:this.getAuthHeaders()});return console.log("✅ Categories response:",t.data),t.data.categories}catch(t){throw console.error("❌ Failed to fetch categories:",t),console.error("❌ Error response:",t.response?.data),console.error("❌ Error status:",t.response?.status),new Error(t.response?.data?.message||"Failed to fetch categories")}}async getHealthStatus(){try{return(await ke.get(`${this.baseURL}/health/status`,{headers:this.getAuthHeaders()})).data}catch(t){throw console.error("Failed to get health status:",t),new Error(t.response?.data?.message||"Failed to get health status")}}async pollDocumentStatus(t,o,s=30,i=2e3){let a=0;const l=async()=>{try{const c=await this.getDocument(t);if(o(c),c.document_status==="validated"||c.document_status==="approved"||c.document_status==="rejected"||c.virus_scan_status==="infected"||a>=s)return;a++,setTimeout(l,i)}catch(c){console.error("Error polling document status:",c),a<s&&(a++,setTimeout(l,i))}};l()}static formatFileSize(t){if(t===0)return"0 Bytes";const o=1024,s=["Bytes","KB","MB","GB"],i=Math.floor(Math.log(t)/Math.log(o));return parseFloat((t/Math.pow(o,i)).toFixed(2))+" "+s[i]}static getStatusColor(t){return{pending:"#f59e0b",processing:"#3b82f6",validated:"#10b981",approved:"#059669",rejected:"#ef4444",expired:"#6b7280",archived:"#9ca3af",clean:"#10b981",infected:"#ef4444",suspicious:"#f59e0b",under_review:"#8b5cf6"}[t]||"#6b7280"}static getStatusText(t,o="en"){return{en:{pending:"Pending",processing:"Processing",validated:"Validated",approved:"Approved",rejected:"Rejected",expired:"Expired",archived:"Archived",clean:"Virus-free",infected:"Virus detected",suspicious:"Suspicious",under_review:"Under review",scanning:"Scanning..."},ar:{pending:"في الانتظار",processing:"قيد المعالجة",validated:"تم التحقق",approved:"موافق عليه",rejected:"مرفوض",expired:"منتهي الصلاحية",archived:"مؤرشف",clean:"خالي من الفيروسات",infected:"تم اكتشاف فيروس",suspicious:"مشبوه",under_review:"قيد المراجعة",scanning:"جاري الفحص..."}}[o]?.[t]||t}}const Je=new at,$b=te.div`
  background: var(--color-background-surface);
  border-radius: 12px;
  padding: 24px;
  border: 1px solid var(--color-border-light);
`,Fb=te.div`
  display: flex;
  justify-content: between;
  align-items: center;
  margin-bottom: 24px;
  flex-wrap: wrap;
  gap: 16px;
`,Ob=te.h2`
  margin: 0;
  color: var(--color-text-primary);
  font-size: 20px;
  font-weight: 600;
`,qb=te.div`
  display: flex;
  align-items: center;
  gap: 12px;
  flex-wrap: wrap;
  flex: 1;
  justify-content: flex-end;
`,Vb=te.div`
  position: relative;
  min-width: 250px;
`,Ub=te.input`
  width: 100%;
  padding: 10px 16px 10px 40px;
  border: 1px solid var(--color-border-medium);
  border-radius: 8px;
  font-size: 14px;
  background: var(--color-background-primary);
  color: var(--color-text-primary);
  
  &:focus {
    outline: none;
    border-color: var(--color-primary-500);
    box-shadow: 0 0 0 3px var(--color-primary-100);
  }
  
  &::placeholder {
    color: var(--color-text-tertiary);
  }
`,Hb=te(Fd)`
  position: absolute;
  left: 12px;
  top: 50%;
  transform: translateY(-50%);
  color: var(--color-text-tertiary);
  width: 18px;
  height: 18px;
`,Ja=te.select`
  padding: 10px 16px;
  border: 1px solid var(--color-border-medium);
  border-radius: 8px;
  font-size: 14px;
  background: var(--color-background-primary);
  color: var(--color-text-primary);
  min-width: 150px;
  
  &:focus {
    outline: none;
    border-color: var(--color-primary-500);
    box-shadow: 0 0 0 3px var(--color-primary-100);
  }
`,Yb=te(Fe.button)`
  padding: 10px;
  border: 1px solid var(--color-border-medium);
  border-radius: 8px;
  background: var(--color-background-primary);
  color: var(--color-text-secondary);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  
  &:hover {
    background: var(--color-background-secondary);
    color: var(--color-text-primary);
  }
  
  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
`,Qb=te.div`
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 16px;
  margin-bottom: 24px;
  
  @media (max-width: 768px) {
    grid-template-columns: 1fr;
  }
`,Gb=te(Fe.div)`
  background: var(--color-background-primary);
  border: 1px solid var(--color-border-light);
  border-radius: 12px;
  padding: 20px;
  cursor: pointer;
  transition: all 0.2s ease;
  
  &:hover {
    border-color: var(--color-primary-300);
    box-shadow: var(--shadow-md);
  }
`,Kb=te.div`
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  margin-bottom: 12px;
`,Xb=te.div`
  width: 40px;
  height: 40px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  background: ${r=>r.fileType.startsWith("image/")?"var(--color-success-500)":r.fileType==="application/pdf"?"var(--color-error-500)":"var(--color-neutral-500)"};
`,Zb=te.div`
  display: flex;
  align-items: center;
  gap: 8px;
`,el=te(Fe.button)`
  padding: 6px;
  border: none;
  border-radius: 6px;
  background: var(--color-background-secondary);
  color: var(--color-text-secondary);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  
  &:hover {
    background: var(--color-neutral-200);
    color: var(--color-text-primary);
  }
`,Jb=te.div`
  font-weight: 500;
  color: var(--color-text-primary);
  margin-bottom: 4px;
  font-size: 14px;
  line-height: 1.4;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
`,e2=te.div`
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 12px;
  font-size: 12px;
  color: var(--color-text-secondary);
`,t2=te.div`
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
`,$s=te.div`
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 11px;
  font-weight: 500;
  background: ${r=>`${at.getStatusColor(r.status)}20`};
  color: ${r=>at.getStatusColor(r.status)};
  text-transform: capitalize;
`,r2=te.div`
  background: var(--color-primary-100);
  color: var(--color-primary-700);
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 11px;
  font-weight: 500;
  margin-bottom: 8px;
  display: inline-block;
`,o2=te.div`
  text-align: center;
  padding: 60px 20px;
  color: var(--color-text-secondary);
  
  .icon {
    width: 64px;
    height: 64px;
    margin: 0 auto 16px;
    color: var(--color-text-tertiary);
  }
  
  h3 {
    margin: 0 0 8px 0;
    color: var(--color-text-primary);
  }
  
  p {
    margin: 0;
    font-size: 14px;
  }
`,s2=te.div`
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 60px 20px;
  color: var(--color-text-secondary);
  gap: 12px;
`,n2=te.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-top: 24px;
  flex-wrap: wrap;
  gap: 16px;
`,i2=te.div`
  font-size: 14px;
  color: var(--color-text-secondary);
`,a2=te.div`
  display: flex;
  gap: 8px;
`,Fs=te(Fe.button)`
  padding: 8px 12px;
  border: 1px solid var(--color-border-medium);
  border-radius: 6px;
  background: ${r=>r.active?"var(--color-primary-500)":"var(--color-background-primary)"};
  color: ${r=>r.active?"white":"var(--color-text-primary)"};
  cursor: pointer;
  font-size: 14px;
  transition: all 0.2s ease;
  
  &:hover:not(:disabled) {
    background: ${r=>r.active?"var(--color-primary-600)":"var(--color-background-secondary)"};
  }
  
  &:disabled {
    opacity: 0.4;
    cursor: not-allowed;
  }
`,l2=({onDocumentSelect:r,allowedCategories:t,showUpload:o=!0,className:s})=>{const{t:i,i18n:a}=ve(),[l,c]=y.useState([]),[p,d]=y.useState([]),[m,u]=y.useState(!0),[h,b]=y.useState(!1),[j,_]=y.useState(0),[S,R]=y.useState(1),[I,C]=y.useState({limit:12,offset:0});y.useEffect(()=>{f(),z()},[I]);const z=async()=>{try{const v=await Je.getCategories(),g=t?v.filter(A=>t.includes(A.id)):v;d(g)}catch(v){console.error("Failed to load categories:",v)}},f=async()=>{try{u(!0);const v=await Je.getDocuments(I);c(v.documents),_(v.total_count)}catch(v){console.error("Failed to load documents:",v),ct.error(v.message||i("documents.manager.error.load_failed"))}finally{u(!1)}},P=async()=>{b(!0),await f(),b(!1)},w=y.useCallback(v=>{C(g=>({...g,search:v||void 0,offset:0})),R(1)},[]),O=y.useCallback((v,g)=>{C(A=>({...A,[v]:g||void 0,offset:0})),R(1)},[]),V=v=>{const g=(v-1)*(I.limit||12);C(A=>({...A,offset:g})),R(v)},re=async v=>{try{const g=await Je.downloadDocument(v.document_id),A=window.URL.createObjectURL(g),ee=window.document.createElement("a");ee.href=A,ee.download=v.original_filename,window.document.body.appendChild(ee),ee.click(),window.URL.revokeObjectURL(A),window.document.body.removeChild(ee),ct.success(i("documents.manager.download_success"))}catch(g){console.error("Download failed:",g),ct.error(g.message||i("documents.manager.error.download_failed"))}},Q=async v=>{if(window.confirm(i("documents.manager.delete_confirm")))try{await Je.deleteDocument(v.document_id),ct.success(i("documents.manager.delete_success")),await f()}catch(g){console.error("Delete failed:",g),ct.error(g.message||i("documents.manager.error.delete_failed"))}},oe=v=>v.startsWith("image/")?e.jsx(x1,{size:20}):v==="application/pdf"?e.jsx(Le,{size:20}):e.jsx(d1,{size:20}),K=v=>{switch(v){case"approved":case"validated":case"clean":return e.jsx(Ne,{size:12});case"rejected":case"infected":return e.jsx(Lt,{size:12});case"pending":case"processing":case"scanning":return e.jsx(lt,{size:12});default:return e.jsx(Kr,{size:12})}},Y=v=>new Date(v).toLocaleDateString(a.language,{year:"numeric",month:"short",day:"numeric"}),W=v=>at.formatFileSize(v),$=Math.ceil(j/(I.limit||12)),L=(S-1)*(I.limit||12)+1,k=Math.min(S*(I.limit||12),j);return e.jsxs($b,{className:s,children:[e.jsxs(Fb,{children:[e.jsx(Ob,{children:i("documents.manager.title")}),e.jsxs(qb,{children:[e.jsxs(Vb,{children:[e.jsx(Hb,{}),e.jsx(Ub,{type:"text",placeholder:i("documents.manager.search_placeholder"),onChange:v=>w(v.target.value)})]}),e.jsxs(Ja,{value:I.category_id||"",onChange:v=>O("category_id",v.target.value),children:[e.jsx("option",{value:"",children:i("documents.manager.all_categories")}),p.map(v=>e.jsx("option",{value:v.id,children:v.name},v.id))]}),e.jsxs(Ja,{value:I.status||"",onChange:v=>O("status",v.target.value),children:[e.jsx("option",{value:"",children:i("documents.manager.all_statuses")}),e.jsx("option",{value:"pending",children:i("documents.status.pending")}),e.jsx("option",{value:"processing",children:i("documents.status.processing")}),e.jsx("option",{value:"validated",children:i("documents.status.validated")}),e.jsx("option",{value:"approved",children:i("documents.status.approved")}),e.jsx("option",{value:"rejected",children:i("documents.status.rejected")})]}),e.jsx(Yb,{onClick:P,disabled:h,whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx(jr,{size:16,className:h?"animate-spin":""})})]})]}),m?e.jsxs(s2,{children:[e.jsx(jr,{size:20,className:"animate-spin"}),i("documents.manager.loading")]}):l.length===0?e.jsxs(o2,{children:[e.jsx(Le,{className:"icon"}),e.jsx("h3",{children:i("documents.manager.empty.title")}),e.jsx("p",{children:i("documents.manager.empty.description")})]}):e.jsxs(e.Fragment,{children:[e.jsx(Qb,{children:e.jsx(ri,{mode:"popLayout",children:l.map(v=>e.jsxs(Gb,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},whileHover:{y:-2},onClick:()=>r?.(v),children:[e.jsxs(Kb,{children:[e.jsx(Xb,{fileType:v.mime_type,children:oe(v.mime_type)}),e.jsxs(Zb,{onClick:g=>g.stopPropagation(),children:[e.jsx(el,{onClick:()=>re(v),whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(wn,{size:14})}),e.jsx(el,{onClick:()=>Q(v),whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(V1,{size:14})})]})]}),v.category&&e.jsx(r2,{children:v.category.name}),e.jsx(Jb,{children:v.original_filename}),e.jsxs(e2,{children:[e.jsx("span",{children:W(v.file_size_bytes)}),e.jsx("span",{children:"•"}),e.jsx("span",{children:Y(v.upload_timestamp)})]}),e.jsxs(t2,{children:[e.jsxs($s,{status:v.document_status,children:[K(v.document_status),at.getStatusText(v.document_status,a.language)]}),v.virus_scan_status!=="clean"&&e.jsxs($s,{status:v.virus_scan_status,children:[K(v.virus_scan_status),at.getStatusText(v.virus_scan_status,a.language)]}),v.approval_status!=="pending"&&e.jsxs($s,{status:v.approval_status,children:[K(v.approval_status),at.getStatusText(v.approval_status,a.language)]})]})]},v.document_id))})}),$>1&&e.jsxs(n2,{children:[e.jsx(i2,{children:i("documents.manager.pagination.showing",{start:L,end:k,total:j})}),e.jsxs(a2,{children:[e.jsx(Fs,{onClick:()=>V(S-1),disabled:S===1,whileHover:{scale:1.05},whileTap:{scale:.95},children:i("common.previous")}),Array.from({length:Math.min(5,$)},(v,g)=>{let A;return $<=5||S<=3?A=g+1:S>=$-2?A=$-4+g:A=S-2+g,e.jsx(Fs,{onClick:()=>V(A),active:A===S,whileHover:{scale:1.05},whileTap:{scale:.95},children:A},A)}),e.jsx(Fs,{onClick:()=>V(S+1),disabled:S===$,whileHover:{scale:1.05},whileTap:{scale:.95},children:i("common.next")})]})]})]})]})},c2="http://localhost";class d2{constructor(){Ve(this,"baseURL");Ve(this,"authToken",null);this.baseURL=`${c2}:3003/api/kyc`}setAuthToken(t){this.authToken=t}getUserIdFromToken(){if(!this.authToken)return"1f475729-c2e0-4b3d-a678-e4a4ea4d6cc0";try{const o=this.authToken.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),s=decodeURIComponent(atob(o).split("").map(function(a){return"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(s).userId||"1f475729-c2e0-4b3d-a678-e4a4ea4d6cc0"}catch(t){return console.error("Failed to decode token:",t),"1f475729-c2e0-4b3d-a678-e4a4ea4d6cc0"}}getAuthHeaders(){return{Authorization:`Bearer ${this.authToken||"test-token"}`,"Content-Type":"application/json"}}async getKYCStatus(t="customer"){try{const o=this.getUserIdFromToken(),s=new URLSearchParams;return o&&s.append("userId",o),s.append("userRole",t),(await ke.get(`${this.baseURL}/status?${s.toString()}`,{headers:this.getAuthHeaders()})).data.kyc_status}catch(o){throw console.error("Failed to fetch KYC status:",o),new Error(o.response?.data?.error||"Failed to fetch KYC status")}}async getKYCRequirements(t="customer"){try{const o=new URLSearchParams;return o.append("userRole",t),(await ke.get(`${this.baseURL}/requirements?${o.toString()}`,{headers:this.getAuthHeaders()})).data.requirements}catch(o){throw console.error("Failed to fetch KYC requirements:",o),new Error(o.response?.data?.error||"Failed to fetch KYC requirements")}}async submitKYCForReview(t="customer"){try{const o=this.getUserIdFromToken();return(await ke.post(`${this.baseURL}/submit`,{userId:o,userRole:t},{headers:this.getAuthHeaders()})).data}catch(o){throw console.error("Failed to submit KYC for review:",o),new Error(o.response?.data?.error||"Failed to submit KYC for review")}}async getPendingReviews(t){try{const o=new URLSearchParams;return t&&o.append("userRole",t),(await ke.get(`${this.baseURL}/admin/pending?${o.toString()}`,{headers:this.getAuthHeaders()})).data.pending_reviews}catch(o){throw console.error("Failed to fetch pending reviews:",o),new Error(o.response?.data?.error||"Failed to fetch pending reviews")}}async approveKYC(t,o,s){try{return(await ke.post(`${this.baseURL}/admin/approve`,{userId:t,userRole:o,notes:s},{headers:this.getAuthHeaders()})).data}catch(i){throw console.error("Failed to approve KYC:",i),new Error(i.response?.data?.error||"Failed to approve KYC")}}async rejectKYC(t,o,s){try{return(await ke.post(`${this.baseURL}/admin/reject`,{userId:t,userRole:o,reason:s},{headers:this.getAuthHeaders()})).data}catch(i){throw console.error("Failed to reject KYC:",i),new Error(i.response?.data?.error||"Failed to reject KYC")}}async getHealthStatus(){try{return(await ke.get(`${this.baseURL}/health`,{headers:this.getAuthHeaders()})).data}catch(t){throw console.error("Failed to get KYC health status:",t),new Error(t.response?.data?.error||"Failed to get health status")}}static getStatusColor(t){return{not_started:"#6b7280",in_progress:"#3b82f6",pending_review:"#f59e0b",approved:"#10b981",rejected:"#ef4444",requires_revision:"#8b5cf6"}[t]||"#6b7280"}static getStatusText(t,o="en"){return{en:{not_started:"Not Started",in_progress:"In Progress",pending_review:"Pending Review",approved:"Approved",rejected:"Rejected",requires_revision:"Requires Revision"},ar:{not_started:"لم يبدأ",in_progress:"قيد التقدم",pending_review:"قيد المراجعة",approved:"موافق عليه",rejected:"مرفوض",requires_revision:"يتطلب مراجعة"}}[o]?.[t]||t}}const tl=new d2,rl=te.div`
  background: var(--color-background-surface);
  border-radius: 12px;
  padding: 24px;
  border: 1px solid var(--color-border-light);
`,p2=te.div`
  margin-bottom: 24px;
`,u2=te.h2`
  margin: 0 0 8px 0;
  color: var(--color-text-primary);
  font-size: 20px;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 12px;
`,m2=te.p`
  margin: 0;
  color: var(--color-text-secondary);
  font-size: 14px;
`,g2=te.div`
  background: linear-gradient(135deg, var(--color-primary-500), var(--color-primary-600));
  border-radius: 12px;
  padding: 24px;
  color: white;
  margin-bottom: 24px;
`,h2=te.div`
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 20px;
  margin-bottom: 16px;
`,mo=te.div`
  text-align: center;
  
  .value {
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 4px;
  }
  
  .label {
    font-size: 12px;
    opacity: 0.9;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }
`,f2=te.div`
  margin-top: 16px;
`,y2=te.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
  font-size: 14px;
  font-weight: 500;
`,x2=te.div`
  width: 100%;
  height: 8px;
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
  overflow: hidden;
  
  &::after {
    content: '';
    display: block;
    height: 100%;
    width: ${r=>r.progress}%;
    background: white;
    border-radius: 4px;
    transition: width 0.5s ease;
  }
`,b2=te.div`
  display: grid;
  gap: 16px;
`,v2=te.div`
  border: 1px solid var(--color-border-light);
  border-radius: 12px;
  overflow: hidden;
`,w2=te.div`
  background: ${r=>r.completed?"var(--color-success-50)":"var(--color-background-secondary)"};
  border-bottom: 1px solid var(--color-border-light);
  padding: 16px 20px;
  display: flex;
  align-items: center;
  justify-content: space-between;
`,j2=te.div`
  display: flex;
  align-items: center;
  gap: 12px;
  
  .icon {
    width: 32px;
    height: 32px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--color-primary-100);
    color: var(--color-primary-600);
  }
  
  .info {
    h3 {
      margin: 0 0 2px 0;
      font-size: 16px;
      font-weight: 600;
      color: var(--color-text-primary);
    }
    
    p {
      margin: 0;
      font-size: 12px;
      color: var(--color-text-secondary);
    }
  }
`,S2=te.div`
  display: flex;
  align-items: center;
  gap: 8px;
  color: ${r=>{switch(r.status){case"completed":return"var(--color-success-600)";case"partial":return"var(--color-warning-600)";default:return"var(--color-text-secondary)"}}};
  font-size: 14px;
  font-weight: 500;
`,k2=te.div`
  padding: 20px;
  display: grid;
  gap: 12px;
`,Os=te(Fe.div)`
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 20px;
  border: 1px solid var(--color-border-light);
  border-radius: 12px;
  background: var(--color-background-surface);
  transition: all 0.2s ease;
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
  
  &:hover {
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    transform: translateY(-1px);
  }
  
  ${r=>{switch(r.status){case"approved":return`
          border-color: var(--color-success-300);
          background: linear-gradient(135deg, var(--color-success-50), var(--color-success-25));
          box-shadow: 0 1px 3px 0 rgba(34, 197, 94, 0.1), 0 1px 2px 0 rgba(34, 197, 94, 0.06);
          
          &:hover {
            box-shadow: 0 4px 6px -1px rgba(34, 197, 94, 0.15), 0 2px 4px -1px rgba(34, 197, 94, 0.1);
          }
        `;case"rejected":return`
          border-color: var(--color-error-300);
          background: linear-gradient(135deg, var(--color-error-50), var(--color-error-25));
          box-shadow: 0 1px 3px 0 rgba(239, 68, 68, 0.1), 0 1px 2px 0 rgba(239, 68, 68, 0.06);
          
          &:hover {
            box-shadow: 0 4px 6px -1px rgba(239, 68, 68, 0.15), 0 2px 4px -1px rgba(239, 68, 68, 0.1);
          }
        `;case"uploaded":return`
          border-color: var(--color-warning-300);
          background: linear-gradient(135deg, var(--color-warning-50), var(--color-warning-25));
          box-shadow: 0 1px 3px 0 rgba(245, 158, 11, 0.1), 0 1px 2px 0 rgba(245, 158, 11, 0.06);
          
          &:hover {
            box-shadow: 0 4px 6px -1px rgba(245, 158, 11, 0.15), 0 2px 4px -1px rgba(245, 158, 11, 0.1);
          }
        `;default:return`
          border-style: dashed;
          background: linear-gradient(135deg, var(--color-background-surface), var(--color-neutral-50));
          
          &:hover {
            border-color: var(--color-primary-300);
            background: linear-gradient(135deg, var(--color-primary-50), var(--color-primary-25));
            box-shadow: 0 4px 6px -1px rgba(59, 130, 246, 0.15), 0 2px 4px -1px rgba(59, 130, 246, 0.1);
          }
        `}}}
  
  cursor: ${r=>r.status==="missing"?"pointer":"default"};
`,qs=te.div`
  display: flex;
  align-items: center;
  gap: 12px;
  flex: 1;
  
  .name {
    font-weight: 500;
    color: var(--color-text-primary);
    margin-bottom: 2px;
  }
  
  .details {
    font-size: 12px;
    color: var(--color-text-secondary);
  }
`,ol=te.div`
  display: flex;
  align-items: center;
  gap: 8px;
`,go=te(Fe.button)`
  padding: 8px 16px;
  border-radius: 6px;
  font-weight: 500;
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  transition: all 0.2s ease;
  
  ${r=>{switch(r.variant){case"primary":return`
          background: var(--color-primary-500);
          color: white;
          &:hover { background: var(--color-primary-600); }
        `;default:return`
          background: var(--color-background-secondary);
          color: var(--color-text-secondary);
          &:hover { 
            background: var(--color-neutral-200);
            color: var(--color-text-primary);
          }
        `}}}
`,ho=te.div`
  color: ${r=>{switch(r.status){case"approved":return"var(--color-success-500)";case"rejected":return"var(--color-error-500)";case"uploaded":case"pending":return"var(--color-warning-500)";default:return"var(--color-text-tertiary)"}}};
`,C2=te.div`
  background: var(--color-background-secondary);
  border-radius: 8px;
  padding: 20px;
  margin-top: 24px;
  border-left: 4px solid var(--color-primary-500);
`,_2=te.h3`
  margin: 0 0 12px 0;
  color: var(--color-text-primary);
  font-size: 16px;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 8px;
`,T2=te.ul`
  margin: 0;
  padding-left: 20px;
  
  li {
    margin-bottom: 8px;
    color: var(--color-text-secondary);
    font-size: 14px;
    line-height: 1.5;
  }
`,A2=te.div`
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 24px;
`,sl=te(Fe.button)`
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 16px;
  border: 1px solid var(--color-border-light);
  border-radius: 8px;
  background: ${r=>r.active?"var(--color-primary-500)":"var(--color-background-surface)"};
  color: ${r=>r.active?"white":"var(--color-text-secondary)"};
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  
  &:hover {
    background: ${r=>r.active?"var(--color-primary-600)":"var(--color-background-secondary)"};
  }
`,R2=te.table`
  width: 100%;
  background: var(--color-background-surface);
  border-radius: 12px;
  border: 1px solid var(--color-border-light);
  border-collapse: collapse;
  overflow: hidden;
`,P2=te.thead`
  background: var(--color-background-secondary);
`,I2=te.tr`
  border-bottom: 1px solid var(--color-border-light);
`,gr=te.th`
  padding: 16px 20px;
  text-align: left;
  font-weight: 600;
  font-size: 14px;
  color: var(--color-text-primary);
  border-bottom: 1px solid var(--color-border-light);
  
  &:first-child {
    width: 30%;
  }
  
  &:nth-child(2) {
    width: 15%;
  }
  
  &:nth-child(3) {
    width: 15%;
  }
  
  &:nth-child(4) {
    width: 12%;
  }
  
  &:nth-child(5) {
    width: 10%;
  }
  
  &:last-child {
    width: 18%;
    text-align: center;
  }
  
  @media (max-width: 768px) {
    padding: 12px 16px;
    font-size: 12px;
  }
`,L2=te.tbody``,z2=te(Fe.tr)`
  border-bottom: 1px solid var(--color-border-light);
  transition: all 0.2s ease;
  
  &:hover {
    background: var(--color-background-secondary);
  }
  
  &:last-child {
    border-bottom: none;
  }
  
  ${r=>{switch(r.status){case"approved":return`
          background: linear-gradient(135deg, var(--color-success-50), var(--color-success-25));
          border-left: 4px solid var(--color-success-500);
        `;case"rejected":return`
          background: linear-gradient(135deg, var(--color-error-50), var(--color-error-25));
          border-left: 4px solid var(--color-error-500);
        `;case"uploaded":return`
          background: linear-gradient(135deg, var(--color-warning-50), var(--color-warning-25));
          border-left: 4px solid var(--color-warning-500);
        `;default:return`
          background: var(--color-background-surface);
          border-left: 4px solid var(--color-border-light);
        `}}}
`,hr=te.td`
  padding: 16px 20px;
  font-size: 14px;
  color: var(--color-text-primary);
  vertical-align: middle;
  
  &.filename {
    font-weight: 500;
  }
  
  &.status {
    font-weight: 600;
  }
  
  &.actions {
    text-align: center;
  }
  
  @media (max-width: 768px) {
    padding: 12px 16px;
    font-size: 12px;
    
    &.actions {
      text-align: left;
    }
  }
`,Vs=te.div`
  display: flex;
  align-items: center;
  gap: 8px;
  
  &.actions {
    justify-content: center;
    gap: 4px;
    
    @media (max-width: 768px) {
      justify-content: flex-start;
    }
  }
`,Us=te(Fe.button)`
  padding: 6px 12px;
  border-radius: 6px;
  font-weight: 500;
  border: none;
  cursor: ${r=>r.disabled?"not-allowed":"pointer"};
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 12px;
  transition: all 0.2s ease;
  opacity: ${r=>r.disabled?.5:1};
  
  ${r=>{if(r.disabled)return`
        background: var(--color-neutral-200);
        color: var(--color-text-tertiary);
      `;switch(r.variant){case"primary":return`
          background: var(--color-primary-500);
          color: white;
          &:hover { background: var(--color-primary-600); }
        `;case"danger":return`
          background: var(--color-error-500);
          color: white;
          &:hover { background: var(--color-error-600); }
        `;default:return`
          background: var(--color-background-secondary);
          color: var(--color-text-secondary);
          &:hover { 
            background: var(--color-neutral-200);
            color: var(--color-text-primary);
          }
        `}}}
`,E2=te.span`
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 8px;
  background: var(--color-success-100);
  color: var(--color-success-700);
  border-radius: 12px;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
`,M2=te.div`
  padding: 40px 20px;
  text-align: center;
  color: var(--color-text-secondary);
  
  .icon {
    margin-bottom: 16px;
    opacity: 0.5;
  }
  
  .message {
    font-size: 16px;
    font-weight: 500;
    margin-bottom: 8px;
  }
  
  .description {
    font-size: 14px;
  }
`,B2=te(Fe.div)`
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10000;
  padding: 20px;
`,N2=te(Fe.div)`
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 250, 252, 0.9));
  border-radius: 16px;
  padding: 32px;
  max-width: 420px;
  width: 100%;
  box-shadow: 
    0 0 30px rgba(62, 178, 177, 0.12),
    0 10px 40px rgba(0, 0, 0, 0.15);
  border: 2px solid #3eb2b1;
  backdrop-filter: blur(12px);
  text-align: center;
`,W2=te.div`
  width: 64px;
  height: 64px;
  margin: 0 auto 20px;
  background: linear-gradient(135deg, #3eb2b1, #2d9a99);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
`,D2=te.h3`
  margin: 0 0 12px 0;
  color: var(--color-text-primary);
  font-size: 20px;
  font-weight: 600;
`,$2=te.p`
  margin: 0 0 24px 0;
  color: var(--color-text-secondary);
  font-size: 16px;
  line-height: 1.5;
`,F2=te.div`
  display: flex;
  gap: 12px;
  justify-content: center;
`,nl=te(Fe.button)`
  padding: 12px 24px;
  border-radius: 8px;
  font-weight: 600;
  border: none;
  cursor: pointer;
  font-size: 14px;
  min-width: 100px;
  transition: all 0.2s ease;
  
  ${r=>r.variant==="primary"?`
        background: #3eb2b1;
        color: white;
        &:hover { 
          background: #2d9a99;
          box-shadow: 0 4px 12px rgba(62, 178, 177, 0.3);
        }
      `:`
        background: var(--color-background-secondary);
        color: var(--color-text-primary);
        border: 1px solid var(--color-border-light);
        &:hover { 
          background: var(--color-neutral-100);
          border-color: #3eb2b1;
        }
      `}
`,il=({userType:r="USER",onUploadRequest:t,className:o,showDocuments:s=!1,defaultView:i="cards",showManageTab:a=!1,documents:l})=>{const{t:c,i18n:p}=ve(),[d,m]=y.useState(null),[u,h]=y.useState([]),[b,j]=y.useState([]),[_,S]=y.useState(!0),[R,I]=y.useState(!1),[C,z]=y.useState(null),[f,P]=y.useState(i);y.useEffect(()=>{const J=localStorage.getItem("token");J&&Je.setAuthToken(J),w()},[r]),y.useEffect(()=>{l&&l.length>=0&&(console.log("📋 KYCProgressTracker: PropDocuments updated, setting to:",l.length),j(l))},[l]);const w=async()=>{try{S(!0);const J=localStorage.getItem("token");J&&(Je.setAuthToken(J),tl.setAuthToken(J));const X=r==="USER"?"customer":"contractor",ae=await tl.getKYCStatus(X);m(ae);const de=ae.requirements.reduce((me,Ae)=>(me.find(qe=>qe.categoryId===Ae.categoryId)||me.push(Ae),me),[]),je=de.map(me=>({id:me.categoryId,name:me.categoryName,description:me.categoryName,required_for_kyc:me.required,user_type:r,validation_rules:{}}));h(je);const fe=de.filter(me=>me.uploaded&&me.documentId).map(me=>({document_id:me.documentId,user_id:ae.userId,category_id:me.categoryId,original_filename:`${me.categoryName}.pdf`,file_size_bytes:0,mime_type:"application/pdf",file_hash:"",upload_timestamp:new Date().toISOString(),validation_score:100,virus_scan_status:"clean",approval_status:me.approved?"approved":"pending",document_status:"validated",ocr_confidence:100,sama_audit_log:[],category:je.find(Ae=>Ae.id===me.categoryId)}));if(l!=null){if(console.log("📋 Using real documents from props:",l.length),j(l),l.length>0&&ae.requirements){console.log("📋 KYC Requirements from backend:",ae.requirements),console.log("📋 Document categories from props:",l.map(N=>N.category_id)),console.log("🔍 KYC Category Matching Debug:"),console.log("📋 Available document categories:",l.map(N=>N.category_id)),console.log("📋 Required KYC categories:",ae.requirements.map(N=>N.categoryId));const me=ae.requirements.map(N=>{const M=l.some(ne=>ne.category_id===N.categoryId),ue=l.some(ne=>ne.category_id?.toLowerCase()===N.categoryId?.toLowerCase()),D=l.some(ne=>ne.category_id?.replace(/_/g,"-")===N.categoryId?.replace(/_/g,"-")||ne.category_id?.replace(/-/g,"_")===N.categoryId?.replace(/-/g,"_")),T=M||ue||D;console.log(`📋 Category ${N.categoryId}: hasDocument=${T}, required=${N.required}`);const G=l.filter(ne=>ne.category_id===N.categoryId||ne.category_id?.toLowerCase()===N.categoryId?.toLowerCase()||ne.category_id?.replace(/_/g,"-")===N.categoryId?.replace(/_/g,"-")||ne.category_id?.replace(/-/g,"_")===N.categoryId?.replace(/-/g,"_"));return G.length>0?console.log(`  ✅ Found ${G.length} docs for ${N.categoryId}:`,G.map(ne=>ne.original_filename)):(console.log(`  ❌ No documents found for category: ${N.categoryId}`),console.log("  Available categories:",l.map(ne=>ne.category_id))),{...N,uploaded:T||N.uploaded}}),Ae=me.filter(N=>N.required).length,qe=me.filter(N=>N.required&&N.uploaded).length,Qe=Ae>0?Math.round(qe/Ae*100):0;console.log("📊 Updated KYC status with real documents:",{totalRequired:Ae,completedRequired:qe,newCompletionPercentage:Qe}),m({...ae,requirements:me,completionPercentage:Qe})}}else console.log("📋 Using mock documents from KYC data:",fe.length),j(fe)}catch(J){console.error("Failed to load KYC data:",J)}finally{S(!1)}},O=b.reduce((J,X)=>(J[X.category_id]||(J[X.category_id]=[]),J[X.category_id].push(X),J),{}),V=d?.completionPercentage||0,oe=(d?.requirements||[]).filter(J=>J.required).reduce((J,X)=>(J.find(ae=>ae.categoryId===X.categoryId)||J.push(X),J),[]),K=oe.filter(J=>J.approved),Y=oe.filter(J=>J.uploaded),W=J=>{const X=J.toLowerCase();return X.includes("id")||X.includes("passport")?e.jsx(G1,{size:20}):X.includes("salary")||X.includes("income")?e.jsx(r1,{size:20}):X.includes("commercial")||X.includes("business")?e.jsx(oi,{size:20}):X.includes("insurance")||X.includes("certificate")?e.jsx(Kr,{size:20}):e.jsx(Le,{size:20})},$=J=>{switch(J.split(".").pop()?.toLowerCase()){case"pdf":return e.jsx(Le,{size:20,color:"#dc2626"});case"jpg":case"jpeg":case"png":case"gif":return e.jsx(Le,{size:20,color:"#059669"});case"doc":case"docx":return e.jsx(Le,{size:20,color:"#2563eb"});default:return e.jsx(Le,{size:20,color:"#6b7280"})}},L=J=>{const X=d?.requirements.find(ae=>ae.categoryId===J);return X?X.approved?"completed":X.uploaded?"partial":"pending":"pending"},k=J=>{switch(J){case"approved":case"completed":return e.jsx(Ne,{size:16});case"rejected":return e.jsx(Lt,{size:16});case"uploaded":case"pending":case"partial":return e.jsx(lt,{size:16});default:return e.jsx(Zt,{size:16})}},v=()=>{const J=[],X=oe.filter(de=>!de.approved);X.length>0&&J.push(c("kyc.next_steps.upload_required",{count:X.length}));const ae=oe.filter(de=>de.uploaded&&!de.approved);return ae.length>0&&J.push(c("kyc.next_steps.await_approval",{count:ae.length})),V===100&&J.push(c("kyc.next_steps.complete")),J},g=J=>J.approval_status==="approved",A=J=>new Date(J).toLocaleDateString(p.language,{year:"numeric",month:"short",day:"numeric"}),ee=J=>{const X=J.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z_]/g,"");let ae=`kyc.categories.${X}`,de=c(ae);return de===ae&&(ae=`documents.categories.${X}`,de=c(ae)),de===ae?J:de},U=J=>{z(J),I(!0)},q=async()=>{if(C){console.log("Attempting to delete document:",C.document_id);try{const J=await Je.deleteDocument(C.document_id);console.log("Delete result:",J),setTimeout(()=>{w()},500),ct.success(c("kyc.document_deleted"))}catch(J){console.error("Failed to delete document:",J),console.error("Error details:",J),ct.error(c("kyc.delete_failed"))}finally{I(!1),z(null)}}},ie=()=>{I(!1),z(null)},ce=()=>{const J=b.filter(X=>X.document_status!=="archived");return J.length===0?e.jsx("div",{style:{background:"var(--color-background-surface)",borderRadius:"12px",border:"1px solid var(--color-border-light)"},children:e.jsxs(M2,{children:[e.jsx("div",{className:"icon",children:e.jsx(Le,{size:48})}),e.jsx("div",{className:"message",children:c("kyc.no_documents")}),e.jsx("div",{className:"description",children:c("kyc.no_documents_description")})]})}):e.jsxs(R2,{children:[e.jsx(P2,{children:e.jsxs(I2,{children:[e.jsx(gr,{children:c("kyc.table.document")}),e.jsx(gr,{children:c("kyc.table.category")}),e.jsx(gr,{children:c("kyc.table.status")}),e.jsx(gr,{children:c("kyc.table.uploaded")}),e.jsx(gr,{children:c("kyc.table.size")}),e.jsx(gr,{children:c("kyc.table.actions")})]})}),e.jsx(L2,{children:J.map(X=>{const ae=g(X),de=d?.requirements.find(fe=>fe.categoryId===X.category_id),je=X.approval_status==="approved"?"approved":X.approval_status==="rejected"?"rejected":"uploaded";return e.jsxs(z2,{status:je,verified:ae,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.2},children:[e.jsx(hr,{className:"filename",children:e.jsxs(Vs,{children:[$(X.original_filename),e.jsx("span",{title:X.original_filename,children:X.original_filename.length>30?`${X.original_filename.substring(0,30)}...`:X.original_filename})]})}),e.jsx(hr,{children:de?.categoryName?ee(de.categoryName):c("common.unknown")}),e.jsx(hr,{className:"status",children:e.jsxs(Vs,{children:[e.jsx(ho,{status:X.approval_status,children:k(X.approval_status)}),e.jsx("span",{style:{color:at.getStatusColor(X.approval_status)},children:at.getStatusText(X.approval_status,p.language)}),ae&&e.jsxs(E2,{children:[e.jsx(Kr,{size:10}),c("kyc.verified")]})]})}),e.jsx(hr,{children:A(X.upload_timestamp)}),e.jsx(hr,{children:at.formatFileSize(X.file_size_bytes)}),e.jsx(hr,{className:"actions",children:e.jsxs(Vs,{className:"actions",children:[e.jsx(Us,{onClick:async()=>{try{const fe=await Je.downloadDocument(X.document_id),me=URL.createObjectURL(fe),Ae=X.createElement("a");Ae.href=me,Ae.download=X.original_filename,Ae.click(),URL.revokeObjectURL(me)}catch(fe){console.error("Failed to download document:",fe),ct.error(c("kyc.download_failed"))}},title:c("kyc.download_document"),whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx(wn,{size:12})}),t&&e.jsx(Us,{variant:"primary",onClick:()=>t(X.category_id),title:c("kyc.replace_document"),whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx(Zt,{size:12})}),e.jsx(Us,{variant:"danger",disabled:ae,onClick:()=>!ae&&U(X),title:c(ae?"kyc.cannot_delete_verified":"kyc.delete_document"),whileHover:ae?{}:{scale:1.05},whileTap:ae?{}:{scale:.95},children:e.jsx(qo,{size:12})})]})})]},X.document_id)})})]})};return _?e.jsx(rl,{className:o,children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"40px 0",color:"var(--color-text-secondary)"},children:[e.jsx(lt,{size:20,className:"animate-spin",style:{marginRight:"8px"}}),c("kyc.loading")]})}):e.jsxs(rl,{className:o,children:[e.jsxs(p2,{children:[e.jsxs(u2,{children:[e.jsx(si,{size:24}),c("kyc.title")]}),e.jsx(m2,{children:c(r==="CONTRACTOR"?"kyc.subtitle.contractor":"kyc.subtitle.user")})]}),e.jsxs(g2,{children:[e.jsxs(h2,{children:[e.jsxs(mo,{children:[e.jsx("div",{className:"value",children:K.length}),e.jsx("div",{className:"label",children:c("kyc.stats.completed")})]}),e.jsxs(mo,{children:[e.jsx("div",{className:"value",children:oe.length-K.length}),e.jsx("div",{className:"label",children:c("kyc.stats.remaining")})]}),e.jsxs(mo,{children:[e.jsx("div",{className:"value",children:Y.length}),e.jsx("div",{className:"label",children:c("kyc.stats.uploaded")})]}),e.jsxs(mo,{children:[e.jsxs("div",{className:"value",children:[V,"%"]}),e.jsx("div",{className:"label",children:c("kyc.stats.progress")})]})]}),e.jsxs(f2,{children:[e.jsxs(y2,{children:[e.jsx("span",{children:c("kyc.progress.overall")}),e.jsxs("span",{children:[V,"%"]})]}),e.jsx(x2,{progress:V})]})]}),a&&s&&e.jsxs(A2,{children:[e.jsxs(sl,{active:f==="cards",onClick:()=>P("cards"),whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(h1,{size:16}),c("kyc.view.cards")]}),e.jsxs(sl,{active:f==="table",onClick:()=>P("table"),whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(B1,{size:16}),c("kyc.view.table")]})]}),s&&f==="table"?ce():e.jsx(b2,{children:oe.map(J=>{const X=O[J.categoryId]||[],ae=L(J.categoryId);return e.jsxs(v2,{children:[e.jsxs(w2,{completed:ae==="completed",children:[e.jsxs(j2,{children:[e.jsx("div",{className:"icon",children:W(J.categoryName)}),e.jsxs("div",{className:"info",children:[e.jsx("h3",{children:ee(J.categoryName)}),e.jsx("p",{children:c("kyc.required_document")})]})]}),e.jsxs(S2,{status:ae,children:[k(ae),c(`kyc.status.${ae}`),J.required&&e.jsx("span",{style:{fontSize:"10px",background:"var(--color-error-100)",color:"var(--color-error-700)",padding:"2px 6px",borderRadius:"4px",marginLeft:"8px"},children:c("kyc.required")})]})]}),s&&e.jsx(k2,{children:(()=>{const de=X.length>0?X.sort((je,fe)=>new Date(fe.upload_timestamp).getTime()-new Date(je.upload_timestamp).getTime())[0]:null;return de?e.jsxs(Os,{status:de.approval_status==="approved"?"approved":de.approval_status==="rejected"?"rejected":"uploaded",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},children:[e.jsxs(qs,{children:[e.jsx(ho,{status:de.approval_status,children:$(de.original_filename)}),e.jsxs("div",{children:[e.jsx("div",{className:"name",children:de.original_filename}),e.jsxs("div",{className:"details",children:[e.jsx("span",{style:{color:at.getStatusColor(de.approval_status)},children:at.getStatusText(de.approval_status,p.language)})," • ",c("kyc.uploaded_on",{date:new Date(de.upload_timestamp).toLocaleDateString(p.language)})," • ",at.formatFileSize(de.file_size_bytes)]})]})]}),e.jsxs(ol,{children:[e.jsx(go,{onClick:async()=>{try{const je=await Je.downloadDocument(de.document_id),fe=URL.createObjectURL(je),me=document.createElement("a");me.href=fe,me.download=de.original_filename,me.click(),URL.revokeObjectURL(fe)}catch(je){console.error("Failed to download document:",je),ct.error(c("kyc.download_failed"))}},title:c("kyc.download_document"),children:e.jsx(wn,{size:14})}),t&&e.jsxs(go,{variant:"primary",onClick:()=>t(J.categoryId),title:"Replace this document",children:[e.jsx(Zt,{size:14}),c("kyc.replace")]}),e.jsx(go,{onClick:()=>U(de),title:c("kyc.delete_document"),children:e.jsx(qo,{size:14})})]})]},de.document_id):t?e.jsxs(Os,{status:"missing",onClick:()=>t(J.categoryId),whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsxs(qs,{children:[e.jsx(ho,{status:"missing",children:e.jsx(Zt,{size:20})}),e.jsxs("div",{children:[e.jsx("div",{className:"name",children:ee(J.categoryName)}),e.jsx("div",{className:"details",children:c("kyc.click_to_upload")})]})]}),e.jsx(ol,{children:e.jsxs(go,{variant:"primary",children:[e.jsx(Zt,{size:14}),c("kyc.upload")]})})]}):e.jsx(Os,{status:"missing",children:e.jsxs(qs,{children:[e.jsx(ho,{status:"missing",children:e.jsx(Zt,{size:20})}),e.jsxs("div",{children:[e.jsx("div",{className:"name",children:ee(J.categoryName)}),e.jsx("div",{className:"details",children:c("kyc.not_uploaded")})]})]})})})()})]},J.categoryId)})}),v().length>0&&e.jsxs(C2,{children:[e.jsxs(_2,{children:[e.jsx(v1,{size:20}),c("kyc.next_steps.title")]}),e.jsx(T2,{children:v().map((J,X)=>e.jsx("li",{children:J},X))})]}),e.jsx(ri,{children:R&&e.jsx(B2,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:ie,children:e.jsxs(N2,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:J=>J.stopPropagation(),children:[e.jsx(W2,{children:e.jsx(Lt,{size:32})}),e.jsx(D2,{children:c("kyc.delete_document")}),e.jsxs($2,{children:[c("kyc.confirm_delete"),C&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("strong",{children:C.original_filename})]})]}),e.jsxs(F2,{children:[e.jsx(nl,{variant:"secondary",onClick:ie,whileHover:{scale:1.05},whileTap:{scale:.95},children:c("common.cancel")}),e.jsx(nl,{variant:"primary",onClick:q,whileHover:{scale:1.05},whileTap:{scale:.95},children:c("common.delete")})]})]})})})]})},O2=te.div`
  width: 100%;
  padding: 24px;
  
  @media (max-width: 768px) {
    padding: 16px;
  }
`,q2=te.div`
  margin-bottom: 32px;
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(248, 250, 252, 0.8));
  padding: 24px;
  border-radius: 16px;
  box-shadow: 
    0 0 25px rgba(59, 130, 246, 0.1),
    0 8px 32px rgba(0, 0, 0, 0.04);
  border: 1px solid rgba(255, 255, 255, 0.2);
  backdrop-filter: blur(10px);
`,V2=te.h1`
  margin: 0 0 8px 0;
  color: var(--color-text-primary);
  font-size: 28px;
  font-weight: 700;
  display: flex;
  align-items: center;
  gap: 12px;
  
  @media (max-width: 768px) {
    font-size: 24px;
  }
`,U2=te.p`
  margin: 0;
  color: var(--color-text-secondary);
  font-size: 16px;
  line-height: 1.5;
`,H2=te.div`
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 24px;
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(249, 250, 251, 0.9));
  padding: 12px 16px;
  border-radius: 16px;
  box-shadow: 
    0 0 20px rgba(59, 130, 246, 0.08),
    0 4px 20px rgba(0, 0, 0, 0.03);
  border: 1px solid rgba(255, 255, 255, 0.3);
  backdrop-filter: blur(8px);
  
  @media (max-width: 768px) {
    overflow-x: auto;
    padding: 8px 12px;
  }
`,Y2=te(Fe.button)`
  padding: 12px 20px;
  border: none;
  background: transparent;
  color: ${r=>r.active?"var(--color-primary-600)":"var(--color-text-secondary)"};
  font-weight: ${r=>r.active?"600":"500"};
  cursor: pointer;
  border-bottom: 2px solid ${r=>r.active?"var(--color-primary-500)":"transparent"};
  transition: all 0.2s ease;
  white-space: nowrap;
  display: flex;
  align-items: center;
  gap: 8px;
  
  &:hover {
    color: var(--color-primary-600);
  }
`,Q2=te(Fe.div)`
  min-height: 500px;
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.92), rgba(248, 250, 252, 0.85));
  padding: 24px;
  border-radius: 20px;
  box-shadow: 
    0 0 30px rgba(59, 130, 246, 0.12),
    0 10px 40px rgba(0, 0, 0, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.25);
  backdrop-filter: blur(12px);
`;te.div`
  display: flex;
  gap: 12px;
  margin-bottom: 24px;
  
  @media (max-width: 768px) {
    flex-direction: column;
  }
`;te(Fe.button)`
  padding: 12px 20px;
  border-radius: 8px;
  font-weight: 500;
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 8px;
  transition: all 0.2s ease;
  
  ${r=>{switch(r.variant){case"primary":return`
          background: var(--color-primary-500);
          color: white;
          &:hover { background: var(--color-primary-600); }
        `;default:return`
          background: var(--color-background-secondary);
          color: var(--color-text-primary);
          border: 1px solid var(--color-border-medium);
          &:hover { 
            background: var(--color-neutral-100);
            border-color: var(--color-primary-300);
          }
        `}}}
`;te(Fe.div)`
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.75);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  padding: 20px;
  
  /* Smooth enter/exit animations */
  &.entering {
    animation: modalFadeIn 0.3s cubic-bezier(0.16, 1, 0.3, 1);
  }
  
  &.exiting {
    animation: modalFadeOut 0.2s cubic-bezier(0.4, 0, 1, 1);
  }
  
  /* Mobile-first responsive design */
  @media (max-width: 768px) {
    padding: 16px;
    align-items: flex-end;
  }
  
  /* Accessibility: High contrast mode support */
  @media (prefers-contrast: high) {
    background: rgba(0, 0, 0, 0.9);
  }
  
  /* Performance: GPU acceleration */
  transform: translateZ(0);
  will-change: opacity;
`;te(Fe.div)`
  background: var(--color-background-primary);
  border-radius: 20px;
  padding: 0;
  max-width: 640px;
  width: 100%;
  max-height: 90vh;
  position: relative;
  box-shadow: 
    0 32px 64px -12px rgba(0, 0, 0, 0.25),
    0 0 0 1px var(--color-border-light),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
  border: 1px solid var(--color-border-light);
  overflow: hidden;
  
  /* SAMA compliance: Enhanced security visual cues */
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, 
      var(--color-primary-500) 0%, 
      var(--color-secondary-500) 50%, 
      var(--color-primary-500) 100%);
    z-index: 1;
  }
  
  /* Mobile-first responsive design */
  @media (max-width: 768px) {
    border-radius: 20px 20px 0 0;
    max-height: 85vh;
    margin-top: auto;
  }
  
  /* RTL support */
  [dir="rtl"] & {
    direction: rtl;
  }
  
  /* Performance: GPU acceleration */
  transform: translateZ(0);
  will-change: transform, opacity;
  
  /* Smooth animations */
  transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1);
`;te.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 24px 32px 0 32px;
  margin-bottom: 24px;
  position: relative;
  z-index: 2;
  
  /* Mobile responsive */
  @media (max-width: 768px) {
    padding: 20px 24px 0 24px;
    margin-bottom: 20px;
  }
  
  /* RTL support */
  [dir="rtl"] & {
    direction: rtl;
  }
`;te.h2`
  margin: 0;
  color: var(--color-text-primary);
  font-size: 24px;
  font-weight: 700;
  line-height: 1.3;
  letter-spacing: -0.02em;
  
  /* SAMA compliance: Professional typography */
  font-family: var(--font-primary, 'Inter', system-ui, sans-serif);
  
  /* Mobile responsive */
  @media (max-width: 768px) {
    font-size: 20px;
  }
  
  /* Accessibility: Ensure proper contrast */
  @media (prefers-contrast: high) {
    font-weight: 800;
  }
`;te(Fe.button)`
  padding: 12px;
  border: none;
  background: var(--color-background-secondary);
  border-radius: 12px;
  color: var(--color-text-secondary);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s cubic-bezier(0.16, 1, 0.3, 1);
  min-width: 44px;
  min-height: 44px;
  
  /* Hover state */
  &:hover {
    background: var(--color-background-tertiary);
    color: var(--color-text-primary);
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  }
  
  /* Active state */
  &:active {
    transform: translateY(0);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }
  
  /* Focus state for accessibility */
  &:focus {
    outline: 2px solid var(--color-primary-500);
    outline-offset: 2px;
  }
  
  /* High contrast mode */
  @media (prefers-contrast: high) {
    border: 2px solid var(--color-text-primary);
  }
  
  /* Performance optimization */
  will-change: transform;
`;te.div`
  padding: 0 32px 32px 32px;
  position: relative;
  z-index: 2;
  
  /* Mobile responsive */
  @media (max-width: 768px) {
    padding: 0 24px 24px 24px;
  }
  
  /* RTL support */
  [dir="rtl"] & {
    direction: rtl;
  }
`;const G2=te.div`
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 16px;
  margin-bottom: 24px;
`,fo=te.div`
  border-radius: 16px;
  padding: 20px;
  text-align: center;
  backdrop-filter: blur(10px);
  transition: all 0.3s ease;
  border: 1px solid rgba(255, 255, 255, 0.3);
  
  ${r=>{switch(r.type){case"total":return`
          background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 250, 252, 0.9));
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06), 0 4px 16px rgba(0, 0, 0, 0.04);
          border: 2px solid #3eb2b1;
          
          &:hover {
            transform: translateY(-4px);
            box-shadow: 0 4px 12px rgba(62, 178, 177, 0.15), 0 8px 24px rgba(0, 0, 0, 0.08);
            background: linear-gradient(135deg, rgba(255, 255, 255, 1), rgba(248, 250, 252, 0.95));
            border-color: #2d9a99;
          }
          
          .value { color: #2d7d7c; font-weight: 800; }
          .label { color: #3eb2b1; font-weight: 600; }
        `;case"approved":return`
          background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 250, 252, 0.9));
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06), 0 4px 16px rgba(0, 0, 0, 0.04);
          border: 2px solid #50c5c3;
          
          &:hover {
            transform: translateY(-4px);
            box-shadow: 0 4px 12px rgba(80, 197, 195, 0.15), 0 8px 24px rgba(0, 0, 0, 0.08);
            background: linear-gradient(135deg, rgba(255, 255, 255, 1), rgba(248, 250, 252, 0.95));
            border-color: #3eb2b1;
          }
          
          .value { color: #237e7d; font-weight: 800; }
          .label { color: #2da6a5; font-weight: 600; }
        `;case"pending":return`
          background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 250, 252, 0.9));
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06), 0 4px 16px rgba(0, 0, 0, 0.04);
          border: 2px solid #7dd3d8;
          
          &:hover {
            transform: translateY(-4px);
            box-shadow: 0 4px 12px rgba(125, 211, 216, 0.15), 0 8px 24px rgba(0, 0, 0, 0.08);
            background: linear-gradient(135deg, rgba(255, 255, 255, 1), rgba(248, 250, 252, 0.95));
            border-color: #5cc5ca;
          }
          
          .value { color: #4a9f9e; font-weight: 800; }
          .label { color: #5cb3b2; font-weight: 600; }
        `;case"rejected":return`
          background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 250, 252, 0.9));
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06), 0 4px 16px rgba(0, 0, 0, 0.04);
          border: 2px solid #a8d8d7;
          
          &:hover {
            transform: translateY(-4px);
            box-shadow: 0 4px 12px rgba(168, 216, 215, 0.15), 0 8px 24px rgba(0, 0, 0, 0.08);
            background: linear-gradient(135deg, rgba(255, 255, 255, 1), rgba(248, 250, 252, 0.95));
            border-color: #8bd0cf;
          }
          
          .value { color: #6bb5b4; font-weight: 800; }
          .label { color: #7bc2c1; font-weight: 600; }
        `;default:return`
          background: linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(248, 250, 252, 0.8));
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06), 0 4px 16px rgba(0, 0, 0, 0.04);
          border: 2px solid rgba(62, 178, 177, 0.3);
          
          &:hover {
            transform: translateY(-4px);
            box-shadow: 0 4px 12px rgba(62, 178, 177, 0.1), 0 8px 24px rgba(0, 0, 0, 0.08);
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 250, 252, 0.9));
            border-color: rgba(62, 178, 177, 0.5);
          }
          
          .value { color: var(--color-text-primary); }
          .label { color: var(--color-text-secondary); }
        `}}}
  
  .value {
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 4px;
  }
  
  .label {
    font-size: 14px;
    font-weight: 500;
  }
`,Yd=({userType:r="USER"})=>{const{t}=ve(),[o,s]=y.useState("overview"),[i,a]=y.useState([]),[l,c]=y.useState(!0),[p,d]=y.useState("not_verified"),[m,u]=y.useState(!0);y.useEffect(()=>{console.log("🚀 Documents page useEffect triggered - loading documents..."),(async()=>{try{const{apiService:f}=await Ws(async()=>{const{apiService:w}=await Promise.resolve().then(()=>bs);return{apiService:w}},void 0),P=f.getAccessToken();P?(Je.setAuthToken(P),console.log("🔑 Document service token synchronized with API service")):console.warn("⚠️ No token available from API service in useEffect"),console.log("🔄 About to call loadDocuments()...");try{await h(),console.log("✅ loadDocuments() completed successfully")}catch(w){console.error("❌ loadDocuments() failed:",w)}console.log("🔄 About to call loadVerificationStatus()...");try{await b(),console.log("✅ loadVerificationStatus() completed successfully")}catch(w){console.error("❌ loadVerificationStatus() failed:",w)}}catch(f){console.error("❌ Failed to initialize documents page:",f)}})()},[]),y.useEffect(()=>{const z=setInterval(()=>{console.log("⏰ Periodic verification status refresh..."),b()},3e4);return()=>clearInterval(z)},[]);const h=async()=>{console.log("📋 === loadDocuments() called ===");try{console.log("📋 Loading documents from document service API...");const{apiService:z}=await Ws(async()=>{const{apiService:w}=await Promise.resolve().then(()=>bs);return{apiService:w}},void 0);let f=z.getAccessToken();if(f||(f=localStorage.getItem("rabhan_access_token")||localStorage.getItem("token")||localStorage.getItem("access_token")||localStorage.getItem("authToken")),console.log("📋 Available localStorage keys:",Object.keys(localStorage)),console.log("📋 API service token:",f?.substring(0,20)),console.log("📋 rabhan_access_token:",localStorage.getItem("rabhan_access_token")?.substring(0,20)),f)console.log("🔑 Using auth token for document service:",f.substring(0,20)+"..."),Je.setAuthToken(f);else{console.warn("⚠️ No auth token found in API service or localStorage");const w=xe.getCurrentUser();console.log("📋 Auth service user:",w),console.log("📋 Auth service authenticated:",xe.isAuthenticated())}const P=await Je.getDocuments({limit:100,_t:Date.now().toString()});console.log("📋 Document service response:",P),console.log("📋 Documents received:",P.documents?.length||0),P.documents&&P.documents.length>0?(P.documents.forEach((w,O)=>{console.log(`📄 Document ${O+1}:`,{id:w.document_id,filename:w.original_filename,category:w.category_id,uploadTime:w.upload_timestamp,status:w.document_status})}),a(P.documents),console.log("✅ Documents state updated with",P.documents.length,"real documents")):(console.log("📋 No documents returned from document service"),console.log("📋 Response details:",{hasResponse:!!P,hasDocuments:!!P?.documents,documentsLength:P?.documents?.length||0,responseKeys:P?Object.keys(P):[]}),a([]))}catch(z){console.error("❌ Failed to load documents from document service:",z);try{console.log("📋 Fallback: Trying user service...");const f=await fr.getDocuments();if(console.log("📋 User service fallback response:",f),f.success&&f.documents&&f.documents.length>0){const P=f.documents.map(w=>({document_id:w.id||"",user_id:w.userId||"",category_id:w.documentType||"unknown",original_filename:`${w.documentType||"Document"}_${w.id||"unknown"}.pdf`,file_size_bytes:0,mime_type:"application/pdf",file_hash:"",upload_timestamp:w.uploadedAt||w.createdAt||new Date().toISOString(),validation_score:100,virus_scan_status:"clean",approval_status:w.verificationStatus==="verified"?"approved":w.verificationStatus==="rejected"?"rejected":"pending",document_status:w.uploadStatus==="uploaded"?"validated":w.uploadStatus==="failed"?"rejected":"pending",ocr_confidence:0,extracted_data:{},sama_audit_log:[],category:{id:w.documentType||"unknown",name:w.documentType||"Unknown Document",description:`Document type: ${w.documentType||"Unknown"}`,required_for_kyc:!0,user_type:"BOTH",validation_rules:{}}}));a(P),console.log("✅ Using user service fallback with",P.length,"documents")}else console.log("📋 No documents in user service either"),a([])}catch(f){console.error("❌ User service fallback also failed:",f),a([])}}finally{c(!1)}},b=async()=>{try{u(!0),console.log("🔍 Loading verification status from user service...");const z=await fr.getVerificationStatus();console.log("✅ Verification status loaded:",z),d(z)}catch(z){console.error("❌ Failed to load verification status:",z),d("not_verified")}finally{u(!1)}},j=z=>{console.log("🗂️ Direct file upload requested for category:",z);const f=document.createElement("input");f.type="file",f.accept=".pdf,.jpeg,.jpg,.png",f.style.display="none",f.addEventListener("change",async P=>{const w=P.target.files;if(!w||w.length===0)return;const O=w[0];console.log("📁 File selected:",O.name,O.size,O.type);const{apiService:V}=await Ws(async()=>{const{apiService:Q}=await Promise.resolve().then(()=>bs);return{apiService:Q}},void 0),re=V.getAccessToken()||localStorage.getItem("rabhan_access_token");re?(console.log("🔑 Upload using token:",re.substring(0,20)+"..."),Je.setAuthToken(re)):console.warn("⚠️ No token available for upload");try{ct.loading("Uploading document...",{id:"upload-progress"});const Q=await Je.uploadDocument(O,z,{},oe=>{ct.loading(`Uploading... ${oe.percentage}%`,{id:"upload-progress"})});ct.success("Document uploaded successfully!",{id:"upload-progress"}),console.log("📋 Reloading documents list after successful upload..."),await new Promise(oe=>setTimeout(oe,1500)),console.log("📋 Making API call to get fresh documents from user service..."),await h(),console.log("📋 Documents list reloaded from user service"),console.log("🔄 Refreshing verification status after document upload..."),await b(),console.log("✅ Verification status refreshed")}catch(Q){console.error("Upload failed:",Q),ct.error(Q.message||"Upload failed",{id:"upload-progress"})}document.body.removeChild(f)}),document.body.appendChild(f),f.click()},_=i.length,S=i.filter(z=>z.approval_status==="approved").length,R=i.filter(z=>z.approval_status==="pending").length,I=i.filter(z=>z.approval_status==="rejected").length;console.log("📊 Statistics calculation:",{documentsArrayLength:i.length,totalDocuments:_,approvedDocuments:S,pendingDocuments:R,rejectedDocuments:I,documentsArray:i.map(z=>({id:z.document_id,approval_status:z.approval_status,filename:z.original_filename}))});const C=[{key:"overview",label:t("documents.tabs.overview"),icon:e.jsx(si,{size:16})},{key:"upload",label:t("documents.tabs.upload"),icon:e.jsx(Zt,{size:16})},{key:"manage",label:t("documents.tabs.manage"),icon:e.jsx(A1,{size:16})}];return e.jsxs(O2,{children:[e.jsx(q2,{children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",width:"100%"},children:[e.jsxs("div",{children:[e.jsxs(V2,{children:[e.jsx(Le,{size:32}),t("documents.title"),i.length===0&&e.jsx("span",{style:{fontSize:"14px",color:"#f59e0b",marginLeft:"8px",background:"#fef3c7",padding:"2px 6px",borderRadius:"4px",fontWeight:"500"},children:l?"Loading...":"No Real Documents"})]}),e.jsxs(U2,{children:[t(r==="CONTRACTOR"?"documents.subtitle.contractor":"documents.subtitle.user"),i.length===0&&!l&&e.jsx("div",{style:{color:"#f59e0b",fontSize:"14px",marginTop:"4px"},children:"System may be showing demo/mock data for KYC requirements."})]})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:m?e.jsx("div",{style:{padding:"8px 16px",background:"#f3f4f6",borderRadius:"8px",color:"#6b7280",fontSize:"14px"},children:"Loading..."}):e.jsx(Vo,{status:p,showUploadPrompt:!0})})]})}),e.jsx(H2,{children:C.map(z=>e.jsxs(Y2,{active:o===z.key,onClick:()=>s(z.key),whileHover:{y:-1},whileTap:{y:0},children:[z.icon,z.label]},z.key))}),e.jsx(ri,{mode:"wait",children:e.jsxs(Q2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},children:[o==="overview"&&e.jsxs("div",{children:[e.jsxs(G2,{children:[e.jsxs(fo,{type:"total",children:[e.jsx("div",{className:"value",children:_}),e.jsx("div",{className:"label",children:t("documents.stats.total")})]}),e.jsxs(fo,{type:"approved",children:[e.jsx("div",{className:"value",children:S}),e.jsx("div",{className:"label",children:t("documents.stats.approved")})]}),e.jsxs(fo,{type:"pending",children:[e.jsx("div",{className:"value",children:R}),e.jsx("div",{className:"label",children:t("documents.stats.pending")})]}),e.jsxs(fo,{type:"rejected",children:[e.jsx("div",{className:"value",children:I}),e.jsx("div",{className:"label",children:t("documents.stats.rejected")})]})]}),e.jsxs("div",{"data-kyc-progress":!0,children:[console.log("📋 Documents page - passing documents to KYCProgressTracker:",{documentsLength:i?.length||0,documentsArray:i?.map(z=>({id:z.document_id,category:z.category_id,filename:z.original_filename,status:z.approval_status}))||[]}),e.jsx(il,{userType:r,onUploadRequest:void 0,showDocuments:!0,documents:i})]})]}),o==="upload"&&e.jsx(il,{userType:r,onUploadRequest:j,showDocuments:!0,documents:i}),o==="manage"&&e.jsx(l2,{onDocumentSelect:z=>{console.log("Selected document:",z)}})]},o)})]})};class K2{constructor(){Ve(this,"client");Ve(this,"mockProducts",[]);this.client=ke.create({baseURL:Ce.marketplaceApiUrl,timeout:1e4,withCredentials:!0,headers:{"Content-Type":"application/json"}}),this.client.interceptors.request.use(t=>{const o=localStorage.getItem("rabhan_access_token");return o?(t.headers.Authorization=`Bearer ${o}`,console.log("🔑 Marketplace API - Sending token:",o.substring(0,20)+"...")):console.log("❌ Marketplace API - No token found in localStorage"),t}),this.client.interceptors.response.use(t=>t,t=>(console.error("Marketplace API Error:",t.response?.data||t.message),Promise.reject(t)))}async apiCall(t,o,s){try{const i=await this.client.request({method:t,url:o,data:s});if(i.data.success===!1)throw new Error(i.data.message||i.data.error||"Request failed");return i.data.data||i.data}catch(i){throw i.response?.data?.message?new Error(i.response.data.message):i}}async apiCallWithPagination(t,o,s){try{const i=await this.client.request({method:t,url:o,data:s});if(i.data.success===!1)throw new Error(i.data.message||i.data.error||"Request failed");return{data:i.data.data||[],pagination:{page:i.data.meta?.currentPage||i.data.pagination?.page||1,limit:i.data.meta?.limit||i.data.pagination?.limit||20,total:i.data.meta?.total||i.data.pagination?.total||0,totalPages:i.data.meta?.totalPages||i.data.pagination?.totalPages||0,hasNext:i.data.meta?.hasNextPage||i.data.pagination?.hasNext||!1,hasPrev:i.data.meta?.hasPrevPage||i.data.pagination?.hasPrev||!1}}}catch(i){throw i.response?.data?.message?new Error(i.response.data.message):i}}async getCategories(){return this.apiCall("GET","/categories")}async createProduct(t){const o=new FormData;if(Object.entries(t).forEach(([s,i])=>{s!=="images"&&(s==="specifications"&&typeof i=="object"?o.append(s,JSON.stringify(i)):i!=null&&o.append(s,i.toString()))}),t.images&&t.images.length>0){let s=0;t.images.forEach((i,a)=>{o.append("images",i),i.willBePrimary&&(s=a)}),o.append("primaryImageIndex",s.toString())}try{const s=localStorage.getItem("rabhan_access_token"),i=await fetch(`${this.client.defaults.baseURL}/products`,{method:"POST",headers:{...s&&{Authorization:`Bearer ${s}`}},body:o});if(!i.ok){const l=await i.json().catch(()=>({}));throw new Error(l.message||l.error||"Failed to create product")}const a=await i.json();return a.data||a}catch(s){throw console.error("Product creation error:",s),s}}async updateProduct(t,o){const s={...o,contractor_id:o.contractorId,category_id:o.categoryId,name_ar:o.nameAr,description_ar:o.descriptionAr,stock_quantity:o.stockQuantity,stock_status:o.stockStatus,vat_included:o.vatIncluded,approval_status:o.approvalStatus,approved_by:o.approvedBy,approved_at:o.approvedAt,rejection_reason:o.rejectionReason,admin_notes:o.adminNotes,created_at:o.createdAt,updated_at:o.updatedAt,created_by:o.createdBy,updated_by:o.updatedBy},{contractorId:i,categoryId:a,nameAr:l,descriptionAr:c,stockQuantity:p,stockStatus:d,vatIncluded:m,approvalStatus:u,approvedBy:h,approvedAt:b,rejectionReason:j,adminNotes:_,createdAt:S,updatedAt:R,createdBy:I,updatedBy:C,images:z,...f}=s,P=await this.apiCall("PUT",`/products/${t}`,f);if(P&&P.images){let w=null;if(P.primaryImage)w=P.primaryImage.startsWith("http")?P.primaryImage:`${this.client.defaults.baseURL.replace("/api/v1","")}${P.primaryImage}`;else if(P.images[0]?.file_url){const O=P.images[0].file_url;w=O.startsWith("http")?O:`${this.client.defaults.baseURL.replace("/api/v1","")}${O}`}return{...P,contractorId:P.contractor_id||P.contractorId,categoryId:P.category_id||P.categoryId,nameAr:P.name_ar||P.nameAr,descriptionAr:P.description_ar||P.descriptionAr,stockQuantity:P.stock_quantity||P.stockQuantity,stockStatus:P.stock_status||P.stockStatus,vatIncluded:P.vat_included||P.vatIncluded,approvalStatus:P.approval_status||P.approvalStatus,approvedBy:P.approved_by||P.approvedBy,approvedAt:P.approved_at||P.approvedAt,rejectionReason:P.rejection_reason||P.rejectionReason,adminNotes:P.admin_notes||P.adminNotes,createdAt:P.created_at||P.createdAt,updatedAt:P.updated_at||P.updatedAt,createdBy:P.created_by||P.createdBy,updatedBy:P.updated_by||P.updatedBy,price:typeof P.price=="string"?parseFloat(P.price):P.price,imageUrl:w}}return P}async updateProductImages(t,o=[],s=[]){try{if(o.length>0&&await this.apiCall("DELETE",`/products/${t}/images`,{imageIds:o}),s.length>0){const i=new FormData;s.forEach(l=>{i.append("images",l)});const a=localStorage.getItem("rabhan_access_token");await fetch(`${this.client.defaults.baseURL}/products/${t}/images`,{method:"POST",headers:{...a&&{Authorization:`Bearer ${a}`}},body:i})}}catch(i){throw console.error("Error updating product images:",i),i}}async setPrimaryImage(t,o,s=!0){try{await this.apiCall("PUT",`/products/${t}/images/${o}/primary`,{is_primary:s})}catch(i){throw console.error("Error setting primary image:",i),i}}async getProductById(t){return this.apiCall("GET",`/products/${t}`)}async getContractorProducts(t,o={page:1,limit:20}){const s=new URLSearchParams({contractorId:t,page:o.page.toString(),limit:o.limit.toString(),...o.sortBy&&{sortBy:o.sortBy},...o.sortOrder&&{sortOrder:o.sortOrder}});try{const i=await this.client.get(`/products?${s}`);if(i.data.success===!1)throw new Error(i.data.message||i.data.error||"Request failed");return{data:(i.data.data||[]).map(l=>{let c=null;if(l.primaryImage)c=l.primaryImage.startsWith("http")?l.primaryImage:`${this.client.defaults.baseURL.replace("/api/v1","")}${l.primaryImage}`;else if(l.images?.[0]?.file_url){const p=l.images[0].file_url;c=p.startsWith("http")?p:`${this.client.defaults.baseURL.replace("/api/v1","")}${p}`}return c&&console.log("🖼️ Product image URL:",l.name,"→",c),{...l,contractorId:l.contractor_id,categoryId:l.category_id,nameAr:l.name_ar,descriptionAr:l.description_ar,stockQuantity:l.stock_quantity,stockStatus:l.stock_status,vatIncluded:l.vat_included,approvalStatus:l.approval_status,approvedBy:l.approved_by,approvedAt:l.approved_at,rejectionReason:l.rejection_reason,adminNotes:l.admin_notes,createdAt:l.created_at,updatedAt:l.updated_at,createdBy:l.created_by,updatedBy:l.updated_by,price:parseFloat(l.price)||0,imageUrl:c,images:l.images||[],primaryImage:l.primaryImage}}),pagination:i.data.pagination||{page:1,limit:20,total:0,totalPages:0,hasNext:!1,hasPrev:!1}}}catch(i){throw console.error("getContractorProducts error:",i),i.response?.data?.message?new Error(i.response.data.message):i}}async searchProducts(t={},o={page:1,limit:20}){const s=new URLSearchParams({page:o.page.toString(),limit:o.limit.toString(),...o.sortBy&&{sortBy:o.sortBy},...o.sortOrder&&{sortOrder:o.sortOrder},...t.categoryId&&{categoryId:t.categoryId},...t.contractorId&&{contractorId:t.contractorId},...t.brand&&{brand:t.brand},...t.minPrice!==void 0&&{minPrice:t.minPrice.toString()},...t.maxPrice!==void 0&&{maxPrice:t.maxPrice.toString()},...t.search&&{search:t.search},...t.status&&{status:t.status},...t.approvalStatus&&{approvalStatus:t.approvalStatus},...t.inStockOnly&&{inStockOnly:"true"}});return this.apiCallWithPagination("GET",`/products?${s}`)}async deleteProduct(t){await this.apiCall("DELETE",`/products/${t}`)}async submitProductForApproval(t){return this.apiCall("POST",`/approvals/submit/${t}`)}async getProductApprovalHistory(t,o={page:1,limit:10}){const s=new URLSearchParams({page:o.page.toString(),limit:o.limit.toString()});return this.apiCall("GET",`/approvals/history/${t}?${s}`)}async getPendingApprovals(t={page:1,limit:20}){const o=new URLSearchParams({page:t.page.toString(),limit:t.limit.toString()});return this.apiCall("GET",`/approvals/pending?${o}`)}async processApproval(t,o){return this.apiCall("POST",`/approvals/${t}`,o)}async getApprovalStats(){return this.apiCall("GET","/approvals/stats")}async bulkApproveProducts(t,o){return this.apiCall("POST","/approvals/bulk-approve",{productIds:t,adminNotes:o})}async createOrder(t){return this.apiCall("POST","/orders",t)}async getOrderById(t){return this.apiCall("GET",`/orders/${t}`)}async getUserOrders(t,o={page:1,limit:20},s){const i=new URLSearchParams({page:o.page.toString(),limit:o.limit.toString(),...s&&{status:s}});return this.apiCall("GET",`/orders/user/${t}?${i}`)}async updateOrderStatus(t,o,s,i){return this.apiCall("PUT",`/orders/${t}/status`,{status:o,reason:s,notes:i})}async getAllOrders(t={page:1,limit:20},o){const s=new URLSearchParams({page:t.page.toString(),limit:t.limit.toString(),...o&&{status:o}});return this.apiCall("GET",`/orders/all?${s}`)}async getOrderStats(){return this.apiCall("GET","/orders/stats")}async healthCheck(){return this.apiCall("GET","/health")}async getApiInfo(){return this.apiCall("GET","/")}async uploadProductImage(t,o){const s=new FormData;s.append("image",o);const i=localStorage.getItem("rabhan_access_token"),a={};i&&(a.Authorization=`Bearer ${i}`);const l=await fetch(`${this.baseURL}/products/${t}/image`,{method:"POST",headers:a,body:s});if(!l.ok){const p=await l.json().catch(()=>({}));throw new Error(p.message||"Failed to upload image")}const c=await l.json();return c.data||c}async getContractorAnalytics(t,o="30d"){return this.apiCall("GET",`/analytics/contractor/${t}?period=${o}`)}async getProductMetrics(t,o="30d"){return this.apiCall("GET",`/analytics/product/${t}?period=${o}`)}async getMarketplaceOverview(t="30d"){return this.apiCall("GET",`/analytics/overview?period=${t}`)}}const nt=new K2,X2=({user:r,cart:t,addToCart:o,removeFromCart:s,updateCartQuantity:i,getTotalCartItems:a,getTotalCartValue:l})=>{const{t:c,i18n:p}=ve(),d=Be(),m=p.language==="ar",[u,h]=y.useState(!0),[b,j]=y.useState(null),[_,S]=y.useState([]),[R,I]=y.useState(""),[C,z]=y.useState(""),[f,P]=y.useState([0,1e5]),[w,O]=y.useState(1),[V,re]=y.useState(1);y.useEffect(()=>{Q()},[w,R,C]);const Q=async()=>{try{h(!0),j(null);const $={search:R,categoryId:C||void 0,minPrice:f[0],maxPrice:f[1],status:"ACTIVE",approvalStatus:"APPROVED",inStockOnly:!0},L={page:w,limit:12,sortBy:"created_at",sortOrder:"desc"};console.log("🛒 Loading marketplace products with filters:",$);const k=await nt.searchProducts($,L);S(k.data),re(k.pagination.totalPages),console.log(`✅ Loaded ${k.data.length} products`)}catch($){console.error("❌ Error loading products:",$),j($ instanceof Error?$.message:"Failed to load products")}finally{h(!1)}},oe=$=>new Intl.NumberFormat(m?"ar-SA":"en-US",{style:"currency",currency:"SAR",minimumFractionDigits:0,maximumFractionDigits:0}).format($),K=$=>{switch($){case"INVERTER":return{name:c("categories.inverter","Inverter"),nameAr:"العاكسات الشمسية",icon:"⚡"};case"BATTERY":return{name:c("categories.battery","Battery"),nameAr:"البطاريات وأنظمة التخزين",icon:"🔋"};case"SOLAR_PANEL":return{name:c("categories.solarPanel","Solar Panel"),nameAr:"الألواح الشمسية",icon:"☀️"};case"FULL_SYSTEM":return{name:c("categories.fullSystem","Full System"),nameAr:"الأنظمة الكاملة",icon:"⚙️"};default:return{name:c("categories.unknown","Product"),nameAr:"منتج",icon:"📦"}}},Y=$=>{if(!$.specifications||typeof $.specifications!="object")return null;const L=$.specifications;switch($.productCategory){case"INVERTER":return L.powerRate||L.type||L.mppts?`${L.powerRate?L.powerRate+" ":""}${L.type?L.type:""}${L.mppts?" • "+L.mppts+" MPPT":""}`:null;case"BATTERY":return L.capacity||L.voltage?`${L.capacity?L.capacity+" ":""}${L.voltage?L.voltage:""}`:null;case"SOLAR_PANEL":return L.maxPower||L.efficiency?`${L.maxPower?L.maxPower+" ":""}${L.efficiency?"• "+L.efficiency:""}`:null;case"FULL_SYSTEM":return L.systemPower||L.batteryCapacity?`${L.systemPower?L.systemPower+" ":""}${L.batteryCapacity?"• "+L.batteryCapacity:""}`:null;default:return L.wattage||L.efficiency?`${L.wattage?L.wattage+"W":""}${L.efficiency?" • "+L.efficiency:""}`:null}},W=({product:$})=>{const L=t.some(g=>g.product.id===$.id),k=t.find(g=>g.product.id===$.id),v=()=>{d(`/dashboard/marketplace/product/${$.id}`)};return e.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.95)",borderRadius:"16px",border:`1px solid ${n.colors.borders.light}`,overflow:"hidden",transition:n.transitions.normal,cursor:"pointer",boxShadow:n.shadows.sm,display:"flex",flexDirection:"column",height:"100%"},onClick:v,onMouseEnter:g=>{g.currentTarget.style.transform="translateY(-2px)",g.currentTarget.style.boxShadow=n.shadows.lg},onMouseLeave:g=>{g.currentTarget.style.transform="translateY(0)",g.currentTarget.style.boxShadow=n.shadows.sm},children:[e.jsxs("div",{style:{width:"100%",height:"200px",background:$.primaryImage?`url(${$.primaryImage})`:`linear-gradient(135deg, ${n.colors.neutral[100]} 0%, ${n.colors.neutral[200]} 100%)`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:[!$.primaryImage&&e.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:n.colors.neutral[400],strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),e.jsx("polyline",{points:"21,15 16,10 5,21"})]}),e.jsx("div",{style:{position:"absolute",top:"8px",left:m?"auto":"8px",right:m?"8px":"auto",background:`linear-gradient(135deg, ${n.colors.semantic.warning.main} 0%, ${n.colors.semantic.warning.dark} 100%)`,color:"white",fontSize:"0.75rem",padding:"4px 8px",borderRadius:"12px",fontWeight:"600",boxShadow:`0 2px 4px ${n.colors.semantic.warning.main}40`},children:"-15% "}),e.jsx("div",{style:{position:"absolute",top:"8px",right:m?"auto":"8px",left:m?"8px":"auto",background:$.stock_status==="IN_STOCK"?n.colors.primary[500]:`${n.colors.semantic.error.main}e6`,color:"white",fontSize:"0.75rem",padding:"4px 8px",borderRadius:"12px",fontWeight:"500"},children:$.stock_status==="IN_STOCK"?c("marketplace.inStock"):c("marketplace.outOfStock")})]}),e.jsxs("div",{style:{padding:"16px",flex:1,display:"flex",flexDirection:"column"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:n.colors.text.primary,marginBottom:"8px",lineHeight:"1.4",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:$.name}),e.jsx("p",{style:{fontSize:"0.875rem",color:n.colors.text.secondary,marginBottom:"8px"},children:$.brand}),e.jsxs("div",{style:{marginBottom:"12px"},children:[$.productCategory&&e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"4px",background:`${n.colors.primary[500]}10`,color:n.colors.primary[600],padding:"2px 6px",borderRadius:"6px",fontSize:"0.65rem",fontWeight:"600",marginBottom:"4px",border:`1px solid ${n.colors.primary[500]}15`},children:[e.jsx("span",{style:{fontSize:"0.6rem"},children:K($.productCategory).icon}),e.jsx("span",{children:m?K($.productCategory).nameAr:K($.productCategory).name})]}),(()=>{const g=Y($);return g?e.jsx("p",{style:{fontSize:"0.75rem",color:n.colors.text.muted,margin:0,lineHeight:"1.3"},children:g}):null})()]}),e.jsxs("div",{style:{marginTop:"auto",display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[e.jsx("span",{style:{fontSize:"1.25rem",fontWeight:"700",color:n.colors.primary[500]},children:oe(parseFloat($.price)||0)}),e.jsx("span",{style:{fontSize:"0.75rem",color:n.colors.text.muted},children:$.vat_included?c("marketplace.inclVAT"):c("marketplace.exclVAT")})]}),L?e.jsxs("div",{style:{background:`linear-gradient(135deg, ${n.colors.semantic.success.main}15 0%, ${n.colors.semantic.success.light}20 100%)`,border:`2px solid ${n.colors.semantic.success.main}30`,borderRadius:"12px",padding:"12px",display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",color:n.colors.semantic.success.dark,fontSize:"0.875rem",fontWeight:"600"},children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:n.colors.semantic.success.main,strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M20 6L9 17l-5-5"})}),c("marketplace.inCart")," (",k?.quantity,")"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"8px"},children:[e.jsx("button",{onClick:g=>{g.stopPropagation(),k&&k.quantity>1&&i($.id,k.quantity-1)},disabled:!k||k.quantity<=1,style:{background:k&&k.quantity>1?n.colors.neutral[100]:n.colors.neutral[50],border:`1px solid ${n.colors.borders.light}`,borderRadius:"8px",padding:"6px",cursor:k&&k.quantity>1?"pointer":"not-allowed",display:"flex",alignItems:"center",justifyContent:"center",transition:n.transitions.fast,opacity:k&&k.quantity>1?1:.5},children:e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:n.colors.text.secondary,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})})}),e.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"600",color:n.colors.text.primary,minWidth:"20px",textAlign:"center"},children:k?.quantity||0}),e.jsx("button",{onClick:g=>{g.stopPropagation(),k&&i($.id,k.quantity+1)},style:{background:n.colors.neutral[100],border:`1px solid ${n.colors.borders.light}`,borderRadius:"8px",padding:"6px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:n.transitions.fast},onMouseEnter:g=>{g.currentTarget.style.background=n.colors.primary[50],g.currentTarget.style.borderColor=n.colors.primary[200]},onMouseLeave:g=>{g.currentTarget.style.background=n.colors.neutral[100],g.currentTarget.style.borderColor=n.colors.borders.light},children:e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:n.colors.text.secondary,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}),e.jsx("button",{onClick:g=>{g.stopPropagation(),s($.id)},style:{background:`linear-gradient(135deg, ${n.colors.semantic.error.main}15 0%, ${n.colors.semantic.error.light}20 100%)`,border:`1px solid ${n.colors.semantic.error.main}40`,borderRadius:"8px",padding:"6px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:n.transitions.fast,marginLeft:"4px"},onMouseEnter:g=>{g.currentTarget.style.background=`linear-gradient(135deg, ${n.colors.semantic.error.main}25 0%, ${n.colors.semantic.error.light}30 100%)`,g.currentTarget.style.borderColor=`${n.colors.semantic.error.main}60`,g.currentTarget.style.transform="scale(1.05)"},onMouseLeave:g=>{g.currentTarget.style.background=`linear-gradient(135deg, ${n.colors.semantic.error.main}15 0%, ${n.colors.semantic.error.light}20 100%)`,g.currentTarget.style.borderColor=`${n.colors.semantic.error.main}40`,g.currentTarget.style.transform="scale(1)"},title:c("marketplace.removeFromCart"),children:e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:n.colors.semantic.error.main,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"3,6 5,6 21,6"}),e.jsx("path",{d:"M19,6v14a2,2 0 0,1-2,2H7a2,2 0 0,1-2-2V6m3,0V4a2,2 0 0,1,2-2h4a2,2 0 0,1,2,2v2"}),e.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),e.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})})]})]}):e.jsxs("button",{onClick:g=>{g.stopPropagation(),o($)},disabled:$.stock_status!=="IN_STOCK",style:{background:`linear-gradient(135deg, ${n.colors.primary[500]} 0%, ${n.colors.primary[600]} 100%)`,color:"white",border:"none",borderRadius:"12px",padding:"12px 20px",fontSize:"0.875rem",fontWeight:"600",cursor:$.stock_status==="IN_STOCK"?"pointer":"not-allowed",transition:n.transitions.normal,opacity:$.stock_status==="IN_STOCK"?1:.5,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",boxShadow:`0 4px 15px ${n.colors.primary[500]}40, 0 0 0 1px ${n.colors.primary[500]}20`,position:"relative",overflow:"hidden"},onMouseEnter:g=>{$.stock_status==="IN_STOCK"&&(g.currentTarget.style.transform="translateY(-2px)",g.currentTarget.style.boxShadow=`0 6px 20px ${n.colors.primary[500]}50, 0 0 0 1px ${n.colors.primary[500]}30`)},onMouseLeave:g=>{$.stock_status==="IN_STOCK"&&(g.currentTarget.style.transform="translateY(0)",g.currentTarget.style.boxShadow=`0 4px 15px ${n.colors.primary[500]}40, 0 0 0 1px ${n.colors.primary[500]}20`)},children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"}),e.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),e.jsx("path",{d:"M16 10a4 4 0 0 1-8 0"})]}),c("marketplace.addToCart")]})]})]})};return e.jsxs("div",{style:{minHeight:"100vh",background:n.colors.gradients.primaryLight,color:n.colors.text.primary,fontFamily:n.typography.fonts.primary,direction:m?"rtl":"ltr",padding:"clamp(8px, 2vw, 16px)"},children:[e.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",border:`1px solid ${n.colors.borders.light}`,padding:"clamp(16px, 4vw, 24px)",boxShadow:n.shadows.lg,backdropFilter:"blur(10px)",width:"100%",minHeight:"calc(100vh - 32px)"},children:[e.jsxs("div",{style:{background:"rgba(248, 250, 252, 0.6)",borderRadius:"16px",border:`1px solid ${n.colors.borders.light}`,padding:"24px",marginBottom:"24px",boxShadow:n.shadows.sm,position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"4px",background:`linear-gradient(90deg, ${n.colors.primary[500]} 0%, ${n.colors.primary[400]} 100%)`,borderRadius:"16px 16px 0 0"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"2rem",fontWeight:"700",color:n.colors.text.primary,marginBottom:"8px"},children:c("marketplace.title","Solar Products Marketplace")}),e.jsx("p",{style:{fontSize:"1rem",color:n.colors.text.secondary,margin:0},children:c("marketplace.subtitle","Browse and purchase high-quality solar products from verified contractors")})]}),t.length>0&&e.jsxs("div",{style:{background:`linear-gradient(135deg, ${n.colors.primary[500]}15 0%, ${n.colors.secondary[500]}15 100%)`,padding:"16px",borderRadius:"12px",border:`1px solid ${n.colors.primary[500]}30`,minWidth:"200px"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:n.colors.primary[500],strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"}),e.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),e.jsx("path",{d:"M16 10a4 4 0 0 1-8 0"})]}),e.jsxs("span",{style:{fontWeight:"600"},children:[a()," ",c("marketplace.items")]})]})}),e.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:n.colors.primary[500],marginBottom:"12px"},children:oe(l())}),e.jsxs("button",{onClick:()=>d("/dashboard/checkout"),style:{background:`linear-gradient(135deg, ${n.colors.primary[500]} 0%, ${n.colors.primary[600]} 100%)`,color:"white",border:"none",borderRadius:"8px",padding:"8px 16px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:n.transitions.normal,width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",boxShadow:`0 2px 8px ${n.colors.primary[500]}40`},onMouseEnter:$=>{$.currentTarget.style.transform="translateY(-1px)",$.currentTarget.style.boxShadow=`0 4px 12px ${n.colors.primary[500]}50`},onMouseLeave:$=>{$.currentTarget.style.transform="translateY(0)",$.currentTarget.style.boxShadow=`0 2px 8px ${n.colors.primary[500]}40`},children:[e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M20 6L9 17l-5-5"})}),c("marketplace.checkout","Checkout")]})]})]})]}),e.jsxs("div",{style:{background:"rgba(248, 250, 252, 0.6)",borderRadius:"16px",border:`2px solid ${n.colors.borders.light}`,padding:"20px",marginBottom:"24px",boxShadow:n.shadows.md,position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"3px",background:`linear-gradient(90deg, ${n.colors.primary[400]} 0%, ${n.colors.primary[300]} 100%)`,borderRadius:"16px 16px 0 0"}}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth>640?"1fr auto":"1fr",gap:"16px",alignItems:"center"},children:[e.jsx("input",{type:"text",placeholder:c("marketplace.searchPlaceholder","Search solar products..."),value:R,onChange:$=>I($.target.value),style:{background:"rgba(255, 255, 255, 0.9)",border:`2px solid ${n.colors.borders.light}`,borderRadius:"12px",padding:"14px 20px",fontSize:"1rem",color:n.colors.text.primary,outline:"none",transition:n.transitions.normal,fontFamily:n.typography.fonts.primary,boxShadow:"inset 0 1px 3px rgba(0,0,0,0.1)",width:"100%"},onFocus:$=>{$.target.style.borderColor=n.colors.primary[500],$.target.style.boxShadow=`inset 0 1px 3px rgba(0,0,0,0.1), 0 0 0 3px ${n.colors.primary[500]}20`},onBlur:$=>{$.target.style.borderColor=n.colors.borders.light,$.target.style.boxShadow="inset 0 1px 3px rgba(0,0,0,0.1)"}}),e.jsxs("button",{style:{background:`linear-gradient(135deg, ${n.colors.primary[500]} 0%, ${n.colors.secondary[500]} 100%)`,color:"white",border:"none",borderRadius:"12px",padding:"12px 20px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:n.transitions.normal,display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polygon",{points:"22,3 2,3 10,12.46 10,19 14,21 14,12.46"})}),c("marketplace.filter","Filter")]})]})]}),u&&e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"60px",background:"transparent",borderRadius:"16px",border:`1px solid ${n.colors.borders.light}`},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{width:"40px",height:"40px",border:`3px solid ${n.colors.borders.light}`,borderTop:`3px solid ${n.colors.primary[500]}`,borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 16px"}}),e.jsx("p",{style:{color:n.colors.text.secondary},children:c("marketplace.loading","Loading products...")})]})}),b&&!u&&e.jsxs("div",{style:{background:"transparent",borderRadius:"16px",border:`1px solid ${n.colors.borders.light}`,padding:"40px",textAlign:"center",color:n.colors.semantic.error.main},children:[e.jsx("h3",{style:{marginBottom:"8px"},children:c("marketplace.errorTitle","Error Loading Products")}),e.jsx("p",{style:{marginBottom:"16px"},children:b}),e.jsx("button",{onClick:Q,style:{background:n.colors.primary[500],color:"white",border:"none",borderRadius:"8px",padding:"8px 16px",cursor:"pointer"},children:c("marketplace.retry","Try Again")})]}),!u&&!b&&e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(min(300px, 100%), 1fr))",gap:"clamp(16px, 3vw, 24px)",marginBottom:"40px"},children:_.map($=>e.jsx(W,{product:$},$.id))}),!u&&!b&&_.length===0&&e.jsxs("div",{style:{background:"transparent",borderRadius:"16px",border:`1px solid ${n.colors.borders.light}`,padding:"60px",textAlign:"center"},children:[e.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:n.colors.text.muted,strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",style:{margin:"0 auto 16px"},children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("path",{d:"M21 21l-4.35-4.35"})]}),e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:n.colors.text.secondary,marginBottom:"8px"},children:c("marketplace.noProducts","No products found")}),e.jsx("p",{style:{color:n.colors.text.muted},children:c("marketplace.noProductsDesc","Try adjusting your search criteria")})]}),V>1&&e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"8px",marginTop:"32px"},children:[e.jsx("button",{onClick:()=>O($=>Math.max(1,$-1)),disabled:w===1,style:{background:w===1?n.colors.neutral[200]:n.colors.primary[500],color:w===1?n.colors.text.secondary:"white",border:`1px solid ${w===1?n.colors.neutral[300]:n.colors.primary[500]}`,borderRadius:"8px",padding:"8px 16px",cursor:w===1?"not-allowed":"pointer",opacity:w===1?.7:1,transition:n.transitions.normal},children:c("marketplace.previous","Previous")}),e.jsxs("span",{style:{padding:"8px 16px",color:n.colors.text.secondary},children:[w," / ",V]}),e.jsx("button",{onClick:()=>O($=>Math.min(V,$+1)),disabled:w===V,style:{background:w===V?n.colors.neutral[200]:n.colors.primary[500],color:w===V?n.colors.text.secondary:"white",border:`1px solid ${w===V?n.colors.neutral[300]:n.colors.primary[500]}`,borderRadius:"8px",padding:"8px 16px",cursor:w===V?"not-allowed":"pointer",opacity:w===V?.7:1,transition:n.transitions.normal},children:c("marketplace.next","Next")})]}),e.jsx("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
          
          @keyframes stockWave {
            0% {
              left: -100%;
              opacity: 0;
            }
            50% {
              left: 0%;
              opacity: 1;
            }
            100% {
              left: 100%;
              opacity: 0;
            }
          }
          
          @keyframes stockGlow {
            0%, 100% {
              box-shadow: 0 2px 8px ${n.colors.primary[500]}40, 0 0 0 1px ${n.colors.primary[500]}20;
            }
            50% {
              box-shadow: 0 4px 12px ${n.colors.primary[500]}60, 0 0 0 2px ${n.colors.primary[500]}30;
            }
          }
        `})]})," "]})},Z2=({user:r,cart:t,addToCart:o,removeFromCart:s,updateCartQuantity:i,getTotalCartItems:a,getTotalCartValue:l})=>{const{productId:c}=cl(),p=Be(),{t:d,i18n:m}=ve(),u=m.language==="ar",[h,b]=y.useState(null),[j,_]=y.useState(!0),[S,R]=y.useState(null),[I,C]=y.useState(0),[z,f]=y.useState(1),[P,w]=y.useState(!1),[O,V]=y.useState(0);y.useEffect(()=>{c&&re()},[c]);const re=async()=>{try{_(!0),R(null),console.log("📱 Loading product details for ID:",c);const U=await nt.getProductById(c);b(U),console.log("✅ Loaded product:",U.name)}catch(U){console.error("❌ Error loading product:",U),R(U instanceof Error?U.message:"Failed to load product")}finally{_(!1)}},Q=U=>new Intl.NumberFormat(u?"ar-SA":"en-US",{style:"currency",currency:"SAR",minimumFractionDigits:0,maximumFractionDigits:0}).format(U),oe=U=>{if(!U.specifications||typeof U.specifications!="object")return[];const q=U.specifications;switch(U.productCategory){case"INVERTER":return[{label:d("specs.powerRate","Power Rating"),value:q.powerRate},{label:d("specs.type","Type"),value:q.type},{label:d("specs.mppts","MPPT Inputs"),value:q.mppts},{label:d("specs.mpptRange","MPPT Range"),value:q.mpptRange},{label:d("specs.maxInputCurrent","Max Input Current"),value:q.maxInputCurrent},{label:d("specs.outputPhase","Output Phase"),value:q.outputPhase},{label:d("specs.communication","Communication"),value:q.inverterCommunication},{label:d("specs.weight","Weight"),value:q.inverterWeight}].filter(ie=>ie.value);case"BATTERY":return[{label:d("specs.capacity","Capacity"),value:q.capacity},{label:d("specs.voltage","Voltage"),value:q.voltage},{label:d("specs.current","Current"),value:q.current},{label:d("specs.cycleLife","Cycle Life"),value:q.cycleLife},{label:d("specs.communication","Communication"),value:q.batteryCommunication},{label:d("specs.weight","Weight"),value:q.batteryWeight},{label:d("specs.dimensions","Dimensions"),value:q.batteryDimensions}].filter(ie=>ie.value);case"SOLAR_PANEL":return[{label:d("specs.panelPower","Panel Power"),value:q.panelPower},{label:d("specs.panelEfficiency","Efficiency"),value:q.panelEfficiency},{label:d("specs.cellType","Cell Type"),value:q.cellType},{label:d("specs.panelVoltage","Operating Voltage"),value:q.panelVoltage},{label:d("specs.workingCurrent","Working Current"),value:q.workingCurrent},{label:d("specs.workingTemperature","Operating Temperature"),value:q.workingTemperature},{label:d("specs.dimensions","Dimensions"),value:q.panelDimensions},{label:d("specs.weight","Weight"),value:q.panelWeight},{label:d("specs.warranty","Warranty"),value:q.warranty}].filter(ie=>ie.value);case"FULL_SYSTEM":return[{label:d("specs.systemPower","System Power"),value:q.systemPower},{label:d("specs.systemPeak","Peak Power"),value:q.systemPeak},{label:d("specs.acOutput","AC Output"),value:q.cOutput},{label:d("specs.batteryCapacity","Battery Capacity"),value:q.batteryCapacity},{label:d("specs.chargingPower","Charging Power"),value:q.chargingPower},{label:d("specs.solarConfiguration","Solar Configuration"),value:q.solarConfiguration},{label:d("specs.generatingCapacity","Daily Generation"),value:q.generatingCapacity},{label:d("specs.systemDimensions","System Dimensions"),value:q.systemDimensions1},{label:d("specs.totalWeight","Total Weight"),value:q.totalWeight}].filter(ie=>ie.value);default:return[{label:d("specs.wattage","Wattage"),value:q.wattage},{label:d("specs.efficiency","Efficiency"),value:q.efficiency||q.panelEfficiency},{label:d("specs.warranty","Warranty"),value:q.warranty},{label:d("specs.dimensions","Dimensions"),value:q.dimensions||q.panelDimensions},{label:d("specs.weight","Weight"),value:q.weight||q.panelWeight}].filter(ie=>ie.value)}},K=U=>{switch(U){case"INVERTER":return{name:d("categories.inverter","Inverter"),nameAr:"العاكسات الشمسية",icon:"⚡"};case"BATTERY":return{name:d("categories.battery","Battery"),nameAr:"البطاريات وأنظمة التخزين",icon:"🔋"};case"SOLAR_PANEL":return{name:d("categories.solarPanel","Solar Panel"),nameAr:"الألواح الشمسية",icon:"☀️"};case"FULL_SYSTEM":return{name:d("categories.fullSystem","Full System"),nameAr:"الأنظمة الكاملة",icon:"⚙️"};default:return{name:d("categories.unknown","Product"),nameAr:"منتج",icon:"📦"}}},Y=()=>{h&&(o(h,z),console.log(`🛒 Added ${z} x ${h.name} to cart`))},W=h?t.some(U=>U.product.id===h.id):!1,$=h?t.find(U=>U.product.id===h.id):null,L=()=>{p("/dashboard/marketplace")},k=(U=0)=>{V(U),w(!0),document.body.style.overflow="hidden"},v=()=>{w(!1),document.body.style.overflow="auto"},g=()=>{h&&h.images&&V(U=>(U+1)%h.images.length)},A=()=>{h&&h.images&&V(U=>(U-1+h.images.length)%h.images.length)},ee=U=>{if(P)switch(U.key){case"Escape":v();break;case"ArrowLeft":A();break;case"ArrowRight":g();break}};return y.useEffect(()=>(document.addEventListener("keydown",ee),()=>{document.removeEventListener("keydown",ee),document.body.style.overflow="auto"}),[P,h]),j?e.jsx("div",{style:{minHeight:"100vh",background:n.colors.gradients.primaryLight,padding:"clamp(8px, 2vw, 16px)",fontFamily:n.typography.fonts.primary,direction:u?"rtl":"ltr"},children:e.jsx("div",{style:{background:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",border:`1px solid ${n.colors.borders.light}`,padding:"clamp(16px, 4vw, 24px)",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{width:"40px",height:"40px",border:`3px solid ${n.colors.borders.light}`,borderTop:`3px solid ${n.colors.primary[500]}`,borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 16px"}}),e.jsx("p",{style:{color:n.colors.text.secondary},children:d("marketplace.loading","Loading product...")})]})})}):S||!h?e.jsx("div",{style:{minHeight:"100vh",background:n.colors.gradients.primaryLight,padding:"clamp(8px, 2vw, 16px)",fontFamily:n.typography.fonts.primary,direction:u?"rtl":"ltr"},children:e.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",border:`1px solid ${n.colors.borders.light}`,padding:"clamp(16px, 4vw, 24px)",width:"100%",textAlign:"center"},children:[e.jsx("h2",{style:{color:n.colors.semantic.error.main,marginBottom:"16px"},children:d("marketplace.productNotFound","Product Not Found")}),e.jsx("p",{style:{color:n.colors.text.secondary,marginBottom:"24px"},children:S||d("marketplace.productNotFoundDesc","The product you are looking for could not be found.")}),e.jsx("button",{onClick:L,style:{background:n.colors.primary[500],color:"white",border:"none",borderRadius:"12px",padding:"12px 24px",fontSize:"1rem",fontWeight:"600",cursor:"pointer",transition:n.transitions.normal},children:d("marketplace.backToMarketplace","Back to Marketplace")})]})}):e.jsx("div",{style:{minHeight:"100vh",background:n.colors.gradients.primaryLight,padding:"clamp(8px, 2vw, 16px)",fontFamily:n.typography.fonts.primary,direction:u?"rtl":"ltr"},children:e.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",border:`1px solid ${n.colors.borders.light}`,padding:"clamp(16px, 4vw, 24px)",width:"100%",minHeight:"calc(100vh - 32px)"},children:[e.jsxs("button",{onClick:L,style:{background:"transparent",border:`1px solid ${n.colors.borders.light}`,borderRadius:"12px",padding:"12px 20px",marginBottom:"24px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",color:n.colors.text.secondary,transition:n.transitions.normal,fontSize:"0.875rem",fontWeight:"500",whiteSpace:"nowrap",minWidth:"fit-content"},onMouseEnter:U=>{U.currentTarget.style.background=n.colors.neutral[50]},onMouseLeave:U=>{U.currentTarget.style.background="transparent"},children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"15,18 9,12 15,6"})}),d("marketplace.backToMarketplace","Back to Marketplace")]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth>768?"1fr 1fr":"1fr",gap:"clamp(24px, 5vw, 48px)",alignItems:"start"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{width:"100%",height:"400px",background:h.images&&h.images.length>0?`url(${h.images[I]?.file_url||h.primaryImage})`:`linear-gradient(135deg, ${n.colors.neutral[100]} 0%, ${n.colors.neutral[200]} 100%)`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",borderRadius:"16px",border:`1px solid ${n.colors.borders.light}`,position:"relative",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"16px",cursor:h.images&&h.images.length>0?"pointer":"default",transition:n.transitions.normal},onClick:()=>{h.images&&h.images.length>0&&k(I)},onMouseEnter:U=>{h.images&&h.images.length>0&&(U.currentTarget.style.transform="scale(1.02)")},onMouseLeave:U=>{h.images&&h.images.length>0&&(U.currentTarget.style.transform="scale(1)")},children:[!h.primaryImage&&e.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:n.colors.neutral[400],strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),e.jsx("polyline",{points:"21,15 16,10 5,21"})]}),e.jsx("div",{style:{position:"absolute",top:"16px",left:u?"auto":"16px",right:u?"16px":"auto",background:`linear-gradient(135deg, ${n.colors.semantic.warning.main} 0%, ${n.colors.semantic.warning.dark} 100%)`,color:"white",fontSize:"1rem",padding:"8px 12px",borderRadius:"12px",fontWeight:"700",boxShadow:`0 4px 8px ${n.colors.semantic.warning.main}40`},children:"-15%"}),e.jsx("div",{style:{position:"absolute",top:"16px",right:u?"auto":"16px",left:u?"16px":"auto",background:h.stock_status==="IN_STOCK"?n.colors.primary[500]:`${n.colors.semantic.error.main}e6`,color:"white",fontSize:"0.875rem",padding:"6px 12px",borderRadius:"12px",fontWeight:"600"},children:h.stock_status==="IN_STOCK"?d("marketplace.inStock"):d("marketplace.outOfStock")}),h.images&&h.images.length>0&&e.jsxs("div",{style:{position:"absolute",bottom:"12px",right:"12px",background:"rgba(0, 0, 0, 0.7)",color:"white",fontSize:"0.75rem",padding:"4px 8px",borderRadius:"8px",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("path",{d:"M21 21l-4.35-4.35"}),e.jsx("path",{d:"M11 8v6"}),e.jsx("path",{d:"M8 11h6"})]}),"Click to zoom"]})]}),h.images&&h.images.length>1&&e.jsx("div",{style:{display:"flex",gap:"8px",overflowX:"auto",padding:"8px 0",scrollbarWidth:"thin"},children:h.images.map((U,q)=>e.jsx("div",{style:{minWidth:"80px",width:"80px",height:"80px",background:`url(${U.file_url})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",borderRadius:"8px",border:I===q?`2px solid ${n.colors.primary[500]}`:`1px solid ${n.colors.borders.light}`,cursor:"pointer",transition:n.transitions.fast,opacity:I===q?1:.7},onClick:()=>C(q),onMouseEnter:ie=>{ie.currentTarget.style.opacity="1",ie.currentTarget.style.transform="scale(1.05)"},onMouseLeave:ie=>{ie.currentTarget.style.opacity=I===q?"1":"0.7",ie.currentTarget.style.transform="scale(1)"}},U.id||q))})]}),e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"clamp(1.5rem, 4vw, 2rem)",fontWeight:"700",color:n.colors.text.primary,marginBottom:"12px",lineHeight:"1.3"},children:h.name}),e.jsxs("p",{style:{fontSize:"1rem",color:n.colors.text.secondary,marginBottom:"16px",fontWeight:"500"},children:[d("marketplace.brand","Brand"),": ",h.brand]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("div",{style:{marginBottom:"8px"},children:e.jsx("span",{style:{fontSize:"clamp(1.75rem, 5vw, 2.5rem)",fontWeight:"700",color:n.colors.primary[500]},children:Q(parseFloat(h.price))})}),e.jsx("p",{style:{fontSize:"0.875rem",color:n.colors.text.muted,margin:0},children:h.vat_included?d("marketplace.inclVAT"):d("marketplace.exclVAT")})]}),h.specifications&&(()=>{const U=oe(h),q=K(h.productCategory||"");return U.length>0?e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:n.colors.text.primary,marginBottom:"4px"},children:d("marketplace.specifications","Specifications")}),e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",background:`${n.colors.primary[500]}12`,color:n.colors.primary[600],padding:"4px 10px",borderRadius:"8px",fontSize:"0.75rem",fontWeight:"600",marginBottom:"12px",border:`1px solid ${n.colors.primary[500]}20`},children:[e.jsx("span",{children:q.icon}),e.jsx("span",{children:u?q.nameAr:q.name})]}),e.jsx("div",{style:{background:n.colors.neutral[50],borderRadius:"12px",padding:"16px",border:`1px solid ${n.colors.borders.light}`},children:U.map((ie,ce)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:ce===U.length-1?"0":"12px",paddingBottom:ce===U.length-1?"0":"12px",borderBottom:ce===U.length-1?"none":`1px solid ${n.colors.borders.light}`},children:[e.jsxs("span",{style:{color:n.colors.text.secondary,fontSize:"0.9rem",fontWeight:"500",maxWidth:"50%"},children:[ie.label,":"]}),e.jsx("span",{style:{color:n.colors.text.primary,fontWeight:"600",fontSize:"0.9rem",textAlign:"right",maxWidth:"50%"},children:ie.value})]},ie.label))})]}):null})(),h.description&&e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:n.colors.text.primary,marginBottom:"12px"},children:d("marketplace.description","Description")}),e.jsx("p",{style:{color:n.colors.text.secondary,lineHeight:"1.6",margin:0},children:h.description})]}),e.jsxs("div",{style:{background:n.colors.neutral[50],borderRadius:"16px",padding:"20px",border:`1px solid ${n.colors.borders.light}`},children:[W?e.jsxs("div",{style:{background:`linear-gradient(135deg, ${n.colors.semantic.success.main}08 0%, ${n.colors.semantic.success.light}12 100%)`,borderRadius:"16px",padding:"20px",border:`2px solid ${n.colors.semantic.success.main}20`,boxShadow:`0 4px 15px ${n.colors.semantic.success.main}15`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:n.colors.semantic.success.main,strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M20 6L9 17l-5-5"})}),e.jsx("span",{style:{fontSize:"1rem",fontWeight:"700",color:n.colors.semantic.success.dark},children:d("marketplace.inYourCart","In Your Cart")})]}),e.jsxs("button",{onClick:()=>s(h.id),style:{background:`${n.colors.semantic.error.main}12`,color:n.colors.semantic.error.main,border:`1.5px solid ${n.colors.semantic.error.main}25`,borderRadius:"10px",padding:"8px 14px",fontSize:"0.8rem",fontWeight:"600",cursor:"pointer",transition:n.transitions.normal,display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:U=>{U.currentTarget.style.background=`${n.colors.semantic.error.main}20`,U.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:U=>{U.currentTarget.style.background=`${n.colors.semantic.error.main}12`,U.currentTarget.style.transform="translateY(0)"},children:[e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"3,6 5,6 21,6"}),e.jsx("path",{d:"M19,6v14a2,2 0 0,1-2,2H7a2,2 0 0,1-2-2V6m3,0V4a2,2 0 0,1 2-2h4a2,2 0 0,1 2,2v2"}),e.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),e.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),d("marketplace.remove","Remove")]})]}),e.jsx("div",{style:{background:"rgba(255, 255, 255, 0.7)",borderRadius:"12px",padding:"16px",border:`1px solid ${n.colors.semantic.success.main}15`},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxs("span",{style:{fontSize:"0.9rem",fontWeight:"600",color:n.colors.text.primary},children:[d("marketplace.quantity","Quantity"),":"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("button",{onClick:()=>i(h.id,Math.max(1,$.quantity-1)),style:{width:"36px",height:"36px",borderRadius:"10px",border:`2px solid ${n.colors.semantic.success.main}25`,background:"white",color:n.colors.semantic.success.main,fontSize:"1.1rem",fontWeight:"700",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:n.transitions.normal},onMouseEnter:U=>{U.currentTarget.style.background=`${n.colors.semantic.success.main}10`,U.currentTarget.style.transform="scale(1.1)"},onMouseLeave:U=>{U.currentTarget.style.background="white",U.currentTarget.style.transform="scale(1)"},children:"−"}),e.jsx("div",{style:{background:`linear-gradient(135deg, ${n.colors.semantic.success.main}12 0%, ${n.colors.semantic.success.light}15 100%)`,border:`2px solid ${n.colors.semantic.success.main}20`,borderRadius:"10px",padding:"8px 16px",minWidth:"50px",textAlign:"center"},children:e.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"700",color:n.colors.semantic.success.dark},children:$.quantity})}),e.jsx("button",{onClick:()=>i(h.id,$.quantity+1),style:{width:"36px",height:"36px",borderRadius:"10px",border:`2px solid ${n.colors.semantic.success.main}25`,background:"white",color:n.colors.semantic.success.main,fontSize:"1.1rem",fontWeight:"700",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:n.transitions.normal},onMouseEnter:U=>{U.currentTarget.style.background=`${n.colors.semantic.success.main}10`,U.currentTarget.style.transform="scale(1.1)"},onMouseLeave:U=>{U.currentTarget.style.background="white",U.currentTarget.style.transform="scale(1)"},children:"+"})]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:n.colors.text.secondary,marginBottom:"2px"},children:d("marketplace.itemTotal","Item Total")}),e.jsx("div",{style:{fontSize:"1.15rem",fontWeight:"700",color:n.colors.semantic.success.dark},children:Q(parseFloat(h.price)*$.quantity)})]})]})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"600",color:n.colors.text.primary,marginBottom:"12px"},children:d("marketplace.selectQuantity","Select Quantity")}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[e.jsx("button",{onClick:()=>f(Math.max(1,z-1)),style:{width:"44px",height:"44px",borderRadius:"12px",border:`2px solid ${n.colors.primary[500]}20`,background:"white",color:n.colors.primary[500],fontSize:"1.25rem",fontWeight:"700",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:n.transitions.normal,boxShadow:n.shadows.sm},onMouseEnter:U=>{U.currentTarget.style.background=`${n.colors.primary[500]}10`,U.currentTarget.style.transform="scale(1.05)"},onMouseLeave:U=>{U.currentTarget.style.background="white",U.currentTarget.style.transform="scale(1)"},children:"−"}),e.jsx("div",{style:{background:`linear-gradient(135deg, ${n.colors.primary[500]}10 0%, ${n.colors.primary[400]}10 100%)`,border:`2px solid ${n.colors.primary[500]}20`,borderRadius:"12px",padding:"12px 20px",minWidth:"80px",textAlign:"center"},children:e.jsx("span",{style:{fontSize:"1.25rem",fontWeight:"700",color:n.colors.primary[500]},children:z})}),e.jsx("button",{onClick:()=>f(z+1),style:{width:"44px",height:"44px",borderRadius:"12px",border:`2px solid ${n.colors.primary[500]}20`,background:"white",color:n.colors.primary[500],fontSize:"1.25rem",fontWeight:"700",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:n.transitions.normal,boxShadow:n.shadows.sm},onMouseEnter:U=>{U.currentTarget.style.background=`${n.colors.primary[500]}10`,U.currentTarget.style.transform="scale(1.05)"},onMouseLeave:U=>{U.currentTarget.style.background="white",U.currentTarget.style.transform="scale(1)"},children:"+"})]}),z>1&&e.jsxs("div",{style:{background:`${n.colors.primary[500]}08`,borderRadius:"10px",padding:"12px 16px",border:`1px solid ${n.colors.primary[500]}15`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("span",{style:{fontSize:"0.875rem",color:n.colors.text.secondary},children:[z," × ",Q(parseFloat(h.price))," ="]}),e.jsx("span",{style:{fontSize:"1.125rem",fontWeight:"700",color:n.colors.primary[500]},children:Q(parseFloat(h.price)*z)})]})]}),e.jsxs("button",{onClick:Y,disabled:h.stock_status!=="IN_STOCK",style:{background:h.stock_status==="IN_STOCK"?`linear-gradient(135deg, ${n.colors.primary[500]} 0%, ${n.colors.primary[600]} 100%)`:n.colors.neutral[300],color:"white",border:"none",borderRadius:"14px",padding:"18px 24px",fontSize:"1.1rem",fontWeight:"700",cursor:h.stock_status==="IN_STOCK"?"pointer":"not-allowed",transition:n.transitions.normal,width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",boxShadow:h.stock_status==="IN_STOCK"?`0 6px 20px ${n.colors.primary[500]}35`:"none"},onMouseEnter:U=>{h.stock_status==="IN_STOCK"&&(U.currentTarget.style.transform="translateY(-3px)",U.currentTarget.style.boxShadow=`0 8px 25px ${n.colors.primary[500]}45`)},onMouseLeave:U=>{h.stock_status==="IN_STOCK"&&(U.currentTarget.style.transform="translateY(0)",U.currentTarget.style.boxShadow=`0 6px 20px ${n.colors.primary[500]}35`)},children:[e.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"}),e.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),e.jsx("path",{d:"M16 10a4 4 0 0 1-8 0"})]}),h.stock_status==="IN_STOCK"?d("marketplace.addToCart","Add to Cart"):d("marketplace.outOfStock","Out of Stock")]})]}),(W||t.length>0)&&e.jsxs("div",{style:{marginTop:"20px"},children:[e.jsxs("button",{onClick:()=>p("/dashboard/checkout"),style:{width:"100%",background:`linear-gradient(135deg, ${n.colors.semantic.success.main} 0%, ${n.colors.semantic.success.dark} 100%)`,color:"white",border:"none",borderRadius:"12px",padding:"16px 24px",fontSize:"1rem",fontWeight:"600",cursor:"pointer",transition:n.transitions.normal,display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",boxShadow:`0 4px 15px ${n.colors.semantic.success.main}40`},onMouseEnter:U=>{U.currentTarget.style.transform="translateY(-2px)",U.currentTarget.style.boxShadow=`0 6px 20px ${n.colors.semantic.success.main}50`},onMouseLeave:U=>{U.currentTarget.style.transform="translateY(0)",U.currentTarget.style.boxShadow=`0 4px 15px ${n.colors.semantic.success.main}40`},children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M20 6L9 17l-5-5"})}),W?`${d("marketplace.proceedToCheckout","Proceed to Checkout")} (${a()} ${a()===1?"item":"items"})`:t.length>0?`${d("marketplace.viewCart","View Cart")} (${a()} ${a()===1?"item":"items"})`:d("marketplace.proceedToCheckout","Proceed to Checkout")]}),e.jsxs("div",{style:{marginTop:"12px",padding:"12px",background:`${n.colors.semantic.success.main}10`,borderRadius:"8px",textAlign:"center",border:`1px solid ${n.colors.semantic.success.main}20`},children:[e.jsxs("span",{style:{fontSize:"0.875rem",color:n.colors.text.secondary},children:[d("marketplace.cartTotal","Cart Total"),":"]}),e.jsx("span",{style:{fontSize:"1.125rem",fontWeight:"700",color:n.colors.semantic.success.dark,marginLeft:"8px"},children:Q(l())})]})]})]})]})]}),P&&h&&h.images&&h.images.length>0&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.95)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",backdropFilter:"blur(5px)"},onClick:v,children:e.jsxs("div",{style:{position:"relative",maxWidth:"90vw",maxHeight:"90vh",display:"flex",alignItems:"center",justifyContent:"center"},onClick:U=>U.stopPropagation(),children:[e.jsx("button",{onClick:v,style:{position:"absolute",top:"20px",right:"20px",background:"rgba(0, 0, 0, 0.7)",color:"white",border:"none",borderRadius:"50%",width:"40px",height:"40px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",fontWeight:"bold",zIndex:10001,transition:n.transitions.fast},onMouseEnter:U=>{U.currentTarget.style.background="rgba(0, 0, 0, 0.9)"},onMouseLeave:U=>{U.currentTarget.style.background="rgba(0, 0, 0, 0.7)"},children:"×"}),h.images.length>1&&e.jsx("button",{onClick:A,style:{position:"absolute",left:"20px",top:"50%",transform:"translateY(-50%)",background:"rgba(0, 0, 0, 0.7)",color:"white",border:"none",borderRadius:"50%",width:"50px",height:"50px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",fontWeight:"bold",zIndex:10001,transition:n.transitions.fast},onMouseEnter:U=>{U.currentTarget.style.background="rgba(0, 0, 0, 0.9)"},onMouseLeave:U=>{U.currentTarget.style.background="rgba(0, 0, 0, 0.7)"},children:"‹"}),h.images.length>1&&e.jsx("button",{onClick:g,style:{position:"absolute",right:"20px",top:"50%",transform:"translateY(-50%)",background:"rgba(0, 0, 0, 0.7)",color:"white",border:"none",borderRadius:"50%",width:"50px",height:"50px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",fontWeight:"bold",zIndex:10001,transition:n.transitions.fast},onMouseEnter:U=>{U.currentTarget.style.background="rgba(0, 0, 0, 0.9)"},onMouseLeave:U=>{U.currentTarget.style.background="rgba(0, 0, 0, 0.7)"},children:"›"}),e.jsx("img",{src:h.images[O]?.file_url,alt:h.name,style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain",borderRadius:"8px",boxShadow:"0 10px 40px rgba(0, 0, 0, 0.5)"}}),h.images.length>1&&e.jsxs("div",{style:{position:"absolute",bottom:"20px",left:"50%",transform:"translateX(-50%)",background:"rgba(0, 0, 0, 0.7)",color:"white",padding:"8px 16px",borderRadius:"20px",fontSize:"14px",fontWeight:"500"},children:[O+1," / ",h.images.length]}),h.images.length>1&&e.jsx("div",{style:{position:"absolute",bottom:"60px",left:"50%",transform:"translateX(-50%)",display:"flex",gap:"8px",overflowX:"auto",maxWidth:"80vw",padding:"8px",scrollbarWidth:"thin"},children:h.images.map((U,q)=>e.jsx("div",{style:{minWidth:"60px",width:"60px",height:"60px",background:`url(${U.file_url})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",borderRadius:"4px",border:O===q?`2px solid ${n.colors.primary[500]}`:"1px solid rgba(255, 255, 255, 0.3)",cursor:"pointer",transition:n.transitions.fast,opacity:O===q?1:.6},onClick:()=>V(q),onMouseEnter:ie=>{ie.currentTarget.style.opacity="1",ie.currentTarget.style.transform="scale(1.1)"},onMouseLeave:ie=>{ie.currentTarget.style.opacity=O===q?"1":"0.6",ie.currentTarget.style.transform="scale(1)"}},`modal-thumb-${U.id||q}`))})]})})]})})},J2=({user:r,cart:t,getTotalCartItems:o,getTotalCartValue:s,clearCart:i})=>{const{t:a,i18n:l}=ve(),c=Be(),p=l.language==="ar",[d,m]=y.useState(!1),[u,h]=y.useState(!1),[b,j]=y.useState(!1),[_,S]=y.useState(""),[R,I]=y.useState(!1),[C,z]=y.useState({fullName:`${r.first_name||""} ${r.last_name||""}`.trim(),phone:r.phone||"",address:"",city:"",region:r.region||"",postalCode:""}),[f,P]=y.useState("bnpl"),[w,O]=y.useState({cardNumber:"",expiryDate:"",cvv:"",cardName:""}),V=g=>new Intl.NumberFormat(p?"ar-SA":"en-US",{style:"currency",currency:"SAR",minimumFractionDigits:0,maximumFractionDigits:0}).format(g),re={width:"100%",padding:"14px 18px",borderRadius:"12px",border:`2px solid ${n.colors.borders.light}`,fontSize:"1rem",color:n.colors.text.primary,backgroundColor:"rgba(255, 255, 255, 0.9)",outline:"none",transition:n.transitions.normal,fontFamily:n.typography.fonts.primary,boxShadow:"inset 0 1px 3px rgba(0,0,0,0.05)"},Q={display:"block",marginBottom:"10px",fontWeight:"600",color:n.colors.text.primary,fontSize:"0.95rem"},oe=({checked:g,value:A,onChange:ee,children:U})=>e.jsxs("label",{style:{display:"flex",alignItems:"flex-start",padding:"20px",borderRadius:"16px",border:g?`2px solid ${n.colors.primary[500]}`:`2px solid ${n.colors.borders.light}`,background:g?`linear-gradient(135deg, ${n.colors.primary[500]}08 0%, ${n.colors.primary[400]}12 100%)`:"rgba(255, 255, 255, 0.9)",cursor:"pointer",transition:n.transitions.normal,boxShadow:g?`0 4px 15px ${n.colors.primary[500]}15`:"0 2px 8px rgba(0, 0, 0, 0.04)"},onMouseEnter:q=>{g||(q.currentTarget.style.background="rgba(255, 255, 255, 1)",q.currentTarget.style.borderColor=n.colors.primary[300])},onMouseLeave:q=>{g||(q.currentTarget.style.background="rgba(255, 255, 255, 0.9)",q.currentTarget.style.borderColor=n.colors.borders.light)},onClick:()=>ee(A),children:[e.jsx("div",{style:{width:"20px",height:"20px",borderRadius:"50%",border:`2px solid ${g?n.colors.primary[500]:n.colors.borders.light}`,background:"white",marginRight:p?"0":"16px",marginLeft:p?"16px":"0",marginTop:"2px",position:"relative",flexShrink:0,transition:n.transitions.normal},children:g&&e.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:`linear-gradient(135deg, ${n.colors.primary[500]} 0%, ${n.colors.primary[600]} 100%)`,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}})}),e.jsx("input",{type:"radio",value:A,checked:g,onChange:()=>ee(A),style:{position:"absolute",opacity:0,pointerEvents:"none"}}),e.jsx("div",{style:{flex:1},children:U})]}),K=()=>{c("/dashboard/marketplace")},Y=async()=>{if(f==="card"){if(!w.cardNumber||!w.expiryDate||!w.cvv||!w.cardName){alert("Please fill in all card details");return}j(!0);return}m(!0);try{await new Promise(g=>setTimeout(g,2e3)),console.log("📋 Order placed:",{user:r.id,items:t,total:s(),shipping:C,payment:f}),h(!0),i&&i()}catch(g){console.error("❌ Error placing order:",g)}finally{m(!1)}},W=async()=>{if(!_||_.length!==6){alert("Please enter a valid 6-digit OTP");return}I(!0);try{await new Promise(g=>setTimeout(g,1500)),await new Promise(g=>setTimeout(g,1e3)),console.log("📋 Order placed with card payment:",{user:r.id,items:t,total:s(),shipping:C,payment:f,cardDetails:{...w,cvv:"***"}}),j(!1),h(!0),i&&i()}catch(g){console.error("❌ Error verifying OTP:",g)}finally{I(!1)}},$=s(),L=$*.15,k=$>500?0:50,v=$+L+k;return u?e.jsx("div",{style:{minHeight:"100vh",background:n.colors.gradients.primaryLight,padding:"clamp(8px, 2vw, 16px)",fontFamily:n.typography.fonts.primary,direction:p?"rtl":"ltr"},children:e.jsx("div",{style:{background:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",border:`1px solid ${n.colors.borders.light}`,padding:"clamp(16px, 4vw, 24px)",width:"100%",minHeight:"calc(100vh - 32px)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{style:{textAlign:"center",maxWidth:"500px"},children:[e.jsx("div",{style:{width:"80px",height:"80px",background:`linear-gradient(135deg, ${n.colors.semantic.success.main} 0%, ${n.colors.semantic.success.dark} 100%)`,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px",boxShadow:`0 8px 24px ${n.colors.semantic.success.main}40`},children:e.jsx("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M20 6L9 17l-5-5"})})}),e.jsx("h1",{style:{fontSize:"clamp(1.5rem, 4vw, 2rem)",fontWeight:"700",color:n.colors.text.primary,marginBottom:"16px"},children:a("checkout.orderSuccess","Order Placed Successfully!")}),e.jsx("p",{style:{fontSize:"1rem",color:n.colors.text.secondary,marginBottom:"32px",lineHeight:"1.6"},children:a("checkout.orderSuccessDesc","Thank you for your order! We will process it shortly and send you updates via email and SMS.")}),e.jsxs("div",{style:{background:n.colors.neutral[50],borderRadius:"12px",padding:"20px",marginBottom:"24px",border:`1px solid ${n.colors.borders.light}`},children:[e.jsx("h3",{style:{marginBottom:"12px",color:n.colors.text.primary},children:a("checkout.orderSummary","Order Summary")}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[e.jsxs("span",{children:[a("checkout.items","Items"),": ",o()]}),e.jsx("span",{style:{fontWeight:"600"},children:V(v)})]})]}),e.jsx("button",{onClick:K,style:{background:`linear-gradient(135deg, ${n.colors.primary[500]} 0%, ${n.colors.primary[600]} 100%)`,color:"white",border:"none",borderRadius:"12px",padding:"16px 32px",fontSize:"1rem",fontWeight:"600",cursor:"pointer",transition:n.transitions.normal,boxShadow:`0 4px 15px ${n.colors.primary[500]}40`,marginRight:"12px"},children:a("checkout.continueShopping","Continue Shopping")})]})})}):e.jsxs("div",{style:{minHeight:"100vh",background:n.colors.gradients.primaryLight,padding:"clamp(8px, 2vw, 16px)",fontFamily:n.typography.fonts.primary,direction:p?"rtl":"ltr"},children:[e.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",border:`1px solid ${n.colors.borders.light}`,padding:"clamp(16px, 4vw, 24px)",width:"100%",minHeight:"calc(100vh - 32px)"},children:[e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsxs("button",{onClick:K,style:{background:"transparent",border:`1px solid ${n.colors.borders.light}`,borderRadius:"12px",padding:"12px 20px",marginBottom:"24px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",color:n.colors.text.secondary,transition:n.transitions.normal,fontSize:"0.875rem",fontWeight:"500"},onMouseEnter:g=>{g.currentTarget.style.background=n.colors.neutral[50]},onMouseLeave:g=>{g.currentTarget.style.background="transparent"},children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"15,18 9,12 15,6"})}),a("checkout.backToMarketplace","Back to Marketplace")]}),e.jsx("h1",{style:{fontSize:"clamp(1.5rem, 4vw, 2rem)",fontWeight:"700",color:n.colors.text.primary,marginBottom:"8px"},children:a("checkout.title","Checkout")}),e.jsx("p",{style:{color:n.colors.text.secondary,margin:0},children:a("checkout.subtitle","Complete your solar equipment purchase")})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth>768?"1fr 400px":"1fr",gap:"32px"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{background:"linear-gradient(145deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.9) 100%)",borderRadius:"20px",padding:"28px",marginBottom:"24px",border:`2px solid ${n.colors.borders.light}`,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.04)"},children:[e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:n.colors.text.primary,marginBottom:"20px"},children:a("checkout.shippingAddress","Shipping Address")}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"20px"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:Q,children:[a("checkout.fullName","Full Name")," *"]}),e.jsx("input",{type:"text",value:C.fullName,onChange:g=>z({...C,fullName:g.target.value}),placeholder:"Enter your full name",style:re,onFocus:g=>{g.target.style.borderColor=n.colors.primary[500],g.target.style.boxShadow=`inset 0 1px 3px rgba(0,0,0,0.05), 0 0 0 3px ${n.colors.primary[500]}15`},onBlur:g=>{g.target.style.borderColor=n.colors.borders.light,g.target.style.boxShadow="inset 0 1px 3px rgba(0,0,0,0.05)"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:Q,children:[a("checkout.phone","Phone Number")," *"]}),e.jsx("input",{type:"tel",value:C.phone,onChange:g=>z({...C,phone:g.target.value}),placeholder:"+966 5X XXX XXXX",style:re,onFocus:g=>{g.target.style.borderColor=n.colors.primary[500],g.target.style.boxShadow=`inset 0 1px 3px rgba(0,0,0,0.05), 0 0 0 3px ${n.colors.primary[500]}15`},onBlur:g=>{g.target.style.borderColor=n.colors.borders.light,g.target.style.boxShadow="inset 0 1px 3px rgba(0,0,0,0.05)"}})]}),e.jsxs("div",{style:{gridColumn:"1 / -1"},children:[e.jsxs("label",{style:Q,children:[a("checkout.address","Street Address")," *"]}),e.jsx("input",{type:"text",value:C.address,onChange:g=>z({...C,address:g.target.value}),placeholder:"Street address, building number, apartment",style:re,onFocus:g=>{g.target.style.borderColor=n.colors.primary[500],g.target.style.boxShadow=`inset 0 1px 3px rgba(0,0,0,0.05), 0 0 0 3px ${n.colors.primary[500]}15`},onBlur:g=>{g.target.style.borderColor=n.colors.borders.light,g.target.style.boxShadow="inset 0 1px 3px rgba(0,0,0,0.05)"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:Q,children:[a("checkout.city","City")," *"]}),e.jsx("input",{type:"text",value:C.city,onChange:g=>z({...C,city:g.target.value}),placeholder:"Enter city",style:re,onFocus:g=>{g.target.style.borderColor=n.colors.primary[500],g.target.style.boxShadow=`inset 0 1px 3px rgba(0,0,0,0.05), 0 0 0 3px ${n.colors.primary[500]}15`},onBlur:g=>{g.target.style.borderColor=n.colors.borders.light,g.target.style.boxShadow="inset 0 1px 3px rgba(0,0,0,0.05)"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:Q,children:[a("checkout.region","Region")," *"]}),e.jsxs("select",{value:C.region,onChange:g=>z({...C,region:g.target.value}),style:{...re,cursor:"pointer",backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='${n.colors.text.secondary.replace("#","%23")}' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 12px center",backgroundRepeat:"no-repeat",backgroundSize:"16px",paddingRight:"40px",appearance:"none"},onFocus:g=>{g.target.style.borderColor=n.colors.primary[500],g.target.style.boxShadow=`inset 0 1px 3px rgba(0,0,0,0.05), 0 0 0 3px ${n.colors.primary[500]}15`},onBlur:g=>{g.target.style.borderColor=n.colors.borders.light,g.target.style.boxShadow="inset 0 1px 3px rgba(0,0,0,0.05)"},children:[e.jsx("option",{value:"",disabled:!0,style:{color:n.colors.text.muted},children:"Select Region"}),e.jsx("option",{value:"riyadh",children:"Riyadh"}),e.jsx("option",{value:"jeddah",children:"Jeddah"}),e.jsx("option",{value:"dammam",children:"Dammam"}),e.jsx("option",{value:"mecca",children:"Mecca"}),e.jsx("option",{value:"medina",children:"Medina"}),e.jsx("option",{value:"eastern",children:"Eastern Province"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:Q,children:a("checkout.postalCode","Postal Code")}),e.jsx("input",{type:"text",value:C.postalCode,onChange:g=>z({...C,postalCode:g.target.value}),placeholder:"12345 (optional)",style:re,onFocus:g=>{g.target.style.borderColor=n.colors.primary[500],g.target.style.boxShadow=`inset 0 1px 3px rgba(0,0,0,0.05), 0 0 0 3px ${n.colors.primary[500]}15`},onBlur:g=>{g.target.style.borderColor=n.colors.borders.light,g.target.style.boxShadow="inset 0 1px 3px rgba(0,0,0,0.05)"}})]})]})]}),e.jsxs("div",{style:{background:"linear-gradient(145deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.9) 100%)",borderRadius:"20px",padding:"28px",marginBottom:"24px",border:`2px solid ${n.colors.borders.light}`,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.04)"},children:[e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:n.colors.text.primary,marginBottom:"20px"},children:a("checkout.paymentMethod","Payment Method")}),e.jsxs("div",{style:{display:"grid",gap:"16px"},children:[e.jsx(oe,{checked:f==="bnpl",value:"bnpl",onChange:P,children:e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:"700",color:n.colors.text.primary,fontSize:"1.05rem",marginBottom:"6px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:n.colors.primary[500],strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),e.jsx("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),e.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"21"})]}),a("checkout.bnpl","Buy Now, Pay Later (SAMA Compliant)")]}),e.jsx("div",{style:{fontSize:"0.9rem",color:n.colors.text.secondary,lineHeight:"1.4"},children:a("checkout.bnplDesc","Split your payment into installments with SAMA-approved financing")})]})}),e.jsx(oe,{checked:f==="card",value:"card",onChange:P,children:e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:"700",color:n.colors.text.primary,fontSize:"1.05rem",marginBottom:"6px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:n.colors.primary[500],strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"}),e.jsx("line",{x1:"1",y1:"10",x2:"23",y2:"10"})]}),a("checkout.card","Credit/Debit Card")]}),e.jsx("div",{style:{fontSize:"0.9rem",color:n.colors.text.secondary,lineHeight:"1.4"},children:a("checkout.cardDesc","Pay securely with your Visa, Mastercard, or local bank cards")})]})}),e.jsx(oe,{checked:f==="cash",value:"cash",onChange:P,children:e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:"700",color:n.colors.text.primary,fontSize:"1.05rem",marginBottom:"6px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:n.colors.primary[500],strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),e.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"}),e.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"})]}),a("checkout.cash","Cash on Delivery")]}),e.jsx("div",{style:{fontSize:"0.9rem",color:n.colors.text.secondary,lineHeight:"1.4"},children:a("checkout.cashDesc","Pay in cash when your solar equipment is delivered")})]})})]}),f==="card"&&e.jsxs("div",{style:{marginTop:"24px",background:`linear-gradient(135deg, ${n.colors.primary[500]}08 0%, ${n.colors.primary[400]}12 100%)`,borderRadius:"16px",padding:"24px",border:`2px solid ${n.colors.primary[500]}20`},children:[e.jsxs("h4",{style:{fontSize:"1.1rem",fontWeight:"700",color:n.colors.text.primary,marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:n.colors.primary[500],strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"}),e.jsx("line",{x1:"1",y1:"10",x2:"23",y2:"10"})]}),"Card Details"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[e.jsxs("div",{style:{gridColumn:"1 / -1"},children:[e.jsx("label",{style:Q,children:"Card Number *"}),e.jsx("input",{type:"text",value:w.cardNumber,onChange:g=>{const ee=g.target.value.replace(/\D/g,"").slice(0,16).replace(/(\d{4})(?=\d)/g,"$1 ");O({...w,cardNumber:ee})},placeholder:"1234 5678 9012 3456",style:re,onFocus:g=>{g.target.style.borderColor=n.colors.primary[500],g.target.style.boxShadow=`inset 0 1px 3px rgba(0,0,0,0.05), 0 0 0 3px ${n.colors.primary[500]}15`},onBlur:g=>{g.target.style.borderColor=n.colors.borders.light,g.target.style.boxShadow="inset 0 1px 3px rgba(0,0,0,0.05)"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:Q,children:"Cardholder Name *"}),e.jsx("input",{type:"text",value:w.cardName,onChange:g=>O({...w,cardName:g.target.value}),placeholder:"Name on card",style:re,onFocus:g=>{g.target.style.borderColor=n.colors.primary[500],g.target.style.boxShadow=`inset 0 1px 3px rgba(0,0,0,0.05), 0 0 0 3px ${n.colors.primary[500]}15`},onBlur:g=>{g.target.style.borderColor=n.colors.borders.light,g.target.style.boxShadow="inset 0 1px 3px rgba(0,0,0,0.05)"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:Q,children:"Expiry Date *"}),e.jsx("input",{type:"text",value:w.expiryDate,onChange:g=>{const ee=g.target.value.replace(/\D/g,"").slice(0,4).replace(/(\d{2})(?=\d)/,"$1/");O({...w,expiryDate:ee})},placeholder:"MM/YY",style:re,onFocus:g=>{g.target.style.borderColor=n.colors.primary[500],g.target.style.boxShadow=`inset 0 1px 3px rgba(0,0,0,0.05), 0 0 0 3px ${n.colors.primary[500]}15`},onBlur:g=>{g.target.style.borderColor=n.colors.borders.light,g.target.style.boxShadow="inset 0 1px 3px rgba(0,0,0,0.05)"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:Q,children:"CVV *"}),e.jsx("input",{type:"text",value:w.cvv,onChange:g=>{const A=g.target.value.replace(/\D/g,"").slice(0,4);O({...w,cvv:A})},placeholder:"123",style:re,onFocus:g=>{g.target.style.borderColor=n.colors.primary[500],g.target.style.boxShadow=`inset 0 1px 3px rgba(0,0,0,0.05), 0 0 0 3px ${n.colors.primary[500]}15`},onBlur:g=>{g.target.style.borderColor=n.colors.borders.light,g.target.style.boxShadow="inset 0 1px 3px rgba(0,0,0,0.05)"}})]})]})]})]})]}),e.jsx("div",{children:e.jsxs("div",{style:{background:"linear-gradient(145deg, rgba(255, 255, 255, 0.98) 0%, rgba(248, 250, 252, 0.95) 100%)",borderRadius:"20px",padding:"28px",border:`2px solid ${n.colors.primary[500]}15`,position:"sticky",top:"20px",boxShadow:`0 8px 30px rgba(0, 0, 0, 0.06), 0 0 0 1px ${n.colors.primary[500]}08`},children:[e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:n.colors.text.primary,marginBottom:"20px"},children:a("checkout.orderSummary","Order Summary")}),e.jsx("div",{style:{marginBottom:"20px"},children:t.map((g,A)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px",paddingBottom:"16px",borderBottom:A<t.length-1?`1px solid ${n.colors.borders.light}`:"none"},children:[e.jsx("div",{style:{width:"60px",height:"60px",background:g.product.primaryImage?`url(${g.product.primaryImage})`:`linear-gradient(135deg, ${n.colors.neutral[100]} 0%, ${n.colors.neutral[200]} 100%)`,backgroundSize:"cover",backgroundPosition:"center",borderRadius:"8px",border:`1px solid ${n.colors.borders.light}`}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:"500",fontSize:"0.875rem",color:n.colors.text.primary,marginBottom:"4px",lineHeight:"1.3"},children:g.product.name}),e.jsx("div",{style:{fontSize:"0.75rem",color:n.colors.text.secondary,marginBottom:"4px"},children:g.product.brand}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("span",{style:{fontSize:"0.75rem",color:n.colors.text.secondary},children:["Qty: ",g.quantity]}),e.jsx("span",{style:{fontWeight:"600",color:n.colors.text.primary},children:V(parseFloat(g.product.price)*g.quantity)})]})]})]},`${g.product.id}-${A}`))}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[e.jsx("span",{style:{color:n.colors.text.secondary},children:a("checkout.subtotal","Subtotal")}),e.jsx("span",{children:V($)})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[e.jsx("span",{style:{color:n.colors.text.secondary},children:a("checkout.vat","VAT (15%)")}),e.jsx("span",{children:V(L)})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"16px"},children:[e.jsx("span",{style:{color:n.colors.text.secondary},children:a("checkout.shipping","Shipping")}),e.jsx("span",{children:k===0?a("checkout.freeShipping","Free"):V(k)})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"16px",borderTop:`1px solid ${n.colors.borders.light}`,fontSize:"1.125rem",fontWeight:"700"},children:[e.jsx("span",{children:a("checkout.total","Total")}),e.jsx("span",{style:{color:n.colors.primary[500]},children:V(v)})]})]}),e.jsx("button",{onClick:Y,disabled:d||!C.fullName||!C.phone||!C.address,style:{width:"100%",background:d?n.colors.neutral[400]:`linear-gradient(135deg, ${n.colors.primary[500]} 0%, ${n.colors.primary[600]} 100%)`,color:"white",border:"none",borderRadius:"12px",padding:"16px 24px",fontSize:"1rem",fontWeight:"600",cursor:d?"not-allowed":"pointer",transition:n.transitions.normal,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",boxShadow:d?"none":`0 4px 15px ${n.colors.primary[500]}40`},children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{width:"20px",height:"20px",border:"2px solid rgba(255, 255, 255, 0.3)",borderTop:"2px solid white",borderRadius:"50%",animation:"spin 1s linear infinite"}}),a("checkout.processing","Processing...")]}):e.jsxs(e.Fragment,{children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"}),e.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),e.jsx("path",{d:"M16 10a4 4 0 0 1-8 0"})]}),f==="card"?"Proceed to Payment":a("checkout.placeOrder","Place Order")]})}),$>500&&e.jsxs("div",{style:{marginTop:"12px",padding:"12px 16px",background:`linear-gradient(135deg, ${n.colors.semantic.success.main}15 0%, ${n.colors.semantic.success.light}20 100%)`,color:n.colors.semantic.success.dark,borderRadius:"12px",fontSize:"0.875rem",textAlign:"center",border:`1px solid ${n.colors.semantic.success.main}25`,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontWeight:"600"},children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:n.colors.semantic.success.main,strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M5 12l5 5L20 7"})}),a("checkout.freeShippingEligible","Free shipping applied!")]})]})})]})]}),b&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",backdropFilter:"blur(5px)"},onClick:g=>{g.target===g.currentTarget&&j(!1)},children:e.jsxs("div",{style:{background:"white",borderRadius:"20px",padding:"32px",maxWidth:"400px",width:"90%",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)",border:`2px solid ${n.colors.borders.light}`},onClick:g=>g.stopPropagation(),children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"24px"},children:[e.jsx("div",{style:{width:"60px",height:"60px",background:`linear-gradient(135deg, ${n.colors.primary[500]} 0%, ${n.colors.primary[600]} 100%)`,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px",boxShadow:`0 8px 20px ${n.colors.primary[500]}40`},children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),e.jsx("circle",{cx:"12",cy:"16",r:"1"}),e.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})}),e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"700",color:n.colors.text.primary,marginBottom:"8px"},children:"Enter OTP"}),e.jsxs("p",{style:{fontSize:"0.9rem",color:n.colors.text.secondary,lineHeight:"1.5"},children:["We've sent a 6-digit verification code to your registered mobile number ending in ****",r.phone?.slice(-4)||"1234"]})]}),e.jsx("div",{style:{marginBottom:"24px"},children:e.jsx("input",{type:"text",value:_,onChange:g=>{const A=g.target.value.replace(/\D/g,"").slice(0,6);S(A)},placeholder:"Enter 6-digit OTP",style:{...re,textAlign:"center",fontSize:"1.2rem",letterSpacing:"0.1em",fontWeight:"600"},onFocus:g=>{g.target.style.borderColor=n.colors.primary[500],g.target.style.boxShadow=`inset 0 1px 3px rgba(0,0,0,0.05), 0 0 0 3px ${n.colors.primary[500]}15`},onBlur:g=>{g.target.style.borderColor=n.colors.borders.light,g.target.style.boxShadow="inset 0 1px 3px rgba(0,0,0,0.05)"},autoFocus:!0})}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("button",{onClick:()=>{j(!1),S("")},disabled:R,style:{flex:1,background:"transparent",color:n.colors.text.secondary,border:`2px solid ${n.colors.borders.light}`,borderRadius:"12px",padding:"12px 20px",fontSize:"1rem",fontWeight:"600",cursor:R?"not-allowed":"pointer",transition:n.transitions.normal,opacity:R?.5:1},onMouseEnter:g=>{R||(g.currentTarget.style.background=n.colors.neutral[50])},onMouseLeave:g=>{R||(g.currentTarget.style.background="transparent")},children:"Cancel"}),e.jsx("button",{onClick:W,disabled:R||_.length!==6,style:{flex:2,background:R||_.length!==6?n.colors.neutral[300]:`linear-gradient(135deg, ${n.colors.primary[500]} 0%, ${n.colors.primary[600]} 100%)`,color:"white",border:"none",borderRadius:"12px",padding:"12px 20px",fontSize:"1rem",fontWeight:"600",cursor:R||_.length!==6?"not-allowed":"pointer",transition:n.transitions.normal,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",boxShadow:R||_.length!==6?"none":`0 4px 15px ${n.colors.primary[500]}40`},children:R?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid rgba(255, 255, 255, 0.3)",borderTop:"2px solid white",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"Verifying..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M20 6L9 17l-5-5"})}),"Verify & Pay"]})})]}),e.jsx("div",{style:{textAlign:"center",marginTop:"16px"},children:e.jsx("button",{style:{background:"transparent",border:"none",color:n.colors.primary[500],fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",textDecoration:"underline",padding:"4px 8px"},onMouseEnter:g=>{g.currentTarget.style.color=n.colors.primary[600]},onMouseLeave:g=>{g.currentTarget.style.color=n.colors.primary[500]},children:"Didn't receive OTP? Resend"})})]})})]})};class ev{constructor(){Ve(this,"quoteClient");this.quoteClient=_e.getQuoteServiceInstance()}async submitQuoteRequest(t){return(await this.quoteClient.post("/request",t)).data}async getQuoteRequests(t){return(await this.quoteClient.get("/my-requests",{params:t})).data}async getQuotesForRequest(t){return(await this.quoteClient.get(`/request/${t}/quotes`)).data}async getQuoteRequest(t){return(await this.quoteClient.get(`/api/quotes/requests/${t}`)).data}async updateQuoteRequest(t,o){return(await this.quoteClient.put(`/api/quotes/requests/${t}`,o)).data}async submitContractorQuote(t){return(await this.quoteClient.post("/api/quotes/contractor-quotes",t)).data}async getContractorQuotes(t){return(await this.quoteClient.get("/api/quotes/contractor-quotes",{params:t})).data}async getContractorQuote(t){return(await this.quoteClient.get(`/api/quotes/contractor-quotes/${t}`)).data}async updateContractorQuote(t,o){return(await this.quoteClient.put(`/api/quotes/contractor-quotes/${t}`,o)).data}async getQuoteComparison(t){return(await this.quoteClient.get(`/api/quotes/requests/${t}/comparison`)).data}async selectQuote(t,o){return(await this.quoteClient.post(`/api/quotes/requests/${t}/select`,{quote_id:o})).data}async calculateQuoteFinancials(t){return(await this.quoteClient.post("/api/quotes/calculate-financials",t)).data}async getServiceAreas(){return(await this.quoteClient.get("/api/quotes/service-areas")).data}async checkServiceAvailability(t){return(await this.quoteClient.post("/api/quotes/check-service-area",t)).data}async getAvailableContractors(t){return(await this.quoteClient.get("/available-contractors",{params:t})).data}async checkHealth(){return(await this.quoteClient.get("/health")).data}}const Uo=new ev,tv=({contractor:r,isSelected:t,onSelect:o,onScheduleInspection:s,inspectionScheduled:i,inspectionDate:a,className:l=""})=>{const{t:c,i18n:p}=ve(),d=p.language==="ar",[m,u]=y.useState(!1),h=()=>{u(!0)},b=S=>{const R=[],I=Math.floor(S),C=S%1!==0;for(let f=0;f<I;f++)R.push(e.jsx(Ao,{size:16,fill:n.colors.semantic.warning.main,color:n.colors.semantic.warning.main},`full-${f}`));C&&R.push(e.jsx(Ao,{size:16,fill:n.colors.semantic.warning.light,color:n.colors.semantic.warning.main},"half"));const z=5-Math.ceil(S);for(let f=0;f<z;f++)R.push(e.jsx(Ao,{size:16,fill:"none",color:n.colors.borders.light},`empty-${f}`));return R},_=r.verification_level>=3?{text:c("contractors.verification.verified"),color:n.colors.semantic.success.main,bgColor:n.colors.semantic.success.light+"20"}:r.verification_level>=1?{text:c("contractors.verification.partial"),color:n.colors.semantic.warning.main,bgColor:n.colors.semantic.warning.light+"20"}:{text:c("contractors.verification.unverified"),color:n.colors.text.secondary,bgColor:n.colors.backgrounds.secondary};return e.jsxs("div",{className:`contractor-selection-card ${l}`,style:{backgroundColor:"white",borderRadius:"12px",border:t?`3px solid ${n.colors.primary[500]}`:`2px solid ${n.colors.borders.light}`,boxShadow:t?`0 8px 24px ${n.colors.primary[500]}20`:"0 4px 12px rgba(0, 0, 0, 0.08)",padding:"0.75rem",transition:"all 0.3s ease",cursor:"pointer",position:"relative",transform:t?"translateY(-2px)":"none",display:"flex",alignItems:"center",gap:"0.75rem"},onClick:()=>o(r),children:[t&&e.jsx("div",{style:{position:"absolute",top:"-3px",right:d?"auto":"-3px",left:d?"-3px":"auto",backgroundColor:n.colors.primary[500],color:"white",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold",zIndex:10},children:e.jsx(Ne,{size:16})}),e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"12px",backgroundColor:n.colors.primary[100],display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.2rem",fontWeight:"bold",color:n.colors.primary[600],flexShrink:0,overflow:"hidden"},children:!m&&r.business_name?e.jsx("img",{src:`https://ui-avatars.com/api/?name=${encodeURIComponent(r.business_name)}&size=40&background=${n.colors.primary[500].replace("#","")}&color=fff`,alt:r.business_name,style:{width:"100%",height:"100%",objectFit:"cover"},onError:h}):r.business_name?.charAt(0)?.toUpperCase()||"?"}),e.jsxs("div",{style:{flex:1,minWidth:"180px"},children:[e.jsx("h3",{style:{fontSize:"0.95rem",fontWeight:"700",color:n.colors.text.primary,margin:"0 0 0.2rem 0",lineHeight:"1.2"},children:p.language==="ar"&&r.business_name_ar?r.business_name_ar:r.business_name}),e.jsxs("div",{style:{display:"flex",alignItems:"center",color:n.colors.text.secondary,fontSize:"0.8rem",marginBottom:"0.2rem"},children:[e.jsx($t,{size:12,style:{marginRight:d?"0":"4px",marginLeft:d?"4px":"0"}}),r.city,", ",r.region]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"1px"},children:b(r.average_rating||0)}),e.jsxs("span",{style:{fontSize:"0.75rem",color:n.colors.text.secondary,fontWeight:"500"},children:[(r.average_rating||0).toFixed(1)," (",r.total_reviews||0,")"]})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",minWidth:"85px",textAlign:"center"},children:[e.jsxs("div",{style:{fontSize:"0.7rem",color:n.colors.text.secondary,marginBottom:"0.2rem"},children:[r.years_experience," ",c("contractors.years")," ",c("contractors.experience")]}),e.jsx("div",{style:{fontSize:"0.65rem",color:n.colors.text.secondary,display:"-webkit-box",WebkitLineClamp:1,WebkitBoxOrient:"vertical",overflow:"hidden"},children:r.service_areas.join(", ")})]}),i&&a&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",minWidth:"75px",textAlign:"center",backgroundColor:n.colors.semantic.success.light+"15",borderRadius:"8px",padding:"0.4rem 0.2rem",border:`1px solid ${n.colors.semantic.success.light}`},children:[e.jsx("div",{style:{fontSize:"0.65rem",color:n.colors.semantic.success.main,fontWeight:"600",marginBottom:"0.2rem",textTransform:"uppercase"},children:c("contractors.scheduled")}),e.jsx("div",{style:{fontSize:"0.7rem",color:n.colors.text.primary,fontWeight:"500",marginBottom:"0.05rem"},children:a.toLocaleDateString(p.language==="ar"?"ar-SA":"en-US",{month:"short",day:"numeric"})}),e.jsx("div",{style:{fontSize:"0.65rem",color:n.colors.text.secondary,fontWeight:"500"},children:a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),e.jsx("div",{style:{backgroundColor:_.bgColor,color:_.color,padding:"3px 6px",borderRadius:"6px",fontSize:"0.65rem",fontWeight:"600",textAlign:"center",minWidth:"55px",height:"fit-content"},children:_.text}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",minWidth:"70px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"700",color:n.colors.primary[500]},children:r.total_projects||0}),e.jsx("div",{style:{fontSize:"0.7rem",color:n.colors.text.secondary},children:c("contractors.projects")})]}),e.jsxs("button",{onClick:S=>{S.stopPropagation(),s(r)},style:{backgroundColor:i?n.colors.semantic.success.main:t?n.colors.semantic.info.main:n.colors.primary[500],color:"white",border:"none",padding:"6px 10px",borderRadius:"6px",fontSize:"0.75rem",fontWeight:"600",cursor:"pointer",transition:n.transitions.normal,display:"flex",alignItems:"center",gap:"3px",minWidth:"90px",justifyContent:"center",opacity:t?1:.8},children:[e.jsx(ht,{size:14}),c(i?"contractors.scheduled":"contractors.schedule")]})]})},rv=({serviceArea:r,onContractorsSelected:t,onNext:o,onBack:s,className:i=""})=>{const{t:a,i18n:l}=ve();l.language;const[c,p]=y.useState([]),[d,m]=y.useState([]),[u,h]=y.useState({}),[b,j]=y.useState(!0),[_,S]=y.useState(null),[R,I]=y.useState({minRating:0,maxDistance:50,verificationLevel:0}),[C,z]=y.useState(!1),[f,P]=y.useState(null),[w,O]=y.useState(""),[V,re]=y.useState(""),Q=["09:00","09:30","10:00","10:30","11:00","11:30","14:00","14:30","15:00","15:30","16:00","16:30"];y.useEffect(()=>{oe()},[r,R]);const oe=async()=>{j(!0),S(null);try{const g={region:{riyadh:"Riyadh",jeddah:"Makkah",dammam:"Eastern Province",mecca:"Makkah",medina:"Medina"}[r.toLowerCase()]||r,limit:20,sort_by:"average_rating",sort_order:"desc"};R.minRating>0&&(g.min_rating=R.minRating),R.maxDistance<200&&(g.max_distance_km=R.maxDistance),R.verificationLevel>0&&(g.verification_level=R.verificationLevel);const A=await Uo.getAvailableContractors(g);p(A.data?.contractors||[])}catch(k){console.error("Failed to load contractors:",k),S(a("contractors.loadError"))}finally{j(!1)}},K=k=>{d.find(v=>v.id===k.id)?(m(v=>v.filter(g=>g.id!==k.id)),h(v=>{const g={...v};return delete g[k.id],g})):d.length<3&&m(v=>[...v,k])},Y=k=>{console.log("Schedule inspection clicked for:",k.business_name),P(k);const v=u[k.id];if(v){O(v.toISOString().split("T")[0]);const g=v.toTimeString().slice(0,5);re(g)}else{const g=new Date;g.setDate(g.getDate()+1),O(g.toISOString().split("T")[0]),re("")}},W=()=>{if(console.log("Confirm inspection schedule:",{schedulingContractor:f?.business_name,selectedDate:w,selectedTime:V}),f&&w&&V){const k=new Date(w+"T"+V);console.log("Setting inspection schedule:",k),h(v=>({...v,[f.id]:k})),P(null),O(""),re("")}},$=()=>{d.length===3&&(t(d,u),o())},L=()=>{const k=new Date;return k.setDate(k.getDate()+1),k.toISOString().split("T")[0]};return b?e.jsx("div",{className:`contractor-selection-step ${i}`,style:{backgroundColor:"white",borderRadius:"12px",padding:"2rem",textAlign:"center"},children:e.jsx("div",{style:{color:n.colors.text.secondary},children:a("contractors.loading")})}):_?e.jsxs("div",{className:`contractor-selection-step ${i}`,style:{backgroundColor:"white",borderRadius:"12px",padding:"2rem",textAlign:"center"},children:[e.jsx("div",{style:{color:n.colors.semantic.error.main,marginBottom:"1rem"},children:_}),e.jsx("button",{onClick:oe,style:{backgroundColor:n.colors.primary[500],color:"white",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer"},children:a("common.retry")})]}):e.jsxs("div",{className:`contractor-selection-step ${i}`,style:{width:"100%",maxWidth:"none"},children:[e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"1rem 1.5rem",marginBottom:"1rem",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.06)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",backgroundColor:n.colors.primary[50],borderRadius:"8px",border:`2px solid ${n.colors.primary[100]}`},children:[e.jsx(qd,{size:20,color:n.colors.primary[500]}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"0.9rem",color:n.colors.primary[700],fontWeight:"600"},children:[d.length," / 3 ",a("contractors.selection.selected")]}),e.jsx("div",{style:{fontSize:"0.8rem",color:n.colors.primary[600]},children:a("contractors.selection.selectExactly")})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.5rem",padding:"0.75rem",backgroundColor:"#fff3cd",border:"2px solid #ffeaa7",borderRadius:"8px",marginTop:"0.75rem"},children:[e.jsx(Od,{size:20,color:"#d68910",style:{flexShrink:0,marginTop:"2px"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.9rem",color:"#856404",fontWeight:"600",marginBottom:"0.25rem"},children:a("contractors.selection.penaltyWarning.title")}),e.jsx("div",{style:{fontSize:"0.8rem",color:"#6c5500",lineHeight:"1.4"},children:a("contractors.selection.penaltyWarning.message")})]})]}),e.jsxs("div",{style:{marginTop:"0.75rem"},children:[e.jsxs("button",{onClick:()=>z(!C),style:{backgroundColor:"transparent",border:`1px solid ${n.colors.borders.light}`,padding:"8px 12px",borderRadius:"6px",display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",fontSize:"0.9rem",color:n.colors.text.secondary},children:[e.jsx(u1,{size:16}),a("contractors.filters")]}),C&&e.jsxs("div",{style:{marginTop:"0.5rem",padding:"0.5rem",backgroundColor:n.colors.backgrounds.secondary,borderRadius:"6px",display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsxs("label",{style:{fontSize:"0.8rem",fontWeight:"500",color:n.colors.text.secondary,whiteSpace:"nowrap"},children:[a("contractors.filterOptions.minRating"),":"]}),e.jsxs("select",{value:R.minRating,onChange:k=>I(v=>({...v,minRating:Number(k.target.value)})),style:{padding:"3px 6px",border:`1px solid ${n.colors.borders.light}`,borderRadius:"4px",fontSize:"0.75rem",backgroundColor:"white",color:n.colors.text.primary,minWidth:"110px"},children:[e.jsx("option",{value:0,children:a("contractors.filterOptions.anyRating")}),e.jsxs("option",{value:3,children:["3+ ",a("contractors.stars")]}),e.jsxs("option",{value:4,children:["4+ ",a("contractors.stars")]}),e.jsxs("option",{value:4.5,children:["4.5+ ",a("contractors.stars")]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsxs("label",{style:{fontSize:"0.8rem",fontWeight:"500",color:n.colors.text.secondary,whiteSpace:"nowrap"},children:[a("contractors.filterOptions.maxDistance"),":"]}),e.jsxs("select",{value:R.maxDistance,onChange:k=>I(v=>({...v,maxDistance:Number(k.target.value)})),style:{padding:"3px 6px",border:`1px solid ${n.colors.borders.light}`,borderRadius:"4px",fontSize:"0.75rem",backgroundColor:"white",color:n.colors.text.primary,minWidth:"90px"},children:[e.jsx("option",{value:25,children:"25 km"}),e.jsx("option",{value:50,children:"50 km"}),e.jsx("option",{value:100,children:"100 km"}),e.jsx("option",{value:200,children:"200+ km"})]})]})]})]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginBottom:"0.75rem"},children:c.map(k=>e.jsx(tv,{contractor:k,isSelected:d.some(v=>v.id===k.id),onSelect:K,onScheduleInspection:Y,inspectionScheduled:!!u[k.id],inspectionDate:u[k.id]},k.id))}),c.length===0&&e.jsxs("div",{style:{textAlign:"center",padding:"2rem 1rem",color:n.colors.text.secondary},children:[e.jsx(Fd,{size:48,style:{marginBottom:"1rem",opacity:.3}}),e.jsx("div",{style:{fontSize:"1.1rem",marginBottom:"0.5rem"},children:a("contractors.selection.noContractors")}),e.jsx("div",{style:{fontSize:"0.9rem"},children:a("contractors.selection.noContractorsHint")})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem 1.5rem",backgroundColor:"white",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.06)"},children:[e.jsx("button",{onClick:s,style:{backgroundColor:"transparent",border:`2px solid ${n.colors.borders.light}`,color:n.colors.text.secondary,padding:"12px 24px",borderRadius:"8px",fontSize:"16px",fontWeight:"600",cursor:"pointer"},children:a("common.back")}),e.jsx("button",{onClick:$,disabled:d.length!==3||Object.keys(u).length!==3,style:{backgroundColor:d.length===3&&Object.keys(u).length===3?n.colors.primary[500]:n.colors.borders.light,color:d.length===3&&Object.keys(u).length===3?"white":n.colors.text.secondary,border:"none",padding:"12px 32px",borderRadius:"8px",fontSize:"16px",fontWeight:"600",cursor:d.length===3&&Object.keys(u).length===3?"pointer":"not-allowed",transition:n.transitions.normal},children:a("contractors.selection.proceedToQuote")})]}),f&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"2rem",maxWidth:"500px",width:"90%",maxHeight:"80vh",overflow:"auto"},children:[e.jsxs("h3",{style:{fontSize:"1.2rem",fontWeight:"700",color:n.colors.text.primary,marginBottom:"1rem"},children:[u[f.id]?a("contractors.scheduling.reschedule","Reschedule Inspection"):a("contractors.scheduling.title")," - ",f.business_name]}),u[f.id]&&e.jsxs("div",{style:{backgroundColor:n.colors.semantic.info.light+"20",border:`1px solid ${n.colors.semantic.info.main}`,borderRadius:"8px",padding:"0.75rem",marginBottom:"1rem",fontSize:"0.9rem"},children:[e.jsxs("strong",{children:[a("contractors.scheduling.currentSchedule","Current Schedule"),":"]}),e.jsx("br",{}),u[f.id].toLocaleDateString()," at"," ",u[f.id].toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("label",{style:{display:"block",fontSize:"0.9rem",fontWeight:"600",marginBottom:"0.5rem",color:n.colors.text.secondary},children:a("contractors.scheduling.selectDate")}),e.jsx("input",{type:"date",value:w,onChange:k=>O(k.target.value),min:L(),style:{width:"100%",padding:"12px",border:`2px solid ${n.colors.borders.light}`,borderRadius:"8px",fontSize:"16px",backgroundColor:"white",color:n.colors.text.primary}})]}),e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx("label",{style:{display:"block",fontSize:"0.9rem",fontWeight:"600",marginBottom:"0.5rem",color:n.colors.text.secondary},children:a("contractors.scheduling.selectTime")}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(80px, 1fr))",gap:"0.5rem"},children:Q.map(k=>e.jsx("button",{onClick:()=>re(k),style:{padding:"8px",border:`2px solid ${V===k?n.colors.primary[500]:n.colors.borders.light}`,backgroundColor:V===k?n.colors.primary[50]:"white",color:V===k?n.colors.primary[600]:n.colors.text.secondary,borderRadius:"6px",fontSize:"0.8rem",fontWeight:"600",cursor:"pointer",transition:n.transitions.normal},children:k},k))})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>P(null),style:{backgroundColor:"transparent",border:`2px solid ${n.colors.borders.light}`,color:n.colors.text.secondary,padding:"10px 20px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:a("common.cancel")}),e.jsxs("button",{onClick:W,disabled:!w||!V,style:{backgroundColor:w&&V?n.colors.primary[500]:n.colors.borders.light,color:w&&V?"white":n.colors.text.secondary,border:"none",padding:"10px 20px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:w&&V?"pointer":"not-allowed",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(ht,{size:16}),a("contractors.scheduling.confirm")]})]})]})})]})},ov=({user:r,initialData:t,selectedContractors:o=[],inspectionSchedules:s={},showContractorSummary:i=!0,onSuccess:a,onCancel:l,className:c=""})=>{const{t:p,i18n:d}=ve(),m=d.language==="ar",[u,h]=y.useState(window.innerWidth<=768);y.useEffect(()=>{const W=()=>{h(window.innerWidth<=768)};return window.addEventListener("resize",W),()=>window.removeEventListener("resize",W)},[]);const b=[{value:"riyadh",label:p("quotes.form.serviceArea.options.riyadh","Riyadh")},{value:"jeddah",label:p("quotes.form.serviceArea.options.jeddah","Jeddah")},{value:"dammam",label:p("quotes.form.serviceArea.options.dammam","Dammam")},{value:"mecca",label:p("quotes.form.serviceArea.options.mecca","Mecca")},{value:"medina",label:p("quotes.form.serviceArea.options.medina","Medina")}],j=[{value:"villa",label:p("quotes.form.propertyDetails.propertyTypes.villa","Villa")},{value:"apartment",label:p("quotes.form.propertyDetails.propertyTypes.apartment","Apartment")},{value:"townhouse",label:p("quotes.form.propertyDetails.propertyTypes.townhouse","Townhouse")},{value:"commercial",label:p("quotes.form.propertyDetails.propertyTypes.commercial","Commercial")}],_=[{value:"flat",label:p("quotes.form.propertyDetails.roofTypes.flat","Flat Roof")},{value:"sloped",label:p("quotes.form.propertyDetails.roofTypes.sloped","Sloped Roof")},{value:"mixed",label:p("quotes.form.propertyDetails.roofTypes.mixed","Mixed")}],S=[{value:"south",label:p("quotes.form.propertyDetails.roofOrientations.south","South")},{value:"southwest",label:p("quotes.form.propertyDetails.roofOrientations.southwest","Southwest")},{value:"southeast",label:p("quotes.form.propertyDetails.roofOrientations.southeast","Southeast")},{value:"east",label:p("quotes.form.propertyDetails.roofOrientations.east","East")},{value:"west",label:p("quotes.form.propertyDetails.roofOrientations.west","West")},{value:"mixed",label:p("quotes.form.propertyDetails.roofOrientations.mixed","Multiple Directions")}],[R,I]=y.useState({system_size_kwp:t?.system_size_kwp||6,location_address:t?.location_address||(r.street_address?`${r.street_address}, ${r.district||""}, ${r.city||""}, ${r.region||""}`.replace(/,\s*,/g,",").replace(/^,|,$/g,""):""),service_area:t?.service_area||r.region?.toLowerCase()||"riyadh",contact_phone:t?.contact_phone||r.phone||"",notes:t?.notes||"",property_details:{property_type:t?.property_details?.property_type||r.property_type||"villa",roof_type:t?.property_details?.roof_type||"flat",roof_orientation:t?.property_details?.roof_orientation||"south",shading_issues:t?.property_details?.shading_issues||!1}}),[C,z]=y.useState({}),[f,P]=y.useState(!1),[w,O]=y.useState("idle"),V=()=>{const W={};return(R.system_size_kwp<1||R.system_size_kwp>50)&&(W.system_size_kwp=p("quotes.form.errors.systemSizeRange")),R.location_address.trim()||(W.location_address=p("quotes.form.errors.locationRequired")),R.service_area||(W.service_area=p("quotes.form.errors.serviceAreaRequired")),R.contact_phone.trim()?R.contact_phone.replace(/[\s-]/g,"").length>13?W.contact_phone=p("quotes.form.errors.phoneTooLong"):/^(\+966|0)[5-9]\d{8}$/.test(R.contact_phone.replace(/\s/g,""))||(W.contact_phone=p("quotes.form.errors.phoneInvalid")):W.contact_phone=p("quotes.form.errors.phoneRequired"),z(W),Object.keys(W).length===0},re=async W=>{if(W.preventDefault(),!!V()){P(!0),O("idle");try{const $={system_size_kwp:R.system_size_kwp,location_address:R.location_address,service_area:R.service_area,contact_phone:R.contact_phone,notes:R.notes||void 0,property_details:R.property_details,selected_contractors:o.map(k=>k.id),inspection_schedules:s},L=await Uo.submitQuoteRequest($);if(L.success)O("success"),a&&L.data?.id&&a(L.data.id);else throw new Error(L.error||"Failed to submit quote request")}catch($){console.error("Quote request submission error:",$),O("error");let L=p("quotes.form.errors.submitFailed");$?.response?.data?.message?L=$.response.data.message:$?.message&&typeof $.message=="string"?L=$.message:$?.error&&typeof $.error=="string"&&(L=$.error),z({submit:L})}finally{P(!1)}}},Q=(W,$)=>{I(L=>({...L,[W]:$})),C[W]&&z(L=>{const k={...L};return delete k[W],k})},oe=(W,$)=>{I(L=>({...L,property_details:{...L.property_details,[W]:$}}))},K={width:"100%",padding:"12px 16px",border:`2px solid ${n.colors.borders.light}`,borderRadius:"8px",fontSize:"16px",fontFamily:n.typography.fonts.primary,backgroundColor:"#ffffff",color:n.colors.text.primary,outline:"none",transition:n.transitions.normal,direction:m?"rtl":"ltr"},Y={display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"600",color:n.colors.text.secondary,textAlign:m?"right":"left"};return w==="success"?e.jsx("div",{className:`quote-request-success ${c}`,children:e.jsxs("div",{style:{background:"linear-gradient(135deg, #f0fff4 0%, #e6fffa 100%)",border:`2px solid ${n.colors.semantic.success.main}`,borderRadius:"12px",padding:"1rem",textAlign:"center",maxWidth:"500px",margin:"1rem auto"},children:[e.jsx("div",{style:{width:"64px",height:"64px",backgroundColor:n.colors.semantic.success.main,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem",color:"white",fontSize:"24px"},children:"✓"}),e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"700",color:n.colors.text.primary,marginBottom:"1rem"},children:p("quotes.form.success.title")}),e.jsx("p",{style:{color:n.colors.text.secondary,marginBottom:"1rem",lineHeight:"1.6"},children:p("quotes.form.success.message")}),l&&e.jsx("button",{onClick:l,style:{backgroundColor:n.colors.primary[500],color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:n.transitions.normal},children:p("common.viewQuotes")})]})}):e.jsx("div",{className:`quote-request-form ${c}`,children:e.jsxs("div",{style:{width:"100%",maxWidth:"none",backgroundColor:"white",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.06)",overflow:"hidden"},children:[e.jsxs("div",{style:{background:n.colors.gradients.primary,color:"white",padding:"1rem",textAlign:"center"},children:[e.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:"700",marginBottom:"0.5rem"},children:p("quotes.form.title")}),e.jsx("p",{style:{fontSize:"1rem",opacity:.9},children:p("quotes.form.subtitle")})]}),e.jsxs("form",{onSubmit:re,style:{padding:"1rem"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:u?"1fr":"1fr 1fr",gap:u?"1rem":"1.5rem",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{backgroundColor:"#fff",border:`2px solid ${n.colors.primary[100]}`,borderRadius:"8px",padding:"1.25rem",marginBottom:"1.25rem"},children:[e.jsxs("h3",{style:{fontSize:"1rem",fontWeight:"600",color:n.colors.primary[600],marginBottom:"1rem",display:"flex",alignItems:"center"},children:[e.jsx(Gr,{size:16,style:{marginRight:m?"0":"6px",marginLeft:m?"6px":"0"}}),p("quotes.form.sections.systemAndContact")]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"0.75rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{...Y,marginBottom:"4px",fontSize:"13px"},children:p("quotes.form.systemSize.label")}),e.jsx("input",{type:"number",min:"1",max:"50",step:"0.5",value:R.system_size_kwp,onChange:W=>Q("system_size_kwp",parseFloat(W.target.value)||0),style:{...K,padding:"8px 12px"},placeholder:p("quotes.form.systemSize.placeholder")}),C.system_size_kwp&&e.jsx("p",{style:{color:n.colors.semantic.error.main,fontSize:"11px",marginTop:"2px"},children:C.system_size_kwp})]}),e.jsxs("div",{children:[e.jsx("label",{style:{...Y,marginBottom:"4px",fontSize:"13px"},children:p("quotes.form.serviceArea.label")}),e.jsxs("select",{value:R.service_area,onChange:W=>Q("service_area",W.target.value),style:{...K,padding:"8px 12px"},children:[e.jsx("option",{value:"",children:p("quotes.form.serviceArea.placeholder")}),b.map(W=>e.jsx("option",{value:W.value,children:W.label},W.value))]}),C.service_area&&e.jsx("p",{style:{color:n.colors.semantic.error.main,fontSize:"11px",marginTop:"2px"},children:C.service_area})]})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{...Y,marginBottom:"4px",fontSize:"13px",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(gs,{size:12}),p("quotes.form.phone.label")]}),e.jsx("input",{type:"tel",value:R.contact_phone,onChange:W=>Q("contact_phone",W.target.value),style:{...K,padding:"8px 12px"},placeholder:p("quotes.form.phone.placeholder"),maxLength:13}),C.contact_phone&&e.jsx("p",{style:{color:n.colors.semantic.error.main,fontSize:"11px",marginTop:"2px"},children:C.contact_phone})]})]}),e.jsxs("div",{style:{backgroundColor:"#fff",border:`2px solid ${n.colors.primary[100]}`,borderRadius:"8px",padding:"1.25rem"},children:[e.jsxs("h3",{style:{fontSize:"1rem",fontWeight:"600",color:n.colors.primary[600],marginBottom:"1rem",display:"flex",alignItems:"center"},children:[e.jsx($t,{size:16,style:{marginRight:m?"0":"6px",marginLeft:m?"6px":"0"}}),p("quotes.form.sections.location")]}),e.jsx("label",{style:{...Y,marginBottom:"4px",fontSize:"13px"},children:p("quotes.form.location.label")}),e.jsx("textarea",{value:R.location_address,onChange:W=>Q("location_address",W.target.value),style:{...K,minHeight:"70px",padding:"8px 12px",resize:"none",...C.location_address?{borderColor:n.colors.semantic.error.main,backgroundColor:"#fff5f5"}:{}},placeholder:p("quotes.form.location.placeholder"),rows:3}),C.location_address&&e.jsx("p",{style:{color:n.colors.semantic.error.main,fontSize:"11px",marginTop:"2px"},children:C.location_address})]})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{backgroundColor:"#fff",border:`2px solid ${n.colors.primary[100]}`,borderRadius:"8px",padding:"1.25rem",marginBottom:"1.25rem"},children:[e.jsxs("h3",{style:{fontSize:"1rem",fontWeight:"600",color:n.colors.primary[600],marginBottom:"1rem",display:"flex",alignItems:"center"},children:[e.jsx(Gr,{size:16,style:{marginRight:m?"0":"6px",marginLeft:m?"6px":"0"}}),p("quotes.form.sections.propertyDetails")]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{...Y,marginBottom:"4px",fontSize:"13px"},children:p("quotes.form.propertyDetails.propertyType")}),e.jsx("select",{value:R.property_details.property_type,onChange:W=>oe("property_type",W.target.value),style:{...K,padding:"8px 12px"},children:j.map(W=>e.jsx("option",{value:W.value,children:W.label},W.value))})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"0.75rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{...Y,marginBottom:"4px",fontSize:"13px"},children:p("quotes.form.propertyDetails.roofType")}),e.jsx("select",{value:R.property_details.roof_type,onChange:W=>oe("roof_type",W.target.value),style:{...K,padding:"8px 12px"},children:_.map(W=>e.jsx("option",{value:W.value,children:W.label},W.value))})]}),e.jsxs("div",{children:[e.jsx("label",{style:{...Y,marginBottom:"4px",fontSize:"13px"},children:p("quotes.form.propertyDetails.roofOrientation")}),e.jsx("select",{value:R.property_details.roof_orientation,onChange:W=>oe("roof_orientation",W.target.value),style:{...K,padding:"8px 12px"},children:S.map(W=>e.jsx("option",{value:W.value,children:W.label},W.value))})]})]}),e.jsx("div",{style:{backgroundColor:"#f8f9fa",padding:"0.75rem",borderRadius:"6px",border:`1px solid ${n.colors.borders.light}`},children:e.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer",fontSize:"13px",fontWeight:"500",color:n.colors.text.secondary},children:[e.jsx("input",{type:"checkbox",checked:R.property_details.shading_issues,onChange:W=>oe("shading_issues",W.target.checked),style:{marginRight:m?"0":"8px",marginLeft:m?"8px":"0",transform:"scale(1.1)"}}),p("quotes.form.propertyDetails.shadingIssues")]})})]}),e.jsxs("div",{style:{backgroundColor:"#fff",border:`2px solid ${n.colors.primary[100]}`,borderRadius:"8px",padding:"1.25rem"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:n.colors.primary[600],marginBottom:"1rem"},children:p("quotes.form.sections.notesOptional")}),e.jsx("textarea",{value:R.notes,onChange:W=>Q("notes",W.target.value),style:{...K,minHeight:"70px",padding:"8px 12px",resize:"none"},placeholder:p("quotes.form.notes.placeholder"),rows:3})]})]})]}),C.submit&&e.jsx("div",{style:{backgroundColor:"#fef2f2",border:`2px solid ${n.colors.semantic.error.main}`,borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:e.jsx("p",{style:{color:n.colors.semantic.error.main,margin:0},children:C.submit})}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"space-between",alignItems:"center",paddingTop:"1rem",borderTop:`1px solid ${n.colors.borders.light}`,marginTop:"0.5rem"},children:[l&&e.jsx("button",{type:"button",onClick:l,disabled:f,style:{backgroundColor:"transparent",color:n.colors.text.secondary,border:`2px solid ${n.colors.borders.light}`,padding:"12px 24px",borderRadius:"8px",fontSize:"16px",fontWeight:"600",cursor:f?"not-allowed":"pointer",opacity:f?.6:1,transition:n.transitions.normal},children:p("common.cancel")}),e.jsx("button",{type:"submit",disabled:f,style:{backgroundColor:n.colors.primary[500],color:"white",border:"none",padding:"12px 32px",borderRadius:"8px",fontSize:"16px",fontWeight:"600",cursor:f?"not-allowed":"pointer",opacity:f?.6:1,transition:n.transitions.normal,minWidth:"140px"},children:p(f?"common.submitting":"quotes.form.submit")})]})]})]})})},sv=({user:r,onSuccess:t,onCancel:o,className:s=""})=>{const{t:i,i18n:a}=ve();a.language;const[l,c]=y.useState("basic-info"),[p,d]=y.useState(null),[m,u]=y.useState([]),[h,b]=y.useState({}),j=[{key:"basic-info",icon:Le,label:i("quotes.steps.basicInfo")},{key:"contractor-selection",icon:qd,label:i("quotes.steps.contractorSelection")},{key:"final-form",icon:Ne,label:i("quotes.steps.finalSubmission")}],_=j.findIndex(P=>P.key===l),S=P=>{d(P),c("contractor-selection")},R=(P,w)=>{u(P),b(w),c("final-form")},I=P=>{t&&t(P)},C=()=>{switch(l){case"contractor-selection":c("basic-info");break;case"final-form":c("contractor-selection");break}},z=()=>e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",padding:"1.5rem",backgroundColor:"white",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.06)"},children:j.map((P,w)=>{const O=P.icon,V=w<_,re=w===_;return e.jsxs(Me.Fragment,{children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",flex:1},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",backgroundColor:V?n.colors.semantic.success.main:re?n.colors.primary[500]:n.colors.backgrounds.secondary,color:V||re?"white":n.colors.text.secondary,display:"flex",alignItems:"center",justifyContent:"center",transition:n.transitions.normal},children:V?e.jsx(Ne,{size:24}):e.jsx(O,{size:24})}),e.jsx("div",{style:{fontSize:"0.8rem",fontWeight:"600",color:V||re?n.colors.text.primary:n.colors.text.secondary,textAlign:"center"},children:P.label})]}),w<j.length-1&&e.jsx("div",{style:{height:"2px",flex:1,backgroundColor:V?n.colors.semantic.success.main:n.colors.borders.light,margin:"0 1rem",marginTop:"-24px"}})]},P.key)})}),f=()=>{switch(l){case"basic-info":return e.jsxs("div",{children:[e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.06)"},children:[e.jsx("h3",{style:{fontSize:"1.2rem",fontWeight:"700",color:n.colors.text.primary,marginBottom:"0.5rem"},children:i("quotes.steps.basicInfo")}),e.jsx("p",{style:{color:n.colors.text.secondary,fontSize:"0.9rem"},children:i("quotes.steps.basicInfoDesc")})]}),e.jsx(nv,{user:r,initialData:p,onComplete:S,onCancel:o})]});case"contractor-selection":return e.jsxs("div",{children:[e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.06)"},children:[e.jsx("h3",{style:{fontSize:"1.2rem",fontWeight:"700",color:n.colors.text.primary,marginBottom:"0.5rem"},children:i("quotes.steps.contractorSelection")}),e.jsx("p",{style:{color:n.colors.text.secondary,fontSize:"0.9rem"},children:i("quotes.steps.contractorSelectionDesc")})]}),e.jsx(rv,{serviceArea:p?.service_area||r.region||"riyadh",onContractorsSelected:R,onNext:()=>c("final-form"),onBack:C})]});case"final-form":return e.jsxs("div",{children:[e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.06)"},children:[e.jsx("h3",{style:{fontSize:"1.2rem",fontWeight:"700",color:n.colors.text.primary,marginBottom:"0.5rem"},children:i("quotes.steps.finalSubmission")}),e.jsx("p",{style:{color:n.colors.text.secondary,fontSize:"0.9rem",marginBottom:"1rem"},children:i("quotes.steps.finalSubmissionDesc")}),e.jsxs("div",{style:{backgroundColor:n.colors.primary[50],border:`2px solid ${n.colors.primary[100]}`,borderRadius:"8px",padding:"1rem"},children:[e.jsxs("h4",{style:{fontSize:"0.9rem",fontWeight:"600",color:n.colors.primary[700],marginBottom:"0.5rem"},children:[i("contractors.selection.selected")," (",m.length,")"]}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:m.map(P=>e.jsx("div",{style:{backgroundColor:"white",padding:"0.5rem 0.75rem",borderRadius:"6px",fontSize:"0.8rem",fontWeight:"500",color:n.colors.text.primary,border:`1px solid ${n.colors.primary[200]}`},children:P.business_name},P.id))})]})]}),e.jsx(ov,{user:r,initialData:p,selectedContractors:m,inspectionSchedules:h,onSuccess:I,onCancel:C,showContractorSummary:!1})]});default:return null}};return e.jsxs("div",{className:`multi-step-quote-request ${s}`,children:[z(),f()]})},nv=({user:r,initialData:t,onComplete:o,onCancel:s})=>{const{t:i,i18n:a}=ve(),l=a.language==="ar",[c,p]=y.useState({system_size_kwp:t?.system_size_kwp||6,service_area:t?.service_area||r.region?.toLowerCase()||"riyadh",location_address:t?.location_address||(r.street_address?`${r.street_address}, ${r.district||""}, ${r.city||""}, ${r.region||""}`.replace(/,\\s*,/g,",").replace(/^,|,$/g,""):""),...t}),[d,m]=y.useState({}),u=[{value:"riyadh",label:i("quotes.form.serviceArea.options.riyadh","Riyadh")},{value:"jeddah",label:i("quotes.form.serviceArea.options.jeddah","Jeddah")},{value:"dammam",label:i("quotes.form.serviceArea.options.dammam","Dammam")},{value:"mecca",label:i("quotes.form.serviceArea.options.mecca","Mecca")},{value:"medina",label:i("quotes.form.serviceArea.options.medina","Medina")}],h=()=>{const S={};return(!c.system_size_kwp||c.system_size_kwp<1||c.system_size_kwp>50)&&(S.system_size_kwp=i("quotes.form.errors.systemSizeRange")),c.service_area||(S.service_area=i("quotes.form.errors.serviceAreaRequired")),c.location_address?.trim()||(S.location_address=i("quotes.form.errors.locationRequired")),m(S),Object.keys(S).length===0},b=S=>{S.preventDefault(),h()&&o(c)},j={width:"100%",padding:"12px 16px",border:`2px solid ${n.colors.borders.light}`,borderRadius:"8px",fontSize:"16px",fontFamily:n.typography.fonts.primary,backgroundColor:"#ffffff",color:n.colors.text.primary,outline:"none",transition:n.transitions.normal,direction:l?"rtl":"ltr"},_={display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"600",color:n.colors.text.secondary,textAlign:l?"right":"left"};return e.jsxs("form",{onSubmit:b,style:{backgroundColor:"white",borderRadius:"12px",padding:"2rem",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.06)"},children:[e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("label",{style:{..._},children:i("quotes.form.systemSize.label")}),e.jsx("input",{type:"number",min:"1",max:"50",step:"0.5",value:c.system_size_kwp||"",onChange:S=>p(R=>({...R,system_size_kwp:parseFloat(S.target.value)||0})),style:d.system_size_kwp?{...j,borderColor:n.colors.semantic.error.main}:j,placeholder:i("quotes.form.systemSize.placeholder")}),d.system_size_kwp&&e.jsx("p",{style:{color:n.colors.semantic.error.main,fontSize:"12px",marginTop:"4px"},children:d.system_size_kwp})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("label",{style:{..._},children:i("quotes.form.serviceArea.label")}),e.jsxs("select",{value:c.service_area||"",onChange:S=>p(R=>({...R,service_area:S.target.value})),style:d.service_area?{...j,borderColor:n.colors.semantic.error.main}:j,children:[e.jsx("option",{value:"",children:i("quotes.form.serviceArea.placeholder")}),u.map(S=>e.jsx("option",{value:S.value,children:S.label},S.value))]}),d.service_area&&e.jsx("p",{style:{color:n.colors.semantic.error.main,fontSize:"12px",marginTop:"4px"},children:d.service_area})]}),e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx("label",{style:{..._},children:i("quotes.form.location.label")}),e.jsx("textarea",{value:c.location_address||"",onChange:S=>p(R=>({...R,location_address:S.target.value})),style:{...j,minHeight:"80px",resize:"vertical",...d.location_address?{borderColor:n.colors.semantic.error.main}:{}},placeholder:i("quotes.form.location.placeholder"),rows:3}),d.location_address&&e.jsx("p",{style:{color:n.colors.semantic.error.main,fontSize:"12px",marginTop:"4px"},children:d.location_address})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",borderTop:`1px solid ${n.colors.borders.light}`,paddingTop:"1.5rem"},children:[s&&e.jsx("button",{type:"button",onClick:s,style:{backgroundColor:"transparent",border:`2px solid ${n.colors.borders.light}`,color:n.colors.text.secondary,padding:"12px 24px",borderRadius:"8px",fontSize:"16px",fontWeight:"600",cursor:"pointer"},children:i("common.cancel")}),e.jsx("button",{type:"submit",style:{backgroundColor:n.colors.primary[500],color:"white",border:"none",padding:"12px 32px",borderRadius:"8px",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:n.transitions.normal,marginLeft:"auto"},children:i("contractors.selection.title")})]})]})},iv=({isOpen:r,requestId:t,onClose:o,onSuccess:s})=>{const{t:i,i18n:a}=ve(),l=a.language==="ar",[c,p]=y.useState([]),[d,m]=y.useState(null),[u,h]=y.useState(!1),[b,j]=y.useState(!1),[_,S]=y.useState(null),[R,I]=y.useState("comparison"),[C,z]=y.useState(null);y.useEffect(()=>{r&&t&&f()},[r,t]);const f=async()=>{h(!0),S(null);try{const Y=await(await fetch(`${Ce.quoteServiceUrl}/user/request/${t}/approved-quotations`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("rabhan_access_token")}`}})).json();if(Y.success)p(Y.data.quotations||[]);else throw new Error(Y.message||"Failed to load quotations")}catch(K){console.error("Failed to load quotations:",K),S(K.message||"Failed to load quotations")}finally{h(!1)}},P=async K=>{j(!0),S(null);try{const W=await(await fetch(`${Ce.quoteServiceUrl}/user/select/${K}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("rabhan_access_token")}`},body:JSON.stringify({selection_reason:"Selected after comparing all available quotations"})})).json();if(W.success)s(),o();else throw new Error(W.message||"Failed to select quotation")}catch(Y){console.error("Failed to select quotation:",Y),S(Y.message||"Failed to select quotation")}finally{j(!1)}},w=K=>new Intl.NumberFormat(l?"ar-SA":"en-US",{style:"currency",currency:"SAR",minimumFractionDigits:2}).format(K),O=K=>new Date(K).toLocaleDateString(l?"ar-SA":"en-US",{year:"numeric",month:"long",day:"numeric"}),V=()=>c.length===0?null:c.reduce((K,Y)=>Y.totals.total_user_price<K.totals.total_user_price?Y:K),re=()=>{if(c.length===0)return null;const K=[...c].sort((W,$)=>W.totals.total_user_price-$.totals.total_user_price),Y=[...c].sort((W,$)=>new Date(W.installation_deadline).getTime()-new Date($.installation_deadline).getTime());return K.find(W=>Y.slice(0,2).includes(W))||K[0]},Q=V(),oe=re();return r?e.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem",direction:l?"rtl":"ltr"},children:[e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"20px",width:"98%",maxWidth:R==="details"?"1000px":"1400px",maxHeight:"95vh",overflow:"hidden",boxShadow:"0 25px 80px rgba(0, 0, 0, 0.3)"},children:[e.jsxs("div",{style:{background:`linear-gradient(135deg, ${n.colors.primary[500]}, ${n.colors.primary[600]})`,color:"white",padding:"2rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"2rem",fontWeight:"700",marginBottom:"0.5rem"},children:i("userApp.quotes.compareQuotations")}),e.jsxs("p",{style:{fontSize:"1rem",opacity:.9},children:[c.length," ",i("userApp.quotes.quotationsAvailable")]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",backgroundColor:"rgba(255,255,255,0.2)",borderRadius:"12px",padding:"4px"},children:[e.jsxs("button",{onClick:()=>I("comparison"),style:{padding:"0.5rem 1rem",borderRadius:"8px",border:"none",backgroundColor:R==="comparison"?"rgba(255,255,255,0.3)":"transparent",color:"white",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer"},children:[e.jsx(jn,{size:16,style:{marginRight:"0.5rem",display:"inline"}}),i("userApp.quotes.comparison")]}),e.jsxs("button",{onClick:()=>I("details"),style:{padding:"0.5rem 1rem",borderRadius:"8px",border:"none",backgroundColor:R==="details"?"rgba(255,255,255,0.3)":"transparent",color:"white",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer"},children:[e.jsx(Wd,{size:16,style:{marginRight:"0.5rem",display:"inline"}}),i("userApp.quotes.details")]})]}),e.jsx("button",{onClick:o,style:{backgroundColor:"rgba(255,255,255,0.2)",border:"none",color:"white",borderRadius:"10px",padding:"0.75rem",cursor:"pointer",transition:"background-color 0.2s"},children:e.jsx(qo,{size:24})})]})]}),e.jsx("div",{style:{maxHeight:"calc(95vh - 180px)",overflowY:"auto",padding:R==="details"?"1.5rem":"2rem"},children:u?e.jsxs("div",{style:{textAlign:"center",padding:"4rem",color:n.colors.text.secondary},children:[e.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"⏳"}),e.jsx("p",{style:{fontSize:"1.125rem",fontWeight:"600"},children:i("common.loading")})]}):_?e.jsxs("div",{style:{textAlign:"center",padding:"4rem",backgroundColor:n.colors.semantic.error.light,borderRadius:"12px",border:`2px solid ${n.colors.semantic.error.main}`},children:[e.jsx(Lt,{size:48,style:{color:n.colors.semantic.error.main,marginBottom:"1rem"}}),e.jsx("p",{style:{color:n.colors.semantic.error.dark,marginBottom:"1rem",fontSize:"1.125rem"},children:_}),e.jsx("button",{onClick:f,style:{backgroundColor:n.colors.semantic.error.main,color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"8px",fontSize:"1rem",fontWeight:"600",cursor:"pointer"},children:i("common.retry")})]}):c.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"4rem",color:n.colors.text.secondary},children:[e.jsx(jn,{size:64,style:{marginBottom:"1.5rem",opacity:.3}}),e.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:"600",marginBottom:"1rem"},children:i("userApp.quotes.noQuotationsAvailable")}),e.jsx("p",{style:{fontSize:"1rem"},children:i("userApp.quotes.waitForContractorQuotes")})]}):R==="comparison"?e.jsxs("div",{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[e.jsxs("div",{style:{background:`linear-gradient(135deg, ${n.colors.semantic.success.light}, ${n.colors.semantic.success.main})`,borderRadius:"16px",padding:"1.5rem",color:"white"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"0.5rem"},children:[e.jsx(si,{size:24,style:{marginRight:"0.5rem"}}),e.jsx("span",{style:{fontSize:"1rem",fontWeight:"600"},children:i("userApp.quotes.bestValue")})]}),e.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700"},children:Q?w(Q.totals.total_user_price):"--"}),e.jsx("div",{style:{fontSize:"0.875rem",opacity:.9},children:Q?.contractor_company})]}),e.jsxs("div",{style:{background:`linear-gradient(135deg, ${n.colors.primary[400]}, ${n.colors.primary[600]})`,borderRadius:"16px",padding:"1.5rem",color:"white"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"0.5rem"},children:[e.jsx(Qa,{size:24,style:{marginRight:"0.5rem"}}),e.jsx("span",{style:{fontSize:"1rem",fontWeight:"600"},children:i("userApp.quotes.recommended")})]}),e.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700"},children:oe?w(oe.totals.total_user_price):"--"}),e.jsx("div",{style:{fontSize:"0.875rem",opacity:.9},children:oe?.contractor_company})]}),e.jsxs("div",{style:{background:`linear-gradient(135deg, ${n.colors.semantic.info.light}, ${n.colors.semantic.info.main})`,borderRadius:"16px",padding:"1.5rem",color:"white"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"0.5rem"},children:[e.jsx(ht,{size:24,style:{marginRight:"0.5rem"}}),e.jsx("span",{style:{fontSize:"1rem",fontWeight:"600"},children:i("userApp.quotes.fastestInstallation")})]}),e.jsxs("div",{style:{fontSize:"1.75rem",fontWeight:"700"},children:[c.length>0?Math.min(...c.map(K=>Math.ceil((new Date(K.installation_deadline).getTime()-new Date().getTime())/(1e3*60*60*24)))):"--"," ",i("userApp.quotes.days")]})]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:c.length===1?"1fr":c.length===2?"1fr 1fr":"repeat(auto-fit, minmax(400px, 1fr))",gap:"2rem"},children:c.map(K=>e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"20px",border:`3px solid ${K.id===Q?.id?n.colors.semantic.success.main:K.id===oe?.id?n.colors.primary[500]:n.colors.borders.light}`,padding:"2rem",position:"relative",boxShadow:K.id===Q?.id||K.id===oe?.id?"0 8px 40px rgba(62, 178, 177, 0.15)":"0 4px 20px rgba(0, 0, 0, 0.1)",transition:"all 0.3s ease",cursor:"pointer"},onClick:()=>{z(K),I("details")},children:[K.id===Q?.id&&e.jsxs("div",{style:{position:"absolute",top:"-12px",left:"1.5rem",backgroundColor:n.colors.semantic.success.main,color:"white",padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.875rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(Ao,{size:16}),i("userApp.quotes.bestValue")]}),K.id===oe?.id&&K.id!==Q?.id&&e.jsxs("div",{style:{position:"absolute",top:"-12px",left:"1.5rem",backgroundColor:n.colors.primary[500],color:"white",padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.875rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(Qa,{size:16}),i("userApp.quotes.recommended")]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("h3",{style:{fontSize:"1.5rem",fontWeight:"700",color:n.colors.text.primary,marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(oi,{size:24,color:n.colors.primary[500]}),K.contractor_company]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem",fontSize:"0.875rem",color:n.colors.text.secondary},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx($d,{size:14}),K.contractor_email]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(gs,{size:14}),K.contractor_phone]})]})]}),e.jsx("div",{style:{backgroundColor:n.colors.backgrounds.secondary,borderRadius:"12px",padding:"1rem",marginBottom:"1.5rem"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem",textAlign:"center"},children:[e.jsxs("div",{children:[e.jsx(gt,{size:20,color:n.colors.semantic.warning.main,style:{marginBottom:"0.25rem"}}),e.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700"},children:K.solar_system_capacity_kwp}),e.jsx("div",{style:{fontSize:"0.75rem",color:n.colors.text.secondary},children:"kWp"})]}),e.jsxs("div",{children:[e.jsx(Nd,{size:20,color:n.colors.semantic.success.main,style:{marginBottom:"0.25rem"}}),e.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700"},children:K.storage_capacity_kwh}),e.jsx("div",{style:{fontSize:"0.75rem",color:n.colors.text.secondary},children:"kWh"})]}),e.jsxs("div",{children:[e.jsx(ht,{size:20,color:n.colors.primary[500],style:{marginBottom:"0.25rem"}}),e.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700"},children:Math.ceil((new Date(K.installation_deadline).getTime()-new Date().getTime())/(1e3*60*60*24))}),e.jsx("div",{style:{fontSize:"0.75rem",color:n.colors.text.secondary},children:"days"})]})]})}),e.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[e.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:n.colors.primary[600],marginBottom:"0.25rem"},children:w(K.totals.total_user_price)}),e.jsx("div",{style:{fontSize:"0.875rem",color:n.colors.text.secondary},children:i("userApp.quotes.totalPrice")}),e.jsxs("div",{style:{fontSize:"0.75rem",color:n.colors.text.secondary,marginTop:"0.25rem"},children:[K.line_items.length," ",i("userApp.quotes.lineItems")]})]}),e.jsxs("div",{style:{fontSize:"0.875rem",color:n.colors.text.secondary,textAlign:"center",marginBottom:"1.5rem",padding:"0.5rem",backgroundColor:n.colors.backgrounds.secondary,borderRadius:"8px"},children:["💳 ",i("userApp.quotes.paymentTerms"),": ",K.payment_terms.replace("_"," ").toUpperCase()]}),e.jsx("button",{onClick:Y=>{Y.stopPropagation(),m(K.id),P(K.id)},disabled:b,style:{width:"100%",backgroundColor:n.colors.primary[500],color:"white",border:"none",padding:"1rem",borderRadius:"12px",fontSize:"1rem",fontWeight:"600",cursor:b?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",opacity:b&&d!==K.id?.5:1,transition:"all 0.2s ease"},children:b&&d===K.id?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid transparent",borderTop:"2px solid white",borderRadius:"50%",animation:"spin 1s linear infinite"}}),i("common.selecting")]}):e.jsxs(e.Fragment,{children:[e.jsx(Ne,{size:20}),i("userApp.quotes.selectThisQuote")]})})]},K.id))})]}):C&&e.jsxs("div",{style:{maxWidth:"900px",margin:"0 auto"},children:[e.jsxs("button",{onClick:()=>I("comparison"),style:{backgroundColor:n.colors.backgrounds.secondary,border:"none",padding:"0.5rem 1rem",borderRadius:"8px",marginBottom:"1.5rem",cursor:"pointer",fontSize:"0.875rem"},children:["← ",i("common.backToComparison")]}),e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"16px",border:`2px solid ${n.colors.primary[200]}`,overflow:"hidden"},children:[e.jsxs("div",{style:{backgroundColor:n.colors.primary[500],color:"white",padding:"1.5rem",textAlign:"center"},children:[e.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:"700",marginBottom:"0.5rem"},children:C.contractor_company}),e.jsx("p",{style:{opacity:.9},children:i("userApp.quotes.detailedQuotation")})]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:n.colors.backgrounds.secondary},children:[e.jsx("th",{style:{padding:"1rem 0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:i("userApp.quotes.item")}),e.jsx("th",{style:{padding:"1rem 0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:i("userApp.quotes.description")}),e.jsx("th",{style:{padding:"1rem 0.75rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:i("userApp.quotes.quantity")}),e.jsx("th",{style:{padding:"1rem 0.75rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600"},children:i("userApp.quotes.unitPrice")}),e.jsx("th",{style:{padding:"1rem 0.75rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600"},children:i("userApp.quotes.totalPrice")})]})}),e.jsx("tbody",{children:C.line_items.map((K,Y)=>e.jsxs("tr",{style:{borderBottom:`1px solid ${n.colors.borders.light}`,backgroundColor:Y%2===0?"white":n.colors.backgrounds.secondary},children:[e.jsx("td",{style:{padding:"1rem 0.75rem",fontWeight:"600"},children:K.item_name}),e.jsx("td",{style:{padding:"1rem 0.75rem",fontSize:"0.875rem",color:n.colors.text.secondary},children:K.description}),e.jsx("td",{style:{padding:"1rem 0.75rem",textAlign:"center",fontWeight:"600"},children:K.quantity}),e.jsx("td",{style:{padding:"1rem 0.75rem",textAlign:"right",fontWeight:"600"},children:w(K.unit_price)}),e.jsx("td",{style:{padding:"1rem 0.75rem",textAlign:"right",fontWeight:"700",fontSize:"1.125rem"},children:w(K.user_price)})]},K.id))})]})}),e.jsxs("div",{style:{backgroundColor:n.colors.primary[50],padding:"1.5rem",borderTop:`2px solid ${n.colors.primary[200]}`},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"1.5rem",fontWeight:"700"},children:[e.jsxs("span",{children:[i("userApp.quotes.totalAmount"),":"]}),e.jsx("span",{style:{color:n.colors.primary[600]},children:w(C.totals.total_user_price)})]}),e.jsxs("div",{style:{fontSize:"0.875rem",color:n.colors.text.secondary,textAlign:"right",marginTop:"0.5rem"},children:[i("userApp.quotes.installationDeadline"),": ",O(C.installation_deadline)]})]}),e.jsx("div",{style:{padding:"1.5rem"},children:e.jsx("button",{onClick:()=>{m(C.id),P(C.id)},disabled:b,style:{width:"100%",backgroundColor:n.colors.primary[500],color:"white",border:"none",padding:"1rem",borderRadius:"12px",fontSize:"1.125rem",fontWeight:"600",cursor:b?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",opacity:b?.7:1},children:b?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{width:"20px",height:"20px",border:"2px solid transparent",borderTop:"2px solid white",borderRadius:"50%",animation:"spin 1s linear infinite"}}),i("common.selecting")]}):e.jsxs(e.Fragment,{children:[e.jsx(L1,{size:20}),i("userApp.quotes.selectThisQuotation")]})})})]})]})})]}),e.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]}):null},av=({isOpen:r,onClose:t,quote:o,request:s,onSelectQuote:i})=>{const{t:a,i18n:l}=ve(),c=l.language==="ar";if(!r||!o)return null;const p=_=>{if(!_)return"N/A";const S=new Date(_);return isNaN(S.getTime())?"N/A":S.toLocaleDateString(c?"ar-SA":"en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};parseFloat(o.base_price?.toString()||"0");const d=parseFloat(o.total_user_price?.toString()||"0"),m=parseFloat(o.solar_system_capacity_kwp||s?.system_size_kwp||"0"),u=parseFloat(o.storage_capacity_kwh||"0"),h=o.line_items||[],b=h&&h.length>0,j=b?h.map((_,S)=>({sn:S+1,item:_.item_name||"Not specified",description:_.description||"No description",qty:_.units||1,unitPrice:_.unit_price||0})):[];return e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px",direction:c?"rtl":"ltr"},onClick:t,children:e.jsxs(Fe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},onClick:_=>_.stopPropagation(),style:{backgroundColor:"white",borderRadius:"16px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)",width:"95%",maxWidth:"1200px",maxHeight:"90vh",overflow:"hidden"},children:[e.jsxs("div",{style:{background:`linear-gradient(135deg, ${n.colors.primary[500]} 0%, ${n.colors.primary[600]} 100%)`,color:"white",padding:"2rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs("h2",{style:{fontSize:"1.75rem",fontWeight:"700",marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx(Le,{size:28}),a("quotes.detailedQuotation")]}),e.jsxs("p",{style:{opacity:.9,fontSize:"14px"},children:[o.contractor_name||"Solar Provider"," - ",p(o.created_at)]})]}),e.jsx("button",{onClick:t,style:{backgroundColor:"rgba(255,255,255,0.2)",border:"none",color:"white",borderRadius:"8px",padding:"12px",cursor:"pointer",transition:n.transitions.normal},children:e.jsx(qo,{size:20})})]}),e.jsxs("div",{style:{maxHeight:"calc(90vh - 140px)",overflowY:"auto",padding:"2rem"},children:[e.jsxs("div",{style:{backgroundColor:o.admin_status==="approved"?"#f0f9ff":"#fef3c7",border:`2px solid ${o.admin_status==="approved"?n.colors.semantic.success.main:n.colors.semantic.warning.main}`,borderRadius:"12px",padding:"1rem",marginBottom:"2rem",display:"flex",alignItems:"center",gap:"12px"},children:[o.admin_status==="approved"?e.jsx(Ne,{size:24,color:n.colors.semantic.success.main}):e.jsx(lt,{size:24,color:n.colors.semantic.warning.main}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:"600",color:o.admin_status==="approved"?n.colors.semantic.success.dark:n.colors.semantic.warning.dark,marginBottom:"0.25rem"},children:o.admin_status==="approved"?a("quotes.status.approved"):a("quotes.status.pendingReview")}),e.jsx("p",{style:{fontSize:"14px",color:o.admin_status==="approved"?n.colors.semantic.success.main:n.colors.semantic.warning.main,margin:0},children:o.admin_status==="approved"?a("quotes.readyForSelection"):a("quotes.underAdminReview")})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[e.jsxs("div",{style:{backgroundColor:n.colors.backgrounds.secondary,borderRadius:"12px",padding:"1.5rem",textAlign:"center"},children:[e.jsx(gt,{size:32,color:n.colors.primary[500],style:{marginBottom:"0.5rem"}}),e.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:"600",color:n.colors.text.primary,marginBottom:"0.5rem"},children:a("quotes.systemCapacity")}),e.jsxs("p",{style:{fontSize:"2rem",fontWeight:"700",color:n.colors.primary[600],margin:0},children:[m," kWp"]})]}),e.jsxs("div",{style:{backgroundColor:n.colors.backgrounds.secondary,borderRadius:"12px",padding:"1.5rem",textAlign:"center"},children:[e.jsx(oi,{size:32,color:n.colors.primary[500],style:{marginBottom:"0.5rem"}}),e.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:"600",color:n.colors.text.primary,marginBottom:"0.5rem"},children:a("quotes.totalPrice")}),e.jsxs("p",{style:{fontSize:"2rem",fontWeight:"700",color:n.colors.primary[600],margin:0},children:["SAR ",(d*1.15).toLocaleString()]}),e.jsx("p",{style:{fontSize:"14px",color:n.colors.text.secondary,margin:0},children:a("quotes.includingVAT")})]}),e.jsxs("div",{style:{backgroundColor:n.colors.backgrounds.secondary,borderRadius:"12px",padding:"1.5rem",textAlign:"center"},children:[e.jsx(ht,{size:32,color:n.colors.primary[500],style:{marginBottom:"0.5rem"}}),e.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:"600",color:n.colors.text.primary,marginBottom:"0.5rem"},children:a("quotes.installationTime")}),e.jsx("p",{style:{fontSize:"2rem",fontWeight:"700",color:n.colors.primary[600],margin:0},children:o.installation_timeline_days}),e.jsx("p",{style:{fontSize:"14px",color:n.colors.text.secondary,margin:0},children:a("quotes.days")})]})]}),e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsxs("h3",{style:{fontSize:"1.3rem",fontWeight:"700",color:n.colors.text.primary,marginBottom:"1rem",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Le,{size:20}),a("quotes.itemizedBreakdown")]}),e.jsx("div",{style:{backgroundColor:"white",borderRadius:"12px",overflow:"hidden",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.08)",border:`2px solid ${n.colors.borders.light}`},children:e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{style:{backgroundColor:n.colors.primary[500],color:"white"},children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontWeight:"600"},children:"Item"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontWeight:"600"},children:"Description"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontWeight:"600"},children:"Qty"}),e.jsx("th",{style:{padding:"1rem",textAlign:"right",fontWeight:"600"},children:"Unit Price"}),e.jsx("th",{style:{padding:"1rem",textAlign:"right",fontWeight:"600"},children:"Total Price"})]})}),e.jsxs("tbody",{children:[b?j.map(_=>{const S=_.qty*_.unitPrice;return e.jsxs("tr",{style:{borderBottom:`1px solid ${n.colors.borders.light}`},children:[e.jsx("td",{style:{padding:"1rem",fontWeight:"500",color:n.colors.text.primary},children:_.item}),e.jsx("td",{style:{padding:"1rem",color:n.colors.text.secondary},children:_.description}),e.jsx("td",{style:{padding:"1rem",textAlign:"center",fontFamily:"monospace"},children:_.qty}),e.jsxs("td",{style:{padding:"1rem",textAlign:"right",fontFamily:"monospace"},children:["SAR ",_.unitPrice.toLocaleString()]}),e.jsxs("td",{style:{padding:"1rem",textAlign:"right",fontFamily:"monospace",fontWeight:"600"},children:["SAR ",S.toLocaleString()]})]},_.sn)}):e.jsx("tr",{children:e.jsx("td",{colSpan:5,style:{padding:"2rem",textAlign:"center",color:n.colors.text.secondary},children:a("quotes.noDetailedBreakdown")})}),e.jsxs("tr",{style:{backgroundColor:n.colors.backgrounds.secondary,borderTop:`2px solid ${n.colors.borders.medium}`},children:[e.jsxs("td",{colSpan:4,style:{padding:"1rem",textAlign:"right",fontWeight:"600",color:n.colors.text.primary},children:[a("quotes.subtotal"),":"]}),e.jsxs("td",{style:{padding:"1rem",textAlign:"right",fontFamily:"monospace",fontWeight:"700",fontSize:"1.1rem"},children:["SAR ",d.toLocaleString()]})]}),e.jsxs("tr",{style:{backgroundColor:n.colors.backgrounds.secondary,borderTop:`2px solid ${n.colors.borders.medium}`},children:[e.jsxs("td",{colSpan:4,style:{padding:"1rem",textAlign:"right",fontWeight:"600",color:n.colors.text.primary},children:[a("quotes.totalAmount")," (",a("quotes.excludingVAT"),"):"]}),e.jsxs("td",{style:{padding:"1rem",textAlign:"right",fontFamily:"monospace",fontWeight:"700",fontSize:"1.1rem"},children:["SAR ",d.toLocaleString()]})]}),e.jsxs("tr",{style:{backgroundColor:n.colors.backgrounds.secondary},children:[e.jsxs("td",{colSpan:4,style:{padding:"1rem",textAlign:"right",fontWeight:"600",color:n.colors.text.primary},children:[a("quotes.vat")," (15%):"]}),e.jsxs("td",{style:{padding:"1rem",textAlign:"right",fontFamily:"monospace",fontWeight:"600",color:n.colors.text.secondary},children:["SAR ",(d*.15).toLocaleString()]})]}),e.jsxs("tr",{style:{backgroundColor:n.colors.primary[50],borderTop:`2px solid ${n.colors.primary[500]}`},children:[e.jsxs("td",{colSpan:4,style:{padding:"1.25rem",textAlign:"right",fontWeight:"700",fontSize:"1.2rem",color:n.colors.primary[700]},children:[a("quotes.totalAmount")," (",a("quotes.includingVAT"),"):"]}),e.jsxs("td",{style:{padding:"1.25rem",textAlign:"right",fontFamily:"monospace",fontWeight:"700",fontSize:"1.3rem",color:n.colors.primary[700]},children:["SAR ",(d*1.15).toLocaleString()]})]})]})]})})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[e.jsxs("div",{style:{backgroundColor:n.colors.backgrounds.secondary,borderRadius:"12px",padding:"1.5rem"},children:[e.jsxs("h4",{style:{fontSize:"1.1rem",fontWeight:"600",color:n.colors.text.primary,marginBottom:"1rem",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(gt,{size:18}),a("quotes.systemSpecs")]}),e.jsxs("div",{style:{display:"grid",gap:"0.75rem",fontSize:"14px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("span",{style:{color:n.colors.text.secondary},children:[a("quotes.systemCapacity"),":"]}),e.jsxs("span",{style:{fontWeight:"500",color:n.colors.text.primary},children:[m," kWp"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("span",{style:{color:n.colors.text.secondary},children:[a("quotes.storageCapacity"),":"]}),e.jsxs("span",{style:{fontWeight:"500",color:n.colors.text.primary},children:[u," kWh"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("span",{style:{color:n.colors.text.secondary},children:[a("quotes.monthlyProduction"),":"]}),e.jsxs("span",{style:{fontWeight:"500",color:n.colors.text.primary},children:[o.monthly_production_kwh," kWh"]})]})]})]}),e.jsxs("div",{style:{backgroundColor:n.colors.backgrounds.secondary,borderRadius:"12px",padding:"1.5rem"},children:[e.jsxs("h4",{style:{fontSize:"1.1rem",fontWeight:"600",color:n.colors.text.primary,marginBottom:"1rem",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Kr,{size:18}),a("quotes.warranty")]}),e.jsxs("div",{style:{display:"grid",gap:"0.75rem",fontSize:"14px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("span",{style:{color:n.colors.text.secondary},children:[a("quotes.equipment"),":"]}),e.jsxs("span",{style:{fontWeight:"500",color:n.colors.text.primary},children:["25 ",a("quotes.years")]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("span",{style:{color:n.colors.text.secondary},children:[a("quotes.performance"),":"]}),e.jsxs("span",{style:{fontWeight:"500",color:n.colors.text.primary},children:["25 ",a("quotes.years")]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("span",{style:{color:n.colors.text.secondary},children:[a("quotes.installation"),":"]}),e.jsxs("span",{style:{fontWeight:"500",color:n.colors.text.primary},children:["10 ",a("quotes.years")]})]})]})]})]}),e.jsxs("div",{style:{backgroundColor:n.colors.backgrounds.secondary,borderRadius:"12px",padding:"1.5rem",marginBottom:"2rem"},children:[e.jsxs("h4",{style:{fontSize:"1.1rem",fontWeight:"600",color:n.colors.text.primary,marginBottom:"1rem",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(qx,{size:18}),a("quotes.providerInfo")]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("h5",{style:{fontWeight:"600",color:n.colors.text.primary,marginBottom:"0.5rem"},children:o.contractor_name||"Solar Provider"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",color:n.colors.text.secondary,marginBottom:"0.25rem"},children:[e.jsx($d,{size:14}),o.contractor_email||"contact@provider.com"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",color:n.colors.text.secondary},children:[e.jsx(gs,{size:14}),o.contractor_phone||"+966 XX XXX XXXX"]})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[e.jsxs("span",{style:{color:n.colors.text.secondary,fontSize:"14px"},children:[a("quotes.quoteValidUntil"),":"]}),e.jsx("span",{style:{fontWeight:"500",color:n.colors.text.primary,fontSize:"14px"},children:p(o.expires_at)})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("span",{style:{color:n.colors.text.secondary,fontSize:"14px"},children:[a("quotes.installationDeadline"),":"]}),e.jsx("span",{style:{fontWeight:"500",color:n.colors.text.primary,fontSize:"14px"},children:p(o.installation_deadline)})]})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:t,style:{backgroundColor:"transparent",color:n.colors.text.secondary,border:`2px solid ${n.colors.borders.medium}`,padding:"12px 24px",borderRadius:"8px",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:n.transitions.normal},children:a("common.close")}),o.admin_status==="approved"&&i&&e.jsxs("button",{onClick:()=>i(o.id),style:{backgroundColor:n.colors.primary[500],color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:n.transitions.normal,display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Ne,{size:16}),a("quotes.selectThisQuote")]})]})]})]})})},lv=({user:r})=>{const{t,i18n:o}=ve(),s=o.language==="ar",[i,a]=y.useState("requests"),[l,c]=y.useState([]),[p,d]=y.useState(null),[m,u]=y.useState(!1),[h,b]=y.useState(null),[j,_]=y.useState(!1),[S,R]=y.useState(!1),[I,C]=y.useState(null),[z,f]=y.useState([]),[P,w]=y.useState(!1),[O,V]=y.useState(!1),[re,Q]=y.useState(null);y.useEffect(()=>{oe()},[]);const oe=async()=>{u(!0),b(null);try{const q=await Uo.getQuoteRequests({page:1,limit:10});if(q.success&&q.data)c(q.data.requests||[]);else throw new Error(q.error||"Failed to load quote requests")}catch(q){console.error("Failed to load quote requests:",q),b(q.message||"Failed to load quote requests"),c([])}finally{u(!1)}},K=q=>{console.log("Quote request submitted successfully:",q),a("requests"),oe()},Y=async q=>{w(!0);try{const ie=await Uo.getQuotesForRequest(q);if(ie.success&&ie.data)f(ie.data.quotes||[]),_(!0);else throw new Error(ie.error||"Failed to load quotes")}catch(ie){console.error("Failed to load quotes:",ie),b(ie.message||"Failed to load quotes")}finally{w(!1)}},W=q=>{C(q),R(!0)},$=()=>{R(!1),C(null),oe()},L=q=>{console.log("User quote detail data:",q),console.log("User quote line_items:",q.line_items),Q(q),V(!0)},k=()=>{V(!1),Q(null)},v=q=>{switch(q){case"pending":return n.colors.semantic.warning.main;case"quotes_received":return n.colors.semantic.info.main;case"quote_selected":return n.colors.primary[500];case"completed":return n.colors.semantic.success.main;case"cancelled":return n.colors.semantic.error.main;default:return n.colors.text.secondary}},g=q=>{switch(q){case"pending":return e.jsx(lt,{size:16});case"quotes_received":return e.jsx(Le,{size:16});case"quote_selected":return e.jsx(Ne,{size:16});case"completed":return e.jsx(Ne,{size:16});case"cancelled":return e.jsx(rr,{size:16});default:return e.jsx(Lt,{size:16})}},A=q=>{switch(q){case"pending":return t("quotes.status.pending");case"quotes_received":return t("quotes.status.quotesReceived");case"quote_selected":return t("quotes.status.quoteSelected");case"completed":return t("quotes.status.completed");case"cancelled":return t("quotes.status.cancelled");default:return q}},ee=q=>new Date(q).toLocaleDateString(s?"ar-SA":"en-US",{year:"numeric",month:"short",day:"numeric"}),U=q=>({display:"inline-flex",alignItems:"center",gap:"8px",padding:"12px 24px",borderRadius:"8px",border:"none",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:n.transitions.normal,backgroundColor:i===q?n.colors.primary[500]:"transparent",color:i===q?"white":n.colors.text.secondary,marginRight:s?"0":"8px",marginLeft:s?"8px":"0"});return e.jsx("div",{style:{minHeight:"100vh",backgroundColor:n.colors.backgrounds.secondary,fontFamily:n.typography.fonts.primary,direction:s?"rtl":"ltr"},children:e.jsxs("div",{style:{width:"100%",maxWidth:"100vw",padding:"1rem",margin:"0"},children:[e.jsxs("div",{style:{marginBottom:"2rem",textAlign:"center"},children:[e.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:"700",color:n.colors.text.primary,marginBottom:"0.5rem"},children:t("quotes.title")}),e.jsx("p",{style:{fontSize:"1.2rem",color:n.colors.text.secondary,maxWidth:"600px",margin:"0 auto"},children:t("quotes.subtitle")})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",marginBottom:"2rem",backgroundColor:"white",borderRadius:"12px",padding:"8px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",width:"fit-content",margin:"0 auto 2rem"},children:[e.jsxs("button",{onClick:()=>a("requests"),style:U("requests"),children:[e.jsx(Le,{size:16,style:{marginRight:s?"0":"8px",marginLeft:s?"8px":"0",verticalAlign:"middle"}}),t("quotes.tabs.myRequests")]}),e.jsxs("button",{onClick:()=>a("form"),style:U("form"),children:[e.jsx(Ns,{size:16,style:{marginRight:s?"0":"8px",marginLeft:s?"8px":"0",verticalAlign:"middle"}}),t("quotes.tabs.newRequest")]})]}),i==="form"&&e.jsx(sv,{user:r,onSuccess:K,onCancel:()=>a("requests")}),i==="requests"&&e.jsxs("div",{style:{display:"flex",gap:"1.5rem",height:"calc(100vh - 200px)"},children:[e.jsxs("div",{style:{width:p?"40%":"100%",backgroundColor:"white",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.08)",overflow:"hidden",transition:"width 0.3s ease"},children:[e.jsxs("div",{style:{padding:"1.5rem",borderBottom:`2px solid ${n.colors.borders.light}`,display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:n.colors.primary[50]},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.3rem",fontWeight:"700",color:n.colors.text.primary,marginBottom:"0.25rem"},children:t("quotes.myRequests.title")}),e.jsxs("p",{style:{color:n.colors.text.secondary,fontSize:"13px"},children:[l.length," ",t("quotes.requests")]})]}),e.jsxs("button",{onClick:()=>a("form"),style:{backgroundColor:n.colors.primary[500],color:"white",border:"none",padding:"10px 16px",borderRadius:"8px",fontSize:"13px",fontWeight:"600",cursor:"pointer",transition:n.transitions.normal,display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Ns,{size:14}),t("quotes.actions.newRequest")]})]}),e.jsx("div",{style:{height:"calc(100% - 80px)",overflowY:"auto",padding:"1rem"},children:m?e.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:n.colors.text.secondary},children:[e.jsx(lt,{size:48,style:{marginBottom:"1rem",opacity:.5}}),e.jsx("p",{children:t("common.loading")})]}):h?e.jsxs("div",{style:{textAlign:"center",padding:"3rem",backgroundColor:"#fef2f2",borderRadius:"8px",border:`2px solid ${n.colors.semantic.error.main}`},children:[e.jsx("p",{style:{color:n.colors.semantic.error.main,marginBottom:"1rem"},children:h}),e.jsx("button",{onClick:oe,style:{backgroundColor:n.colors.semantic.error.main,color:"white",border:"none",padding:"8px 16px",borderRadius:"6px",fontSize:"14px",cursor:"pointer"},children:t("common.retry")})]}):l.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"4rem",color:n.colors.text.secondary},children:[e.jsx(Le,{size:64,style:{marginBottom:"1.5rem",opacity:.3}}),e.jsx("h3",{style:{fontSize:"1.2rem",fontWeight:"600",marginBottom:"1rem",color:n.colors.text.primary},children:t("quotes.myRequests.empty.title")}),e.jsx("p",{style:{marginBottom:"2rem",lineHeight:"1.6"},children:t("quotes.myRequests.empty.message")}),e.jsxs("button",{onClick:()=>a("form"),style:{backgroundColor:n.colors.primary[500],color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:n.transitions.normal,display:"inline-flex",alignItems:"center",gap:"8px"},children:[e.jsx(Ns,{size:16}),t("quotes.actions.createFirst")]})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:l.map(q=>e.jsxs("div",{style:{border:`2px solid ${p?.id===q.id?n.colors.primary[500]:n.colors.borders.light}`,borderRadius:"12px",padding:"1.25rem",transition:n.transitions.normal,cursor:"pointer",backgroundColor:p?.id===q.id?n.colors.primary[50]:"white",boxShadow:p?.id===q.id?"0 4px 16px rgba(62, 178, 177, 0.2)":"0 2px 8px rgba(0, 0, 0, 0.05)"},onClick:()=>d(q),onMouseEnter:ie=>{p?.id!==q.id&&(ie.currentTarget.style.borderColor=n.colors.primary[300],ie.currentTarget.style.backgroundColor=n.colors.primary[25])},onMouseLeave:ie=>{p?.id!==q.id&&(ie.currentTarget.style.borderColor=n.colors.borders.light,ie.currentTarget.style.backgroundColor="white")},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("h3",{style:{fontSize:"1rem",fontWeight:"600",color:n.colors.text.primary,marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(gt,{size:16,color:n.colors.primary[500]}),q.system_size_kwp," kWp - ",q.service_area]}),e.jsxs("p",{style:{fontSize:"13px",color:n.colors.text.secondary,marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx($t,{size:12}),q.location_address.length>40?`${q.location_address.substring(0,40)}...`:q.location_address]})]}),e.jsxs("div",{style:{textAlign:s?"left":"right",marginLeft:"1rem"},children:[e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"4px 10px",borderRadius:"16px",fontSize:"11px",fontWeight:"600",backgroundColor:`${v(q.status)}15`,color:v(q.status),marginBottom:"0.5rem"},children:[g(q.status),A(q.status)]}),e.jsxs("div",{style:{fontSize:"13px",fontWeight:"600",color:n.colors.primary[500]},children:[q.quotes_count," ",t("quotes.quotes")]})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"12px",color:n.colors.text.secondary,paddingTop:"0.75rem",borderTop:`1px solid ${n.colors.borders.light}`},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(ht,{size:12}),ee(q.created_at)]}),e.jsx(Dd,{size:16,color:n.colors.primary[500]})]})]},q.id))})})]}),p&&e.jsxs("div",{style:{width:"60%",backgroundColor:"white",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.08)",overflow:"hidden",animation:"slideIn 0.3s ease-out"},children:[e.jsx("div",{style:{padding:"1.5rem",borderBottom:`2px solid ${n.colors.borders.light}`,backgroundColor:n.colors.primary[500],color:"white"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs("h2",{style:{fontSize:"1.4rem",fontWeight:"700",marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(gt,{size:24}),p.system_size_kwp," kWp ",t("quotes.solarSystem")]}),e.jsxs("p",{style:{fontSize:"14px",opacity:.9},children:[t("quotes.requestId"),": ",p.id]})]}),e.jsx("button",{onClick:()=>d(null),style:{backgroundColor:"rgba(255,255,255,0.2)",border:"none",color:"white",borderRadius:"6px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center"},children:e.jsx(rr,{size:16})})]})}),e.jsx("div",{style:{height:"calc(100% - 100px)",overflowY:"auto",padding:"1.5rem"},children:e.jsxs("div",{style:{display:"grid",gap:"1.5rem"},children:[e.jsxs("div",{style:{backgroundColor:n.colors.backgrounds.secondary,borderRadius:"12px",padding:"1.5rem"},children:[e.jsxs("h3",{style:{fontSize:"1.1rem",fontWeight:"600",color:n.colors.text.primary,marginBottom:"1rem",display:"flex",alignItems:"center",gap:"8px"},children:[g(p.status),t("quotes.status.title")]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"8px 16px",borderRadius:"20px",fontSize:"14px",fontWeight:"600",backgroundColor:`${v(p.status)}15`,color:v(p.status)},children:[g(p.status),A(p.status)]}),e.jsxs("span",{style:{fontSize:"16px",fontWeight:"700",color:n.colors.primary[500]},children:[p.quotes_count," ",t("quotes.quotesReceivedCount")]})]}),p.estimated_cost&&e.jsx("div",{style:{padding:"12px",backgroundColor:n.colors.primary[50],borderRadius:"8px",borderLeft:`4px solid ${n.colors.primary[500]}`},children:e.jsxs("span",{style:{fontSize:"14px",fontWeight:"600",color:n.colors.primary[600]},children:[t("quotes.estimatedCost"),": ",p.estimated_cost]})})]}),p.assigned_contractors&&p.assigned_contractors.length>0&&e.jsxs("div",{style:{backgroundColor:n.colors.backgrounds.secondary,borderRadius:"12px",padding:"1.5rem"},children:[e.jsxs("h3",{style:{fontSize:"1.1rem",fontWeight:"600",color:n.colors.text.primary,marginBottom:"1rem",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Le,{size:18}),t("quotes.selectedContractors")," (",p.assigned_contractors.length,")"]}),e.jsx("div",{style:{display:"grid",gap:"8px"},children:p.assigned_contractors.map((q,ie)=>{const ce=q.contractor_info;ce?.business_name||(`${t("quotes.contractor")}`,ie+1);const J=ce?.business_name||t("quotes.solarCompany"),X=q.assignment_status;return p.quotes_count>0,e.jsxs("div",{style:{backgroundColor:"white",border:`2px solid ${n.colors.borders.light}`,borderRadius:"8px",padding:"12px 16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:n.colors.text.primary,marginBottom:"2px"},children:J}),e.jsx("div",{style:{fontSize:"12px",color:n.colors.text.secondary},children:ce?.email||"Contact information not available"})]}),e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"4px 8px",borderRadius:"12px",fontSize:"11px",fontWeight:"600",backgroundColor:X==="accepted"?`${n.colors.semantic.success.main}15`:X==="assigned"?`${n.colors.semantic.info.main}15`:`${n.colors.semantic.warning.main}15`,color:X==="accepted"?n.colors.semantic.success.main:X==="assigned"?n.colors.semantic.info.main:n.colors.semantic.warning.main},children:[X==="accepted"?e.jsx(Ne,{size:12}):X==="assigned"?e.jsx(Ne,{size:12}):e.jsx(lt,{size:12}),t(X==="accepted"?"quotes.status.accepted":X==="assigned"?"quotes.status.assigned":"quotes.status.pending")]})]},q.contractor_id)})})]}),e.jsxs("div",{style:{backgroundColor:n.colors.backgrounds.secondary,borderRadius:"12px",padding:"1.5rem"},children:[e.jsxs("h3",{style:{fontSize:"1.1rem",fontWeight:"600",color:n.colors.text.primary,marginBottom:"1rem",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Gr,{size:18}),t("quotes.propertyDetails")]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"12px",color:n.colors.text.secondary,display:"block",marginBottom:"4px"},children:t("quotes.location")}),e.jsxs("div",{style:{fontSize:"14px",color:n.colors.text.primary,display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx($t,{size:14,color:n.colors.primary[500]}),p.location_address]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"12px",color:n.colors.text.secondary,display:"block",marginBottom:"4px"},children:t("quotes.contactPhone")}),e.jsxs("div",{style:{fontSize:"14px",color:n.colors.text.primary,display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(gs,{size:14,color:n.colors.primary[500]}),p.contact_phone]})]}),p.property_details&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"12px",color:n.colors.text.secondary,display:"block",marginBottom:"4px"},children:t("quotes.propertyType")}),e.jsx("span",{style:{fontSize:"14px",color:n.colors.text.primary},children:p.property_details.property_type})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"12px",color:n.colors.text.secondary,display:"block",marginBottom:"4px"},children:t("quotes.roofType")}),e.jsx("span",{style:{fontSize:"14px",color:n.colors.text.primary},children:p.property_details.roof_type})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"12px",color:n.colors.text.secondary,display:"block",marginBottom:"4px"},children:t("quotes.roofOrientation")}),e.jsx("span",{style:{fontSize:"14px",color:n.colors.text.primary},children:p.property_details.roof_orientation})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"12px",color:n.colors.text.secondary,display:"block",marginBottom:"4px"},children:t("quotes.shadingIssues")}),e.jsx("span",{style:{fontSize:"14px",color:p.property_details.shading_issues?n.colors.semantic.warning.main:n.colors.semantic.success.main,fontWeight:"500"},children:p.property_details.shading_issues?t("common.yes"):t("common.no")})]})]})]})]}),p.inspection_schedules&&Object.keys(p.inspection_schedules).length>0&&e.jsxs("div",{style:{backgroundColor:n.colors.backgrounds.secondary,borderRadius:"12px",padding:"1.5rem"},children:[e.jsxs("h3",{style:{fontSize:"1.1rem",fontWeight:"600",color:n.colors.text.primary,marginBottom:"1rem",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(ht,{size:18}),t("quotes.installationSchedule")]}),p.inspection_schedules&&Object.keys(p.inspection_schedules).length>0&&e.jsxs("div",{style:{marginTop:"1rem"},children:[e.jsxs("h4",{style:{fontSize:"14px",fontWeight:"600",color:n.colors.text.primary,marginBottom:"8px"},children:[t("quotes.inspectionSchedules"),":"]}),Object.entries(p.inspection_schedules).map(([q,ie],ce)=>{const X=p.assigned_contractors?.find(ae=>ae.contractor_id===q)?.contractor_info?.business_name||p.contractor_details?.[q]?.business_name||`${t("quotes.contractor")} ${ce+1}`;return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",backgroundColor:"white",borderRadius:"6px",marginBottom:"6px",fontSize:"13px"},children:[e.jsx("span",{style:{color:n.colors.text.primary,fontWeight:"500"},children:X}),e.jsx("span",{style:{color:n.colors.text.primary,fontWeight:"500"},children:new Date(ie).toLocaleDateString(s?"ar-SA":"en-US",{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]},q)})]})]}),p.selected_quote&&e.jsxs("div",{style:{backgroundColor:n.colors.semantic.success.light,borderRadius:"12px",padding:"1.5rem",border:`2px solid ${n.colors.semantic.success.main}`},children:[e.jsxs("h3",{style:{fontSize:"1.1rem",fontWeight:"600",color:n.colors.semantic.success.dark,marginBottom:"1rem",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Ne,{size:18}),t("quotes.selectedQuote")]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"8px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsx("span",{style:{fontSize:"16px",fontWeight:"600",color:n.colors.text.primary},children:p.selected_quote.contractor_name}),e.jsx("span",{style:{fontSize:"18px",fontWeight:"700",color:n.colors.primary[600]},children:p.selected_quote.price})]}),e.jsxs("div",{style:{fontSize:"12px",color:n.colors.text.secondary},children:[t("quotes.selectedOn"),": ",ee(p.selected_quote.selected_at)]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"1rem"},children:[e.jsxs("button",{onClick:()=>Y(p.id),disabled:p.quotes_count===0||P,style:{flex:1,backgroundColor:p.quotes_count>0?n.colors.primary[500]:n.colors.borders.medium,color:"white",border:"none",padding:"12px 20px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:p.quotes_count>0?"pointer":"not-allowed",transition:n.transitions.normal,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",opacity:P?.7:1},children:[P?e.jsx(lt,{size:16}):e.jsx(Le,{size:16}),t(P?"common.loading":"quotes.actions.viewQuotes")]}),e.jsxs("button",{onClick:()=>W(p.id),disabled:p.quotes_count===0,style:{flex:1,backgroundColor:"transparent",color:p.quotes_count>0?n.colors.primary[500]:n.colors.borders.medium,border:`2px solid ${p.quotes_count>0?n.colors.primary[500]:n.colors.borders.medium}`,padding:"12px 20px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:p.quotes_count>0?"pointer":"not-allowed",transition:n.transitions.normal,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[e.jsx(jn,{size:16}),t("quotes.actions.viewQuotations")]})]})]})})]})]}),j&&p&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"16px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)",width:"90%",maxWidth:"1000px",maxHeight:"90vh",overflow:"hidden",position:"relative"},children:[e.jsxs("div",{style:{backgroundColor:n.colors.primary[500],color:"white",padding:"1.5rem 2rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("h2",{style:{fontSize:"1.5rem",fontWeight:"700",margin:0,display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(Le,{size:24}),t("quotes.receivedQuotes")," (",z.length,")"]}),e.jsx("button",{onClick:()=>_(!1),style:{backgroundColor:"rgba(255,255,255,0.2)",border:"none",color:"white",borderRadius:"8px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center"},children:e.jsx(rr,{size:20})})]}),e.jsx("div",{style:{maxHeight:"calc(90vh - 100px)",overflowY:"auto",padding:"2rem"},children:z.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"4rem",color:n.colors.text.secondary},children:[e.jsx(Le,{size:64,style:{marginBottom:"1.5rem",opacity:.3}}),e.jsx("h3",{style:{fontSize:"1.2rem",fontWeight:"600",marginBottom:"1rem",color:n.colors.text.primary},children:t("quotes.noQuotes.title")}),e.jsx("p",{children:t("quotes.noQuotes.message")})]}):e.jsx("div",{style:{display:"grid",gap:"1.5rem"},children:z.map((q,ie)=>e.jsxs("div",{style:{border:`2px solid ${n.colors.borders.light}`,borderRadius:"12px",padding:"1.5rem",backgroundColor:n.colors.backgrounds.secondary,transition:n.transitions.normal,position:"relative"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("h3",{style:{fontSize:"1.2rem",fontWeight:"700",color:n.colors.text.primary,marginBottom:"0.5rem"},children:[q.contractor_name||q.contractor_company||t("quotes.solarCompany")," #",ie+1]}),e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"4px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"600",backgroundColor:q.admin_status==="approved"?`${n.colors.semantic.success.main}15`:`${n.colors.semantic.warning.main}15`,color:q.admin_status==="approved"?n.colors.semantic.success.main:n.colors.semantic.warning.main},children:[q.admin_status==="approved"?e.jsx(Ne,{size:12}):e.jsx(lt,{size:12}),q.admin_status==="approved"?t("quotes.status.approved"):t("quotes.status.pendingReview")]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:n.colors.primary[600],marginBottom:"0.25rem"},children:q.total_user_price?`${q.total_user_price.toLocaleString()} SAR`:`${q.base_price?.toLocaleString()} SAR`}),e.jsxs("div",{style:{fontSize:"12px",color:n.colors.text.secondary},children:[q.price_per_kwp," SAR/kWp"]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"12px",color:n.colors.text.secondary,display:"block",marginBottom:"4px"},children:t("quotes.installationTimeline")}),e.jsxs("span",{style:{fontSize:"14px",color:n.colors.text.primary,fontWeight:"500"},children:[q.installation_timeline_days," ",t("quotes.days")]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"12px",color:n.colors.text.secondary,display:"block",marginBottom:"4px"},children:t("quotes.systemCapacity")}),e.jsxs("span",{style:{fontSize:"14px",color:n.colors.text.primary,fontWeight:"500"},children:[q.system_specs?.total_capacity_kwp||p.system_size_kwp," kWp"]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"12px",color:n.colors.text.secondary,display:"block",marginBottom:"4px"},children:t("quotes.panels")}),e.jsxs("span",{style:{fontSize:"14px",color:n.colors.text.primary,fontWeight:"500"},children:[q.panels_brand," ",q.panels_model," (",q.panels_quantity,")"]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"12px",color:n.colors.text.secondary,display:"block",marginBottom:"4px"},children:t("quotes.inverter")}),e.jsxs("span",{style:{fontSize:"14px",color:n.colors.text.primary,fontWeight:"500"},children:[q.inverter_brand," ",q.inverter_model]})]})]}),q.warranty_terms&&e.jsxs("div",{style:{backgroundColor:"white",padding:"12px",borderRadius:"8px",marginBottom:"1rem"},children:[e.jsxs("h4",{style:{fontSize:"14px",fontWeight:"600",color:n.colors.text.primary,marginBottom:"8px"},children:[t("quotes.warrantyTerms"),":"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"8px",fontSize:"13px"},children:[e.jsxs("span",{children:[e.jsxs("strong",{children:[t("quotes.equipment"),":"]})," ",q.warranty_terms.equipment_warranty_years," ",t("quotes.years")]}),e.jsxs("span",{children:[e.jsxs("strong",{children:[t("quotes.performance"),":"]})," ",q.warranty_terms.performance_warranty_years," ",t("quotes.years")]}),e.jsxs("span",{children:[e.jsxs("strong",{children:[t("quotes.installation"),":"]})," ",q.warranty_terms.installation_warranty_years," ",t("quotes.years")]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"1rem"},children:[e.jsxs("button",{disabled:q.admin_status!=="approved",style:{flex:1,backgroundColor:q.admin_status==="approved"?n.colors.semantic.success.main:n.colors.borders.medium,color:"white",border:"none",padding:"10px 16px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:q.admin_status==="approved"?"pointer":"not-allowed",transition:n.transitions.normal,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[e.jsx(Ne,{size:16}),t("quotes.actions.selectQuote")]}),e.jsxs("button",{onClick:()=>L(q),style:{flex:1,backgroundColor:"transparent",color:n.colors.primary[500],border:`2px solid ${n.colors.primary[500]}`,padding:"10px 16px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:n.transitions.normal,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[e.jsx(Le,{size:16}),t("quotes.actions.viewDetails")]})]})]},q.id||ie))})})]})}),S&&I&&e.jsx(iv,{isOpen:S,requestId:I,onClose:()=>{R(!1),C(null)},onSuccess:$}),e.jsx(av,{isOpen:O,onClose:k,quote:re,request:p})]})})};var _t=(r=>(r.RESIDENTIAL="RESIDENTIAL",r.COMMERCIAL="COMMERCIAL",r))(_t||{}),Ke=(r=>(r.MONTHLY_CONSUMPTION="MONTHLY_CONSUMPTION",r.MONTHLY_BILL="MONTHLY_BILL",r))(Ke||{});const cv=Ce.solarApiUrl;class dv{async makeRequest(t,o){const s=await fetch(`${cv}${t}`,{headers:{"Content-Type":"application/json",...o?.headers},...o});if(!s.ok){const i=await s.json().catch(()=>null);if(i?.details&&Array.isArray(i.details)){const l=i.details.map(c=>`${c.field}: ${c.message}`).join(", ");throw new Error(l)}const a=i?.error?.message||i?.error||i?.message||`HTTP ${s.status}: ${s.statusText}`;throw new Error(a)}return s.json()}async calculateSolar(t){return this.makeRequest("/calculate",{method:"POST",body:JSON.stringify(t)})}async getInstallmentOptions(){return this.makeRequest("/installment-options")}}const pv=new dv,ii=({variant:r="full",showMarketing:t=!0,onCalculationComplete:o,className:s=""})=>{const{t:i}=ve(),[a,l]=y.useState(_t.RESIDENTIAL),[c,p]=y.useState(Ke.MONTHLY_CONSUMPTION),[d,m]=y.useState(Ce.solarCalculator.defaultConsumption.toString()),[u,h]=y.useState(""),[b,j]=y.useState(Ce.solarCalculator.defaultInstallments),[_,S]=y.useState(!1),[R,I]=y.useState(null),[C,z]=y.useState(null),[f,P]=y.useState({});y.useEffect(()=>{d&&O()},[]);const w=()=>{const W={};if(c===Ke.MONTHLY_CONSUMPTION){const $=parseFloat(d);!d||d.trim()===""?W.monthlyConsumption=i("solarCalculator.validation.consumptionRequired"):isNaN($)?W.monthlyConsumption=i("solarCalculator.validation.consumptionMustBeNumber"):$<Ce.solarCalculator.minConsumption?W.monthlyConsumption=i("solarCalculator.validation.consumptionMinimum"):$>Ce.solarCalculator.maxConsumption&&(W.monthlyConsumption=i("solarCalculator.validation.consumptionMaximum"))}else{const $=parseFloat(u),L=a===_t.RESIDENTIAL?Ce.solarCalculator.minBillResidential:Ce.solarCalculator.minBillCommercial;!u||u.trim()===""?W.monthlyBill=i("solarCalculator.validation.billRequired"):isNaN($)?W.monthlyBill=i("solarCalculator.validation.billMustBeNumber"):$<L?W.monthlyBill=i("solarCalculator.validation.billMinimum",{min:L}):$>Ce.solarCalculator.maxBill&&(W.monthlyBill=i("solarCalculator.validation.billMaximum"))}return(!b||b<Ce.solarCalculator.minInstallments||b>Ce.solarCalculator.maxInstallments)&&(W.installments=i("solarCalculator.validation.installmentPeriod")),P(W),Object.keys(W).length===0},O=async()=>{if(z(null),!!w()){S(!0);try{const W={mode:c,clientType:a,numberOfInstallments:b,...c===Ke.MONTHLY_CONSUMPTION?{monthlyConsumption:parseFloat(d)}:{monthlyBill:parseFloat(u)}},$=await pv.calculateSolar(W);I($.data),P({}),o&&o($.data)}catch(W){z(W instanceof Error?W.message:"Calculation failed")}finally{S(!1)}}},V=W=>{p(W),P({})},re=W=>{m(W),f.monthlyConsumption&&P($=>({...$,monthlyConsumption:""}))},Q=W=>{h(W),f.monthlyBill&&P($=>({...$,monthlyBill:""}))},oe=()=>Object.values(f).some(W=>W!=="")?!0:c===Ke.MONTHLY_CONSUMPTION?!d||d.trim()==="":!u||u.trim()==="",K=()=>`solar-calculator-container ${r==="compact"?"compact":r==="dashboard"?"dashboard":"full"} ${s}`.trim(),Y=()=>`solar-main-card ${r==="compact"?"compact":r==="dashboard"?"dashboard":"full"}`;return e.jsx("div",{className:K(),children:e.jsxs("div",{className:Y(),children:[e.jsxs("div",{className:"solar-form-side",children:[e.jsxs("div",{className:"form-section",children:[e.jsxs("h3",{children:["1. ",i("solarCalculator.selectClientType")]}),e.jsxs("div",{className:"button-group",children:[e.jsxs("button",{className:`form-button ${a===_t.RESIDENTIAL?"active":""}`,onClick:()=>l(_t.RESIDENTIAL),children:[e.jsx(Gr,{className:"w-4 h-4"}),i("solarCalculator.residential")]}),e.jsxs("button",{className:`form-button ${a===_t.COMMERCIAL?"active":""}`,onClick:()=>l(_t.COMMERCIAL),children:[e.jsx(Hx,{className:"w-4 h-4"}),i("solarCalculator.commercial")]})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsxs("h3",{children:["2. ",i("solarCalculator.inputMethod")]}),e.jsxs("div",{className:"button-group",children:[e.jsxs("button",{className:`form-button ${c===Ke.MONTHLY_CONSUMPTION?"active":""}`,onClick:()=>V(Ke.MONTHLY_CONSUMPTION),children:[e.jsx(gt,{className:"w-4 h-4"}),i("solarCalculator.monthlyUsage")]}),e.jsxs("button",{className:`form-button ${c===Ke.MONTHLY_BILL?"active":""}`,onClick:()=>V(Ke.MONTHLY_BILL),children:[e.jsx(Ha,{className:"w-4 h-4"}),i("solarCalculator.monthlyBill")]})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsxs("h3",{children:["3. ",i("solarCalculator.enterValue")]}),e.jsx("input",{className:`form-input ${f.monthlyConsumption||f.monthlyBill?"error":""}`,type:"number",value:c===Ke.MONTHLY_CONSUMPTION?d:u,onChange:W=>c===Ke.MONTHLY_CONSUMPTION?re(W.target.value):Q(W.target.value),placeholder:c===Ke.MONTHLY_CONSUMPTION?Ce.solarCalculator.consumptionPlaceholder.toLocaleString():Ce.solarCalculator.billPlaceholder.toLocaleString(),min:c===Ke.MONTHLY_CONSUMPTION?Ce.solarCalculator.minConsumption.toString():a===_t.RESIDENTIAL?Ce.solarCalculator.minBillResidential.toString():Ce.solarCalculator.minBillCommercial.toString(),max:c===Ke.MONTHLY_CONSUMPTION?Ce.solarCalculator.maxConsumption.toString():Ce.solarCalculator.maxBill.toString()}),(f.monthlyConsumption||f.monthlyBill)&&e.jsxs("p",{className:"form-error",children:[e.jsx(Lt,{className:"w-3 h-3"}),f.monthlyConsumption||f.monthlyBill]}),e.jsx("p",{className:"form-hint",children:c===Ke.MONTHLY_CONSUMPTION?i("solarCalculator.consumptionHint"):i("solarCalculator.billHint",{min:(a===_t.RESIDENTIAL?Ce.solarCalculator.minBillResidential:Ce.solarCalculator.minBillCommercial).toLocaleString()})})]}),e.jsxs("div",{className:"form-section",children:[e.jsxs("h3",{children:["4. ",i("solarCalculator.paymentPeriod")]}),e.jsx("select",{className:"form-select",value:b,onChange:W=>j(Number(W.target.value)),children:Ce.solarCalculator.installmentOptions.map(W=>e.jsxs("option",{value:W,children:[W," ",i("solarCalculator.months")]},W))})]}),e.jsx("button",{className:`calculate-btn ${_||oe()?"disabled":""}`,onClick:O,disabled:_||oe(),children:_?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner"}),e.jsx("span",{children:i("solarCalculator.calculating")})]}):e.jsxs(e.Fragment,{children:[e.jsx(Wd,{className:"w-5 h-5"}),e.jsx("span",{children:i("solarCalculator.calculateSolarSavings")})]})})]}),e.jsx("div",{className:"solar-results-side",children:R?e.jsxs("div",{className:"results-container",children:[t&&Ce.solarCalculator.enableMarketingBanner&&e.jsx("div",{className:"solar-marketing-banner",style:{position:"relative",marginBottom:"32px",background:"linear-gradient(145deg, #3eb2b1 0%, #2d9d9c 30%, #0891b2 70%, #3eb2b1 100%)",borderRadius:"24px",padding:"2px",boxShadow:"0 25px 50px rgba(62, 178, 177, 0.25)",animation:"slideInRight 0.8s ease-out"},children:e.jsxs("div",{style:{background:"linear-gradient(145deg, #ffffff 0%, #f0fdfc 50%, #ccfdf9 100%)",borderRadius:"22px",padding:"32px",position:"relative",overflow:"hidden"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"20px",position:"relative",zIndex:3},children:[e.jsxs("div",{style:{fontSize:"28px",fontWeight:"900",color:"#0f766e",lineHeight:"1.2",marginBottom:"16px"},children:["🎉 ",i("solarCalculator.results.marketing.saveMoreThan")," ",R.savingsPercentage,"%"]}),e.jsx("div",{style:{fontSize:"18px",color:"#164e63",fontWeight:"600"},children:i("solarCalculator.results.marketing.ofSystemValue")})]}),e.jsxs("div",{style:{textAlign:"center",fontSize:"18px",color:"#164e63",fontWeight:"700"},children:[i("solarCalculator.results.marketing.byPayingJust")," ",R.monthlyCostIncrease,"% ",i("solarCalculator.results.marketing.plusOnBill")," ",i("solarCalculator.results.marketing.forOnly")," ",R.numberOfInstallments," ",i("solarCalculator.results.marketing.months")]})]})}),e.jsxs("div",{className:"solar-results-grid",style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px",marginBottom:"24px",animation:"slideInRight 0.8s ease-out"},children:[e.jsxs("div",{style:{background:"linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%)",borderRadius:"16px",padding:"20px 16px",textAlign:"center"},children:[e.jsx("div",{style:{width:"48px",height:"48px",background:"#3b82f6",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px",boxShadow:"0 8px 16px rgba(59, 130, 246, 0.3)"},children:e.jsx(Ga,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#1e40af",marginBottom:"4px"},children:[R.solarPowerKWP," KWP"]}),e.jsx("div",{style:{fontSize:"16px",color:"#1e40af",fontWeight:"600"},children:i("solarCalculator.systemSize")})]}),e.jsxs("div",{style:{background:"linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%)",borderRadius:"16px",padding:"20px 16px",textAlign:"center"},children:[e.jsx("div",{style:{width:"48px",height:"48px",background:"#22c55e",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px",boxShadow:"0 8px 16px rgba(34, 197, 94, 0.3)"},children:e.jsx(Ha,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#16a34a",marginBottom:"4px"},children:["SAR ",R.systemPrice.toLocaleString()]}),e.jsx("div",{style:{fontSize:"16px",color:"#16a34a",fontWeight:"600"},children:i("solarCalculator.systemPrice")})]}),e.jsxs("div",{style:{background:"linear-gradient(135deg, #e9d5ff 0%, #ddd6fe 100%)",borderRadius:"16px",padding:"20px 16px",textAlign:"center"},children:[e.jsx("div",{style:{width:"48px",height:"48px",background:"#8b5cf6",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px",boxShadow:"0 8px 16px rgba(139, 92, 246, 0.3)"},children:e.jsx(ht,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#7c3aed",marginBottom:"4px"},children:["SAR ",R.totalMonthlyPayment.toLocaleString()]}),e.jsx("div",{style:{fontSize:"14px",color:"#7c3aed",fontWeight:"600"},children:i("solarCalculator.monthlyPayment")})]}),e.jsxs("div",{style:{background:"linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%)",borderRadius:"16px",padding:"20px 16px",textAlign:"center"},children:[e.jsx("div",{style:{width:"48px",height:"48px",background:"linear-gradient(135deg, #ec4899, #be185d)",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px",boxShadow:"0 8px 16px rgba(236, 72, 153, 0.3)"},children:e.jsx(W1,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#be185d",marginBottom:"4px"},children:[R.savingsPercentage,"%"]}),e.jsx("div",{style:{fontSize:"16px",color:"#be185d",fontWeight:"600"},children:i("solarCalculator.lifetimeSavings")})]}),e.jsxs("div",{style:{background:"linear-gradient(135deg, #fed7aa 0%, #fdba74 100%)",borderRadius:"16px",padding:"20px 16px",textAlign:"center"},children:[e.jsx("div",{style:{width:"48px",height:"48px",background:"#f97316",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px",boxShadow:"0 8px 16px rgba(249, 115, 22, 0.3)"},children:e.jsx(gt,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#ea580c",marginBottom:"4px"},children:["SAR ",R.currentMonthlyBill.toLocaleString()]}),e.jsx("div",{style:{fontSize:"16px",color:"#ea580c",fontWeight:"600"},children:i("solarCalculator.averageElectricityBill")})]}),e.jsxs("div",{style:{background:"linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)",borderRadius:"16px",padding:"20px 16px",textAlign:"center"},children:[e.jsx("div",{style:{width:"48px",height:"48px",background:"#eab308",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px",boxShadow:"0 8px 16px rgba(234, 179, 8, 0.3)"},children:e.jsx(Nd,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#a16207",marginBottom:"4px"},children:[R.monthlyProduction.toLocaleString()," KWH"]}),e.jsx("div",{style:{fontSize:"16px",color:"#a16207",fontWeight:"600"},children:i("solarCalculator.averageMonthlyProduction")})]})]}),e.jsx("div",{style:{display:"flex",justifyContent:"center",animation:"fadeInUp 0.8s ease-out 0.8s both"},children:e.jsxs("button",{style:{padding:"18px 48px",background:"linear-gradient(135deg, #3eb2b1 0%, #2d9d9c 100%)",color:"white",border:"none",borderRadius:"16px",cursor:"pointer",fontSize:"18px",fontWeight:"700",boxShadow:"0 12px 28px rgba(62, 178, 177, 0.4)",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx(Ne,{className:"w-6 h-6"}),i("solarCalculator.getQuote")," →"]})})]}):C?e.jsxs("div",{style:{padding:"40px",textAlign:"center",backgroundColor:"#fef2f2",borderRadius:"12px",border:"2px solid #fecaca"},children:[e.jsx(Lt,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),e.jsx("p",{style:{color:"#dc2626",fontSize:"16px",marginBottom:"8px",fontWeight:"600"},children:C}),e.jsx("p",{style:{color:"#991b1b",fontSize:"14px"},children:i("solarCalculator.validationError")})]}):e.jsxs("div",{style:{padding:"40px",textAlign:"center",backgroundColor:"#f9fafb",borderRadius:"12px",border:"2px dashed #d1d5db"},children:[e.jsx(Ga,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{style:{color:"#6b7280",fontSize:"16px",marginBottom:"8px"},children:i("solarCalculator.enterDetails")}),e.jsx("p",{style:{color:"#9ca3af",fontSize:"14px"},children:i("solarCalculator.resultsWillAppear")})]})})]})})},uv=({user:r,onLogout:t,initialActiveItem:o="dashboard"})=>{const{t:s,i18n:i}=ve(),a=Be(),l=Xr(),c=i.language==="ar",[p,d]=y.useState(o),[m,u]=y.useState(window.innerWidth>=1024),[h,b]=y.useState([]);y.useEffect(()=>{const w=()=>{u(window.innerWidth>=1024)};return window.addEventListener("resize",w),()=>window.removeEventListener("resize",w)},[]),y.useEffect(()=>{const w=l.pathname;w==="/dashboard/profile"?d("profile"):w==="/dashboard/settings"?d("settings"):w==="/dashboard/documents"?d("documents"):w==="/dashboard/quotes"?d("quotes"):w==="/dashboard/marketplace"||w.startsWith("/dashboard/marketplace/product/")||w==="/dashboard/checkout"?d("marketplace"):w==="/dashboard"&&d("dashboard")},[l.pathname]);const j=(w,O=1)=>{b(V=>V.find(Q=>Q.product.id===w.id)?V.map(Q=>Q.product.id===w.id?{...Q,quantity:Q.quantity+O}:Q):[...V,{product:w,quantity:O}]),console.log(`🛒 Added ${O} x ${w.name} to cart`)},_=w=>{b(O=>O.filter(V=>V.product.id!==w))},S=(w,O)=>{if(O<=0){_(w);return}b(V=>V.map(re=>re.product.id===w?{...re,quantity:O}:re))},R=()=>h.reduce((w,O)=>w+O.quantity,0),I=()=>h.reduce((w,O)=>w+(parseFloat(O.product.price)||0)*O.quantity,0),C=()=>{b([]),console.log("🛒 Cart cleared")},f=r.first_name&&r.last_name?`${r.first_name} ${r.last_name}`:r.first_name?r.first_name:r.last_name?r.last_name:r.email.split("@")[0];r.role==="CONTRACTOR"?s("auth.userTypes.CONTRACTOR"):s("auth.userTypes.USER");const P=w=>{switch(d(w),w){case"profile":a("/dashboard/profile");break;case"settings":a("/dashboard/settings");break;case"documents":a("/dashboard/documents");break;case"quotes":a("/dashboard/quotes");break;case"marketplace":a("/dashboard/marketplace");break;case"dashboard":a("/dashboard");break}};return e.jsxs("div",{style:{minHeight:"100vh",background:n.colors.gradients.primaryLight,color:n.colors.text.primary,fontFamily:n.typography.fonts.primary,direction:c?"rtl":"ltr"},children:[e.jsx(hg,{user:r,onLogout:t,activeItem:p,onItemClick:P}),e.jsxs("main",{style:{minHeight:"100vh",marginLeft:c?"0":m?"280px":"0",marginRight:c&&m?"280px":"0",padding:m?"1.5rem":"4.5rem 1rem 1.5rem 1rem",boxSizing:"border-box",width:m?"calc(100% - 280px)":"100%",transition:n.transitions.normal},children:[p==="profile"&&e.jsx(Ka,{user:r,onUpdate:(w,O)=>{console.log("Profile section updated:",w,O)}}),p==="settings"&&e.jsx(Ka,{user:r,onUpdate:(w,O)=>{console.log("Profile section updated:",w,O)}}),p==="dashboard"&&e.jsxs("div",{style:{textAlign:"center",padding:"4rem 2rem",color:"#6b7280"},children:[e.jsx("h1",{style:{fontSize:"2rem",fontWeight:"700",color:"#1a1a1a",marginBottom:"1rem"},children:s("userApp.sidebar.dashboard")}),e.jsx("p",{children:s("userApp.welcome.title",{name:f})})]}),p==="calculator"&&e.jsx(ii,{variant:"dashboard",showMarketing:!1,onCalculationComplete:w=>{console.log("Solar calculation completed:",w)},className:"dashboard-calculator"}),p==="financing"&&r.role==="USER"&&e.jsxs("div",{style:{textAlign:"center",padding:"4rem 2rem",color:"#6b7280"},children:[e.jsx("h1",{style:{fontSize:"2rem",fontWeight:"700",color:"#1a1a1a",marginBottom:"1rem"},children:s("userApp.sidebar.financing")}),e.jsx("p",{children:"Financing options will be displayed here"})]}),p==="projects"&&r.role==="CONTRACTOR"&&e.jsxs("div",{style:{textAlign:"center",padding:"4rem 2rem",color:"#6b7280"},children:[e.jsx("h1",{style:{fontSize:"2rem",fontWeight:"700",color:"#1a1a1a",marginBottom:"1rem"},children:s("userApp.sidebar.projects")}),e.jsx("p",{children:"Projects will be displayed here"})]}),p==="marketplace"&&(l.pathname==="/dashboard/checkout"?e.jsx(J2,{user:r,cart:h,getTotalCartItems:R,getTotalCartValue:I,clearCart:C}):l.pathname.startsWith("/dashboard/marketplace/product/")?e.jsx(Z2,{user:r,cart:h,addToCart:j,removeFromCart:_,updateCartQuantity:S,getTotalCartItems:R,getTotalCartValue:I}):e.jsx(X2,{user:r,cart:h,addToCart:j,removeFromCart:_,updateCartQuantity:S,getTotalCartItems:R,getTotalCartValue:I})),p==="quotes"&&r.role==="USER"&&e.jsx(lv,{user:r}),p==="documents"&&e.jsx(Yd,{userType:r.role})]})]})},mv=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("polyline",{points:"9,22 9,12 15,12 15,22",stroke:"currentColor",strokeWidth:"2",fill:"none"})]}),gv=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("polyline",{points:"14,2 14,8 20,8",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),hv=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("path",{d:"M16 10a4 4 0 0 1-8 0",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})]}),fv=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M9 11H7a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2v-5a2 2 0 0 0-2-2z",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("path",{d:"M17 11h-2a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2v-5a2 2 0 0 0-2-2z",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("path",{d:"M7 16c0-1.5-0.67-2.5-2-3s-2-1.5-2-3 0.67-2.5 2-3 2-1.5 2-3",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("path",{d:"M17 16c0-1.5 0.67-2.5 2-3s2-1.5 2-3-0.67-2.5-2-3-2-1.5-2-3",stroke:"currentColor",strokeWidth:"2",fill:"none"})]}),yv=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M21 12V7a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-5z",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("path",{d:"M3 10h18",stroke:"currentColor",strokeWidth:"2"}),e.jsx("circle",{cx:"7",cy:"15",r:"1",fill:"currentColor"})]}),xv=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("polyline",{points:"13,2 13,9 20,9",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("line",{x1:"8",y1:"13",x2:"16",y2:"13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"8",y1:"17",x2:"16",y2:"17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),al=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("circle",{cx:"12",cy:"7",r:"4",stroke:"currentColor",strokeWidth:"2",fill:"none"})]}),bv=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("polyline",{points:"16,17 21,12 16,7",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),vv=()=>e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("polyline",{points:"6,9 12,15 18,9",stroke:"currentColor",strokeWidth:"2",fill:"none"})}),wv=({user:r,onLogout:t,activeItem:o="dashboard",onItemClick:s})=>{const{t:i,i18n:a}=ve(),l=a.language,c=l==="ar",[p,d]=y.useState(!1),[m,u]=y.useState(window.innerWidth>=1024),[h,b]=y.useState(!1),j=y.useRef(null);y.useEffect(()=>{const W=()=>{const L=window.innerWidth>=1024;u(L),L&&d(!1)},$=L=>{j.current&&!j.current.contains(L.target)&&b(!1)};return window.addEventListener("resize",W),document.addEventListener("mousedown",$),()=>{window.removeEventListener("resize",W),document.removeEventListener("mousedown",$)}},[]);const _=()=>{if(r.business_name){const W=r.business_name.split(" ");return W.length>=2?`${W[0].charAt(0)}${W[1].charAt(0)}`.toUpperCase():r.business_name.substring(0,2).toUpperCase()}else return r.first_name&&r.last_name?`${r.first_name.charAt(0)}${r.last_name.charAt(0)}`.toUpperCase():r.first_name?r.first_name.charAt(0).toUpperCase():r.email.charAt(0).toUpperCase()},R=(()=>{const W=[r.business_name,r.business_type,r.email,r.first_name,r.last_name,r.verification_level?r.verification_level>0:!1,r.status==="active"],$=W.filter(L=>L&&(typeof L=="boolean"?L:L.toString().trim()!=="")).length;return Math.round($/W.length*100)})(),I=R===100,C=I?1:.5,z=28,f=2*Math.PI*z,P=f,w=f-f*R/100,O=()=>r.business_name?r.business_name:r.first_name&&r.last_name?`${r.first_name} ${r.last_name}`:r.first_name?r.first_name:r.email.split("@")[0],V=[{key:"dashboard",translationKey:"contractorApp.sidebar.dashboard",icon:e.jsx(mv,{})},{key:"projects",translationKey:"contractorApp.sidebar.projects",icon:e.jsx(gv,{})},{key:"quotes",translationKey:"contractorApp.sidebar.quotes",icon:e.jsx(fv,{})},{key:"marketplace",translationKey:"contractorApp.sidebar.marketplace",icon:e.jsx(hv,{})},{key:"wallet",translationKey:"contractorApp.sidebar.wallet",icon:e.jsx(yv,{})},{key:"documents",translationKey:"contractorApp.sidebar.documents",icon:e.jsx(xv,{})},{key:"profile",translationKey:"contractorApp.sidebar.profile",icon:e.jsx(al,{})}],re=Be(),Q=W=>{if(W==="settings"){b(!h);return}s?.(W),d(!1)},oe=()=>{re("/contractor/profile"),b(!1)},K=()=>{b(!1),t()},Y={sidebar:{position:"fixed",top:0,[c?"right":"left"]:0,height:"100vh",width:"280px",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",borderRight:c?"none":"1px solid rgba(62, 178, 177, 0.2)",borderLeft:c?"1px solid rgba(62, 178, 177, 0.2)":"none",boxShadow:c?"-8px 0 32px rgba(62, 178, 177, 0.15)":"8px 0 32px rgba(62, 178, 177, 0.15)",display:"flex",flexDirection:"column",zIndex:1e3,transform:m||p?"translateX(0)":"translateX(-100%)",transition:n.transitions.normal},logo:{padding:"1.5rem",borderBottom:"1px solid rgba(62, 178, 177, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"0.5rem"},logoIcon:{width:"120px",height:"60px",backgroundImage:"url(/rabhan_logo.svg)",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"},contractorBadge:{padding:"0.25rem 0.75rem",background:"linear-gradient(135deg, rgba(62, 178, 177, 0.2) 0%, rgba(34, 211, 219, 0.2) 100%)",color:n.colors.primary,borderRadius:"20px",fontSize:"0.75rem",fontWeight:"600",textTransform:"uppercase"},nav:{flex:1,padding:"1rem 0",overflowY:"auto"},menuItem:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.875rem 1.5rem",margin:"0.25rem 1rem",borderRadius:"12px",cursor:"pointer",transition:n.transitions.fast,fontSize:"0.875rem",fontWeight:"500",color:"#6b7280",textDecoration:"none",border:"none",background:"transparent",width:"calc(100% - 2rem)",textAlign:c?"right":"left"},menuItemActive:{background:"linear-gradient(135deg, rgba(62, 178, 177, 0.15) 0%, rgba(34, 211, 219, 0.15) 100%)",color:"#3eb2b1",fontWeight:"600",boxShadow:"0 2px 8px rgba(62, 178, 177, 0.2)"},menuItemHover:{background:"rgba(62, 178, 177, 0.1)",color:"#3eb2b1"},menuIcon:{width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center"},userSection:{padding:"1rem 1.5rem 1.5rem 1.5rem",borderTop:"1px solid rgba(62, 178, 177, 0.2)",position:"relative"},userButton:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"1rem",background:"rgba(62, 178, 177, 0.1)",borderRadius:"16px",width:"100%",border:"none",cursor:"pointer",transition:n.transitions.fast,textAlign:c?"right":"left"},userAvatarWrapper:{position:"relative",width:"64px",height:"64px",display:"flex",alignItems:"center",justifyContent:"center"},progressRing:{position:"absolute",top:0,left:0,transform:"rotate(-90deg)"},userAvatar:{width:"48px",height:"48px",background:"linear-gradient(135deg, #3eb2b1 0%, #22d3db 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.25rem",fontWeight:"600",color:"#ffffff",boxShadow:"0 4px 12px rgba(62, 178, 177, 0.3)",position:"relative",zIndex:1},userInfo:{flex:1,minWidth:0,textAlign:c?"right":"left"},userName:{fontSize:"0.875rem",fontWeight:"600",color:"#1a1a1a",marginBottom:"0.25rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},userEmail:{fontSize:"0.75rem",color:"#6b7280",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},chevron:{color:"#6b7280",transition:n.transitions.fast,transform:h?"rotate(180deg)":"rotate(0deg)"},dropdown:{position:"absolute",bottom:"100%",left:"1.5rem",right:"1.5rem",background:"rgba(255, 255, 255, 0.98)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",borderRadius:"16px",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.15)",border:"1px solid rgba(62, 178, 177, 0.2)",padding:"0.5rem",opacity:h?1:0,visibility:h?"visible":"hidden",transform:h?"translateY(-8px)":"translateY(8px)",transition:n.transitions.normal,zIndex:1001},dropdownItem:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",borderRadius:"12px",cursor:"pointer",transition:n.transitions.fast,fontSize:"0.875rem",fontWeight:"500",color:"#6b7280",width:"100%",border:"none",background:"transparent",textAlign:c?"right":"left"},profileItem:{color:"#3eb2b1"},logoutItem:{color:"#ef4444"},dropdownItemHover:{background:"rgba(62, 178, 177, 0.1)"},overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",zIndex:999,display:p?"block":"none"},mobileToggle:{position:"fixed",top:"1rem",[c?"right":"left"]:"1rem",width:"48px",height:"48px",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:"1px solid rgba(62, 178, 177, 0.2)",borderRadius:"12px",display:m?"none":"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"1.25rem",zIndex:1001,boxShadow:"0 4px 12px rgba(62, 178, 177, 0.2)",transition:n.transitions.fast}};return e.jsxs(e.Fragment,{children:[e.jsx("button",{style:Y.mobileToggle,onClick:()=>d(!p),"aria-label":"Toggle menu",children:p?"✕":"☰"}),e.jsx("div",{style:Y.overlay,onClick:()=>d(!1)}),e.jsxs("aside",{style:{...Y.sidebar,direction:c?"rtl":"ltr"},children:[e.jsxs("div",{style:Y.logo,children:[e.jsx("div",{style:{...Y.logoIcon,backgroundImage:l==="ar"?"url(/assets/logo_arabic.jpeg)":"url(/rabhan_logo.svg)"}}),e.jsx("div",{style:Y.contractorBadge,children:i("contractorApp.badge.contractor")})]}),e.jsx("nav",{style:Y.nav,children:V.map(W=>e.jsxs("button",{style:{...Y.menuItem,...o===W.key?Y.menuItemActive:{}},onClick:()=>Q(W.key),onMouseEnter:$=>{o!==W.key&&Object.assign($.currentTarget.style,Y.menuItemHover)},onMouseLeave:$=>{o!==W.key&&Object.assign($.currentTarget.style,{background:"transparent",color:"#6b7280"})},children:[e.jsx("span",{style:Y.menuIcon,children:W.icon}),i(W.translationKey)]},W.key))}),e.jsxs("div",{style:Y.userSection,ref:j,children:[h&&e.jsxs("div",{style:Y.dropdown,children:[e.jsxs("button",{style:{...Y.dropdownItem,...Y.profileItem},onClick:oe,onMouseEnter:W=>{Object.assign(W.currentTarget.style,Y.dropdownItemHover)},onMouseLeave:W=>{Object.assign(W.currentTarget.style,{background:"transparent"})},children:[e.jsx("span",{style:Y.menuIcon,children:e.jsx(al,{})}),i("contractorApp.sidebar.profile")]}),e.jsxs("button",{style:{...Y.dropdownItem,...Y.logoutItem},onClick:K,onMouseEnter:W=>{Object.assign(W.currentTarget.style,{...Y.dropdownItemHover,background:"rgba(239, 68, 68, 0.1)"})},onMouseLeave:W=>{Object.assign(W.currentTarget.style,{background:"transparent"})},children:[e.jsx("span",{style:Y.menuIcon,children:e.jsx(bv,{})}),i("contractorApp.sidebar.logout")]})]}),e.jsxs("button",{style:Y.userButton,onClick:()=>b(!h),onMouseEnter:W=>{Object.assign(W.currentTarget.style,{background:"rgba(62, 178, 177, 0.15)",transform:"translateY(-2px)",boxShadow:"0 4px 12px rgba(62, 178, 177, 0.2)"})},onMouseLeave:W=>{Object.assign(W.currentTarget.style,{background:"rgba(62, 178, 177, 0.1)",transform:"translateY(0)",boxShadow:"none"})},children:[e.jsxs("div",{style:Y.userAvatarWrapper,children:[e.jsxs("svg",{style:Y.progressRing,width:"64",height:"64",children:[e.jsx("circle",{cx:"32",cy:"32",r:z,stroke:"rgba(0, 0, 0, 0.1)",strokeWidth:"3",fill:"none"}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"contractorProgressGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#3eb2b1",stopOpacity:C}),e.jsx("stop",{offset:"100%",stopColor:"#22d3db",stopOpacity:C})]})}),e.jsx("circle",{cx:"32",cy:"32",r:z,stroke:"url(#contractorProgressGradient)",strokeWidth:"3",fill:"none",strokeDasharray:`${P}`,strokeDashoffset:w,strokeLinecap:"round",style:{transition:"stroke-dashoffset 0.5s ease-out, opacity 0.3s ease-out",...I?{}:{strokeDasharray:"5 3"}}})]}),e.jsx("div",{style:Y.userAvatar,children:_()})]}),e.jsxs("div",{style:Y.userInfo,children:[e.jsx("div",{style:Y.userName,children:O()}),e.jsx("div",{style:Y.userEmail,children:r.email})]}),e.jsx("div",{style:Y.chevron,children:e.jsx(vv,{})})]})]})]})]})},jv=({options:r,value:t=[],onChange:o,placeholder:s,disabled:i=!1,error:a=!1,maxHeight:l=200,searchable:c=!0,clearable:p=!0,maxSelections:d,className:m="",label:u,required:h=!1})=>{const{t:b,i18n:j}=ve(),_=j.language==="ar",[S,R]=y.useState(!1),[I,C]=y.useState(""),[z,f]=y.useState(window.innerWidth<768),P=y.useRef(null),w=y.useRef(null);y.useEffect(()=>{const k=()=>f(window.innerWidth<768);return window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[]),y.useEffect(()=>{const k=v=>{P.current&&!P.current.contains(v.target)&&(R(!1),C(""))};return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]);const O=c?r.filter(k=>k.label.toLowerCase().includes(I.toLowerCase())||k.value.toLowerCase().includes(I.toLowerCase())):r,V=t.map(k=>r.find(v=>v.value===k)?.label).filter(Boolean),re=y.useCallback(k=>{if(i)return;const v=t.includes(k);let g;if(v)g=t.filter(A=>A!==k);else{if(d&&t.length>=d)return;g=[...t,k]}o(g)},[t,o,i,d]),Q=y.useCallback(()=>{!i&&p&&o([])},[o,i,p]),oe=y.useCallback(()=>{i||(R(!S),!S&&c&&setTimeout(()=>w.current?.focus(),100))},[i,S,c]),K=y.useCallback((k,v)=>{v.stopPropagation(),i||re(k)},[i,re]),Y={container:{position:"relative",width:"100%",fontFamily:n.typography.fontFamily,direction:_?"rtl":"ltr"},label:{display:"block",fontSize:n.typography.sizes.sm,fontWeight:n.typography.weights.medium,color:n.colors.text.primary,marginBottom:n.spacing[2],fontFamily:n.typography.fontFamily},trigger:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:n.spacing[3],border:`2px solid ${a?n.colors.semantic.error.main:n.colors.borders.light}`,borderRadius:n.radius.md,backgroundColor:i?n.colors.backgrounds.disabled:n.colors.backgrounds.primary,cursor:i?"not-allowed":"pointer",minHeight:n.accessibility.minTouchTarget,transition:n.transitions.normal,outline:"none",position:"relative",...S&&!i&&{borderColor:n.colors.primary[500],boxShadow:`0 0 0 3px ${n.colors.primary[100]}`},"&:focus":{borderColor:n.colors.borders.focus,boxShadow:`0 0 0 ${n.accessibility.focusRing.width} ${n.accessibility.focusRing.color}`}},triggerContent:{display:"flex",flexWrap:"wrap",gap:n.spacing[1],flex:1,alignItems:"center",minHeight:"24px"},selectedTag:{display:"inline-flex",alignItems:"center",gap:n.spacing[1],backgroundColor:n.colors.primary[500],color:n.colors.backgrounds.primary,padding:`${n.spacing[1]} ${n.spacing[2]}`,borderRadius:n.radius.sm,fontSize:n.typography.sizes.xs,fontWeight:n.typography.weights.medium,maxWidth:z?"120px":"150px",transition:n.transitions.fast,cursor:i?"default":"pointer"},tagText:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1},removeTag:{display:"flex",alignItems:"center",justifyContent:"center",width:"16px",height:"16px",borderRadius:n.radius.full,backgroundColor:"rgba(255, 255, 255, 0.2)",cursor:i?"default":"pointer",fontSize:"10px",transition:n.transitions.fast,"&:hover":i?{}:{backgroundColor:"rgba(255, 255, 255, 0.3)",transform:"scale(1.1)"}},placeholder:{color:n.colors.text.placeholder,fontSize:n.typography.sizes.sm,fontStyle:"italic",userSelect:"none"},controls:{display:"flex",alignItems:"center",gap:n.spacing[2],marginLeft:_?"0":n.spacing[2],marginRight:_?n.spacing[2]:"0",flexShrink:0},clearButton:{display:"flex",alignItems:"center",justifyContent:"center",width:"20px",height:"20px",borderRadius:n.radius.full,backgroundColor:n.colors.neutral[200],cursor:i?"default":"pointer",fontSize:"12px",color:n.colors.text.secondary,transition:n.transitions.fast,opacity:i?.5:1,"&:hover":i?{}:{backgroundColor:n.colors.neutral[300],color:n.colors.text.primary,transform:"scale(1.1)"}},chevron:{width:"20px",height:"20px",color:n.colors.text.secondary,transition:n.transitions.normal,transform:S?"rotate(180deg)":"rotate(0deg)",opacity:i?.5:1},dropdown:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:n.colors.backgrounds.primary,border:`1px solid ${n.colors.borders.light}`,borderRadius:n.radius.md,boxShadow:n.shadows.lg,zIndex:n.zIndex.dropdown,marginTop:n.spacing[1],overflow:"hidden",...z&&{position:"fixed",top:"auto",bottom:n.spacing[4],left:n.spacing[4],right:n.spacing[4],zIndex:n.zIndex.modal,borderRadius:n.radius.lg,maxHeight:"60vh"}},searchInput:{width:"100%",padding:n.spacing[3],border:"none",borderBottom:`1px solid ${n.colors.borders.light}`,fontSize:n.typography.sizes.sm,outline:"none",fontFamily:n.typography.fontFamily,backgroundColor:n.colors.backgrounds.primary,color:n.colors.text.primary,direction:_?"rtl":"ltr","&::placeholder":{color:n.colors.text.placeholder,fontStyle:"italic"}},optionsList:{maxHeight:z?"calc(60vh - 60px)":`${l}px`,overflowY:"auto",padding:n.spacing[1]},option:{display:"flex",alignItems:"center",padding:n.spacing[3],cursor:"pointer",transition:n.transitions.fast,borderRadius:n.radius.sm,margin:`${n.spacing[1]} 0`,fontSize:n.typography.sizes.sm,fontFamily:n.typography.fontFamily,direction:_?"rtl":"ltr",minHeight:n.accessibility.minTouchTarget,gap:n.spacing[3],userSelect:"none"},optionSelected:{backgroundColor:`${n.colors.primary[500]}10`,color:n.colors.primary[600],fontWeight:n.typography.weights.medium},optionHover:{backgroundColor:n.colors.backgrounds.hover},checkbox:{width:"18px",height:"18px",borderRadius:n.radius.sm,border:`2px solid ${n.colors.borders.medium}`,display:"flex",alignItems:"center",justifyContent:"center",transition:n.transitions.fast,flexShrink:0},checkboxChecked:{backgroundColor:n.colors.primary[500],borderColor:n.colors.primary[500],color:n.colors.backgrounds.primary},checkmark:{width:"10px",height:"10px",fill:"currentColor"},mobileOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:n.zIndex.overlay,backdropFilter:n.backdropFilters.blur},selectionCount:{fontSize:n.typography.sizes.xs,color:n.colors.text.secondary,fontWeight:n.typography.weights.medium,backgroundColor:n.colors.neutral[100],padding:`${n.spacing[1]} ${n.spacing[2]}`,borderRadius:n.radius.full,whiteSpace:"nowrap"}},W=s||b("common.selectOptions")||"Select options...",$=b("common.noOptions")||"No options available",L=b("common.searchOptions")||"Search options...";return e.jsxs("div",{style:Y.container,className:m,ref:P,children:[u&&e.jsxs("label",{style:Y.label,children:[u,h&&e.jsx("span",{style:{color:n.colors.semantic.error.main},children:"*"})]}),e.jsxs("div",{style:Y.trigger,onClick:oe,role:"button",tabIndex:i?-1:0,"aria-expanded":S,"aria-haspopup":"listbox","aria-label":u||W,onKeyDown:k=>{(k.key==="Enter"||k.key===" ")&&(k.preventDefault(),oe())},children:[e.jsx("div",{style:Y.triggerContent,children:t.length===0?e.jsx("span",{style:Y.placeholder,children:W}):e.jsxs(e.Fragment,{children:[V.slice(0,z?2:3).map((k,v)=>{const g=t[v];return e.jsxs("span",{style:Y.selectedTag,children:[e.jsx("span",{style:Y.tagText,children:k}),!i&&e.jsx("button",{style:Y.removeTag,onClick:A=>K(g,A),"aria-label":b("common.remove")||"Remove",type:"button",children:"×"})]},g)}),t.length>(z?2:3)&&e.jsxs("span",{style:Y.selectionCount,children:["+",t.length-(z?2:3)," ",b("common.more")||"more"]})]})}),e.jsxs("div",{style:Y.controls,children:[p&&t.length>0&&e.jsx("button",{style:Y.clearButton,onClick:k=>{k.stopPropagation(),Q()},"aria-label":b("common.clearAll")||"Clear all",type:"button",children:"×"}),e.jsx("svg",{style:Y.chevron,viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]})]}),S&&e.jsxs(e.Fragment,{children:[z&&e.jsx("div",{style:Y.mobileOverlay,onClick:()=>R(!1)}),e.jsxs("div",{style:Y.dropdown,children:[c&&e.jsx("input",{ref:w,style:Y.searchInput,type:"text",placeholder:L,value:I,onChange:k=>C(k.target.value),onClick:k=>k.stopPropagation()}),e.jsx("div",{style:Y.optionsList,children:O.length===0?e.jsx("div",{style:{...Y.option,cursor:"default",color:n.colors.text.secondary},children:I?b("common.noResultsFound")||"No results found":$}):O.map(k=>{const v=t.includes(k.value),g=d&&t.length>=d&&!v;return e.jsxs("div",{style:{...Y.option,...v?Y.optionSelected:{},...g?{opacity:.5,cursor:"not-allowed"}:{}},onClick:()=>!g&&re(k.value),onMouseEnter:A=>{g||Object.assign(A.currentTarget.style,Y.optionHover)},onMouseLeave:A=>{v||(A.currentTarget.style.backgroundColor="transparent")},role:"option","aria-selected":v,children:[e.jsx("div",{style:{...Y.checkbox,...v?Y.checkboxChecked:{}},children:v&&e.jsx("svg",{style:Y.checkmark,viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsx("span",{children:k.label})]},k.value)})})]})]})]})},Sv=({user:r,onUpdate:t})=>{const{t:o,i18n:s}=ve(),i=s.language==="ar",[a,l]=y.useState("profile"),[c,p]=y.useState(null),[d,m]=y.useState(r),[u,h]=y.useState(null),[b,j]=y.useState(!0),[_,S]=y.useState("not_verified"),[R,I]=y.useState(!0),[C,z]=y.useState(r),[f,P]=y.useState(null);y.useEffect(()=>xe.subscribe(T=>{T.user&&(console.log("🔄 Contractor data updated from auth service:",T.user),m(T.user),z(T.user))}),[]),y.useEffect(()=>{const D=async()=>{try{j(!0),console.log("📥 Loading contractor profile...");const T=await xt.getProfile();if(T.success&&T.profile){if(console.log("✅ Contractor profile loaded successfully:",T.profile),h(T.profile),P(T.profile),T.profile.verification_level!==void 0){const G=T.profile.verification_level>0?"verified":"not_verified";console.log("🔍 Updating verification status from profile:",G),S(G)}}else console.log("⚠️ No contractor profile found - will use lazy creation"),h(null)}catch(T){console.error("❌ Failed to load contractor profile:",T),h(null)}finally{j(!1),I(!1)}};d.id&&D()},[d.id]);const O=(()=>{const D=[{field:C.company_name,label:"company_name"},{field:C.email,label:"email"},{field:C.phone,label:"phone"},{field:f?.business_name,label:"business_name"},{field:f?.contact_person,label:"contact_person"},{field:f?.business_phone,label:"business_phone"},{field:f?.business_email,label:"business_email"},{field:f?.commercial_registration,label:"commercial_registration"},{field:f?.vat_number,label:"vat_number"},{field:f?.business_type,label:"business_type"},{field:f?.established_year,label:"established_year"},{field:f?.address_line1,label:"address_line1"},{field:f?.city,label:"city"},{field:f?.postal_code,label:"postal_code"},{field:f?.years_experience,label:"years_experience"},{field:f?.service_areas,label:"service_areas"}],T=D.map(F=>F.field),G=T.filter(F=>F!=null&&F!==""&&(Array.isArray(F)?F.length>0:!0)).length,ne=G/T.length*80,se=[{field:f?.description,label:"description"},{field:f?.description_ar,label:"description_ar"},{field:f?.website,label:"website"},{field:f?.social_media_links,label:"social_media_links"},{field:f?.team_size,label:"team_size"},{field:f?.specializations,label:"specializations"}],E=se.map(F=>F.field),x=E.filter(F=>F!=null&&F!==""&&(Array.isArray(F)?F.length>0:!0)).length,B=x/E.length*20;return console.log("📊 Business Profile Completion Debug:"),console.log("Essential Fields (80% weight):"),D.forEach(({field:F,label:Z})=>{const le=F!=null&&F!==""&&(Array.isArray(F)?F.length>0:!0);console.log(`  ${le?"✅":"❌"} ${Z}:`,F)}),console.log(`Essential: ${G}/${T.length} = ${ne.toFixed(1)}%`),console.log("Optional Fields (20% weight):"),se.forEach(({field:F,label:Z})=>{const le=F!=null&&F!==""&&(Array.isArray(F)?F.length>0:!0);console.log(`  ${le?"✅":"❌"} ${Z}:`,F)}),console.log(`Optional: ${x}/${E.length} = ${B.toFixed(1)}%`),console.log(`Total: ${ne.toFixed(1)}% + ${B.toFixed(1)}% = ${(ne+B).toFixed(1)}%`),Math.round(ne+B)})(),[V,re]=y.useState(window.innerWidth<768),[Q,oe]=y.useState(window.innerWidth>=768&&window.innerWidth<1200),[K,Y]=y.useState(window.innerWidth>=1200),[W,$]=y.useState(!1),[L,k]=y.useState({}),[v,g]=y.useState(""),[A,ee]=y.useState({}),{getCurrentLocation:U,loading:q,error:ie,clearError:ce}=ql({enableHighAccuracy:!0,timeout:1e4,maximumAge:6e5});y.useEffect(()=>{const D=()=>{const T=window.innerWidth;re(T<768),oe(T>=768&&T<1200),Y(T>=1200)};return window.addEventListener("resize",D),()=>window.removeEventListener("resize",D)},[]);const J=y.useCallback(D=>{if(!D||D==="")return[];if(Array.isArray(D))return D;if(typeof D=="string")try{const T=JSON.parse(D);return Array.isArray(T)?T:[]}catch{let T=D.trim();return T.startsWith("{")&&T.endsWith("}")&&(T=T.slice(1,-1)),T?T.split(",").map(G=>G.trim()).filter(G=>G):[]}return[]},[]);y.useEffect(()=>{if(u){console.log("🔄 Syncing formData with updated contractorProfile:",u),console.log("🔍 Current formData before sync:",X);const D={...X,profile:{...X.profile,company_name:u.business_name||"",cr_number:u.commercial_registration||"",vat_number:u.vat_number||"",business_type:u.business_type||""},business:{business_name:u.business_name||"",business_name_ar:u.business_name_ar||"",business_type:u.business_type||"",commercial_registration:u.commercial_registration||"",vat_number:u.vat_number||"",established_year:u.established_year?.toString()||"",employee_count:u.employee_count?.toString()||"",description:u.description||"",description_ar:u.description_ar||""},contact:{phone:u.phone||"",whatsapp:u.whatsapp||"",website:u.website||""},address:{address_line1:u.address_line1||"",address_line2:u.address_line2||"",city:u.city||"",region:u.region||"",postal_code:u.postal_code||"",latitude:u.latitude?.toString()||"",longitude:u.longitude?.toString()||""},services:{service_categories:J(u.service_categories),service_areas:J(u.service_areas),years_experience:u.years_experience?.toString()||"",contractor_type:u.contractor_type||"full_solar_contractor",can_install:u.can_install??!0,can_supply_only:u.can_supply_only??!1},preferences:{preferred_language:d.preferred_language||s.language||"ar",email_notifications:d.email_notifications??!0,sms_notifications:d.sms_notifications??!0,marketing_consent:d.marketing_consent??!1}};console.log("🔄 Setting new formData:",D),console.log("🔍 Profile company_name will be:",D.profile.company_name),console.log("🔍 Profile business_type will be:",D.profile.business_type),console.log("🔍 Business business_name will be:",D.business.business_name),console.log("🔍 Business business_type will be:",D.business.business_type),console.log("🔍 Contact phone will be:",D.contact.phone),console.log("🔍 Contact whatsapp will be:",D.contact.whatsapp),console.log("🔍 Contact website will be:",D.contact.website),console.log("🔍 Services service_categories will be:",D.services.service_categories),console.log("🔍 Services service_areas will be:",D.services.service_areas),console.log("🔍 Contact website will be:",D.contact.website),ae(D)}},[u,d]);const[X,ae]=y.useState({profile:{first_name:d?.first_name||d?.firstName||"",last_name:d?.last_name||d?.lastName||"",company_name:d?.company_name||"",cr_number:d?.cr_number||"",vat_number:d?.vat_number||"",business_type:d?.business_type||d?.userType||""},business:{business_name:u?.business_name||"",business_name_ar:u?.business_name_ar||"",business_type:u?.business_type||"",commercial_registration:u?.commercial_registration||"",vat_number:u?.vat_number||"",established_year:u?.established_year||"",employee_count:u?.employee_count||"",description:u?.description||"",description_ar:u?.description_ar||""},contact:{phone:u?.phone||"",whatsapp:u?.whatsapp||"",website:u?.website||""},address:{address_line1:u?.address_line1||"",address_line2:u?.address_line2||"",city:u?.city||"",region:u?.region||"",postal_code:u?.postal_code||"",latitude:u?.latitude||"",longitude:u?.longitude||""},services:{service_categories:J(u?.service_categories),service_areas:J(u?.service_areas),years_experience:u?.years_experience||"",contractor_type:u?.contractor_type||"full_solar_contractor",can_install:u?.can_install??!0,can_supply_only:u?.can_supply_only??!1},preferences:{preferred_language:d?.preferred_language||s.language||"ar",email_notifications:d?.email_notifications??!0,sms_notifications:d?.sms_notifications??!0,marketing_consent:d?.marketing_consent??!1}});y.useEffect(()=>{u&&ae({business:{business_name:u.business_name||"",business_name_ar:u.business_name_ar||"",business_type:u.business_type||"",commercial_registration:u.commercial_registration||"",vat_number:u.vat_number||"",established_year:u.established_year?.toString()||"",employee_count:u.employee_count?.toString()||"",description:u.description||"",description_ar:u.description_ar||""},contact:{email:u.email||d.email||"",phone:u.phone||d.phone||"",whatsapp:u.whatsapp||"",website:u.website||""},address:{address_line1:u.address_line1||"",address_line2:u.address_line2||"",city:u.city||"",region:u.region||"",postal_code:u.postal_code||"",latitude:u.latitude?.toString()||"",longitude:u.longitude?.toString()||""},services:{service_categories:J(u.service_categories),service_areas:J(u.service_areas),years_experience:u.years_experience?.toString()||"",contractor_type:u.contractor_type||"full_solar_contractor",can_install:u.can_install??!0,can_supply_only:u.can_supply_only??!1},preferences:{preferred_language:s.language||"ar",email_notifications:!0,sms_notifications:!0,marketing_consent:!1}})},[u,d.email,d.phone,s.language]);const de=D=>{const T={width:"20px",height:"20px",fill:"currentColor"};switch(D){case"profile":return e.jsx("svg",{style:T,viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})});case"business":return e.jsx("svg",{style:T,viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10zm-2-8h-2v2h2v-2zm0 4h-2v2h2v-2z"})});case"contact":return e.jsx("svg",{style:T,viewBox:"0 0 24 24",children:e.jsx("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})});case"address":return e.jsx("svg",{style:T,viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})});case"verification":return e.jsx("svg",{style:T,viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-2 16l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"})});case"preferences":return e.jsx("svg",{style:T,viewBox:"0 0 24 24",children:e.jsx("path",{d:"M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"})});default:return null}},je=[{id:"profile",label:o("userApp.sidebar.profile"),icon:de("profile")},{id:"business",label:o("contractorApp.profile.tabs.business"),icon:de("business")},{id:"contact",label:o("contractorApp.profile.tabs.contact"),icon:de("contact")},{id:"address",label:o("contractorApp.profile.tabs.address"),icon:de("address")},{id:"verification",label:o("contractorApp.profile.tabs.verification"),icon:de("verification")},{id:"preferences",label:o("contractorApp.profile.tabs.preferences"),icon:de("preferences")}],fe=(D,T)=>{switch(D){case"business_name":case"business_name_ar":return T.replace(/[^a-zA-Z0-9\u0600-\u06FF\s&()-.,]/g,"").slice(0,100);case"phone":case"whatsapp":let G=T.replace(/[^\d+]/g,"");return!G.startsWith("+966")&&G.length>0&&(G.startsWith("966")?G="+"+G:G.startsWith("0")?G="+966"+G.slice(1):/^\d/.test(G)&&(G="+966"+G)),G.slice(0,13);case"commercial_registration":return T.replace(/\D/g,"").slice(0,10);case"vat_number":return T.replace(/\D/g,"").slice(0,15);case"postal_code":return T.replace(/\D/g,"").slice(0,5);case"established_year":const ne=T.replace(/\D/g,"").slice(0,4),se=new Date().getFullYear(),E=parseInt(ne)||0;return E>se?se.toString():E<1900&&ne.length===4?"1900":ne;case"employee_count":const x=T.replace(/\D/g,"").slice(0,4);return x==="0"?"":x;case"years_experience":const B=T.replace(/\D/g,"").slice(0,2);return B==="0"?"":Math.min(parseInt(B)||0,50).toString();case"website":return T.replace(/[^a-zA-Z0-9./:_-]/g,"").slice(0,100);default:return T}},me=(D,T)=>{if(console.log("🔍 Validating field:",D,"with value:",T),Array.isArray(T))return D==="service_categories"?T.length===0?{isValid:!1,message:o("contractorApp.profile.validation.serviceCategories")||"Please select at least one service category"}:T.length>5?{isValid:!1,message:o("contractorApp.profile.validation.maxServiceCategories")||"Maximum 5 service categories allowed"}:{isValid:!0}:D==="service_areas"?T.length===0?{isValid:!1,message:o("contractorApp.profile.validation.serviceAreas")||"Please select at least one service area"}:T.length>8?{isValid:!1,message:o("contractorApp.profile.validation.maxServiceAreas")||"Maximum 8 service areas allowed"}:{isValid:!0}:{isValid:!0};if(T&&typeof T=="string"&&(T.includes("<script")||T.includes("javascript:")||T.includes("data:")))return{isValid:!1,message:o("security.invalidInput")||"Invalid input detected"};switch(D){case"first_name":case"last_name":return T.length<2?{isValid:!1,message:o("contractorApp.profile.validation.nameMinLength")||"Name must be at least 2 characters"}:T.length>50?{isValid:!1,message:o("contractorApp.profile.validation.nameMaxLength")||"Name must be 50 characters or less"}:/^[a-zA-Z\u0600-\u06FF\s]+$/.test(T)?{isValid:!0}:{isValid:!1,message:o("contractorApp.profile.validation.nameFormat")||"Name can only contain letters and spaces"};case"business_name":case"company_name":return T.length<2?{isValid:!1,message:o("contractorApp.profile.validation.businessNameMinLength")||"Business name must be at least 2 characters"}:T.length>100?{isValid:!1,message:o("contractorApp.profile.validation.businessNameMaxLength")||"Business name must be 100 characters or less"}:/^[a-zA-Z0-9\u0600-\u06FF\s&().-]+$/.test(T)?{isValid:!0}:{isValid:!1,message:o("contractorApp.profile.validation.businessNameFormat")||"Business name contains invalid characters"};case"phone":case"whatsapp":return D==="whatsapp"&&(!T||T.trim()==="")?{isValid:!0}:T.startsWith("+966")?T.length!==13?{isValid:!1,message:o("contractorApp.profile.validation.phoneLength")||"Phone must be 13 characters (+966xxxxxxxxx)"}:/^\+966[5][0-9]{8}$/.test(T)?{isValid:!0}:{isValid:!1,message:o("contractorApp.profile.validation.saudiMobileFormat")||"Invalid Saudi mobile number format"}:{isValid:!1,message:o("contractorApp.profile.validation.phoneFormat")||"Phone must start with +966 (Saudi Arabia)"};case"commercial_registration":case"cr_number":return T&&T.length!==10?{isValid:!1,message:o("contractorApp.profile.validation.crLength")||"Commercial Registration must be exactly 10 digits"}:T&&!/^\d{10}$/.test(T)?{isValid:!1,message:o("contractorApp.profile.validation.crFormat")||"Commercial Registration must contain only digits"}:{isValid:!0};case"vat_number":return T&&T.length!==15?{isValid:!1,message:o("contractorApp.profile.validation.vatLength")||"VAT number must be exactly 15 digits"}:T&&!/^\d{15}$/.test(T)?{isValid:!1,message:o("contractorApp.profile.validation.vatFormat")||"VAT number must contain only digits"}:T&&!T.startsWith("3")?{isValid:!1,message:o("contractorApp.profile.validation.vatSaudiFormat")||"Invalid Saudi VAT number format"}:{isValid:!0};case"postal_code":return T&&T.length!==5?{isValid:!1,message:o("contractorApp.profile.validation.postalCodeLength")||"Postal code must be exactly 5 digits"}:T&&!/^\d{5}$/.test(T)?{isValid:!1,message:o("contractorApp.profile.validation.postalCodeFormat")||"Postal code must contain only digits"}:{isValid:!0};case"established_year":if(T){const se=parseInt(T),E=new Date().getFullYear();if(se<1900||se>E)return{isValid:!1,message:o("contractorApp.profile.validation.establishedYear")||`Year must be between 1900 and ${E}`};if(se<2e3)return{isValid:!1,message:o("contractorApp.profile.validation.modernBusiness")||"Solar businesses typically established after 2000"}}return{isValid:!0};case"years_experience":const G=parseInt(T)||0;return G>50?{isValid:!1,message:o("contractorApp.profile.validation.maxExperience")||"Experience cannot exceed 50 years"}:G<0?{isValid:!1,message:o("contractorApp.profile.validation.minExperience")||"Experience cannot be negative"}:{isValid:!0};case"website":return!T||T.trim()===""?{isValid:!0}:/^https?:\/\/.+\..+/.test(T)?T.includes("javascript:")||T.includes("data:")||T.includes("file:")?{isValid:!1,message:o("security.invalidUrl")||"Invalid URL format"}:{isValid:!0}:{isValid:!1,message:o("contractorApp.profile.validation.websiteFormat")||"Website must be a valid URL (http://example.com)"};case"email":return T&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(T)?{isValid:!1,message:o("contractorApp.profile.validation.emailFormat")||"Invalid email format"}:T&&(T.includes("tempmail")||T.includes("10minutemail")||T.includes("guerrillamail"))?{isValid:!1,message:o("security.temporaryEmailBlocked")||"Temporary email addresses are not allowed"}:{isValid:!0};case"description":case"description_ar":return T&&T.length>500?{isValid:!1,message:o("contractorApp.profile.validation.descriptionMaxLength")||"Description must be 500 characters or less"}:T&&(T.toLowerCase().includes("bitcoin")||T.toLowerCase().includes("crypto")||T.toLowerCase().includes("forex"))?{isValid:!1,message:o("security.suspiciousContentBlocked")||"Suspicious content detected"}:{isValid:!0};case"address_line1":case"address_line2":return D==="address_line1"&&T.length<5?{isValid:!1,message:o("contractorApp.profile.validation.addressMinLength")||"Address must be at least 5 characters"}:T&&T.length>100?{isValid:!1,message:o("contractorApp.profile.validation.addressMaxLength")||"Address must be 100 characters or less"}:{isValid:!0};case"city":return T&&T.length<2?{isValid:!1,message:o("contractorApp.profile.validation.cityMinLength")||"City must be at least 2 characters"}:T&&T.length>30?{isValid:!1,message:o("contractorApp.profile.validation.cityMaxLength")||"City must be 30 characters or less"}:T&&!/^[a-zA-Z\u0600-\u06FF\s-]+$/.test(T)?{isValid:!1,message:o("contractorApp.profile.validation.cityFormat")||"City name contains invalid characters"}:{isValid:!0};default:return{isValid:!0}}},Ae=(D,T,G)=>{if(Array.isArray(G)){const E=me(T,G);ee(x=>({...x,[T]:E})),ae(x=>{const B={...x[D],[T]:G};return{...x,[D]:B}}),L[T]&&k(x=>{const B={...x};return delete B[T],B});return}const ne=fe(T,G),se=me(T,ne);ee(E=>({...E,[T]:se})),ae(E=>{const x={...E[D],[T]:ne};return T==="contractor_type"&&D==="services"&&(ne==="full_solar_contractor"?(x.can_install=!0,x.can_supply_only=!1):ne==="solar_vendor_only"&&(x.can_install=!1,x.can_supply_only=!0)),{...E,[D]:x}}),L[T]&&k(E=>{const x={...E};return delete x[T],x})},qe=D=>{u&&ae(T=>({...T,[D]:{business_name:u.business_name||"",business_name_ar:u.business_name_ar||"",business_type:u.business_type||"",commercial_registration:u.commercial_registration||"",vat_number:u.vat_number||"",established_year:u.established_year?.toString()||"",employee_count:u.employee_count?.toString()||"",description:u.description||"",description_ar:u.description_ar||"",email:u.email||d.email||"",phone:u.phone||d.phone||"",whatsapp:u.whatsapp||"",website:u.website||"",address_line1:u.address_line1||"",address_line2:u.address_line2||"",city:u.city||"",region:u.region||"",postal_code:u.postal_code||"",latitude:u.latitude?.toString()||"",longitude:u.longitude?.toString()||"",service_categories:u.service_categories||[],service_areas:u.service_areas||[],years_experience:u.years_experience?.toString()||""}})),p(null),k({}),ee({})},Qe=async D=>{try{if($(!0),k({}),D.startsWith("profile_")){const x=D.replace("profile_",""),B=X.profile;let F=!1;const Z={};if(Object.entries(B).forEach(([ye,Ze])=>{const Te=["first_name","last_name"].includes(ye),zr=["company_name","cr_number","vat_number","business_type"].includes(ye);if(x==="personal"&&Te||x==="business"&&zr){const pe=me(ye,Ze);pe.isValid||(F=!0,Z[ye]=pe.message||"Invalid input")}}),F){k(Z);return}const le={},ge={};if(x==="personal"?(B.first_name&&(le.first_name=B.first_name),B.last_name&&(le.last_name=B.last_name)):x==="business"&&(B.company_name&&(le.company_name=B.company_name),B.cr_number&&(le.cr_number=B.cr_number),B.vat_number&&(le.vat_number=B.vat_number),B.business_type&&(le.business_type=B.business_type),console.log("🔄 Saving Profile tab business info to AUTH service:",le)),console.log(`🔄 Saving profile ${x} section to auth service:`,le),Object.keys(le).length>0){const ye=await xe.updateCurrentUser(le);if(ye.success)console.log("✅ Auth profile updated successfully"),ye.user?(console.log("🔄 Updating user state with auth service response:",ye.user),console.log("🔍 User company_name will be:",ye.user.company_name),console.log("🔍 User business_type will be:",ye.user.business_type),m(ye.user)):console.warn("⚠️ No user data returned from auth service update");else{console.error("❌ Failed to save auth profile:",ye.error),k({general:ye.error||"Failed to save profile"});return}}g(o("contractorApp.profile.updateSuccess")||"Profile updated successfully"),t&&t(D,x==="business"?{...le,...ge}:le),p(null),ee({}),setTimeout(()=>g(""),3e3);return}if(D==="contact_additional"){const x=X.contact;let B=!1;const F={};if(["phone","whatsapp","website"].forEach(ye=>{const Ze=x[ye]||"",Te=me(ye,Ze);Te.isValid||(B=!0,F[ye]=Te.message||"Invalid input")}),B){k(F);return}const le={phone:x.phone||"",whatsapp:x.whatsapp||"",website:x.website||""};console.log("🔄 Saving additional contact info to contractor service:",le);const ge=await xt.updateProfile(le);if(ge.success){if(console.log("✅ Contact information updated successfully"),g(o("contractorApp.profile.updateSuccess")||"Contact information updated successfully"),ge.profile)console.log("🔄 Updating contractor profile state with new contact data:",ge.profile),h(ge.profile);else{console.log("🔄 Profile not returned, refreshing from API...");const ye=await xt.getProfile();ye.success&&ye.profile?(console.log("🔄 Refreshed contractor profile:",ye.profile),h(ye.profile)):console.error("❌ Failed to refresh contractor profile:",ye.error)}p(null),setTimeout(()=>g(""),3e3),t&&t(D,le)}else console.error("❌ Failed to save contact information:",ge.error),k({general:ge.error||"Failed to save contact information"});return}if(D==="preferences"){const x=X.preferences,B={preferred_language:x.preferred_language,email_notifications:x.email_notifications,sms_notifications:x.sms_notifications,marketing_consent:x.marketing_consent};console.log("💾 Saving preferences to contractor service:",B);const F=await xt.updateProfile(B);F.success?(console.log("✅ Preferences saved successfully"),g(o("contractorApp.profile.preferencesUpdateSuccess")||"Preferences updated successfully"),F.user&&(m(F.user),ae(Z=>({...Z,preferences:{preferred_language:F.user.preferred_language||s.language||"ar",email_notifications:F.user.email_notifications??!0,sms_notifications:F.user.sms_notifications??!0,marketing_consent:F.user.marketing_consent??!1}}))),B.preferred_language&&B.preferred_language!==s.language&&s.changeLanguage(B.preferred_language),p(null),setTimeout(()=>g(""),3e3),t&&t(D,B)):(console.error("❌ Failed to save preferences:",F.error),k({general:F.error||"Failed to save preferences"}));return}const T=X[D];let G=!1;const ne={};if(Object.entries(T).forEach(([x,B])=>{const F=me(x,B);F.isValid||(G=!0,ne[x]=F.message||"Invalid input")}),G){k(ne);return}const se={...T};se.established_year&&(se.established_year=parseInt(se.established_year)),se.employee_count&&(se.employee_count=parseInt(se.employee_count)),se.years_experience&&(se.years_experience=parseInt(se.years_experience)),se.latitude&&(se.latitude=parseFloat(se.latitude)),se.longitude&&(se.longitude=parseFloat(se.longitude)),console.log("💾 Saving contractor profile section:",D,se);const E=await xt.updateProfile(se);if(E.success){if(console.log("✅ Contractor profile section saved successfully"),g(o("contractorApp.profile.saveSuccess")||"Profile updated successfully"),E.profile)console.log("🔄 Updating contractor profile state with:",E.profile),h(E.profile),P(E.profile);else{console.log("🔄 Profile not returned, refreshing from API...");const x=await xt.getProfile();x.success&&x.profile?(console.log("🔄 Refreshed contractor profile:",x.profile),h(x.profile),P(x.profile)):console.error("❌ Failed to refresh contractor profile:",x.error)}p(null),setTimeout(()=>g(""),3e3),t&&t(D,se)}else console.error("❌ Failed to save contractor profile:",E.error),k({general:E.error||"Failed to save profile"})}catch(T){console.error("❌ Error saving contractor profile:",T),k({general:T.message||o("contractorApp.profile.saveError")||"Failed to save profile. Please try again."})}finally{$(!1)}},N=async()=>{try{ce(),console.log("🌍 Getting current location...");const D=await U();console.log("🌍 Location received:",D),D&&(console.log("🌍 Updating formData with location:",{latitude:D.latitude.toString(),longitude:D.longitude.toString()}),ae(T=>{const G={...T,address:{...T.address,latitude:D.latitude.toString(),longitude:D.longitude.toString()}};return console.log("🌍 New formData:",G),G}),g(o("contractorApp.profile.locationSuccess")||"Location retrieved successfully!"),setTimeout(()=>g(""),3e3))}catch(D){console.error("❌ Error getting location:",D),k({location:"Failed to get location. Please check your browser permissions."})}},M={container:{minHeight:"100vh",backgroundColor:"#f8fafc",padding:V?"10px":Q?"15px":"20px",direction:i?"rtl":"ltr"},profileHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px",padding:"20px",backgroundColor:"white",borderRadius:"12px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",flexDirection:V?"column":"row",gap:V?"15px":"0"},profileInfo:{display:"flex",alignItems:"center",gap:"15px",flexDirection:V?"column":"row",textAlign:V?"center":"left"},avatar:{width:"60px",height:"60px",borderRadius:"50%",backgroundColor:n.colors.primary,color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",fontWeight:"bold",flexShrink:0},profileText:{display:"flex",flexDirection:"column",gap:"4px"},profileName:{fontSize:V?"18px":"20px",fontWeight:"bold",color:"#1f2937",fontFamily:i?"Cairo, sans-serif":"Inter, sans-serif"},profileRole:{fontSize:"14px",color:"#6b7280",fontFamily:i?"Cairo, sans-serif":"Inter, sans-serif"},profileStatus:{display:"flex",alignItems:"center",gap:"8px",marginTop:"8px"},progressSection:{marginTop:"12px",width:"100%"},progressLabel:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px",fontSize:"12px",color:"#6b7280",fontFamily:i?"Cairo, sans-serif":"Inter, sans-serif"},progressPercentage:{fontWeight:"600",color:"#3eb2b1"},progressBarContainer:{width:"100%",height:"6px",backgroundColor:"#e5e7eb",borderRadius:"3px",overflow:"hidden"},progressBar:{height:"100%",background:"linear-gradient(90deg, #3eb2b1 0%, #22d3db 100%)",borderRadius:"3px",transition:"width 0.5s ease-out"},mobileMenu:{display:V?"flex":"none",backgroundColor:"white",borderRadius:"12px",padding:"8px",marginBottom:"20px",overflowX:"auto",gap:"4px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},contentLayout:{display:"flex",gap:"20px",alignItems:"flex-start"},leftSidebar:{display:V?"none":"flex",flexDirection:"column",width:Q?"200px":"240px",backgroundColor:"white",borderRadius:"12px",padding:"20px 0",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",height:"fit-content",position:"sticky",top:"20px"},menuItem:{display:"flex",alignItems:"center",gap:V?"0":"12px",padding:V?"12px 8px":"12px 20px",border:"none",backgroundColor:"transparent",color:"#6b7280",cursor:"pointer",transition:"all 0.2s ease",fontSize:"14px",fontWeight:"500",borderRadius:V?"8px":"0",minWidth:V?"60px":"auto",textAlign:"left",fontFamily:i?"Cairo, sans-serif":"Inter, sans-serif",width:"100%",justifyContent:V?"center":"flex-start"},activeMenuItem:{backgroundColor:V?"rgba(62, 178, 177, 0.1)":"#f0fdfc",color:n.colors.primary,borderRight:V?"none":`3px solid ${n.colors.primary}`,fontWeight:"600"},formContainer:{flex:1,backgroundColor:"white",borderRadius:"12px",padding:V?"20px":"30px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",minHeight:"500px"},formHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"30px",paddingBottom:"20px",borderBottom:"1px solid #e5e7eb",flexDirection:V?"column":"row",gap:V?"15px":"0"},formTitle:{fontSize:V?"20px":"24px",fontWeight:"bold",color:"#1f2937",margin:"0",fontFamily:i?"Cairo, sans-serif":"Inter, sans-serif"},editButton:{padding:"8px 16px",backgroundColor:n.colors.primary[500],color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s ease",fontFamily:i?"Cairo, sans-serif":"Inter, sans-serif",":hover":{backgroundColor:n.colors.primary[600],transform:"translateY(-1px)",boxShadow:"0 4px 12px rgba(62, 178, 177, 0.3)"}},fieldsGrid:{display:"grid",gridTemplateColumns:V?"1fr":Q?"repeat(auto-fit, minmax(300px, 1fr))":"repeat(auto-fit, minmax(350px, 1fr))",gap:"20px",marginBottom:"30px"},fieldGroup:{display:"flex",flexDirection:"column",gap:"8px"},fieldLabel:{fontSize:"14px",fontWeight:"600",color:"#374151",display:"flex",alignItems:"center",gap:"8px",fontFamily:i?"Cairo, sans-serif":"Inter, sans-serif"},fieldValue:{padding:"12px 16px",backgroundColor:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",color:"#1f2937",minHeight:"20px",display:"flex",alignItems:"center",fontFamily:i?"Cairo, sans-serif":"Inter, sans-serif"},input:{padding:"12px 16px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",color:"#1f2937",backgroundColor:"white",transition:"all 0.2s ease",fontFamily:i?"Cairo, sans-serif":"Inter, sans-serif",width:"100%",boxSizing:"border-box"},inputValid:{borderColor:"#10b981",backgroundColor:"#f0fdf4"},inputInvalid:{borderColor:"#ef4444",backgroundColor:"#fef2f2"},buttonGroup:{display:"flex",gap:"12px",justifyContent:"flex-end",marginTop:"30px",flexDirection:V?"column":"row"},cancelButton:{padding:"12px 24px",backgroundColor:n.colors.secondary[200],color:n.colors.secondary[700],border:`1px solid ${n.colors.borders.light}`,borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s ease",fontFamily:i?"Cairo, sans-serif":"Inter, sans-serif",":hover":{backgroundColor:n.colors.secondary[300],borderColor:n.colors.borders.medium,transform:"translateY(-1px)"}},saveButton:{padding:"12px 24px",background:n.colors.gradients.button,color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"600",transition:"all 0.2s ease",fontFamily:i?"Cairo, sans-serif":"Inter, sans-serif",boxShadow:"0 2px 8px rgba(62, 178, 177, 0.2)",":hover":{background:n.colors.gradients.buttonHover,transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(62, 178, 177, 0.4)"}},successMessage:{padding:"12px 16px",backgroundColor:n.colors.semantic.success.light,color:n.colors.semantic.success.dark,border:`1px solid ${n.colors.semantic.success[200]}`,borderRadius:"8px",fontSize:"14px",marginBottom:"20px",fontFamily:i?"Cairo, sans-serif":"Inter, sans-serif",display:"flex",alignItems:"center"},errorMessage:{padding:"12px 16px",backgroundColor:n.colors.semantic.error.light,color:n.colors.semantic.error.dark,border:`1px solid ${n.colors.semantic.error[200]}`,borderRadius:"8px",fontSize:"14px",marginBottom:"20px",fontFamily:i?"Cairo, sans-serif":"Inter, sans-serif",display:"flex",alignItems:"center"},validationMessage:{fontSize:"12px",marginTop:"4px",display:"flex",alignItems:"center",gap:"4px",fontFamily:i?"Cairo, sans-serif":"Inter, sans-serif",color:"#ef4444"},validationSuccess:{color:"#10b981"},characterCount:{fontSize:"11px",color:"#9ca3af",textAlign:"right",marginTop:"4px"},locationButton:{padding:"8px 12px",backgroundColor:"#f3f4f6",color:"#374151",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:"500",transition:"all 0.2s ease",fontFamily:i?"Cairo, sans-serif":"Inter, sans-serif",marginTop:"8px"},emptyState:{textAlign:"center",padding:"60px 20px",color:"#6b7280",fontSize:"16px",fontFamily:i?"Cairo, sans-serif":"Inter, sans-serif"},loadingState:{textAlign:"center",padding:"60px 20px",color:"#6b7280",fontSize:"16px",fontFamily:i?"Cairo, sans-serif":"Inter, sans-serif"}},ue=()=>{if(!a)return e.jsx("div",{style:M.emptyState,children:o("contractorApp.profile.selectSection")});if(b)return e.jsx("div",{style:M.loadingState,children:o("common.loading")});const D=c===a;console.log("🔍 Building section data with contractorProfile:",u),console.log("🔍 Building section data with user:",d);const G={profile:[{field:"first_name",label:o("contractorApp.profile.fields.firstName"),value:d?.first_name||d?.firstName||"",required:!0,section:"personal"},{field:"last_name",label:o("contractorApp.profile.fields.lastName"),value:d?.last_name||d?.lastName||"",required:!0,section:"personal"},{field:"email",label:o("contractorApp.profile.fields.email"),value:d?.email||o("form.business_email_placeholder"),readOnly:!0,section:"personal"},{field:"phone",label:o("contractorApp.profile.fields.phone"),value:d?.phone||o("form.saudi_phone_hint"),readOnly:!0,section:"personal"},{field:"company_name",label:o("contractorApp.profile.fields.businessName"),value:d?.company_name||u?.business_name||"",required:!0,section:"business"},{field:"cr_number",label:o("contractorApp.profile.fields.crNumber"),value:d?.cr_number||u?.commercial_registration||"",section:"business"},{field:"vat_number",label:o("contractorApp.profile.fields.vatNumber"),value:d?.vat_number||u?.vat_number||"",section:"business"},{field:"business_type",label:o("contractorApp.profile.fields.businessType"),value:d?.business_type||d?.userType||u?.business_type||"",type:"dropdown",section:"business",options:[{value:"individual",label:o("contractorApp.profile.businessTypes.individual")},{value:"llc",label:o("contractorApp.profile.businessTypes.llc")},{value:"corporation",label:o("contractorApp.profile.businessTypes.corporation")},{value:"partnership",label:o("contractorApp.profile.businessTypes.partnership")},{value:"other",label:o("contractorApp.profile.businessTypes.other")||"Other"}]},{field:"role",label:o("userApp.profile.userType"),value:d?.role||"CONTRACTOR",readOnly:!0,section:"account"},{field:"created_at",label:o("common.createdAt"),value:d?.created_at?new Date(d.created_at).toLocaleDateString(s.language==="ar"?"ar-SA":"en-US"):new Date().toLocaleDateString(s.language==="ar"?"ar-SA":"en-US"),readOnly:!0,section:"account"}],personal:[{field:"first_name",label:o("contractorApp.profile.fields.firstName"),value:d?.first_name||d?.firstName||"",required:!0,section:"personal"},{field:"last_name",label:o("contractorApp.profile.fields.lastName"),value:d?.last_name||d?.lastName||"",required:!0,section:"personal"},{field:"email",label:o("contractorApp.profile.fields.email"),value:d?.email||o("form.business_email_placeholder"),readOnly:!0,section:"personal"},{field:"phone",label:o("contractorApp.profile.fields.phone"),value:d?.phone||o("form.saudi_phone_hint"),readOnly:!0,section:"personal"}],business:[{field:"business_name_ar",label:o("contractorApp.profile.fields.businessNameAr"),value:u?.business_name_ar||""},{field:"established_year",label:o("contractorApp.profile.fields.establishedYear"),value:u?.established_year?.toString()||"",type:"number"},{field:"employee_count",label:o("contractorApp.profile.fields.employeeCount"),value:u?.employee_count?.toString()||"",type:"number"},{field:"description",label:o("contractorApp.profile.fields.description"),value:u?.description||"",type:"textarea"},{field:"description_ar",label:o("contractorApp.profile.fields.descriptionAr"),value:u?.description_ar||"",type:"textarea"}],account:[{field:"role",label:o("userApp.profile.userType"),value:d?.role||"CONTRACTOR",readOnly:!0,section:"account"},{field:"created_at",label:o("common.createdAt"),value:d?.created_at?new Date(d.created_at).toLocaleDateString(s.language==="ar"?"ar-SA":"en-US"):new Date().toLocaleDateString(s.language==="ar"?"ar-SA":"en-US"),readOnly:!0,section:"account"}],contact:[{field:"phone",label:o("contractorApp.profile.fields.businessPhone"),value:u?.phone||"",type:"tel",section:"additional",placeholder:o("contractorApp.profile.placeholders.businessPhone")||"+966501234567"},{field:"whatsapp",label:o("contractorApp.profile.fields.whatsapp"),value:u?.whatsapp||"",type:"tel",section:"additional",placeholder:o("contractorApp.profile.placeholders.whatsapp")||"+966501234567"},{field:"website",label:o("contractorApp.profile.fields.website"),value:u?.website||"",type:"url",section:"additional",placeholder:o("contractorApp.profile.placeholders.website")||"https://company.com"}],address:[{field:"address_line1",label:o("contractorApp.profile.fields.addressLine1"),value:u?.address_line1||"",required:!0},{field:"address_line2",label:o("contractorApp.profile.fields.addressLine2"),value:u?.address_line2||""},{field:"city",label:o("contractorApp.profile.fields.city"),value:u?.city||"",required:!0},{field:"region",label:o("contractorApp.profile.fields.region"),value:u?.region||"",required:!0,type:"dropdown",options:[{value:"Riyadh",label:o("contractorApp.profile.regions.riyadh")},{value:"Makkah",label:o("contractorApp.profile.regions.makkah")},{value:"Madinah",label:o("contractorApp.profile.regions.madinah")},{value:"Qassim",label:o("contractorApp.profile.regions.qassim")},{value:"Eastern Province",label:o("contractorApp.profile.regions.eastern")},{value:"Asir",label:o("contractorApp.profile.regions.asir")},{value:"Tabuk",label:o("contractorApp.profile.regions.tabuk")},{value:"Hail",label:o("contractorApp.profile.regions.hail")},{value:"Northern Borders",label:o("contractorApp.profile.regions.northern")},{value:"Jazan",label:o("contractorApp.profile.regions.jazan")},{value:"Najran",label:o("contractorApp.profile.regions.najran")},{value:"Al Bahah",label:o("contractorApp.profile.regions.bahah")},{value:"Al Jawf",label:o("contractorApp.profile.regions.jawf")}]},{field:"postal_code",label:o("contractorApp.profile.fields.postalCode"),value:u?.postal_code||""},{field:"latitude",label:o("contractorApp.profile.fields.latitude"),value:X.address.latitude||"",type:"number",readOnly:!0},{field:"longitude",label:o("contractorApp.profile.fields.longitude"),value:X.address.longitude||"",type:"number",readOnly:!0}],verification:[{field:"verification_level",label:o("contractorApp.profile.fields.verificationLevel"),value:u?.verification_level?.toString()||"0",readOnly:!0,type:"badge"},{field:"average_rating",label:o("contractorApp.profile.fields.averageRating"),value:u?.average_rating?.toString()||"0",readOnly:!0,type:"rating"},{field:"total_reviews",label:o("contractorApp.profile.fields.totalReviews"),value:u?.total_reviews?.toString()||"0",readOnly:!0},{field:"status",label:o("contractorApp.profile.fields.contractorStatus"),value:u?.status||"pending",readOnly:!0,type:"badge"}],preferences:[{field:"preferred_language",label:o("contractorApp.profile.fields.preferredLanguage"),value:d?.preferred_language||s.language,type:"dropdown",options:[{value:"en",label:"English"},{value:"ar",label:"العربية"}]},{field:"email_notifications",label:o("contractorApp.profile.fields.emailNotifications"),value:d?.email_notifications??!0,type:"toggle"},{field:"sms_notifications",label:o("contractorApp.profile.fields.smsNotifications"),value:d?.sms_notifications??!0,type:"toggle"},{field:"marketing_consent",label:o("contractorApp.profile.fields.marketingConsent"),value:d?.marketing_consent??!1,type:"toggle"}]}[a]||[],ne=je.find(se=>se.id===a);return e.jsxs("div",{style:M.formContainer,children:[e.jsxs("div",{style:M.formHeader,children:[e.jsx("h2",{style:M.formTitle,children:ne?.label}),a!=="verification"&&a!=="profile"&&a!=="contact"&&e.jsx("button",{style:M.editButton,onClick:()=>p(D?null:a),children:o(D?"common.cancel":"common.edit")})]}),a!=="verification"&&e.jsxs("div",{style:{padding:"12px 16px",backgroundColor:n.colors.primary[50],border:`1px solid ${n.colors.primary[200]}`,borderRadius:"8px",fontSize:"14px",marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px",fontFamily:i?"Cairo, sans-serif":"Inter, sans-serif"},children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:n.colors.primary[500],children:e.jsx("path",{d:"M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-2 16l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"})}),e.jsx("span",{style:{color:n.colors.primary[600]},children:o("contractorApp.profile.samaCompliance")||"SAMA CSF Level 4 Compliant - All data is encrypted and securely processed"})]}),v&&e.jsxs("div",{style:M.successMessage,children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"#166534",style:{marginRight:"8px"},children:e.jsx("path",{d:"M9 16.17L4.83 12L3.41 13.41L9 19L21 7L19.59 5.59L9 16.17Z"})}),v]}),L.general&&e.jsxs("div",{style:M.errorMessage,children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"#dc2626",style:{marginRight:"8px"},children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),L.general]}),a==="profile"?e.jsxs("div",{style:{background:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"12px",padding:"24px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#1f2937",margin:0,fontFamily:i?"Cairo, sans-serif":"Inter, sans-serif",borderBottom:"2px solid #3eb2b1",paddingBottom:"8px"},children:o("contractorApp.profile.personal_info.title")}),e.jsx("button",{style:{...M.editButton,fontSize:"14px",padding:"6px 12px"},onClick:()=>p(c==="profile_personal"?null:"profile_personal"),children:o(c==="profile_personal"?"common.cancel":"common.edit")})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"20px"},children:G.filter(se=>se.section==="personal").map(se=>{const{field:E,label:x,value:B,readOnly:F,required:Z}=se,le=c==="profile_personal",ge=F||E==="email"||E==="phone";return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[e.jsxs("label",{style:{fontSize:"14px",fontWeight:"500",color:"#374151",fontFamily:i?"Cairo, sans-serif":"Inter, sans-serif"},children:[x,Z&&e.jsx("span",{style:{color:"#ef4444"},children:"*"}),ge&&e.jsxs("span",{style:{fontSize:"12px",color:"#9ca3af",marginLeft:"8px"},children:["(",o("contractorApp.profile.readOnly"),")"]})]}),!le||ge?e.jsx("div",{style:{fontSize:"15px",color:B&&B!==o(`contractorApp.profile.placeholders.${E}`)&&B!==o(`form.${E}`)&&B!==o("form.business_email_placeholder")&&B!==o("form.saudi_phone_hint")?"#1f2937":"#9ca3af",fontStyle:B&&B!==o(`contractorApp.profile.placeholders.${E}`)&&B!==o(`form.${E}`)&&B!==o("form.business_email_placeholder")&&B!==o("form.saudi_phone_hint")?"normal":"italic",fontFamily:i?"Cairo, sans-serif":"Inter, sans-serif",padding:"8px 0",borderBottom:"1px solid #f3f4f6",minHeight:"24px"},children:B||o(`contractorApp.profile.placeholders.${E}`)||o("common.notSet")}):e.jsx("input",{type:"text",style:{...M.input,...A[E]?.isValid===!0?M.inputValid:{},...A[E]?.isValid===!1?M.inputInvalid:{}},value:X.profile?.[E]||B||"",onChange:ye=>Ae("profile",E,ye.target.value),placeholder:o(`contractorApp.profile.placeholders.${E}`)}),A[E]&&!A[E].isValid&&e.jsxs("div",{style:M.validationMessage,children:[e.jsx("svg",{style:{width:"14px",height:"14px",fill:"currentColor"},viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),A[E].message]}),A[E]&&A[E].isValid&&X.profile?.[E]&&e.jsxs("div",{style:{...M.validationMessage,...M.validationSuccess},children:[e.jsx("svg",{style:{width:"14px",height:"14px",fill:"currentColor"},viewBox:"0 0 24 24",children:e.jsx("path",{d:"M9 16.17L4.83 12L3.41 13.41L9 19L21 7L19.59 5.59L9 16.17Z"})}),o("validation.validInput")||"Valid"]})]},E)})}),c==="profile_personal"&&e.jsxs("div",{style:M.buttonGroup,children:[e.jsx("button",{style:M.cancelButton,onClick:()=>qe("profile_personal"),disabled:W,children:o("common.cancel")}),e.jsx("button",{style:{...M.saveButton,opacity:W?.7:1,cursor:W?"not-allowed":"pointer"},onClick:()=>Qe("profile_personal"),disabled:W,children:o(W?"common.saving":"common.save")})]})]}),e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#1f2937",margin:0,fontFamily:i?"Cairo, sans-serif":"Inter, sans-serif",borderBottom:"2px solid #3eb2b1",paddingBottom:"8px"},children:o("contractorApp.profile.business_info.title")}),e.jsx("button",{style:{...M.editButton,fontSize:"14px",padding:"6px 12px"},onClick:()=>p(c==="profile_business"?null:"profile_business"),children:o(c==="profile_business"?"common.cancel":"common.edit")})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"20px"},children:G.filter(se=>se.section==="business").map(se=>{const{field:E,label:x,value:B,required:F,type:Z,options:le}=se,ge=c==="profile_business";return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[e.jsxs("label",{style:{fontSize:"14px",fontWeight:"500",color:"#374151",fontFamily:i?"Cairo, sans-serif":"Inter, sans-serif"},children:[x,F&&e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),ge?Z==="dropdown"?e.jsxs("select",{style:M.input,value:X.profile?.[E]||B||"",onChange:ye=>Ae("profile",E,ye.target.value),children:[e.jsx("option",{value:"",children:o("common.selectOption")}),le?.map(ye=>e.jsx("option",{value:ye.value,children:ye.label},ye.value))]}):e.jsx("input",{type:"text",style:{...M.input,...A[E]?.isValid===!0?M.inputValid:{},...A[E]?.isValid===!1?M.inputInvalid:{}},value:X.profile?.[E]||B||"",onChange:ye=>Ae("profile",E,ye.target.value),placeholder:o(`contractorApp.profile.placeholders.${E}`)}):e.jsx("div",{style:{fontSize:"15px",color:B?"#1f2937":"#9ca3af",fontStyle:B?"normal":"italic",fontFamily:i?"Cairo, sans-serif":"Inter, sans-serif",padding:"8px 0",borderBottom:"1px solid #f3f4f6",minHeight:"24px"},children:B||o(`contractorApp.profile.placeholders.${E}`)||o("common.notSet")}),A[E]&&!A[E].isValid&&e.jsxs("div",{style:M.validationMessage,children:[e.jsx("svg",{style:{width:"14px",height:"14px",fill:"currentColor"},viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),A[E].message]}),A[E]&&A[E].isValid&&X.profile?.[E]&&e.jsxs("div",{style:{...M.validationMessage,...M.validationSuccess},children:[e.jsx("svg",{style:{width:"14px",height:"14px",fill:"currentColor"},viewBox:"0 0 24 24",children:e.jsx("path",{d:"M9 16.17L4.83 12L3.41 13.41L9 19L21 7L19.59 5.59L9 16.17Z"})}),o("validation.validInput")||"Valid"]})]},E)})}),c==="profile_business"&&e.jsxs("div",{style:M.buttonGroup,children:[e.jsx("button",{style:M.cancelButton,onClick:()=>qe("profile_business"),disabled:W,children:o("common.cancel")}),e.jsx("button",{style:{...M.saveButton,opacity:W?.7:1,cursor:W?"not-allowed":"pointer"},onClick:()=>Qe("profile_business"),disabled:W,children:o(W?"common.saving":"common.save")})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#1f2937",marginBottom:"16px",fontFamily:i?"Cairo, sans-serif":"Inter, sans-serif",borderBottom:"2px solid #3eb2b1",paddingBottom:"8px"},children:[o("contractorApp.profile.authServiceInfo.title"),e.jsxs("span",{style:{fontSize:"12px",color:"#9ca3af",fontWeight:"normal",marginLeft:"8px"},children:["(",o("contractorApp.profile.readOnly"),")"]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"20px"},children:G.filter(se=>se.section==="account").map(se=>{const{field:E,label:x,value:B}=se;return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[e.jsx("label",{style:{fontSize:"14px",fontWeight:"500",color:"#374151",fontFamily:i?"Cairo, sans-serif":"Inter, sans-serif"},children:x}),e.jsx("div",{style:{fontSize:"15px",color:B&&B!==o(`contractorApp.profile.placeholders.${E}`)&&B!==o(`form.${E}`)&&B!==o("form.business_email_placeholder")&&B!==o("form.saudi_phone_hint")?"#1f2937":"#9ca3af",fontStyle:B&&B!==o(`contractorApp.profile.placeholders.${E}`)&&B!==o(`form.${E}`)&&B!==o("form.business_email_placeholder")&&B!==o("form.saudi_phone_hint")?"normal":"italic",fontFamily:i?"Cairo, sans-serif":"Inter, sans-serif",padding:"8px 0",borderBottom:"1px solid #f3f4f6",minHeight:"24px"},children:B})]},E)})})]})]}):a==="contact"?e.jsx("div",{style:{background:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"12px",padding:"24px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#1f2937",margin:0,fontFamily:i?"Cairo, sans-serif":"Inter, sans-serif",borderBottom:"2px solid #3eb2b1",paddingBottom:"8px"},children:o("contractorApp.profile.contactMethods.title")}),e.jsx("button",{style:{...M.editButton,fontSize:"14px",padding:"6px 12px"},onClick:()=>p(c==="contact_additional"?null:"contact_additional"),children:o(c==="contact_additional"?"common.cancel":"common.edit")})]}),e.jsx("p",{style:{fontSize:"14px",color:"#6b7280",marginBottom:"16px",fontFamily:i?"Cairo, sans-serif":"Inter, sans-serif"},children:o("contractorApp.profile.contactMethods.description")}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"20px"},children:G.filter(se=>se.section==="additional").map(se=>{const{field:E,label:x,value:B,placeholder:F,type:Z}=se,le=c==="contact_additional";return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[e.jsxs("label",{style:{fontSize:"14px",fontWeight:"500",color:"#374151",fontFamily:i?"Cairo, sans-serif":"Inter, sans-serif"},children:[x,e.jsxs("span",{style:{fontSize:"12px",color:"#9ca3af",marginLeft:"8px"},children:["(",o("common.optional"),")"]})]}),le?e.jsxs("div",{style:{width:"100%"},children:[e.jsx("input",{type:Z||"text",style:{...M.input,...A[E]?.isValid===!0?M.inputValid:{},...A[E]?.isValid===!1?M.inputInvalid:{}},value:X.contact?.[E]||B||"",onChange:ge=>Ae("contact",E,ge.target.value),placeholder:F}),A[E]&&!A[E].isValid&&e.jsxs("div",{style:M.validationMessage,children:[e.jsx("svg",{style:{width:"14px",height:"14px",fill:"currentColor"},viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),A[E].message]}),A[E]&&A[E].isValid&&X.contact?.[E]&&e.jsxs("div",{style:{...M.validationMessage,...M.validationSuccess},children:[e.jsx("svg",{style:{width:"14px",height:"14px",fill:"currentColor"},viewBox:"0 0 24 24",children:e.jsx("path",{d:"M9 16.17L4.83 12L3.41 13.41L9 19L21 7L19.59 5.59L9 16.17Z"})}),o("validation.validInput")||"Valid"]})]}):e.jsx("div",{style:{fontSize:"15px",color:B?"#1f2937":"#9ca3af",fontStyle:B?"normal":"italic",fontFamily:i?"Cairo, sans-serif":"Inter, sans-serif",padding:"8px 0",borderBottom:"1px solid #f3f4f6",minHeight:"24px"},children:B||F||o("common.notSet")})]},E)})}),c==="contact_additional"&&e.jsxs("div",{style:M.buttonGroup,children:[e.jsx("button",{style:M.cancelButton,onClick:()=>qe("contact_additional"),disabled:W,children:o("common.cancel")}),e.jsx("button",{style:{...M.saveButton,opacity:W?.7:1,cursor:W?"not-allowed":"pointer"},onClick:()=>Qe("contact_additional"),disabled:W,children:o(W?"common.saving":"common.save")})]})]})}):e.jsx("div",{style:M.fieldsGrid,children:G.map(se=>{const{field:E,label:x,value:B,type:F,options:Z,readOnly:le,required:ge}=se,ye=le||a==="verification",Te=(pe=>pe.includes("email")?"email":pe.includes("phone")||pe.includes("whatsapp")?"tel":pe.includes("website")?"url":F==="number"?"number":"text")(E),zr=F==="toggle",Ue=F==="toggle"||F==="language"?X[a][E]:B;return e.jsxs("div",{style:M.fieldGroup,children:[e.jsxs("label",{style:M.fieldLabel,children:[x,ge&&e.jsx("span",{style:{color:"#ef4444"},children:"*"}),ye&&e.jsxs("span",{style:{fontSize:"12px",color:"#9ca3af"},children:["(",o("contractorApp.profile.readOnly"),")"]})]}),zr?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxs("div",{onClick:()=>D&&Ae(a,E,!Ue),style:{width:"48px",height:"24px",backgroundColor:Ue?"#3eb2b1":"#d1d5db",borderRadius:"12px",position:"relative",cursor:D?"pointer":"not-allowed",transition:"background-color 0.2s ease",opacity:D?1:.7,border:"2px solid transparent",boxShadow:Ue?"0 2px 4px rgba(62, 178, 177, 0.3)":"0 2px 4px rgba(0, 0, 0, 0.1)"},children:[e.jsx("div",{style:{width:"18px",height:"18px",backgroundColor:"#ffffff",borderRadius:"50%",position:"absolute",top:"1px",left:Ue?"27px":"1px",transition:"left 0.2s ease",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)"}}),e.jsx("input",{type:"checkbox",checked:Ue,onChange:()=>{},style:{position:"absolute",opacity:0,width:"100%",height:"100%",margin:0,cursor:"pointer"},disabled:!D})]}),e.jsx("span",{style:{color:Ue?"#059669":"#6b7280",fontSize:"14px",fontWeight:"500"},children:Ue?o("common.enabled")||"Enabled":o("common.disabled")||"Disabled"})]}):!D||ye?F==="badge"&&E==="verification_level"?e.jsx("div",{style:M.fieldValue,children:e.jsx(Vo,{status:parseInt(B)>0?"verified":"not_verified"})}):F==="badge"&&E==="status"?e.jsx("div",{style:M.fieldValue,children:e.jsx("span",{style:{padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",backgroundColor:B==="active"?"#dcfce7":B==="verified"?"#dbeafe":"#fef3c7",color:B==="active"?"#166534":B==="verified"?"#1e40af":"#92400e"},children:o(`contractorApp.profile.statusTypes.${B}`)||B})}):F==="rating"?e.jsxs("div",{style:M.fieldValue,children:[B," ⭐ (",u?.total_reviews||0," ",o("contractorApp.profile.reviews"),")"]}):F==="multiselect"?!D||ye?e.jsx("div",{style:M.fieldValue,children:Array.isArray(B)&&B.length>0?B.map(pe=>{const pt=Z?.find(Et=>Et.value===pe);return pt?pt.label:pe}).join(", "):o("common.notSet")||"None selected"}):e.jsxs("div",{style:{width:"100%"},children:[e.jsx(jv,{options:Z||[],value:(()=>{const pe=X[a][E];return Array.isArray(pe)?pe:J(pe)})(),onChange:pe=>Ae(a,E,pe),placeholder:o(`contractorApp.profile.placeholders.${E}`)||o("common.selectOptions")||"Select options...",disabled:!D||ye,searchable:!0,clearable:!0,maxHeight:200,error:!!A[E]&&!A[E].isValid}),A[E]&&!A[E].isValid&&e.jsxs("div",{style:M.validationMessage,children:[e.jsx("svg",{style:{width:"14px",height:"14px",fill:"currentColor"},viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),A[E].message]}),A[E]&&A[E].isValid&&Array.isArray(X[a][E])&&X[a][E].length>0&&e.jsxs("div",{style:{...M.validationMessage,...M.validationSuccess},children:[e.jsx("svg",{style:{width:"14px",height:"14px",fill:"currentColor"},viewBox:"0 0 24 24",children:e.jsx("path",{d:"M9 16.17L4.83 12L3.41 13.41L9 19L21 7L19.59 5.59L9 16.17Z"})}),o("validation.validInput")||"Valid"]})]}):e.jsx("div",{style:M.fieldValue,children:a==="profile"?e.jsx("span",{style:{color:B&&B!==o(`contractorApp.profile.placeholders.${E}`)&&B!==o(`form.${E}`)&&B!==o("form.business_email_placeholder")&&B!==o("form.saudi_phone_hint")?"#1f2937":"#9ca3af",fontStyle:B&&B!==o(`contractorApp.profile.placeholders.${E}`)&&B!==o(`form.${E}`)&&B!==o("form.business_email_placeholder")&&B!==o("form.saudi_phone_hint")?"normal":"italic"},children:B}):B||o("common.notSet")}):D&&!ye?F==="multiselect"?null:F==="dropdown"?e.jsxs("select",{style:M.input,value:X[a][E],onChange:pe=>Ae(a,E,pe.target.value),children:[e.jsx("option",{value:"",children:o("common.selectOption")}),Z?.map(pe=>e.jsx("option",{value:pe.value,children:pe.label},pe.value))]}):F==="textarea"?e.jsx("textarea",{style:{...M.input,minHeight:"80px",resize:"vertical"},value:X[a][E],onChange:pe=>Ae(a,E,pe.target.value),placeholder:o(`contractorApp.profile.placeholders.${E}`)}):F==="language"?e.jsxs("select",{style:M.input,value:Ue,onChange:pe=>{Ae(a,E,pe.target.value),s.changeLanguage(pe.target.value)},children:[e.jsx("option",{value:"ar",children:o("languages.ar")}),e.jsx("option",{value:"en",children:o("languages.en")})]}):e.jsxs("div",{style:{width:"100%"},children:[e.jsx("input",{type:Te,style:{...M.input,...A[E]?.isValid===!0?M.inputValid:{},...A[E]?.isValid===!1?M.inputInvalid:{}},value:X[a][E],onChange:pe=>Ae(a,E,pe.target.value),placeholder:o(`contractorApp.profile.placeholders.${E}`),min:Te==="number"&&E.includes("year")?"1900":void 0,max:Te==="number"&&E.includes("year")?new Date().getFullYear().toString():void 0,step:Te==="number"?"1":void 0,maxLength:["business_name","business_name_ar"].includes(E)?100:["city","region"].includes(E)?30:["address_line1","address_line2"].includes(E)?100:E==="description"||E==="description_ar"?500:void 0}),["business_name","business_name_ar","description","description_ar","address_line1","address_line2"].includes(E)&&e.jsxs("div",{style:M.characterCount,children:[X[a][E].length," / ",["business_name","business_name_ar"].includes(E)?100:["description","description_ar"].includes(E)?500:100]}),A[E]&&!A[E].isValid&&e.jsxs("div",{style:M.validationMessage,children:[e.jsx("svg",{style:{width:"14px",height:"14px",fill:"currentColor"},viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),A[E].message]}),A[E]&&A[E].isValid&&X[a][E]&&e.jsxs("div",{style:{...M.validationMessage,...M.validationSuccess},children:[e.jsx("svg",{style:{width:"14px",height:"14px",fill:"currentColor"},viewBox:"0 0 24 24",children:e.jsx("path",{d:"M9 16.17L4.83 12L3.41 13.41L9 19L21 7L19.59 5.59L9 16.17Z"})}),o("validation.validInput")||"Valid"]}),L[E]&&e.jsxs("div",{style:M.validationMessage,children:[e.jsx("svg",{style:{width:"14px",height:"14px",fill:"currentColor"},viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),L[E]]})]}):null]},E)})}),a==="address"&&D&&e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("button",{onClick:N,disabled:q,style:{...M.locationButton,opacity:q?.7:1,cursor:q?"not-allowed":"pointer"},children:o(q?"contractorApp.profile.gettingLocation":"contractorApp.profile.getLocation")}),ie&&e.jsx("div",{style:M.validationMessage,children:ie})]}),D&&a!=="verification"&&a!=="profile"&&e.jsxs("div",{style:M.buttonGroup,children:[e.jsx("button",{style:M.cancelButton,onClick:()=>qe(a),disabled:W,children:o("common.cancel")}),e.jsx("button",{style:{...M.saveButton,opacity:W?.7:1,cursor:W?"not-allowed":"pointer"},onClick:()=>Qe(a),disabled:W,children:o(W?"common.saving":"common.save")})]})]})};return b?e.jsx("div",{style:M.container,children:e.jsx("div",{style:M.loadingState,children:o("contractorApp.profile.loading")||"Loading contractor profile..."})}):e.jsxs("div",{style:M.container,children:[e.jsx("div",{style:M.profileHeader,children:e.jsxs("div",{style:M.profileInfo,children:[e.jsx("div",{style:M.avatar,children:(u?.business_name||d.first_name||"C").charAt(0).toUpperCase()}),e.jsxs("div",{style:M.profileText,children:[e.jsx("div",{style:M.profileName,children:u?.business_name||`${d.first_name||""} ${d.last_name||""}`.trim()||o("common.unknown")}),e.jsx("div",{style:M.profileRole,children:o("contractorApp.badge.contractor")}),e.jsx("div",{style:M.profileStatus,children:e.jsx(Vo,{status:_})}),e.jsxs("div",{style:M.progressSection,children:[e.jsxs("div",{style:M.progressLabel,children:[e.jsx("span",{children:"Business Profile Completion"}),e.jsxs("span",{style:M.progressPercentage,children:[O,"%"]})]}),e.jsx("div",{style:M.progressBarContainer,children:e.jsx("div",{style:{...M.progressBar,width:`${O}%`}})})]})]})]})}),e.jsx("div",{style:M.mobileMenu,children:je.map(D=>e.jsx("button",{style:{...M.menuItem,...a===D.id?M.activeMenuItem:{}},onClick:()=>l(D.id),children:e.jsx("span",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:D.icon})},D.id))}),e.jsxs("div",{style:M.contentLayout,children:[e.jsx("div",{style:M.leftSidebar,children:je.map(D=>e.jsxs("button",{style:{...M.menuItem,...a===D.id?M.activeMenuItem:{}},onClick:()=>l(D.id),onMouseEnter:T=>{a!==D.id&&(T.currentTarget.style.background="rgba(62, 178, 177, 0.08)",T.currentTarget.style.color="#3eb2b1")},onMouseLeave:T=>{a!==D.id&&(T.currentTarget.style.background="transparent",T.currentTarget.style.color="#6b7280")},children:[e.jsx("span",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:D.icon}),e.jsx("span",{children:D.label})]},D.id))}),ue()]})]})},kv=({userType:r})=>{const{t}=ve();return e.jsx(Yd,{userType:r})},ll=({user:r})=>{const{t,i18n:o}=ve(),s=o.language==="ar",[i,a]=y.useState({totalProjects:0,activeProjects:0,completedProjects:0,totalRevenue:0,pendingPayments:0,averageRating:0,totalReviews:0,monthlyProjects:0}),[l,c]=y.useState(!0);y.useEffect(()=>{(async()=>{try{c(!0),await new Promise(R=>setTimeout(R,1e3)),a({totalProjects:25,activeProjects:3,completedProjects:22,totalRevenue:185e3,pendingPayments:15e3,averageRating:4.7,totalReviews:18,monthlyProjects:5})}catch(R){console.error("Error fetching dashboard data:",R)}finally{c(!1)}})()},[r.id]);const p=()=>r.business_name?r.business_name:r.first_name&&r.last_name?`${r.first_name} ${r.last_name}`:r.first_name?r.first_name:r.email.split("@")[0],d=()=>{const S=r.verification_level||0;return S>=4?{text:t("contractorApp.verification.verified"),color:"#10b981"}:S>=2?{text:t("contractorApp.verification.partial"),color:"#f59e0b"}:{text:t("contractorApp.verification.pending"),color:"#ef4444"}},m=S=>new Intl.NumberFormat(s?"ar-SA":"en-SA",{style:"currency",currency:"SAR",minimumFractionDigits:0}).format(S),u=d(),h={background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",borderRadius:"20px",border:"1px solid rgba(62, 178, 177, 0.2)",boxShadow:"0 8px 32px rgba(62, 178, 177, 0.1)",padding:"1.5rem",transition:n.transitions.normal},b={...h,textAlign:"center",cursor:"pointer"},j={fontSize:"2rem",fontWeight:"700",color:"#1a1a1a",marginBottom:"0.5rem",textAlign:s?"right":"left"},_={fontSize:"1rem",color:"#6b7280",marginBottom:"2rem",textAlign:s?"right":"left"};return l?e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"400px",flexDirection:"column",gap:"1rem"},children:[e.jsx("div",{style:{width:"48px",height:"48px",border:"4px solid rgba(62, 178, 177, 0.2)",borderTop:"4px solid #3eb2b1",borderRadius:"50%",animation:"spin 1s linear infinite"}}),e.jsx("p",{style:{color:"#6b7280"},children:t("contractorApp.dashboard.loading")})]}):e.jsxs("div",{style:{direction:s?"rtl":"ltr"},children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx("h1",{style:j,children:t("contractorApp.dashboard.welcome",{name:p()})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[e.jsx("p",{style:_,children:t("contractorApp.dashboard.subtitle")}),e.jsx("div",{style:{padding:"0.25rem 0.75rem",backgroundColor:u.color+"20",color:u.color,borderRadius:"20px",fontSize:"0.875rem",fontWeight:"600"},children:u.text})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(min(280px, 100%), 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[e.jsxs("div",{style:b,onMouseEnter:S=>{S.currentTarget.style.transform="translateY(-4px)",S.currentTarget.style.boxShadow="0 12px 40px rgba(62, 178, 177, 0.2)"},onMouseLeave:S=>{S.currentTarget.style.transform="translateY(0)",S.currentTarget.style.boxShadow="0 8px 32px rgba(62, 178, 177, 0.1)"},children:[e.jsx("div",{style:{width:"64px",height:"64px",background:"linear-gradient(135deg, #3eb2b1 0%, #22d3db 100%)",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem auto",boxShadow:"0 8px 24px rgba(62, 178, 177, 0.3)"},children:e.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z",stroke:"white",strokeWidth:"2",fill:"none"}),e.jsx("polyline",{points:"14,2 14,8 20,8",stroke:"white",strokeWidth:"2",fill:"none"})]})}),e.jsx("h3",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1a1a1a",margin:"0 0 0.5rem 0"},children:i.totalProjects}),e.jsx("p",{style:{fontSize:"1rem",color:"#6b7280",fontWeight:"600"},children:t("contractorApp.dashboard.stats.totalProjects")})]}),e.jsxs("div",{style:b,onMouseEnter:S=>{S.currentTarget.style.transform="translateY(-4px)",S.currentTarget.style.boxShadow="0 12px 40px rgba(62, 178, 177, 0.2)"},onMouseLeave:S=>{S.currentTarget.style.transform="translateY(0)",S.currentTarget.style.boxShadow="0 8px 32px rgba(62, 178, 177, 0.1)"},children:[e.jsx("div",{style:{width:"64px",height:"64px",background:"linear-gradient(135deg, #10b981 0%, #34d399 100%)",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem auto",boxShadow:"0 8px 24px rgba(16, 185, 129, 0.3)"},children:e.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"white",strokeWidth:"2",fill:"none"}),e.jsx("path",{d:"M12 6v6l4 2",stroke:"white",strokeWidth:"2",strokeLinecap:"round"})]})}),e.jsx("h3",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1a1a1a",margin:"0 0 0.5rem 0"},children:i.activeProjects}),e.jsx("p",{style:{fontSize:"1rem",color:"#6b7280",fontWeight:"600"},children:t("contractorApp.dashboard.stats.activeProjects")})]}),e.jsxs("div",{style:b,onMouseEnter:S=>{S.currentTarget.style.transform="translateY(-4px)",S.currentTarget.style.boxShadow="0 12px 40px rgba(62, 178, 177, 0.2)"},onMouseLeave:S=>{S.currentTarget.style.transform="translateY(0)",S.currentTarget.style.boxShadow="0 8px 32px rgba(62, 178, 177, 0.1)"},children:[e.jsx("div",{style:{width:"64px",height:"64px",background:"linear-gradient(135deg, #8b5cf6 0%, #a78bfa 100%)",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem auto",boxShadow:"0 8px 24px rgba(139, 92, 246, 0.3)"},children:e.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"23",stroke:"white",strokeWidth:"2"}),e.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",stroke:"white",strokeWidth:"2",fill:"none"})]})}),e.jsx("h3",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#1a1a1a",margin:"0 0 0.5rem 0"},children:m(i.totalRevenue)}),e.jsx("p",{style:{fontSize:"1rem",color:"#6b7280",fontWeight:"600"},children:t("contractorApp.dashboard.stats.totalRevenue")})]}),e.jsxs("div",{style:b,onMouseEnter:S=>{S.currentTarget.style.transform="translateY(-4px)",S.currentTarget.style.boxShadow="0 12px 40px rgba(62, 178, 177, 0.2)"},onMouseLeave:S=>{S.currentTarget.style.transform="translateY(0)",S.currentTarget.style.boxShadow="0 8px 32px rgba(62, 178, 177, 0.1)"},children:[e.jsx("div",{style:{width:"64px",height:"64px",background:"linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%)",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem auto",boxShadow:"0 8px 24px rgba(245, 158, 11, 0.3)"},children:e.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z",fill:"white"})})}),e.jsx("h3",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1a1a1a",margin:"0 0 0.5rem 0"},children:i.averageRating.toFixed(1)}),e.jsxs("p",{style:{fontSize:"1rem",color:"#6b7280",fontWeight:"600"},children:[t("contractorApp.dashboard.stats.averageRating")," (",i.totalReviews," ",t("contractorApp.dashboard.stats.reviews"),")"]})]})]}),e.jsxs("div",{style:h,children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1a1a1a",marginBottom:"1.5rem",textAlign:s?"right":"left"},children:t("contractorApp.dashboard.quickActions.title")}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[e.jsx("button",{style:{padding:"1rem",background:"linear-gradient(135deg, rgba(62, 178, 177, 0.1) 0%, rgba(34, 211, 219, 0.1) 100%)",border:"1px solid rgba(62, 178, 177, 0.3)",borderRadius:"12px",color:"#3eb2b1",fontWeight:"600",cursor:"pointer",transition:n.transitions.fast},onMouseEnter:S=>{S.currentTarget.style.background="linear-gradient(135deg, rgba(62, 178, 177, 0.2) 0%, rgba(34, 211, 219, 0.2) 100%)",S.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:S=>{S.currentTarget.style.background="linear-gradient(135deg, rgba(62, 178, 177, 0.1) 0%, rgba(34, 211, 219, 0.1) 100%)",S.currentTarget.style.transform="translateY(0)"},children:t("contractorApp.dashboard.quickActions.newProject")}),e.jsx("button",{style:{padding:"1rem",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(52, 211, 153, 0.1) 100%)",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"12px",color:"#10b981",fontWeight:"600",cursor:"pointer",transition:n.transitions.fast},onMouseEnter:S=>{S.currentTarget.style.background="linear-gradient(135deg, rgba(16, 185, 129, 0.2) 0%, rgba(52, 211, 153, 0.2) 100%)",S.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:S=>{S.currentTarget.style.background="linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(52, 211, 153, 0.1) 100%)",S.currentTarget.style.transform="translateY(0)"},children:t("contractorApp.dashboard.quickActions.manageProducts")}),e.jsx("button",{style:{padding:"1rem",background:"linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(167, 139, 250, 0.1) 100%)",border:"1px solid rgba(139, 92, 246, 0.3)",borderRadius:"12px",color:"#8b5cf6",fontWeight:"600",cursor:"pointer",transition:n.transitions.fast},onMouseEnter:S=>{S.currentTarget.style.background="linear-gradient(135deg, rgba(139, 92, 246, 0.2) 0%, rgba(167, 139, 250, 0.2) 100%)",S.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:S=>{S.currentTarget.style.background="linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(167, 139, 250, 0.1) 100%)",S.currentTarget.style.transform="translateY(0)"},children:t("contractorApp.dashboard.quickActions.viewWallet")})]})]}),e.jsxs("div",{style:{...h,marginTop:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1a1a1a",marginBottom:"1.5rem",textAlign:s?"right":"left"},children:t("contractorApp.dashboard.recentActivity.title")}),e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"3rem",color:"#6b7280",fontSize:"1rem"},children:t("contractorApp.dashboard.recentActivity.noActivity")})]})]})},Cv=({user:r})=>{const{t,i18n:o}=ve(),s=o.language==="ar",i={background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",borderRadius:"20px",border:"1px solid rgba(62, 178, 177, 0.2)",boxShadow:"0 8px 32px rgba(62, 178, 177, 0.1)",padding:"2rem",marginBottom:"1.5rem"};return e.jsxs("div",{style:{direction:s?"rtl":"ltr"},children:[e.jsx("h1",{style:{fontSize:"2rem",fontWeight:"700",color:"#1a1a1a",marginBottom:"2rem",textAlign:s?"right":"left"},children:t("contractorApp.projects.title")}),e.jsx("div",{style:i,children:e.jsxs("div",{style:{textAlign:"center",padding:"4rem 2rem",color:"#6b7280"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",color:"#1a1a1a",marginBottom:"1rem"},children:t("contractorApp.projects.management")}),e.jsx("p",{children:t("contractorApp.projects.comingSoon")})]})})]})},_v=()=>e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"2rem",willChange:"transform"},children:e.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid rgba(62, 178, 177, 0.1)",borderTop:"4px solid #3eb2b1",borderRadius:"50%",animation:"optimizedSpin 0.8s cubic-bezier(0.4, 0, 0.2, 1) infinite",transform:"translateZ(0)",backfaceVisibility:"hidden"},children:e.jsx("style",{children:`
        @keyframes optimizedSpin {
          0% { transform: translateZ(0) rotate(0deg); }
          100% { transform: translateZ(0) rotate(360deg); }
        }
      `})})}),yo=({children:r,onClick:t,style:o,disabled:s})=>{const[i,a]=y.useState(!1),l={background:"linear-gradient(135deg, #2d8a89 0%, #1f6b6a 100%)",color:"white",border:"none",borderRadius:"12px",padding:"12px 24px",fontSize:"16px",fontWeight:"600",cursor:s?"not-allowed":"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 4px 15px rgba(45, 138, 137, 0.3)",transform:"translateZ(0)",willChange:"transform",position:"relative",overflow:"hidden",opacity:s?.7:1},c=()=>{s||(a(!0),setTimeout(()=>a(!1),600),t())};return e.jsxs("button",{onClick:c,disabled:s,style:{...l,...o},onMouseEnter:p=>{s||(p.currentTarget.style.transform="translateY(-2px)",p.currentTarget.style.boxShadow="0 8px 25px rgba(45, 138, 137, 0.4)")},onMouseLeave:p=>{s||(p.currentTarget.style.transform="translateY(0)",p.currentTarget.style.boxShadow="0 4px 15px rgba(45, 138, 137, 0.3)")},children:[r,i&&e.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",width:"0",height:"0",background:"rgba(255, 255, 255, 0.3)",borderRadius:"50%",transform:"translate(-50%, -50%)",animation:"wave-ripple 0.6s ease-out",pointerEvents:"none"}}),e.jsx("style",{children:`
        @keyframes wave-ripple {
          0% {
            width: 0;
            height: 0;
            opacity: 1;
          }
          100% {
            width: 300px;
            height: 300px;
            opacity: 0;
          }
        }
      `})]})},Tv=(r,t)=>{const[o,s]=y.useState(r);return y.useEffect(()=>{const i=setTimeout(()=>s(r),t);return()=>clearTimeout(i)},[r,t]),o},Av=({user:r})=>{const{t,i18n:o}=ve(),s=o.language==="ar",i=y.useRef(null);Me.useEffect(()=>{const x=document.createElement("style");return x.textContent=`
      @keyframes slideInRight {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }
      
      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }
    `,document.head.appendChild(x),()=>{document.head.removeChild(x)}},[]);const[a,l]=y.useState("dashboard"),[c,p]=y.useState(null),[d,m]=y.useState([]),[u,h]=y.useState([]),[b,j]=y.useState(!0),[_,S]=y.useState(""),[R,I]=y.useState(!1),[C,z]=y.useState(!1),[f,P]=y.useState(!1),[w,O]=y.useState(null),[V,re]=y.useState({show:!1,message:"",type:"success"}),[Q,oe]=y.useState({totalProducts:0,activeProducts:0,pendingApproval:0,totalViews:0,totalSales:0,revenue:0,avgRating:0,conversionRate:0});y.useEffect(()=>{if(d.length>0){console.log("📊 Calculating KPIs for products:",d.length),console.log("📊 Sample product status:",d[0]?.status,d[0]?.approvalStatus);const x=d.filter(F=>F.status==="ACTIVE"&&F.approvalStatus==="APPROVED").length,B=d.filter(F=>F.status==="PENDING_APPROVAL"||F.approvalStatus==="PENDING").length;console.log("📊 Active count:",x),console.log("📊 Pending count:",B),oe({totalProducts:d.length,activeProducts:x,pendingApproval:B,totalViews:d.reduce((F,Z)=>F+(Z.views||0),0),totalSales:d.reduce((F,Z)=>F+(Z.totalSales||0),0),revenue:d.reduce((F,Z)=>F+(Z.totalSales||0)*Z.price,0),avgRating:d.reduce((F,Z)=>F+(Z.averageRating||0),0)/d.length||0,conversionRate:d.length>0&&d.reduce((F,Z)=>F+(Z.views||0),0)>0?d.reduce((F,Z)=>F+(Z.totalSales||0),0)/d.reduce((F,Z)=>F+(Z.views||0),0)*100:0})}},[d]);const[K,Y]=y.useState({search:"",category:"",brand:"",priceRange:[0,1e4],status:"",sortBy:"created",sortOrder:"desc",showFilters:!1});Tv(K.search,300);const[W,$]=y.useState([]),[L,k]=y.useState([]),[v,g]=y.useState({contractorId:r.contractorId||r.id,categoryId:"",productCategory:"SOLAR_PANEL",name:"",nameAr:"",description:"",descriptionAr:"",slug:"",brand:"",model:"",sku:"",specifications:{wattage:"",efficiency:"",warranty:"",dimensions:"",weight:""},price:0,currency:"SAR",vatIncluded:!0,stockQuantity:0,status:"DRAFT",images:[]}),[A,ee]=y.useState({}),U=y.useMemo(()=>({background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",borderRadius:"20px",border:"1px solid rgba(62, 178, 177, 0.2)",boxShadow:"0 8px 32px rgba(62, 178, 177, 0.1)",padding:"2rem",marginBottom:"1.5rem",transform:"translateZ(0)",willChange:"transform"}),[]);y.useMemo(()=>({background:"linear-gradient(135deg, #2d8a89 0%, #1f6b6a 100%)",color:"white",border:"none",borderRadius:"12px",padding:"12px 24px",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 4px 15px rgba(45, 138, 137, 0.3)",transform:"translateZ(0)",willChange:"transform",position:"relative",overflow:"hidden"}),[]);const q=y.useMemo(()=>({width:"100%",padding:"12px 16px",borderRadius:"10px",border:"2px solid #e5e7eb",fontSize:"16px",color:"#1a1a1a",fontWeight:"500",transition:"all 0.15s ease",outline:"none",backgroundColor:"white",willChange:"border-color, box-shadow"}),[]);y.useMemo(()=>({...q,cursor:"pointer",fontWeight:"500",color:"#1a1a1a"}),[q]),y.useMemo(()=>({background:"rgba(62, 178, 177, 0.1)",border:"1px solid rgba(62, 178, 177, 0.2)",borderRadius:"8px",padding:"8px",cursor:"pointer",transition:"all 0.15s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",alignItems:"center",justifyContent:"center",transform:"translateZ(0)"}),[]),y.useEffect(()=>{ie()},[]);const ie=async()=>{try{j(!0),console.log("📦 Loading marketplace data for contractor:",r.contractorId||r.id);const[x,B]=await Promise.allSettled([nt.getCategories(),nt.getContractorProducts(r.contractorId||r.id,{page:1,limit:100})]);x.status==="fulfilled"?h(x.value||[]):console.error("Failed to load categories:",x.reason),B.status==="fulfilled"?(console.log("📊 Products loaded:",B.value),m(B.value.data||[]),console.log("📊 Products count:",B.value.data?.length||0)):console.error("Failed to load products:",B.reason)}catch(x){console.error("Error loading marketplace data:",x),S("Failed to load marketplace data")}finally{j(!1)}},ce=(x,B)=>{if(g(F=>({...F,[x]:B})),x==="name"&&typeof B=="string"){const F=B.toLowerCase().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"");g(Z=>({...Z,slug:F}))}A[x]&&ee(F=>({...F,[x]:""}))},J=(x,B)=>{g(F=>({...F,specifications:{...F.specifications,[x]:B}}))},X=()=>{const x={};return v.name||(x.name="Product name is required"),v.categoryId||(x.categoryId="Category is required"),v.brand||(x.brand="Brand is required"),(!v.price||v.price<=0)&&(x.price="Valid price is required"),(!v.stockQuantity||v.stockQuantity<0)&&(x.stockQuantity="Valid stock quantity is required"),ee(x),Object.keys(x).length===0},ae=x=>{const B=u.find(Z=>Z.id===x);if(!B)return"SOLAR_PANEL";const F=B.slug.toLowerCase();return F.includes("inverter")?"INVERTER":F.includes("batter")?"BATTERY":F.includes("panel")||F.includes("solar")?"SOLAR_PANEL":F.includes("system")||F.includes("full")?"FULL_SYSTEM":"SOLAR_PANEL"},de=x=>{const B=ae(x);console.log("🔄 Category changed:",{categoryId:x,productCategory:B}),g(F=>({...F,categoryId:x,productCategory:B,specifications:{}}))},je=x=>{switch(x){case"INVERTER":return[{key:"model",label:"Model",placeholder:"e.g., DFY-3.6KW"},{key:"powerRate",label:"Power Rate",placeholder:"e.g., 3.6KW"},{key:"type",label:"Type",placeholder:"e.g., Hybrid, Grid-Tie, Off-Grid"},{key:"mppts",label:"MPPTs",placeholder:"e.g., 1, 2"},{key:"mpptRange",label:"MPPT Range (V)",placeholder:"e.g., 40-450V"},{key:"maxInputCurrent",label:"Max Input Current (A)",placeholder:"e.g., 18A"},{key:"outputPhase",label:"Output Phase",placeholder:"e.g., 3-phase, single-phase"},{key:"inverterCommunication",label:"Communication",placeholder:"e.g., RS485/RS232/USB"},{key:"inverterWeight",label:"Weight (kg)",placeholder:"e.g., 6.3"}];case"BATTERY":return[{key:"model",label:"Model",placeholder:"e.g., D-200Ah 12.8V"},{key:"capacity",label:"Capacity",placeholder:"e.g., 2.56 KWH"},{key:"voltage",label:"Voltage",placeholder:"e.g., 12.8V, 24V, 48V"},{key:"current",label:"Current (Ah)",placeholder:"e.g., 200Ah"},{key:"cycleLife",label:"Cycle Life",placeholder:"e.g., 6000, 8000"},{key:"batteryCommunication",label:"Communication",placeholder:"e.g., Bluetooth, CAN"},{key:"batteryWeight",label:"Weight (kg)",placeholder:"e.g., 29.5"},{key:"batteryDimensions",label:"Dimensions (mm)",placeholder:"e.g., 270*520*230"}];case"SOLAR_PANEL":return[{key:"model",label:"Model",placeholder:"e.g., Sunny P-450"},{key:"maxPower",label:"Max Power",placeholder:"e.g., 450W, 550W"},{key:"bindingSpecifications",label:"Binding Specs",placeholder:"e.g., Every 36 pieces"},{key:"efficiency",label:"Efficiency",placeholder:"e.g., ≥21.46%"},{key:"panelVoltage",label:"Operating Voltage",placeholder:"e.g., 49.3V/work41.5V"},{key:"workingCurrent",label:"Working Current",placeholder:"e.g., A ≥10.86"},{key:"workingTemperature",label:"Operating Temperature",placeholder:"e.g., -40°C ~ +85°C"},{key:"panelWeight",label:"Weight",placeholder:"e.g., 23KG"},{key:"panelDimensions",label:"Dimensions (mm)",placeholder:"e.g., 1909 x 1038 x 30 mm"}];case"FULL_SYSTEM":return[{key:"model",label:"Model",placeholder:"e.g., Sunny - 6KW / 16KW"},{key:"systemPower",label:"System Power",placeholder:"e.g., 6 KW"},{key:"systemPeak",label:"Peak Power",placeholder:"e.g., 12KW"},{key:"cOutput",label:"AC Output",placeholder:"e.g., 50Hz/AC220V*2"},{key:"batteryCapacity",label:"Battery Capacity",placeholder:"e.g., 16KWH LiFepo4"},{key:"chargingPower",label:"Charging Power",placeholder:"e.g., 3.2 KW"},{key:"solarConfiguration",label:"Solar Configuration",placeholder:"e.g., 580W*8PS"},{key:"generatingCapacity",label:"Generating Capacity",placeholder:"e.g., 22KW 20 square"},{key:"systemDimensions1",label:"Main Unit Dimensions (mm)",placeholder:"e.g., 500*280*1080MM"},{key:"systemDimensions2",label:"Secondary Unit Dimensions (mm)",placeholder:"e.g., 550*430*1130MM"},{key:"totalWeight",label:"Total Weight",placeholder:"e.g., 143KG+285KG"}];default:return[]}},fe=x=>{x.currentTarget.style.borderColor="#3eb2b1",x.currentTarget.style.boxShadow="0 0 0 3px rgba(62, 178, 177, 0.15)"},me=(x,B)=>{x.currentTarget.style.borderColor=B?"#ef4444":"#e5e7eb",x.currentTarget.style.boxShadow="none"},Ae=async()=>{if(X())try{I(!0);const x={contractorId:v.contractorId,categoryId:v.categoryId,productCategory:v.productCategory,name:v.name,nameAr:v.nameAr,description:v.description,descriptionAr:v.descriptionAr,slug:v.slug,brand:v.brand,model:v.model,sku:v.sku,specifications:v.specifications,price:v.price,currency:v.currency,vatIncluded:v.vatIncluded,stockQuantity:v.stockQuantity,status:c?"ACTIVE":v.status,images:v.images||[]};let B;if(c)console.log("🚀 Updating product with data:",x),B=await nt.updateProduct(c.id,x),console.log("✅ Product updated successfully:",B),(L.length>0||v.images&&v.images.length>0)&&(console.log("🖼️ Updating images: deleting",L.length,"adding",v.images?.length||0),await nt.updateProductImages(c.id,L,v.images||[]),B=await nt.getProductById(c.id)),m(F=>(console.log("📝 Updating products list for edit, previous count:",F.length),console.log("🖼️ Updated product result:",B),F.map(Z=>Z.id===c.id?B:Z))),E("Product updated successfully!","success");else{if(console.log("🚀 Creating product with data:",x),B=await nt.createProduct(x),console.log("✅ Product created successfully:",B),!B||!B.id)throw new Error("Invalid product data returned from server");m(F=>(console.log("📝 Updating products list for create, previous count:",F.length),[B,...F])),E("Product created successfully!","success")}S(""),console.log("🔄 Resetting form..."),p(null),$([]),k([]),g({contractorId:r.contractorId||r.id,categoryId:"",productCategory:"SOLAR_PANEL",name:"",nameAr:"",description:"",descriptionAr:"",slug:"",brand:"",model:"",sku:"",specifications:{wattage:"",efficiency:"",warranty:"",dimensions:"",weight:""},price:0,currency:"SAR",vatIncluded:!0,stockQuantity:0,status:"DRAFT",images:[]}),ee({}),console.log("🔀 Switching to products tab..."),setTimeout(()=>{l("products"),console.log("✅ Switched to products tab")},100)}catch(x){console.error(`Error ${c?"updating":"creating"} product:`,x);const B=x.message||`Failed to ${c?"update":"create"} product`;S(B),E(B,"error")}finally{I(!1)}},qe=async x=>{try{const B=await nt.submitProductForApproval(x);m(Z=>Z.map(le=>le.id===x?B:le));const F=d.find(Z=>Z.id===x)?.name||"Product";E(`"${F}" has been submitted for approval`,"success")}catch(B){console.error("Error submitting for approval:",B),E(B.message||"Failed to submit for approval","error")}},Qe=(x,B)=>x==="ACTIVE"&&B==="APPROVED"?"#22c55e":x==="PENDING_APPROVAL"||B==="PENDING"?"#f59e0b":B==="REJECTED"?"#ef4444":B==="CHANGES_REQUIRED"?"#f97316":"#6b7280",N=(x,B)=>x==="ACTIVE"&&B==="APPROVED"?"Active & Approved":x==="PENDING_APPROVAL"||B==="PENDING"?"Pending Approval":B==="REJECTED"?"Rejected":B==="CHANGES_REQUIRED"?"Changes Required":x==="DRAFT"?"Draft":"Inactive",M=x=>{console.log("📝 Editing product:",x.name),p(x),console.log("🖼️ Product images for editing:",x.images),console.log("🔧 Config object:",Ce),$(x.images||[]),g({contractorId:x.contractorId,categoryId:x.categoryId,productCategory:x.productCategory||ae(x.categoryId),name:x.name,nameAr:x.nameAr||"",description:x.description||"",descriptionAr:x.descriptionAr||"",slug:x.slug,brand:x.brand,model:x.model||"",sku:x.sku||"",specifications:x.specifications||{wattage:"",efficiency:"",warranty:"",dimensions:"",weight:""},price:x.price,currency:x.currency,vatIncluded:x.vatIncluded,stockQuantity:x.stockQuantity,status:x.status,images:[]}),l("add-product"),E("Product loaded for editing","info")},ue=()=>{p(null),$([]),k([]),g({contractorId:r.contractorId||r.id,categoryId:"",productCategory:"SOLAR_PANEL",name:"",nameAr:"",description:"",descriptionAr:"",slug:"",brand:"",model:"",sku:"",specifications:{wattage:"",efficiency:"",warranty:"",dimensions:"",weight:""},price:0,currency:"SAR",vatIncluded:!0,stockQuantity:0,status:"DRAFT",images:[]}),ee({}),E("Edit cancelled","info")},D=x=>{k(B=>[...B,x]),$(B=>B.filter(F=>F.id!==x)),E("Image marked for deletion","info")},T=async(x,B)=>{if(c)try{await nt.setPrimaryImage(c.id,x,B),$(F=>F.map(Z=>({...Z,is_primary:Z.id===x?B:!1}))),E(B?"Set as featured image":"Removed as featured image","success")}catch(F){console.error("Error setting primary image:",F),E("Failed to set featured image","error")}},G=(x,B)=>{O({id:x,name:B}),P(!0)},ne=async()=>{if(w)try{console.log("🗑️ Deleting product:",w.id),await nt.deleteProduct(w.id),m(x=>x.filter(B=>B.id!==w.id)),console.log("✅ Product deleted successfully"),E(`"${w.name}" has been deleted successfully`,"success"),P(!1),O(null)}catch(x){console.error("❌ Error deleting product:",x),E(x.message||"Failed to delete product","error"),P(!1),O(null)}},se=()=>{P(!1),O(null)},E=(x,B="success")=>{re({show:!0,message:x,type:B}),setTimeout(()=>{re(F=>({...F,show:!1}))},4e3)};return b?e.jsxs("div",{style:{direction:s?"rtl":"ltr",padding:"2rem",textAlign:"center",minHeight:"60vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[e.jsx(_v,{}),e.jsx("p",{style:{marginTop:"1rem",color:n.colors.primary,fontSize:"16px",fontWeight:"500"},children:t("contractorApp.marketplace.loading","Loading marketplace...")})]}):e.jsxs("div",{style:{direction:s?"rtl":"ltr"},children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx("h1",{style:{fontSize:"2rem",fontWeight:"700",color:"#1a1a1a",marginBottom:"0.5rem",textAlign:s?"right":"left"},children:t("contractorApp.marketplace.title","Product Marketplace")}),e.jsx("p",{style:{color:`${n.colors.primary}99`,fontSize:"1.1rem",fontWeight:"500"},children:t("contractorApp.marketplace.subtitle","Manage your solar products and track sales")})]}),_&&e.jsx("div",{style:{background:"linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%)",border:"1px solid #fecaca",borderRadius:"12px",padding:"1rem",marginBottom:"1.5rem",color:"#dc2626"},children:_}),e.jsx("div",{style:{display:"flex",gap:"12px",marginBottom:"2rem",flexWrap:"wrap"},children:[{key:"dashboard",label:"Dashboard",icon:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z",color:"#2d5a87"},{key:"products",label:"My Products",icon:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10",color:"#5a7c7c"},{key:"add-product",label:"Add Product",icon:"M12 6v6m0 0v6m0-6h6m-6 0H6",color:"#6a9c89"},{key:"analytics",label:"Analytics",icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z",color:"#8b7355"}].map(x=>e.jsxs("button",{onClick:()=>l(x.key),style:{flex:"1 1 200px",minWidth:"180px",padding:"20px 16px",border:`2px solid ${x.color}`,borderRadius:"16px",background:a===x.key?x.color:"white",color:a===x.key?"white":x.color,fontWeight:"700",cursor:"pointer",fontSize:"16px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",gap:"10px",boxShadow:a===x.key?`0 4px 15px rgba(${x.color==="#1e40af"?"30, 64, 175":x.color==="#0891b2"?"8, 145, 178":x.color==="#059669"?"5, 150, 105":"124, 58, 237"}, 0.2)`:`0 2px 8px rgba(${x.color==="#1e40af"?"30, 64, 175":x.color==="#0891b2"?"8, 145, 178":x.color==="#059669"?"5, 150, 105":"124, 58, 237"}, 0.1)`,transform:a===x.key?"translateY(-2px) scale(1.02)":"translateY(0) scale(1)",minHeight:"120px",justifyContent:"center"},onMouseEnter:B=>{if(a!==x.key){B.currentTarget.style.transform="translateY(-3px)",B.currentTarget.style.borderWidth="3px";const F=B.currentTarget.querySelector("svg");F&&(F.style.transform="scale(1.15) rotate(5deg)",F.style.transition="all 0.3s cubic-bezier(0.4, 0, 0.2, 1)")}},onMouseLeave:B=>{if(a!==x.key){B.currentTarget.style.transform="translateY(0)",B.currentTarget.style.borderWidth="2px";const F=B.currentTarget.querySelector("svg");F&&(F.style.transform="scale(1) rotate(0deg)",F.style.transition="all 0.3s cubic-bezier(0.4, 0, 0.2, 1)")}},children:[e.jsx("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},children:e.jsx("path",{d:x.icon})}),e.jsx("div",{style:{fontSize:"16px",lineHeight:"1.3",fontWeight:"800"},children:x.label})]},x.key))}),a==="dashboard"&&e.jsxs("div",{children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[{title:"Total Products",value:Q.totalProducts,icon:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10",color:"#1e40af",subtitle:"All products",gradient:"linear-gradient(135deg, #1e40af 0%, #1d4ed8 100%)"},{title:"Active Products",value:Q.activeProducts,icon:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z",color:"#22c55e",subtitle:"Live on marketplace",gradient:"linear-gradient(135deg, #22c55e 0%, #16a34a 100%)"},{title:"Pending Approval",value:Q.pendingApproval,icon:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z",color:"#f59e0b",subtitle:"Awaiting review",gradient:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)"},{title:"Revenue",value:`${Q.revenue.toLocaleString()} SAR`,icon:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1",color:"#06b6d4",subtitle:"Total earnings",gradient:"linear-gradient(135deg, #06b6d4 0%, #0891b2 100%)"}].map((x,B)=>e.jsxs("div",{style:{...U,padding:"1.5rem",background:"rgba(255, 255, 255, 0.95)",border:`1px solid ${x.color}20`,position:"relative",overflow:"hidden",cursor:"default",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},onMouseEnter:F=>{F.currentTarget.style.transform="translateY(-4px)",F.currentTarget.style.border=`2px solid ${x.color}`;const Z=F.currentTarget.querySelector("svg");Z&&(Z.style.transform="scale(1.2) rotate(10deg)",Z.style.transition="all 0.3s cubic-bezier(0.4, 0, 0.2, 1)");const le=F.currentTarget.querySelector("[data-kpi-value]");le&&(le.style.transform="scale(1.1)",le.style.transition="all 0.3s cubic-bezier(0.4, 0, 0.2, 1)")},onMouseLeave:F=>{F.currentTarget.style.transform="translateY(0)",F.currentTarget.style.border=`1px solid ${x.color}20`;const Z=F.currentTarget.querySelector("svg");Z&&(Z.style.transform="scale(1) rotate(0deg)",Z.style.transition="all 0.3s cubic-bezier(0.4, 0, 0.2, 1)");const le=F.currentTarget.querySelector("[data-kpi-value]");le&&(le.style.transform="scale(1)",le.style.transition="all 0.3s cubic-bezier(0.4, 0, 0.2, 1)")},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"4px",background:x.gradient}}),e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px"},children:[e.jsx("div",{style:{width:"56px",height:"56px",background:`linear-gradient(135deg, ${x.color}20 0%, ${x.color}10 100%)`,borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",border:`2px solid ${x.color}30`,boxShadow:`0 4px 12px ${x.color}20`},children:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:x.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:x.icon})})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("p",{style:{margin:0,color:`${x.color}CC`,fontSize:"14px",fontWeight:"600"},children:x.title}),e.jsx("p",{"data-kpi-value":!0,style:{margin:"4px 0 0 0",background:x.gradient,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",fontSize:"28px",fontWeight:"800",lineHeight:1,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},children:x.value}),e.jsx("p",{style:{margin:"4px 0 0 0",color:`${x.color}99`,fontSize:"13px",fontWeight:"500"},children:x.subtitle})]})]})]},B))}),e.jsxs("div",{style:U,children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#1a1a1a",marginBottom:"1.5rem"},children:"Quick Actions"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem"},children:[{title:"Add New Product",subtitle:"Create a new solar product",icon:"M12 6v6m0 0v6m0-6h6m-6 0H6",color:"#1e40af",action:()=>l("add-product")},{title:"View All Products",subtitle:"Manage your product catalog",icon:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10",color:"#22c55e",action:()=>l("products")},{title:"Analytics Dashboard",subtitle:"View performance metrics",icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z",color:"#8b5cf6",action:()=>l("analytics")}].map((x,B)=>e.jsxs("button",{onClick:x.action,style:{background:"white",border:`3px solid ${x.color}`,borderRadius:"16px",padding:"2rem",textAlign:"left",cursor:"pointer",transition:"all 0.2s ease",display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"12px",minHeight:"180px",boxShadow:`0 4px 12px ${x.color}20`},onMouseEnter:F=>{F.currentTarget.style.transform="translateY(-3px)",F.currentTarget.style.boxShadow=`0 8px 25px ${x.color}40`,F.currentTarget.style.background=x.color;const Z=F.currentTarget.querySelector("h3"),le=F.currentTarget.querySelector("p");Z&&(Z.style.color="white"),le&&(le.style.color="white")},onMouseLeave:F=>{F.currentTarget.style.transform="translateY(0)",F.currentTarget.style.boxShadow=`0 4px 12px ${x.color}20`,F.currentTarget.style.background="white";const Z=F.currentTarget.querySelector("h3"),le=F.currentTarget.querySelector("p");Z&&(Z.style.color=x.color),le&&(le.style.color=x.color)},children:[e.jsx("div",{style:{width:"60px",height:"60px",background:x.color,borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"16px",boxShadow:`0 4px 12px ${x.color}30`},children:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:x.icon})})}),e.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:"700",color:x.color,transition:"color 0.2s ease",marginBottom:"8px"},children:x.title}),e.jsx("p",{style:{margin:0,fontSize:"14px",color:x.color,lineHeight:1.5,fontWeight:"500",transition:"color 0.2s ease"},children:x.subtitle})]},B))})]})]}),a==="products"&&e.jsxs("div",{style:U,children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[e.jsxs("h2",{style:{fontSize:"1.5rem",fontWeight:"600",color:"#1a1a1a",margin:0},children:[t("contractorApp.marketplace.myProducts","My Products")," (",d.length,")"]}),e.jsxs(yo,{onClick:()=>l("add-product"),style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{marginRight:"8px"},children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),t("contractorApp.marketplace.addNewProduct","Add New Product")]})]}),d.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"4rem 2rem",color:"#6b7280"},children:[e.jsx("div",{style:{marginBottom:"1rem",display:"flex",justifyContent:"center"},children:e.jsx("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:n.colors.primary,strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10"})})}),e.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:"600",color:"#1a1a1a",marginBottom:"1rem"},children:t("contractorApp.marketplace.noProducts","No products yet")}),e.jsx("p",{style:{marginBottom:"2rem"},children:t("contractorApp.marketplace.getStarted","Start by adding your first solar product to the marketplace")}),e.jsx(yo,{onClick:()=>l("add-product"),children:t("contractorApp.marketplace.addFirstProduct","Add Your First Product")})]}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"1.5rem"},children:d.map(x=>e.jsxs("div",{style:{background:"linear-gradient(135deg, #ffffff 0%, #f9fafb 100%)",border:"1px solid #e5e7eb",borderRadius:"16px",padding:"0",transition:"all 0.3s ease",position:"relative",overflow:"hidden"},children:[e.jsxs("div",{style:{width:"100%",height:"200px",background:x.imageUrl?`url(${x.imageUrl})`:"linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%)",backgroundSize:"cover",backgroundPosition:"center",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:[!x.imageUrl&&e.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#94a3b8",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),e.jsx("polyline",{points:"21,15 16,10 5,21"})]}),e.jsx("div",{style:{position:"absolute",top:"12px",right:"12px",background:Qe(x.status,x.approvalStatus),color:"white",padding:"4px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:"600",boxShadow:"0 2px 8px rgba(0,0,0,0.2)"},children:N(x.status,x.approvalStatus)})]}),e.jsxs("div",{style:{padding:"1.5rem"},children:[e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#1a1a1a",marginBottom:"0.5rem"},children:x.name}),e.jsxs("p",{style:{color:"#6b7280",fontSize:"14px",marginBottom:"1rem"},children:[x.brand," ",x.model&&`• ${x.model}`]}),x.description&&e.jsx("p",{style:{color:"#4b5563",fontSize:"14px",marginBottom:"1rem",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:x.description}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("span",{style:{fontSize:"1.5rem",fontWeight:"700",color:n.colors.primary},children:[x.price.toLocaleString()," ",x.currency]}),x.vatIncluded&&e.jsx("span",{style:{fontSize:"12px",color:"#6b7280",marginLeft:"4px"},children:"(inc. VAT)"})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:"14px",color:x.stockQuantity>10?"#22c55e":x.stockQuantity>0?"#f59e0b":"#ef4444",fontWeight:"600"},children:x.stockStatus?x.stockStatus.replace(/_/g," "):"Unknown"}),e.jsxs("div",{style:{fontSize:"12px",color:"#6b7280"},children:[x.stockQuantity," in stock"]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[x.status==="DRAFT"&&e.jsx("button",{onClick:()=>qe(x.id),style:{background:"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",color:"white",border:"none",borderRadius:"8px",padding:"6px 12px",fontSize:"12px",fontWeight:"600",cursor:"pointer"},children:"Submit for Approval"}),e.jsx("button",{onClick:()=>M(x),style:{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"white",border:"none",borderRadius:"8px",padding:"6px 12px",fontSize:"12px",fontWeight:"600",cursor:"pointer",boxShadow:"0 2px 8px rgba(245, 158, 11, 0.3)",transition:"all 0.15s ease"},onMouseEnter:B=>{B.currentTarget.style.transform="translateY(-1px)",B.currentTarget.style.boxShadow="0 4px 12px rgba(245, 158, 11, 0.4)"},onMouseLeave:B=>{B.currentTarget.style.transform="translateY(0)",B.currentTarget.style.boxShadow="0 2px 8px rgba(245, 158, 11, 0.3)"},onMouseEnter:B=>{B.currentTarget.style.background="#e5e7eb"},onMouseLeave:B=>{B.currentTarget.style.background="#f3f4f6"},children:"Edit"}),e.jsx("button",{onClick:()=>G(x.id,x.name),style:{background:"#ef4444",color:"white",border:"none",borderRadius:"8px",padding:"6px 12px",fontSize:"12px",fontWeight:"600",cursor:"pointer"},onMouseEnter:B=>{B.currentTarget.style.background="#dc2626"},onMouseLeave:B=>{B.currentTarget.style.background="#ef4444"},children:"Delete"})]})]})]},x.id))})]}),a==="add-product"&&e.jsxs("div",{style:U,children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",color:"#1a1a1a",margin:0},children:c?t("contractorApp.marketplace.editProduct",`Edit Product: ${c.name}`):t("contractorApp.marketplace.addNewProduct","Add New Product")}),c&&e.jsx("button",{onClick:ue,style:{background:"linear-gradient(135deg, #6b7280 0%, #4b5563 100%)",color:"white",border:"none",borderRadius:"8px",padding:"8px 16px",fontSize:"14px",fontWeight:"600",cursor:"pointer",boxShadow:"0 2px 8px rgba(107, 114, 128, 0.3)"},children:"Cancel Edit"}),e.jsx("button",{type:"button",onClick:()=>{g({contractorId:r.contractorId||r.id,categoryId:"33333333-3333-3333-3333-333333333333",productCategory:"SOLAR_PANEL",name:"Sunny P-450 High Efficiency Solar Panel",nameAr:"لوحة شمسية عالية الكفاءة صني P-450",description:"Premium monocrystalline solar panel with excellent efficiency and durability. Perfect for residential and commercial installations.",descriptionAr:"لوحة شمسية أحادية البلورة عالية الجودة مع كفاءة ممتازة ومتانة. مثالية للتركيبات السكنية والتجارية.",slug:"sunny-p-450-high-efficiency-solar-panel",brand:"Sunny",model:"P-450",sku:"SUNNY-P450-001",specifications:{model:"Sunny P-450",maxPower:"450W",bindingSpecifications:"Every 36 pieces",efficiency:"≥21.46%",panelVoltage:"49.3V/work41.5V",workingCurrent:"A ≥10.86",workingTemperature:"-40°C ~ +85°C",panelWeight:"23KG",panelDimensions:"1909 x 1038 x 30 mm",warranty:"25 years"},price:850,currency:"SAR",vatIncluded:!0,stockQuantity:50,status:"DRAFT"})},style:{background:"#3eb2b1",color:"white",border:"none",borderRadius:"8px",padding:"0.5rem 1rem",fontSize:"0.875rem",cursor:"pointer",transition:"background-color 0.2s ease"},onMouseEnter:x=>x.currentTarget.style.background="#2d8a89",onMouseLeave:x=>x.currentTarget.style.background="#3eb2b1",children:"Fill Sample Data"})]}),e.jsxs("div",{style:{display:"grid",gap:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#1a1a1a",marginBottom:"1rem"},children:"Basic Information"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#374151"},children:"Product Name *"}),e.jsx("input",{type:"text",value:v.name||"",onChange:x=>ce("name",x.target.value),onFocus:fe,onBlur:x=>me(x,!!A.name),style:{...q,borderColor:A.name?"#ef4444":"#e5e7eb"},placeholder:"e.g., Premium Solar Panel 400W"}),A.name&&e.jsx("p",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:A.name})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#374151"},children:"Product Name (Arabic)"}),e.jsx("input",{type:"text",value:v.nameAr||"",onChange:x=>ce("nameAr",x.target.value),onFocus:fe,onBlur:x=>me(x,!1),style:q,placeholder:"اسم المنتج بالعربية",dir:"rtl"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#374151"},children:"Category *"}),e.jsxs("select",{value:v.categoryId||"",onChange:x=>de(x.target.value),className:"custom-select",style:{width:"100%",padding:"12px 16px",borderRadius:"10px",border:"2px solid #e5e7eb",fontSize:"16px",color:"#1a1a1a",fontWeight:"500",transition:"all 0.15s ease",outline:"none",backgroundColor:"white",cursor:"pointer",borderColor:A.categoryId?"#ef4444":"#e5e7eb"},onMouseEnter:x=>{x.currentTarget.style.borderColor="#3eb2b1",x.currentTarget.style.boxShadow="0 0 0 3px rgba(62, 178, 177, 0.1)"},onMouseLeave:x=>{x.currentTarget.style.borderColor=A.categoryId?"#ef4444":"#e5e7eb",x.currentTarget.style.boxShadow="none"},onFocus:x=>{x.currentTarget.style.borderColor="#3eb2b1",x.currentTarget.style.boxShadow="0 0 0 3px rgba(62, 178, 177, 0.1)"},onBlur:x=>{x.currentTarget.style.borderColor=A.categoryId?"#ef4444":"#e5e7eb",x.currentTarget.style.boxShadow="none"},children:[e.jsx("option",{value:"",style:{color:"#6b7280"},children:"Select Category"}),u.map(x=>e.jsx("option",{value:x.id,style:{color:"#1a1a1a"},children:x.name},x.id))]}),A.categoryId&&e.jsx("p",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:A.categoryId})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#374151"},children:"Brand *"}),e.jsx("input",{type:"text",value:v.brand||"",onChange:x=>ce("brand",x.target.value),onFocus:fe,onBlur:x=>me(x,!!A.brand),style:{...q,borderColor:A.brand?"#ef4444":"#e5e7eb"},placeholder:"e.g., JinkoSolar, Canadian Solar"}),A.brand&&e.jsx("p",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:A.brand})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#374151"},children:"Model"}),e.jsx("input",{type:"text",value:v.model||"",onChange:x=>ce("model",x.target.value),onFocus:fe,onBlur:x=>me(x,!1),style:q,placeholder:"e.g., JKM400M-54HL4-V"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#374151"},children:"SKU"}),e.jsx("input",{type:"text",value:v.sku||"",onChange:x=>ce("sku",x.target.value),onFocus:fe,onBlur:x=>me(x,!1),style:q,placeholder:"Product SKU"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#374151"},children:"URL Slug"}),e.jsx("input",{type:"text",value:v.slug||"",onChange:x=>ce("slug",x.target.value),onFocus:fe,onBlur:x=>me(x,!1),style:q,placeholder:"product-url-slug"})]})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#374151"},children:"Description"}),e.jsx("textarea",{value:v.description||"",onChange:x=>ce("description",x.target.value),onFocus:fe,onBlur:x=>me(x,!1),style:{...q,minHeight:"100px",resize:"vertical"},placeholder:"Detailed product description..."})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#374151"},children:"Description (Arabic)"}),e.jsx("textarea",{value:v.descriptionAr||"",onChange:x=>ce("descriptionAr",x.target.value),onFocus:fe,onBlur:x=>me(x,!1),style:{...q,minHeight:"100px",resize:"vertical"},placeholder:"وصف مفصل للمنتج...",dir:"rtl"})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#1a1a1a",marginBottom:"1rem"},children:["Technical Specifications",v.productCategory&&e.jsxs("span",{style:{fontSize:"0.85rem",fontWeight:"400",color:"#6b7280",marginLeft:"0.5rem"},children:["(",v.productCategory.replace("_"," ").toLowerCase().replace(/\b\w/g,x=>x.toUpperCase()),")"]})]}),v.categoryId?e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem"},children:[je(v.productCategory||"SOLAR_PANEL").map(x=>e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#374151"},children:x.label}),e.jsx("input",{type:"text",value:v.specifications?.[x.key]||"",onChange:B=>J(x.key,B.target.value),onFocus:fe,onBlur:B=>me(B,!1),style:{...q,transition:"all 0.2s ease"},placeholder:x.placeholder})]},x.key)),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#374151"},children:"Warranty"}),e.jsx("input",{type:"text",value:v.specifications?.warranty||"",onChange:x=>J("warranty",x.target.value),onFocus:fe,onBlur:x=>me(x,!1),style:{...q,transition:"all 0.2s ease"},placeholder:"e.g., 25 years, 5 years, 10 years"})]})]}):e.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#ef4444",background:"rgba(254, 242, 242, 0.8)",borderRadius:"12px",border:"3px dashed #ef4444",fontSize:"1.1rem",fontWeight:"600"},children:e.jsxs("p",{style:{margin:0},children:["⚠️ DYNAMIC FORM ACTIVE ⚠️",e.jsx("br",{}),"Please select a product category to see relevant specification fields",e.jsx("br",{}),e.jsx("span",{style:{fontSize:"0.9rem",color:"#6b7280",fontWeight:"400"},children:"(This will show different fields for Inverters, Batteries, Solar Panels, or Full Systems)"})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#1a1a1a",marginBottom:"0.5rem"},children:"Product Images"}),e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"1rem",lineHeight:"1.4"},children:"Upload high-quality images (recommended: 800x600px minimum, max 5MB per image, JPEG/PNG format)"}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("input",{ref:i,type:"file",accept:"image/*",multiple:!0,style:{display:"none"},onChange:x=>{if(x.target.files){const B=Array.from(x.target.files);g(F=>({...F,images:[...F.images||[],...B]}))}}}),e.jsxs("button",{type:"button",onClick:()=>i.current?.click(),style:{background:"white",border:"2px dashed #3eb2b1",borderRadius:"12px",padding:"2rem",width:"100%",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"12px",transition:"all 0.2s ease"},onMouseEnter:x=>{x.currentTarget.style.background=`${n.colors.primary}05`,x.currentTarget.style.borderColor=n.colors.primary},onMouseLeave:x=>{x.currentTarget.style.background="white",x.currentTarget.style.borderColor="#3eb2b1"},children:[e.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:n.colors.primary,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),e.jsx("polyline",{points:"21,15 16,10 5,21"})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{style:{margin:0,fontSize:"16px",fontWeight:"600",color:n.colors.primary},children:"Click to upload product images"}),e.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"14px",color:"#6b7280"},children:"PNG, JPG up to 5MB each"})]})]}),c&&W&&W.length>0&&Ce?.marketplaceApiUrl&&e.jsxs("div",{style:{marginTop:"16px",marginBottom:"16px"},children:[e.jsxs("h4",{style:{fontSize:"1rem",fontWeight:"600",color:"#1a1a1a",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),e.jsx("polyline",{points:"21,15 16,10 5,21"})]}),"Current Images (",W.length,")"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:"12px"},children:W.map((x,B)=>{try{let F;return x.file_url&&x.file_url.startsWith("http")?F=x.file_url:x.file_url?F=`${Ce?.marketplaceApiUrl?.replace("/api/v1","")||"http://localhost:3007"}${x.file_url}`:F=x.url,console.log("🖼️ Constructing image URL:",{image:x,imageUrl:F}),e.jsxs("div",{style:{position:"relative",aspectRatio:"1",borderRadius:"8px",overflow:"hidden",border:"2px solid #10b981",boxShadow:"0 2px 8px rgba(16, 185, 129, 0.2)"},children:[e.jsx("img",{src:F,alt:`Existing image ${B+1}`,style:{width:"100%",height:"100%",objectFit:"cover"},onError:Z=>{console.log("🖼️ Image load error:",F),Z.currentTarget.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3QgeD0iMyIgeT0iMyIgd2lkdGg9IjE4IiBoZWlnaHQ9IjE4IiByeD0iMiIgcnk9IjIiIHN0cm9rZT0iIzZiNzI4MCIgZmlsbD0iI2Y5ZmFmYiIvPgo8Y2lyY2xlIGN4PSI4LjUiIGN5PSI4LjUiIHI9IjEuNSIgZmlsbD0iIzZiNzI4MCIvPgo8cG9seWxpbmUgcG9pbnRzPSIyMSwxNSAxNiwxMCA1LDIxIiBzdHJva2U9IiM2YjcyODAiLz4KPHN2Zz4K"}}),e.jsx("button",{type:"button",onClick:()=>D(x.id),style:{position:"absolute",top:"4px",right:"4px",background:"rgba(239, 68, 68, 0.9)",color:"white",border:"none",borderRadius:"50%",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.15s ease"},title:"Delete this image",children:"×"}),x.is_primary&&e.jsx("div",{style:{position:"absolute",top:"4px",left:"4px",background:"linear-gradient(135deg, #fbbf24, #f59e0b)",color:"white",borderRadius:"50%",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",fontWeight:"600",boxShadow:"0 2px 4px rgba(245, 158, 11, 0.3)"},title:"Featured Image",children:"⭐"}),e.jsx("button",{type:"button",onClick:()=>T(x.id,!x.is_primary),style:{position:"absolute",bottom:"4px",left:"4px",right:"4px",background:x.is_primary?"rgba(239, 68, 68, 0.9)":"rgba(245, 158, 11, 0.9)",color:"white",border:"none",borderRadius:"4px",padding:"2px 4px",fontSize:"10px",fontWeight:"600",cursor:"pointer",transition:"all 0.15s ease"},title:x.is_primary?"Remove as featured":"Set as featured",children:x.is_primary?"⭐ Featured":"Set Featured"}),e.jsx("div",{style:{position:"absolute",bottom:"28px",right:"4px",background:"rgba(16, 185, 129, 0.9)",color:"white",borderRadius:"50%",width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",fontWeight:"600"},children:"✓"})]},`existing-${B}`)}catch(F){return console.error("❌ Error rendering existing image:",F,x),null}})})]}),v.images&&v.images.length>0&&e.jsxs("div",{style:{marginTop:"16px"},children:[e.jsxs("h4",{style:{fontSize:"1rem",fontWeight:"600",color:"#1a1a1a",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"}),e.jsx("circle",{cx:"12",cy:"13",r:"3"})]}),"New Images (",v.images.length,")"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(100px, 1fr))",gap:"12px"},children:v.images.map((x,B)=>e.jsxs("div",{style:{position:"relative",aspectRatio:"1",borderRadius:"8px",overflow:"hidden",border:"2px solid #e5e7eb"},children:[e.jsx("img",{src:URL.createObjectURL(x),alt:`Product ${B+1}`,style:{width:"100%",height:"100%",objectFit:"cover"}}),e.jsx("button",{type:"button",onClick:()=>{g(F=>({...F,images:F.images?.filter((Z,le)=>le!==B)}))},style:{position:"absolute",top:"4px",right:"4px",background:"rgba(239, 68, 68, 0.9)",color:"white",border:"none",borderRadius:"50%",width:"20px",height:"20px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"600"},title:"Remove this image",children:"×"}),!c&&e.jsx("div",{style:{position:"absolute",bottom:"4px",left:"4px",right:"4px",textAlign:"center"},children:e.jsx("button",{type:"button",onClick:()=>{const F=v.images?.map((Z,le)=>(le===B?Z.willBePrimary=!Z.willBePrimary:Z.willBePrimary=!1,Z));g(Z=>({...Z,images:F})),E(x.willBePrimary?"Removed as featured":"Will be featured image","info")},style:{background:x.willBePrimary?"rgba(239, 68, 68, 0.9)":"rgba(245, 158, 11, 0.9)",color:"white",border:"none",borderRadius:"4px",padding:"2px 4px",fontSize:"10px",fontWeight:"600",cursor:"pointer",transition:"all 0.15s ease"},title:x.willBePrimary?"Remove as featured":"Set as featured",children:x.willBePrimary?"⭐ Featured":"Set Featured"})}),x.willBePrimary&&e.jsx("div",{style:{position:"absolute",top:"4px",left:"4px",background:"linear-gradient(135deg, #fbbf24, #f59e0b)",color:"white",borderRadius:"50%",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",fontWeight:"600",boxShadow:"0 2px 4px rgba(245, 158, 11, 0.3)"},title:"Will be featured image",children:"⭐"})]},B))})]}),e.jsxs("div",{style:{marginTop:"16px",padding:"12px",background:"rgba(62, 178, 177, 0.1)",borderRadius:"8px",border:"1px solid rgba(62, 178, 177, 0.2)"},children:[e.jsx("div",{style:{fontSize:"0.875rem",color:"#3eb2b1",fontWeight:"600"},children:"📸 Image Summary:"}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#1a1a1a",marginTop:"4px"},children:[c&&e.jsxs("div",{children:[e.jsxs("span",{children:["Current: ",W.length," image",W.length!==1?"s":""]}),L.length>0&&e.jsxs("span",{style:{color:"#ef4444",marginLeft:"8px"},children:["(−",L.length," to delete)"]})]}),c&&v.images&&v.images.length>0&&e.jsx("div",{style:{marginTop:"2px"},children:e.jsxs("span",{children:["New: ",v.images.length," image",v.images.length!==1?"s":""]})}),!c&&e.jsx("div",{children:v.images&&v.images.length>0?e.jsxs("span",{children:["Selected: ",v.images.length," image",v.images.length!==1?"s":""]}):e.jsx("span",{style:{color:"#6b7280"},children:"No images selected"})}),c&&e.jsxs("div",{style:{marginTop:"4px",fontSize:"0.75rem",color:"#6b7280"},children:["Final count: ",W.length+(v.images?.length||0)," image",W.length+(v.images?.length||0)!==1?"s":""]})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#1a1a1a",marginBottom:"1rem"},children:"Pricing & Inventory"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#374151"},children:"Price (SAR) *"}),e.jsx("input",{type:"number",value:v.price||"",onChange:x=>ce("price",parseFloat(x.target.value)||0),onFocus:fe,onBlur:x=>me(x,!!A.price),style:{...q,fontWeight:"600",color:"#1a1a1a",borderColor:A.price?"#ef4444":"#e5e7eb"},placeholder:"0.00",min:"0",step:"0.01"}),A.price&&e.jsx("p",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:A.price})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#374151"},children:"Stock Quantity *"}),e.jsx("input",{type:"number",value:v.stockQuantity||"",onChange:x=>ce("stockQuantity",parseInt(x.target.value)||0),onFocus:fe,onBlur:x=>me(x,!!A.stockQuantity),style:{...q,fontWeight:"600",color:"#1a1a1a",borderColor:A.stockQuantity?"#ef4444":"#e5e7eb"},placeholder:"0",min:"0"}),A.stockQuantity&&e.jsx("p",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:A.stockQuantity})]}),e.jsx("div",{children:e.jsxs("label",{style:{display:"flex",alignItems:"center",marginTop:"2rem",gap:"8px"},children:[e.jsx("input",{type:"checkbox",checked:v.vatIncluded||!1,onChange:x=>ce("vatIncluded",x.target.checked),style:{width:"auto"}}),e.jsx("span",{style:{fontWeight:"600",color:"#374151"},children:"Price includes VAT"})]})})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end",marginTop:"2rem",paddingTop:"2rem",borderTop:"1px solid #e5e7eb"},children:[e.jsx("button",{onClick:()=>l("products"),style:{background:"#f3f4f6",color:"#4b5563",border:"none",borderRadius:"12px",padding:"12px 24px",fontSize:"16px",fontWeight:"600",cursor:"pointer"},children:"Cancel"}),e.jsx(yo,{onClick:Ae,disabled:R,style:{background:c?"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)":"linear-gradient(135deg, #2d8a89 0%, #1f6b6a 100%)"},children:R?c?"Updating...":"Saving...":c?"Update Product":"Save Product"})]})]})]}),a==="analytics"&&e.jsxs("div",{style:U,children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",color:"#1a1a1a",marginBottom:"2rem"},children:t("contractorApp.marketplace.analytics","Marketplace Analytics")}),e.jsxs("div",{style:{textAlign:"center",padding:"4rem 2rem",color:"#6b7280"},children:[e.jsx("div",{style:{marginBottom:"1rem",display:"flex",justifyContent:"center"},children:e.jsx("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:n.colors.primary,strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),e.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:"600",color:"#1a1a1a",marginBottom:"1rem"},children:t("contractorApp.marketplace.analyticsComingSoon","Detailed Analytics Coming Soon")}),e.jsx("p",{style:{marginBottom:"2rem"},children:t("contractorApp.marketplace.analyticsDescription","Advanced analytics with product performance, sales trends, customer insights, and revenue forecasting will be available here.")}),e.jsxs("div",{style:{display:"inline-flex",gap:"1rem",marginTop:"1rem"},children:[e.jsxs(yo,{onClick:()=>l("products"),style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"}),e.jsx("path",{d:"M9 9l3 3 3-3"})]}),"View Products"]}),e.jsxs("button",{onClick:()=>l("products"),style:{background:"#f59e0b",color:"white",border:"none",borderRadius:"12px",padding:"12px 24px",fontSize:"16px",fontWeight:"700",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 4px 12px rgba(245, 158, 11, 0.3)"},children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10"})}),"Manage Products"]})]})]})]}),f&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(4px)"},children:e.jsxs("div",{style:{background:"linear-gradient(135deg, #ffffff 0%, #f9fafb 100%)",borderRadius:"16px",padding:"2rem",maxWidth:"400px",width:"90%",margin:"1rem",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.15)",border:"1px solid #e5e7eb",animation:"fadeIn 0.2s ease-out"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[e.jsx("div",{style:{width:"64px",height:"64px",background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem auto"},children:e.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2m3 0v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6h14zM10 11v6M14 11v6"})})}),e.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:"600",color:"#1a1a1a",margin:"0 0 0.5rem 0"},children:t("contractorApp.marketplace.deleteProduct","Delete Product")}),e.jsx("p",{style:{fontSize:"14px",color:"#6b7280",margin:0,lineHeight:"1.4"},children:t("contractorApp.marketplace.deleteWarning","This action cannot be undone")})]}),e.jsxs("div",{style:{background:"#f9fafb",borderRadius:"12px",padding:"1rem",marginBottom:"1.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("p",{style:{fontSize:"14px",color:"#4b5563",margin:"0 0 0.5rem 0",fontWeight:"500"},children:t("contractorApp.marketplace.productToDelete","Product to delete:")}),e.jsx("p",{style:{fontSize:"16px",color:"#1a1a1a",margin:0,fontWeight:"600"},children:w?.name})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:se,style:{background:"#f3f4f6",color:"#4b5563",border:"none",borderRadius:"12px",padding:"12px 24px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:x=>{x.currentTarget.style.background="#e5e7eb"},onMouseLeave:x=>{x.currentTarget.style.background="#f3f4f6"},children:t("contractorApp.common.cancel","Cancel")}),e.jsx("button",{onClick:ne,style:{background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"white",border:"none",borderRadius:"12px",padding:"12px 24px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:x=>{x.currentTarget.style.transform="translateY(-1px)",x.currentTarget.style.boxShadow="0 8px 25px rgba(239, 68, 68, 0.3)"},onMouseLeave:x=>{x.currentTarget.style.transform="translateY(0)",x.currentTarget.style.boxShadow="none"},children:t("contractorApp.marketplace.confirmDelete","Yes, Delete Product")})]})]})}),V.show&&e.jsxs("div",{style:{position:"fixed",top:"20px",right:"20px",background:V.type==="success"?"linear-gradient(135deg, #10b981 0%, #059669 100%)":V.type==="error"?"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)":"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",color:"white",padding:"1rem 1.5rem",borderRadius:"12px",boxShadow:"0 10px 40px rgba(0, 0, 0, 0.15)",zIndex:2e3,minWidth:"300px",maxWidth:"500px",display:"flex",alignItems:"center",gap:"12px",animation:"slideInRight 0.3s ease-out",backdropFilter:"blur(10px)"},children:[e.jsx("div",{style:{width:"24px",height:"24px",flexShrink:0},children:V.type==="success"?e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M9 12l2 2 4-4"}),e.jsx("circle",{cx:"12",cy:"12",r:"10"})]}):V.type==="error"?e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M15 9l-6 6M9 9l6 6"})]}):e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M12 16v-4M12 8h.01"})]})}),e.jsx("div",{style:{fontSize:"14px",fontWeight:"500",lineHeight:"1.4",flex:1},children:V.message}),e.jsx("button",{onClick:()=>re(x=>({...x,show:!1})),style:{background:"rgba(255, 255, 255, 0.2)",border:"none",borderRadius:"6px",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",flexShrink:0},onMouseEnter:x=>{x.currentTarget.style.background="rgba(255, 255, 255, 0.3)"},onMouseLeave:x=>{x.currentTarget.style.background="rgba(255, 255, 255, 0.2)"},children:e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]})},Rv=({user:r})=>{const{t,i18n:o}=ve(),s=o.language==="ar",i=`
    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
  `;Me.useEffect(()=>{if(!document.getElementById("spin-animation")){const N=document.createElement("style");N.id="spin-animation",N.textContent=i,document.head.appendChild(N)}},[]);const[a,l]=y.useState([]),[c,p]=y.useState(null),[d,m]=y.useState(!1),[u,h]=y.useState(null),[b,j]=y.useState("assigned"),[_,S]=y.useState(!1),[R,I]=y.useState([]),[C,z]=y.useState(!1),[f,P]=y.useState(null),[w,O]=y.useState(!1),[V,re]=y.useState(!1),[Q,oe]=y.useState(!1),[K,Y]=y.useState(!1),[W,$]=y.useState({commission_percent:15,overprice_percent:10,vat_rate:15}),[L,k]=y.useState({contractor_vat_number:"300000000000003",installation_deadline:"",payment_terms:"wallet_credit",solar_system_capacity_kwp:0,storage_capacity_kwh:0,monthly_production_kwh:0,line_items:[{serial_number:1,item_name:"Solar Panel",description:"",quantity:1,unit_price:0}]});y.useEffect(()=>{g()},[]),y.useEffect(()=>{b==="submitted"&&A()},[b]),y.useEffect(()=>{V&&c&&k(N=>({...N,solar_system_capacity_kwp:c.quote_request?.system_size_kwp||c.system_size_kwp||0,line_items:[{serial_number:1,item_name:"Solar Panel",description:"",quantity:1,unit_price:0}]}))},[V,c]);const v=async()=>{try{const M=await(await fetch(`${Ce.quoteServiceUrl}/financial/pricing-config`,{headers:{Authorization:`Bearer ${localStorage.getItem("rabhan_access_token")}`}})).json();if(M.success&&M.data.pricing_config){const ue=M.data.pricing_config;$({commission_percent:ue.platform_commission_percent||15,overprice_percent:ue.platform_overprice_percent||10,vat_rate:ue.vat_rate||15})}}catch(N){console.error("Failed to load pricing config:",N)}};y.useEffect(()=>{v()},[]);const g=async()=>{m(!0),h(null);try{const N=`t=${Date.now()}`,ue=await(await fetch(`${Ce.quoteServiceUrl}/contractor/assigned-requests?${N}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("rabhan_access_token")}`,"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}})).json();if(ue?.success){const D=ue.data?.assigned_requests||ue.data?.requests||ue.assigned_requests||[];l(D)}else throw new Error(ue?.message||"Failed to load assigned requests")}catch(N){console.error("Failed to load assigned requests:",N),h(N.message||"Failed to load assigned requests"),l([])}finally{m(!1)}},A=async()=>{z(!0),h(null);try{const N=`t=${Date.now()}`,M=await fetch(`${Ce.quoteServiceUrl}/contractor/my-quotes?${N}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("rabhan_access_token")}`,"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}});if(!M.ok)throw new Error(`HTTP error! status: ${M.status}`);const ue=await M.json();if(ue.success)I(ue.data.quotes||[]);else throw new Error(ue.message||"Failed to fetch submitted quotes")}catch(N){console.error("Error loading submitted quotes:",N),h(N instanceof Error?N.message:"Failed to load submitted quotes"),I([])}finally{z(!1)}},ee=async(N,M,ue)=>{S(!0);try{const T=await(await fetch(`${Ce.quoteServiceUrl}/contractor/respond/${N}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("rabhan_access_token")}`},body:JSON.stringify({response:M,notes:ue})})).json();if(!T.success)throw new Error(T.message||"Failed to respond to request");if(await g(),c?.id===N){const G=a.find(ne=>ne.id===N);G&&p({...G,assignment_status:M})}}catch(D){console.error("Failed to respond to request:",D),h(D.message||"Failed to respond to request")}finally{S(!1)}},U=N=>{switch(N){case"assigned":return n.colors.semantic.info.main;case"viewed":return n.colors.semantic.warning.main;case"accepted":return n.colors.semantic.success.main;case"rejected":return n.colors.semantic.error.main;default:return n.colors.text.secondary}},q=N=>{switch(N){case"assigned":return e.jsx(lt,{size:14});case"viewed":return e.jsx(Ya,{size:14});case"accepted":return e.jsx(Ne,{size:14});case"rejected":return e.jsx(rr,{size:14});default:return e.jsx(Lt,{size:14})}},ie=N=>{switch(N){case"assigned":return t("contractorApp.quotes.statuses.assigned");case"viewed":return t("contractorApp.quotes.statuses.viewed");case"accepted":return t("contractorApp.quotes.statuses.accepted");case"rejected":return t("contractorApp.quotes.statuses.rejected");default:return N}},ce=N=>{const M=N.quantity*N.unit_price,ue=M*(W.commission_percent/100),D=M*(W.overprice_percent/100),T=M+D,G=M-ue;return{totalPrice:M,rabhanCommission:ue,rabhanOverPrice:D,userPrice:T,vendorNetPrice:G}},J=()=>L.line_items.reduce((N,M)=>{const ue=ce(M);return{totalPrice:N.totalPrice+ue.totalPrice,rabhanCommission:N.rabhanCommission+ue.rabhanCommission,rabhanOverPrice:N.rabhanOverPrice+ue.rabhanOverPrice,userPrice:N.userPrice+ue.userPrice,vendorNetPrice:N.vendorNetPrice+ue.vendorNetPrice}},{totalPrice:0,rabhanCommission:0,rabhanOverPrice:0,userPrice:0,vendorNetPrice:0}),X=()=>{const N=new Date;N.setDate(N.getDate()+30),k(M=>({...M,installation_deadline:N.toISOString().split("T")[0],payment_terms:"wallet_credit",solar_system_capacity_kwp:10.5,storage_capacity_kwh:15,monthly_production_kwh:1200,line_items:[{serial_number:1,item_name:"Solar Panel",description:"450W Monocrystalline High Efficiency",quantity:24,unit_price:400},{serial_number:2,item_name:"Inverter",description:"Hybrid Inverter - 10KW MPPT",quantity:1,unit_price:4500},{serial_number:3,item_name:"Batteries",description:"Lithium LifePO4 - 15KWH Storage",quantity:1,unit_price:9e3},{serial_number:4,item_name:"Installation & Accessories",description:"Mounting stands, cables, protection devices",quantity:1,unit_price:2500}]}))},ae=()=>{k(N=>({...N,line_items:[...N.line_items,{serial_number:N.line_items.length+1,item_name:"",description:"",quantity:1,unit_price:0}]}))},de=N=>{L.line_items.length>1&&k(M=>({...M,line_items:M.line_items.filter((ue,D)=>D!==N).map((ue,D)=>({...ue,serial_number:D+1}))}))},je=(N,M,ue)=>{k(D=>({...D,line_items:D.line_items.map((T,G)=>G===N?{...T,[M]:ue}:T)}))},fe=({selectedDate:N,onDateSelect:M,onClose:ue})=>{const[D,T]=y.useState(new Date),G=new Date,ne=new Date,se=ge=>{const ye=ge.getFullYear(),Ze=ge.getMonth(),Te=new Date(ye,Ze,1),Ue=new Date(ye,Ze+1,0).getDate(),pe=Te.getDay(),pt=[];for(let Et=0;Et<pe;Et++)pt.push(null);for(let Et=1;Et<=Ue;Et++)pt.push(new Date(ye,Ze,Et));return pt},E=ge=>ge.toISOString().split("T")[0],x=ge=>ge<ne,B=ge=>N===E(ge),F=se(D),Z=["January","February","March","April","May","June","July","August","September","October","November","December"],le=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return e.jsxs("div",{style:{position:"absolute",top:"100%",left:0,zIndex:1e3,backgroundColor:"white",border:`2px solid ${n.colors.primary[500]}`,borderRadius:"12px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.15)",padding:"1rem",minWidth:"280px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("button",{onClick:()=>T(new Date(D.getFullYear(),D.getMonth()-1)),style:{backgroundColor:"transparent",border:"none",color:n.colors.primary[500],cursor:"pointer",padding:"4px",borderRadius:"4px",fontSize:"18px",fontWeight:"bold"},children:"‹"}),e.jsxs("div",{style:{fontSize:"16px",fontWeight:"600",color:n.colors.text.primary},children:[Z[D.getMonth()]," ",D.getFullYear()]}),e.jsx("button",{onClick:()=>T(new Date(D.getFullYear(),D.getMonth()+1)),style:{backgroundColor:"transparent",border:"none",color:n.colors.primary[500],cursor:"pointer",padding:"4px",borderRadius:"4px",fontSize:"18px",fontWeight:"bold"},children:"›"})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px",marginBottom:"8px"},children:le.map(ge=>e.jsx("div",{style:{textAlign:"center",fontSize:"12px",fontWeight:"600",color:n.colors.text.secondary,padding:"4px"},children:ge},ge))}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px"},children:F.map((ge,ye)=>e.jsx("div",{style:{height:"32px"},children:ge&&e.jsx("button",{onClick:()=>{x(ge)||(M(E(ge)),ue())},disabled:x(ge),style:{width:"100%",height:"100%",border:"none",borderRadius:"6px",fontSize:"14px",cursor:x(ge)?"not-allowed":"pointer",backgroundColor:B(ge)?n.colors.primary[500]:x(ge)?"#f5f5f5":"transparent",color:B(ge)?"white":x(ge)?"#ccc":n.colors.text.primary,fontWeight:B(ge)?"600":"400",transition:"all 0.2s ease"},onMouseEnter:Ze=>{!x(ge)&&!B(ge)&&(Ze.target.style.backgroundColor=n.colors.primary[100])},onMouseLeave:Ze=>{!x(ge)&&!B(ge)&&(Ze.target.style.backgroundColor="transparent")},children:ge.getDate()})},ye))}),e.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:`1px solid ${n.colors.borders.light}`,display:"flex",justifyContent:"space-between"},children:[e.jsx("button",{onClick:()=>{M(E(G)),ue()},style:{backgroundColor:"transparent",border:`1px solid ${n.colors.primary[500]}`,color:n.colors.primary[500],padding:"6px 12px",borderRadius:"6px",fontSize:"12px",cursor:"pointer"},children:"Today"}),e.jsx("button",{onClick:ue,style:{backgroundColor:n.colors.borders.light,border:"none",color:n.colors.text.primary,padding:"6px 12px",borderRadius:"6px",fontSize:"12px",cursor:"pointer"},children:"Close"})]})]})},me=async()=>{if(c){oe(!0);try{const N=J(),M={request_id:c.request_id||c.id,contractor_vat_number:L.contractor_vat_number,installation_deadline:L.installation_deadline,payment_terms:L.payment_terms,solar_system_capacity_kwp:L.solar_system_capacity_kwp,storage_capacity_kwh:L.storage_capacity_kwh,monthly_production_kwh:L.monthly_production_kwh,base_price:N.totalPrice,price_per_kwp:N.totalPrice/(c.quote_request?.system_size_kwp||c.system_size_kwp||1),line_items:L.line_items.map(T=>({...T,...ce(T)}))},D=await(await fetch(`${Ce.quoteServiceUrl}/contractor/submit-detailed-quotation`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("rabhan_access_token")}`},body:JSON.stringify(M)})).json();if(D?.success)re(!1),l(T=>T.map(G=>(G.request_id||G.id)===(c.request_id||c.id)?{...G,has_submitted_quote:!0}:G)),c&&p({...c,has_submitted_quote:!0});else throw new Error(D?.message||"Failed to submit quotation")}catch(N){console.error("Submit quotation error:",N),h(N instanceof Error?N.message:"Failed to submit quotation")}finally{oe(!1)}}},Ae=N=>new Date(N).toLocaleDateString(s?"ar-SA":"en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),qe={background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",borderRadius:"20px",border:"1px solid rgba(62, 178, 177, 0.2)",boxShadow:"0 8px 32px rgba(62, 178, 177, 0.1)",padding:"2rem",marginBottom:"1.5rem"},Qe=N=>({display:"inline-flex",alignItems:"center",gap:"8px",padding:"12px 24px",borderRadius:"8px",border:"none",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:n.transitions.normal,backgroundColor:b===N?n.colors.primary[500]:"transparent",color:b===N?"white":n.colors.text.secondary,marginRight:s?"0":"8px",marginLeft:s?"8px":"0"});return e.jsxs("div",{style:{direction:s?"rtl":"ltr"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[e.jsx("h1",{style:{fontSize:"2rem",fontWeight:"700",color:"#1a1a1a",textAlign:s?"right":"left"},children:t("contractorApp.quotes.title")}),e.jsxs("button",{onClick:g,disabled:d,style:{backgroundColor:n.colors.primary[500],color:"white",border:"none",padding:"10px 20px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:d?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px",opacity:d?.7:1},children:[e.jsx(jr,{size:16,style:{animation:d?"spin 1s linear infinite":"none"}}),t("common.refresh")]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",marginBottom:"2rem",backgroundColor:"white",borderRadius:"12px",padding:"8px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",width:"fit-content"},children:[e.jsxs("button",{onClick:()=>j("assigned"),style:Qe("assigned"),children:[e.jsx(Le,{size:16}),t("contractorApp.quotes.tabs.assigned")," (",a.length,")"]}),e.jsxs("button",{onClick:()=>j("submitted"),style:Qe("submitted"),children:[e.jsx(Ne,{size:16}),t("contractorApp.quotes.tabs.submitted")]})]}),b==="assigned"&&e.jsxs("div",{style:{display:"flex",gap:"1.5rem",height:"calc(100vh - 250px)"},children:[e.jsxs("div",{style:{width:c?"40%":"100%",backgroundColor:"white",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.08)",overflow:"hidden",transition:"width 0.3s ease"},children:[e.jsxs("div",{style:{padding:"1.5rem",borderBottom:`2px solid ${n.colors.borders.light}`,backgroundColor:n.colors.primary[50]},children:[e.jsx("h2",{style:{fontSize:"1.3rem",fontWeight:"700",color:n.colors.text.primary,marginBottom:"0.25rem"},children:t("contractorApp.quotes.assignedRequests")}),e.jsxs("p",{style:{color:n.colors.text.secondary,fontSize:"13px"},children:[a.length," ",t("contractorApp.quotes.requests")]})]}),e.jsx("div",{style:{height:"calc(100% - 80px)",overflowY:"auto",padding:"1rem"},children:d?e.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:n.colors.text.secondary},children:[e.jsx(lt,{size:48,style:{marginBottom:"1rem",opacity:.5}}),e.jsx("p",{children:t("common.loading")})]}):u?e.jsxs("div",{style:{textAlign:"center",padding:"3rem",backgroundColor:"#fef2f2",borderRadius:"8px",border:`2px solid ${n.colors.semantic.error.main}`},children:[e.jsx("p",{style:{color:n.colors.semantic.error.main,marginBottom:"1rem"},children:u}),e.jsx("button",{onClick:g,style:{backgroundColor:n.colors.semantic.error.main,color:"white",border:"none",padding:"8px 16px",borderRadius:"6px",fontSize:"14px",cursor:"pointer"},children:t("common.retry")})]}):a.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"4rem",color:n.colors.text.secondary},children:[e.jsx(Le,{size:64,style:{marginBottom:"1.5rem",opacity:.3}}),e.jsx("h3",{style:{fontSize:"1.2rem",fontWeight:"600",marginBottom:"1rem",color:n.colors.text.primary},children:t("contractorApp.quotes.noRequests.title")}),e.jsx("p",{children:t("contractorApp.quotes.noRequests.message")})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:a.map(N=>e.jsxs("div",{style:{border:`2px solid ${(c?.assignment_id||c?.id)===(N.assignment_id||N.id)?n.colors.primary[500]:n.colors.borders.light}`,borderRadius:"12px",padding:"1.25rem",transition:n.transitions.normal,cursor:"pointer",backgroundColor:(c?.assignment_id||c?.id)===(N.assignment_id||N.id)?n.colors.primary[50]:"white",boxShadow:(c?.assignment_id||c?.id)===(N.assignment_id||N.id)?"0 4px 16px rgba(62, 178, 177, 0.2)":"0 2px 8px rgba(0, 0, 0, 0.05)"},onClick:()=>p(N),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("h3",{style:{fontSize:"1rem",fontWeight:"600",color:n.colors.text.primary,marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(gt,{size:16,color:n.colors.primary[500]}),N.quote_request?.system_size_kwp||N.system_size_kwp," kWp - ",N.quote_request?.service_area||N.service_area]}),e.jsxs("p",{style:{fontSize:"13px",color:n.colors.text.secondary,marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx($t,{size:12}),(N.quote_request?.location_address||N.location_address)?.length>40?`${(N.quote_request?.location_address||N.location_address).substring(0,40)}...`:N.quote_request?.location_address||N.location_address||"No address"]})]}),e.jsx("div",{style:{textAlign:s?"left":"right",marginLeft:"1rem"},children:e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"4px 10px",borderRadius:"16px",fontSize:"11px",fontWeight:"600",backgroundColor:`${U(N.assignment_status)}15`,color:U(N.assignment_status),marginBottom:"0.5rem"},children:[q(N.assignment_status),ie(N.assignment_status)]})})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"12px",color:n.colors.text.secondary,paddingTop:"0.75rem",borderTop:`1px solid ${n.colors.borders.light}`},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(ht,{size:12}),Ae(N.assigned_at)]}),e.jsx(Dd,{size:16,color:n.colors.primary[500]})]})]},N.assignment_id||N.id))})})]}),c&&e.jsxs("div",{style:{width:"60%",backgroundColor:"white",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.08)",overflow:"hidden"},children:[e.jsx("div",{style:{padding:"1.5rem",borderBottom:`2px solid ${n.colors.borders.light}`,backgroundColor:n.colors.primary[500],color:"white"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs("h2",{style:{fontSize:"1.4rem",fontWeight:"700",marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(gt,{size:24}),c.quote_request?.system_size_kwp||c.system_size_kwp," kWp ",t("contractorApp.quotes.solarSystem")]}),e.jsxs("p",{style:{fontSize:"14px",opacity:.9},children:[t("contractorApp.quotes.requestId"),": ",c.request_id||c.id]})]}),e.jsx("button",{onClick:()=>p(null),style:{backgroundColor:"rgba(255,255,255,0.2)",border:"none",color:"white",borderRadius:"6px",padding:"8px",cursor:"pointer"},children:e.jsx(rr,{size:16})})]})}),e.jsx("div",{style:{height:"calc(100% - 100px)",overflowY:"auto",padding:"1.5rem"},children:e.jsxs("div",{style:{display:"grid",gap:"1.5rem"},children:[e.jsxs("div",{style:{backgroundColor:n.colors.backgrounds.secondary,borderRadius:"12px",padding:"1.5rem"},children:[e.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:"600",color:n.colors.text.primary,marginBottom:"1rem"},children:t("contractorApp.quotes.assignmentStatus")}),e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"8px 16px",borderRadius:"20px",fontSize:"14px",fontWeight:"600",backgroundColor:`${U(c.assignment_status)}15`,color:U(c.assignment_status)},children:[q(c.assignment_status),ie(c.assignment_status)]})}),c.assignment_status==="assigned"||c.assignment_status==="viewed"?e.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"1rem"},children:[e.jsxs("button",{onClick:()=>ee(c.request_id||c.id,"accepted"),disabled:_,style:{flex:1,backgroundColor:n.colors.semantic.success.main,color:"white",border:"none",padding:"12px 20px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:_?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",opacity:_?.7:1},children:[e.jsx(O1,{size:16}),t("contractorApp.quotes.actions.accept")]}),e.jsxs("button",{onClick:()=>ee(c.request_id||c.id,"rejected","Not available for this project"),disabled:_,style:{flex:1,backgroundColor:n.colors.semantic.error.main,color:"white",border:"none",padding:"12px 20px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:_?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",opacity:_?.7:1},children:[e.jsx($1,{size:16}),t("contractorApp.quotes.actions.reject")]})]}):e.jsxs("div",{style:{padding:"12px",backgroundColor:n.colors.primary[50],borderRadius:"8px",marginTop:"1rem"},children:[e.jsx("p",{style:{fontSize:"14px",color:n.colors.primary[600]},children:c.assignment_status==="accepted"?t("contractorApp.quotes.alreadyAccepted"):t("contractorApp.quotes.alreadyRejected")}),c.responded_at&&e.jsx("p",{style:{fontSize:"12px",color:n.colors.text.secondary,marginTop:"4px"},children:Ae(c.responded_at)})]})]}),e.jsxs("div",{style:{backgroundColor:n.colors.backgrounds.secondary,borderRadius:"12px",padding:"1.5rem"},children:[e.jsxs("h3",{style:{fontSize:"1.1rem",fontWeight:"600",color:n.colors.text.primary,marginBottom:"1rem",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Gr,{size:18}),t("contractorApp.quotes.propertyDetails")]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"12px",color:n.colors.text.secondary,display:"block",marginBottom:"4px"},children:t("contractorApp.quotes.location")}),e.jsxs("div",{style:{fontSize:"14px",color:n.colors.text.primary,display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx($t,{size:14,color:n.colors.primary[500]}),c.quote_request?.location_address||c.location_address]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"12px",color:n.colors.text.secondary,display:"block",marginBottom:"4px"},children:t("contractorApp.quotes.systemSize")}),e.jsxs("div",{style:{fontSize:"14px",color:n.colors.text.primary,display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(gt,{size:14,color:n.colors.primary[500]}),c.quote_request?.system_size_kwp||c.system_size_kwp," kWp"]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"12px",color:n.colors.text.secondary,display:"block",marginBottom:"4px"},children:t("contractorApp.quotes.serviceArea")}),e.jsx("span",{style:{fontSize:"14px",color:n.colors.text.primary},children:c.quote_request?.service_area||c.service_area})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"12px",color:n.colors.text.secondary,display:"block",marginBottom:"4px"},children:t("contractorApp.quotes.requestDate")}),e.jsxs("div",{style:{fontSize:"14px",color:n.colors.text.primary,display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(ht,{size:14,color:n.colors.primary[500]}),Ae(c.quote_request?.created_at||c.created_at)]})]})]})]}),c.assignment_status==="accepted"&&e.jsxs("div",{style:{backgroundColor:c.has_submitted_quote?n.colors.semantic.success.light:n.colors.semantic.warning.light,borderRadius:"12px",padding:"1.5rem",border:`2px solid ${c.has_submitted_quote?n.colors.semantic.success.main:n.colors.semantic.warning.main}`},children:[e.jsxs("h3",{style:{fontSize:"1.1rem",fontWeight:"600",color:c.has_submitted_quote?n.colors.semantic.success.dark:n.colors.semantic.warning.dark,marginBottom:"1rem",display:"flex",alignItems:"center",gap:"8px"},children:[c.has_submitted_quote?e.jsx(Ne,{size:18}):e.jsx(lt,{size:18}),c.has_submitted_quote?t("contractorApp.quotes.quoteSubmitted"):t("contractorApp.quotes.submitQuote")]}),!c.has_submitted_quote&&e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"14px",marginBottom:"1rem"},children:t("contractorApp.quotes.submitQuoteMessage")}),e.jsxs("button",{onClick:()=>re(!0),style:{backgroundColor:n.colors.primary[500],color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Le,{size:16}),t("contractorApp.quotes.actions.submitQuote")]})]})]})]})})]})]}),b==="submitted"&&e.jsx("div",{style:qe,children:C?e.jsxs("div",{style:{textAlign:"center",padding:"4rem 2rem",color:"#6b7280"},children:[e.jsx(jr,{size:64,style:{marginBottom:"1.5rem",opacity:.3,animation:"spin 2s linear infinite"}}),e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",color:"#1a1a1a",marginBottom:"1rem"},children:t("loading")}),e.jsx("p",{children:t("contractorApp.quotes.loadingQuotes")})]}):u?e.jsxs("div",{style:{textAlign:"center",padding:"4rem 2rem",color:"#ef4444"},children:[e.jsx(Lt,{size:64,style:{marginBottom:"1.5rem",opacity:.3}}),e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",color:"#1a1a1a",marginBottom:"1rem"},children:t("error")}),e.jsx("p",{children:u}),e.jsx("button",{onClick:A,style:{marginTop:"1rem",padding:"0.75rem 1.5rem",backgroundColor:n.colors.primary[500],color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600"},children:t("retry")})]}):R.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"4rem 2rem",color:"#6b7280"},children:[e.jsx(Ne,{size:64,style:{marginBottom:"1.5rem",opacity:.3}}),e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",color:"#1a1a1a",marginBottom:"1rem"},children:t("contractorApp.quotes.noSubmittedQuotes")}),e.jsx("p",{children:t("contractorApp.quotes.noSubmittedQuotesMessage")})]}):e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1.5rem",borderBottom:"1px solid #e5e7eb"},children:[e.jsxs("h2",{style:{fontSize:"1.5rem",fontWeight:"600",color:"#1a1a1a",margin:0},children:[t("contractorApp.quotes.submittedQuotes")," (",R.length,")"]}),e.jsxs("button",{onClick:A,style:{padding:"0.5rem",backgroundColor:"transparent",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(jr,{size:16}),t("refresh")]})]}),e.jsx("div",{style:{maxHeight:"calc(100vh - 350px)",overflowY:"auto",padding:"1rem"},children:R.map(N=>e.jsxs("div",{style:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#1a1a1a",margin:"0 0 0.5rem 0"},children:[t("contractorApp.quotes.quotation")," #",N.id.slice(0,8)]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.875rem",fontWeight:"500",backgroundColor:N.admin_status==="approved"?"#dcfce7":N.admin_status==="rejected"?"#fee2e2":N.admin_status==="revision_needed"?"#fef3c7":"#f3f4f6",color:N.admin_status==="approved"?"#166534":N.admin_status==="rejected"?"#dc2626":N.admin_status==="revision_needed"?"#d97706":"#6b7280"},children:N.status_display||N.admin_status})})]}),e.jsxs("div",{style:{textAlign:s?"left":"right"},children:[e.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:n.colors.primary[600],marginBottom:"0.25rem"},children:N.totals?`${N.totals.total_user_price?.toLocaleString()} ${t("currency.sar")}`:`${N.base_price?.toLocaleString()} ${t("currency.sar")}`}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:[N.solar_system_capacity_kwp||N.request_system_size||0," kWp"]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:t("contractorApp.quotes.submittedDate")}),e.jsx("div",{style:{fontWeight:"500",color:"#1a1a1a"},children:new Date(N.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})})]}),N.installation_deadline&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:t("contractorApp.quotes.installationDeadline")}),e.jsx("div",{style:{fontWeight:"500",color:"#1a1a1a"},children:new Date(N.installation_deadline).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})})]}),N.line_items&&N.line_items.length>0&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:t("contractorApp.quotes.lineItems")}),e.jsxs("div",{style:{fontWeight:"500",color:"#1a1a1a"},children:[N.line_items.length," ",t("contractorApp.quotes.items")]})]})]}),N.location_address&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#6b7280",fontSize:"0.875rem",marginBottom:"1rem"},children:[e.jsx($t,{size:16}),N.location_address]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"1rem"},children:e.jsxs("button",{onClick:()=>{P(N),O(!0)},style:{padding:"0.5rem 1rem",backgroundColor:n.colors.primary[500],color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem",transition:"background-color 0.2s"},onMouseEnter:M=>{M.currentTarget.style.backgroundColor=n.colors.primary[600]},onMouseLeave:M=>{M.currentTarget.style.backgroundColor=n.colors.primary[500]},children:[e.jsx(Ya,{size:16}),t("contractorApp.quotes.viewDetails")]})})]},N.id))})]})}),V&&c&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"16px",width:"95%",maxWidth:"1400px",maxHeight:"95vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{background:`linear-gradient(135deg, ${n.colors.primary[500]} 0%, ${n.colors.primary[600]} 100%)`,color:"white",padding:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"700",marginBottom:"0.5rem"},children:"Submit Detailed Quotation"}),e.jsxs("p",{style:{fontSize:"14px",opacity:.9},children:["Request ID: ",c.request_id||c.id]})]}),e.jsx("button",{onClick:()=>re(!1),style:{backgroundColor:"rgba(255,255,255,0.2)",border:"none",color:"white",borderRadius:"6px",padding:"8px",cursor:"pointer"},children:e.jsx(rr,{size:20})})]}),e.jsx("div",{style:{flex:1,overflow:"auto",padding:"1.5rem"},children:e.jsxs("div",{style:{display:"grid",gap:"1.5rem"},children:[e.jsxs("div",{style:{backgroundColor:n.colors.backgrounds.secondary,borderRadius:"12px",padding:"1.5rem"},children:[e.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:"600",marginBottom:"1rem"},children:"Quotation Information"}),e.jsxs("div",{style:{display:"grid",grid:"auto / 1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"0.5rem",display:"block"},children:"VAT Number *"}),e.jsx("input",{type:"text",value:L.contractor_vat_number,onChange:N=>k(M=>({...M,contractor_vat_number:N.target.value})),style:{width:"100%",padding:"10px",border:`2px solid ${n.colors.borders.light}`,borderRadius:"8px",fontSize:"14px",backgroundColor:"white",color:n.colors.text.primary,fontFamily:"inherit",outline:"none",transition:"border-color 0.2s ease"},onFocus:N=>{N.target.style.borderColor=n.colors.primary[500],N.target.style.boxShadow=`0 0 0 3px ${n.colors.primary[500]}20`},onBlur:N=>{N.target.style.borderColor=n.colors.borders.light,N.target.style.boxShadow="none"},placeholder:"Enter your VAT number"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"0.5rem",display:"block"},children:"Installation Deadline *"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:"text",value:L.installation_deadline?new Date(L.installation_deadline).toLocaleDateString("en-GB"):"",readOnly:!0,onClick:()=>Y(!K),style:{width:"100%",padding:"10px 40px 10px 10px",border:`2px solid ${n.colors.borders.light}`,borderRadius:"8px",fontSize:"14px",backgroundColor:"white",color:n.colors.text.primary,fontFamily:"inherit",outline:"none",transition:"border-color 0.2s ease",cursor:"pointer"},onFocus:N=>{N.target.style.borderColor=n.colors.primary[500],N.target.style.boxShadow=`0 0 0 3px ${n.colors.primary[500]}20`},onBlur:N=>{N.target.style.borderColor=n.colors.borders.light,N.target.style.boxShadow="none"},placeholder:"Select installation deadline"}),e.jsx(ht,{size:18,style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",color:n.colors.primary[500],cursor:"pointer",pointerEvents:"auto"},onClick:()=>Y(!K)}),K&&e.jsx(fe,{selectedDate:L.installation_deadline,onDateSelect:N=>{k(M=>({...M,installation_deadline:N}))},onClose:()=>Y(!1)})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"0.5rem",display:"block"},children:"Payment Terms *"}),e.jsxs("select",{value:L.payment_terms,onChange:N=>k(M=>({...M,payment_terms:N.target.value})),style:{width:"100%",padding:"10px",border:`2px solid ${n.colors.borders.light}`,borderRadius:"8px",fontSize:"14px",backgroundColor:"white",color:n.colors.text.primary,fontFamily:"inherit",outline:"none",transition:"border-color 0.2s ease"},onFocus:N=>{N.target.style.borderColor=n.colors.primary[500],N.target.style.boxShadow=`0 0 0 3px ${n.colors.primary[500]}20`},onBlur:N=>{N.target.style.borderColor=n.colors.borders.light,N.target.style.boxShadow="none"},children:[e.jsx("option",{value:"wallet_credit",children:"Wallet Credit"}),e.jsx("option",{value:"bank_transfer",children:"Bank Transfer"})]})]})]})]}),e.jsxs("div",{style:{backgroundColor:n.colors.backgrounds.secondary,borderRadius:"12px",padding:"1.5rem"},children:[e.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:"600",marginBottom:"1rem"},children:"Solar System Specifications"}),e.jsxs("div",{style:{display:"grid",grid:"auto / 1fr 1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"0.5rem",display:"block"},children:"System Capacity (kWp) *"}),e.jsx("input",{type:"number",step:"0.1",value:L.solar_system_capacity_kwp,onChange:N=>k(M=>({...M,solar_system_capacity_kwp:parseFloat(N.target.value)||0})),style:{width:"100%",padding:"10px",border:`2px solid ${n.colors.borders.light}`,borderRadius:"8px",fontSize:"14px",backgroundColor:"white",color:n.colors.text.primary,fontFamily:"inherit",outline:"none",transition:"border-color 0.2s ease"},onFocus:N=>{N.target.style.borderColor=n.colors.primary[500],N.target.style.boxShadow=`0 0 0 3px ${n.colors.primary[500]}20`},onBlur:N=>{N.target.style.borderColor=n.colors.borders.light,N.target.style.boxShadow="none"},placeholder:"e.g., 6.0"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"0.5rem",display:"block"},children:"Storage Capacity (kWh)"}),e.jsx("input",{type:"number",step:"0.1",value:L.storage_capacity_kwh,onChange:N=>k(M=>({...M,storage_capacity_kwh:parseFloat(N.target.value)||0})),style:{width:"100%",padding:"10px",border:`2px solid ${n.colors.borders.light}`,borderRadius:"8px",fontSize:"14px",backgroundColor:"white",color:n.colors.text.primary,fontFamily:"inherit",outline:"none",transition:"border-color 0.2s ease"},onFocus:N=>{N.target.style.borderColor=n.colors.primary[500],N.target.style.boxShadow=`0 0 0 3px ${n.colors.primary[500]}20`},onBlur:N=>{N.target.style.borderColor=n.colors.borders.light,N.target.style.boxShadow="none"},placeholder:"e.g., 15.0"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"0.5rem",display:"block"},children:"Monthly Production (kWh)"}),e.jsx("input",{type:"number",step:"0.1",value:L.monthly_production_kwh,onChange:N=>k(M=>({...M,monthly_production_kwh:parseFloat(N.target.value)||0})),style:{width:"100%",padding:"10px",border:`2px solid ${n.colors.borders.light}`,borderRadius:"8px",fontSize:"14px",backgroundColor:"white",color:n.colors.text.primary,fontFamily:"inherit",outline:"none",transition:"border-color 0.2s ease"},onFocus:N=>{N.target.style.borderColor=n.colors.primary[500],N.target.style.boxShadow=`0 0 0 3px ${n.colors.primary[500]}20`},onBlur:N=>{N.target.style.borderColor=n.colors.borders.light,N.target.style.boxShadow="none"},placeholder:"e.g., 1200"})]})]})]}),e.jsxs("div",{style:{backgroundColor:n.colors.backgrounds.secondary,borderRadius:"12px",padding:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:"600"},children:"Quotation Line Items"}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:X,style:{backgroundColor:n.colors.semantic.info.main,color:"white",border:"none",padding:"8px 16px",borderRadius:"6px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"🧪 Fill Test Data"}),e.jsx("button",{onClick:ae,style:{backgroundColor:n.colors.primary[500],color:"white",border:"none",padding:"8px 16px",borderRadius:"6px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"+ Add Item"})]})]}),e.jsx("div",{style:{overflowX:"auto",marginTop:"1rem"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"14px",backgroundColor:"white",borderRadius:"8px",overflow:"hidden",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:n.colors.primary[500],color:"white"},children:[e.jsx("th",{style:{padding:"16px 12px",textAlign:"center",fontWeight:"700",fontSize:"14px"},children:"S/N"}),e.jsx("th",{style:{padding:"16px 12px",textAlign:"left",fontWeight:"700",fontSize:"14px"},children:"Item"}),e.jsx("th",{style:{padding:"16px 12px",textAlign:"left",fontWeight:"700",fontSize:"14px"},children:"Description"}),e.jsx("th",{style:{padding:"16px 12px",textAlign:"center",fontWeight:"700",fontSize:"14px"},children:"Qty"}),e.jsx("th",{style:{padding:"16px 12px",textAlign:"right",fontWeight:"700",fontSize:"14px"},children:"Unit Price (SAR)"}),e.jsx("th",{style:{padding:"16px 12px",textAlign:"right",fontWeight:"700",fontSize:"14px"},children:"Total Price (SAR)"}),e.jsxs("th",{style:{padding:"16px 12px",textAlign:"right",fontWeight:"700",fontSize:"14px",minWidth:"140px"},children:["RABHAN Commission (",W.commission_percent,"%)"]}),e.jsxs("th",{style:{padding:"16px 12px",textAlign:"right",fontWeight:"700",fontSize:"14px",minWidth:"140px"},children:["RABHAN Overprice (",W.overprice_percent,"%)"]}),e.jsx("th",{style:{padding:"16px 12px",textAlign:"right",fontWeight:"700",fontSize:"14px"},children:"User Price (SAR)"}),e.jsx("th",{style:{padding:"16px 12px",textAlign:"right",fontWeight:"700",fontSize:"14px"},children:"Vendor Net Price (SAR)"}),e.jsx("th",{style:{padding:"16px 12px",textAlign:"center",fontWeight:"700",fontSize:"14px"},children:"Action"})]})}),e.jsx("tbody",{children:L.line_items.map((N,M)=>{const ue=ce(N);return e.jsxs("tr",{style:{borderBottom:`1px solid ${n.colors.borders.light}`,backgroundColor:M%2===0?n.colors.backgrounds.secondary:"white"},children:[e.jsx("td",{style:{padding:"14px 12px",textAlign:"center",fontWeight:"600"},children:N.serial_number}),e.jsx("td",{style:{padding:"14px 12px"},children:e.jsx("input",{type:"text",value:N.item_name,onChange:D=>je(M,"item_name",D.target.value),style:{width:"120px",padding:"6px 8px",border:`1px solid ${n.colors.borders.light}`,borderRadius:"4px",fontSize:"13px",backgroundColor:"white",color:n.colors.text.primary,fontFamily:"inherit",outline:"none"},onFocus:D=>{D.target.style.borderColor=n.colors.primary.main},onBlur:D=>{D.target.style.borderColor=n.colors.borders.light},placeholder:"Solar Panel"})}),e.jsx("td",{style:{padding:"14px 12px"},children:e.jsx("input",{type:"text",value:N.description,onChange:D=>je(M,"description",D.target.value),style:{width:"140px",padding:"6px 8px",border:`1px solid ${n.colors.borders.light}`,borderRadius:"4px",fontSize:"13px",backgroundColor:"white",color:n.colors.text.primary,fontFamily:"inherit",outline:"none"},onFocus:D=>{D.target.style.borderColor=n.colors.primary.main},onBlur:D=>{D.target.style.borderColor=n.colors.borders.light},placeholder:"450W efficiency"})}),e.jsx("td",{style:{padding:"14px 12px",textAlign:"center"},children:e.jsx("input",{type:"number",value:N.quantity,onChange:D=>je(M,"quantity",parseInt(D.target.value)||1),style:{width:"60px",padding:"8px",border:`1px solid ${n.colors.borders.light}`,borderRadius:"4px",fontSize:"14px",backgroundColor:"white",color:n.colors.text.primary,textAlign:"center"},min:"1"})}),e.jsx("td",{style:{padding:"14px 12px",textAlign:"right"},children:e.jsx("input",{type:"number",step:"0.01",value:N.unit_price,onChange:D=>je(M,"unit_price",parseFloat(D.target.value)||0),style:{width:"100px",padding:"8px 10px",border:`1px solid ${n.colors.borders.light}`,borderRadius:"4px",fontSize:"14px",backgroundColor:"white",color:n.colors.text.primary,textAlign:"right"},placeholder:"0.00"})}),e.jsx("td",{style:{padding:"14px 12px",textAlign:"right",fontWeight:"700",color:n.colors.text.primary,fontSize:"14px"},children:ue.totalPrice.toFixed(2)}),e.jsxs("td",{style:{padding:"14px 12px",textAlign:"right",fontWeight:"600",color:"#ff8c00",fontSize:"14px"},children:["-",ue.rabhanCommission.toFixed(2)]}),e.jsxs("td",{style:{padding:"14px 12px",textAlign:"right",fontWeight:"600",color:"#ff8c00",fontSize:"14px"},children:["+",ue.rabhanOverPrice.toFixed(2)]}),e.jsx("td",{style:{padding:"14px 12px",textAlign:"right",fontWeight:"700",color:n.colors.primary[600],fontSize:"14px"},children:ue.userPrice.toFixed(2)}),e.jsx("td",{style:{padding:"14px 12px",textAlign:"right",fontWeight:"700",color:n.colors.primary[600],fontSize:"14px"},children:ue.vendorNetPrice.toFixed(2)}),e.jsx("td",{style:{padding:"14px 12px",textAlign:"center"},children:L.line_items.length>1&&e.jsx("button",{onClick:()=>de(M),style:{backgroundColor:n.colors.semantic.error.main,color:"white",border:"none",padding:"4px 8px",borderRadius:"4px",fontSize:"11px",cursor:"pointer"},children:"Remove"})})]},M)})}),e.jsx("tfoot",{children:(()=>{const N=J();return e.jsxs("tr",{style:{backgroundColor:n.colors.backgrounds.secondary,fontWeight:"700",fontSize:"15px",borderTop:`2px solid ${n.colors.primary[500]}`},children:[e.jsx("td",{colSpan:5,style:{padding:"16px 12px",textAlign:"right",fontWeight:"700",color:n.colors.text.primary},children:"TOTALS:"}),e.jsx("td",{style:{padding:"16px 12px",textAlign:"right",fontWeight:"700",color:n.colors.text.primary},children:N.totalPrice.toFixed(2)}),e.jsxs("td",{style:{padding:"16px 12px",textAlign:"right",fontWeight:"700",color:"#ff8c00"},children:["-",N.rabhanCommission.toFixed(2)]}),e.jsxs("td",{style:{padding:"16px 12px",textAlign:"right",fontWeight:"700",color:"#ff8c00"},children:["+",N.rabhanOverPrice.toFixed(2)]}),e.jsx("td",{style:{padding:"16px 12px",textAlign:"right",fontWeight:"700",color:n.colors.primary[600]},children:N.userPrice.toFixed(2)}),e.jsx("td",{style:{padding:"16px 12px",textAlign:"right",fontWeight:"700",color:n.colors.primary[600]},children:N.vendorNetPrice.toFixed(2)}),e.jsx("td",{style:{padding:"16px 12px"}})]})})()})]})}),e.jsx("div",{style:{marginTop:"1rem",padding:"1rem",backgroundColor:"#f8fafc",borderRadius:"8px"},children:(()=>{const N=J(),M=W.vat_rate/100,ue=N.totalPrice-N.rabhanCommission,D=ue*M,T=ue+D;return e.jsxs("div",{style:{display:"grid",gap:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"14px"},children:[e.jsx("span",{children:"Subtotal (Your Quote):"}),e.jsxs("span",{style:{fontWeight:"600"},children:[N.totalPrice.toFixed(2)," SAR"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"14px",color:n.colors.semantic.warning.main},children:[e.jsx("span",{children:"Rabhan Commission (15%):"}),e.jsxs("span",{style:{fontWeight:"600"},children:["-",N.rabhanCommission.toFixed(2)," SAR"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"14px",paddingTop:"0.5rem",borderTop:`1px solid ${n.colors.borders.light}`},children:[e.jsx("span",{children:"Amount Before VAT:"}),e.jsxs("span",{style:{fontWeight:"600"},children:[ue.toFixed(2)," SAR"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"14px",color:n.colors.semantic.info.main},children:[e.jsx("span",{children:"VAT (15%):"}),e.jsxs("span",{style:{fontWeight:"600"},children:["+",D.toFixed(2)," SAR"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"18px",fontWeight:"700",color:n.colors.primary[500],paddingTop:"0.75rem",borderTop:`2px solid ${n.colors.primary[500]}`,marginTop:"0.5rem"},children:[e.jsx("span",{children:"You Will Receive:"}),e.jsxs("span",{children:[T.toFixed(2)," SAR"]})]}),e.jsx("div",{style:{fontSize:"12px",color:n.colors.text.secondary,marginTop:"0.5rem",textAlign:"center",fontStyle:"italic"},children:"* This is your final payment after Rabhan commission and including VAT"})]})})()})]})]})}),e.jsxs("div",{style:{padding:"1.5rem",borderTop:`1px solid ${n.colors.borders.light}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("button",{onClick:()=>re(!1),style:{backgroundColor:n.colors.borders.light,color:n.colors.text.primary,border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"Cancel"}),e.jsxs("button",{onClick:me,disabled:Q,style:{backgroundColor:n.colors.primary[500],color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:Q?"not-allowed":"pointer",opacity:Q?.7:1,display:"flex",alignItems:"center",gap:"8px"},children:[Q?e.jsx(jr,{size:16,style:{animation:"spin 1s linear infinite"}}):e.jsx(Le,{size:16}),Q?"Submitting...":"Submit Quotation"]})]})]})}),w&&f&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"16px",width:"90%",maxWidth:"900px",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{background:`linear-gradient(135deg, ${n.colors.primary[500]} 0%, ${n.colors.primary[600]} 100%)`,color:"white",padding:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"700",marginBottom:"0.5rem"},children:t("contractorApp.quotes.quotationDetails")}),e.jsxs("p",{style:{fontSize:"14px",opacity:.9},children:[t("contractorApp.quotes.quotation")," #",f.id.slice(0,8)]})]}),e.jsx("button",{onClick:()=>{O(!1),P(null)},style:{backgroundColor:"rgba(255,255,255,0.2)",border:"none",color:"white",borderRadius:"6px",padding:"8px",cursor:"pointer"},children:e.jsx(rr,{size:20})})]}),e.jsx("div",{style:{flex:1,overflow:"auto",padding:"1.5rem"},children:e.jsxs("div",{style:{display:"grid",gap:"1.5rem"},children:[e.jsxs("div",{style:{backgroundColor:n.colors.backgrounds.secondary,borderRadius:"12px",padding:"1.5rem"},children:[e.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:"600",marginBottom:"1rem"},children:t("contractorApp.quotes.quotationSummary")}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"12px",color:n.colors.text.secondary,display:"block",marginBottom:"4px"},children:t("contractorApp.quotes.status")}),e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"16px",fontSize:"0.875rem",fontWeight:"500",backgroundColor:f.admin_status==="approved"?n.colors.semantic.success.light:f.admin_status==="rejected"?n.colors.semantic.error.light:f.admin_status==="revision_needed"?n.colors.semantic.warning.light:n.colors.backgrounds.secondary,color:f.admin_status==="approved"?n.colors.semantic.success.dark:f.admin_status==="rejected"?n.colors.semantic.error.dark:f.admin_status==="revision_needed"?n.colors.semantic.warning.dark:n.colors.text.secondary},children:f.status_display||(f.admin_status==="pending_review"?"Pending Review":f.admin_status==="approved"?"Approved":f.admin_status==="rejected"?"Rejected":f.admin_status==="revision_needed"?"Revision Needed":f.admin_status)})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"12px",color:n.colors.text.secondary,display:"block",marginBottom:"4px"},children:t("contractorApp.quotes.totalPrice")}),e.jsx("div",{style:{fontSize:"1.125rem",fontWeight:"700",color:n.colors.primary[600]},children:f.totals?`${f.totals.total_user_price?.toLocaleString()} ${t("currency.sar")}`:`${f.base_price?.toLocaleString()} ${t("currency.sar")}`})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"12px",color:n.colors.text.secondary,display:"block",marginBottom:"4px"},children:t("contractorApp.quotes.systemCapacity")}),e.jsxs("div",{style:{fontSize:"14px",color:n.colors.text.primary,display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(gt,{size:14,color:n.colors.primary[500]}),f.solar_system_capacity_kwp||f.request_system_size||0," kWp"]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"12px",color:n.colors.text.secondary,display:"block",marginBottom:"4px"},children:t("contractorApp.quotes.submittedDate")}),e.jsxs("div",{style:{fontSize:"14px",color:n.colors.text.primary,display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(ht,{size:14,color:n.colors.primary[500]}),new Date(f.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]})]})]})]}),(f.solar_system_capacity_kwp||f.storage_capacity_kwh||f.monthly_production_kwh)&&e.jsxs("div",{style:{backgroundColor:n.colors.backgrounds.secondary,borderRadius:"12px",padding:"1.5rem"},children:[e.jsxs("h3",{style:{fontSize:"1.1rem",fontWeight:"600",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(gt,{size:18,color:n.colors.primary[500]}),t("contractorApp.quotes.systemSpecifications")]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[f.solar_system_capacity_kwp&&e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"12px",color:n.colors.text.secondary,display:"block",marginBottom:"4px"},children:t("contractorApp.quotes.solarCapacity")}),e.jsxs("div",{style:{fontSize:"14px",color:n.colors.text.primary,fontWeight:"600"},children:[f.solar_system_capacity_kwp," kWp"]})]}),f.storage_capacity_kwh&&e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"12px",color:n.colors.text.secondary,display:"block",marginBottom:"4px"},children:t("contractorApp.quotes.storageCapacity")}),e.jsxs("div",{style:{fontSize:"14px",color:n.colors.text.primary,fontWeight:"600"},children:[f.storage_capacity_kwh," kWh"]})]}),f.monthly_production_kwh&&e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"12px",color:n.colors.text.secondary,display:"block",marginBottom:"4px"},children:t("contractorApp.quotes.monthlyProduction")}),e.jsxs("div",{style:{fontSize:"14px",color:n.colors.text.primary,fontWeight:"600"},children:[f.monthly_production_kwh," kWh"]})]}),f.installation_deadline&&e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"12px",color:n.colors.text.secondary,display:"block",marginBottom:"4px"},children:t("contractorApp.quotes.installationDeadline")}),e.jsx("div",{style:{fontSize:"14px",color:n.colors.text.primary,fontWeight:"600"},children:new Date(f.installation_deadline).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})})]})]})]}),f.line_items&&f.line_items.length>0&&e.jsxs("div",{style:{backgroundColor:n.colors.backgrounds.secondary,borderRadius:"12px",padding:"1.5rem"},children:[e.jsxs("h3",{style:{fontSize:"1.1rem",fontWeight:"600",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Le,{size:18,color:n.colors.primary[500]}),t("contractorApp.quotes.lineItems")," (",f.line_items.length,")"]}),e.jsx("div",{style:{overflowX:"auto",marginBottom:"1rem"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"14px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f8fafc"},children:[e.jsx("th",{style:{padding:"12px 8px",textAlign:"left",fontWeight:"600",borderBottom:`2px solid ${n.colors.borders.light}`},children:t("contractorApp.quotes.serialNumber")}),e.jsx("th",{style:{padding:"12px 8px",textAlign:"left",fontWeight:"600",borderBottom:`2px solid ${n.colors.borders.light}`},children:t("contractorApp.quotes.item")}),e.jsx("th",{style:{padding:"12px 8px",textAlign:"left",fontWeight:"600",borderBottom:`2px solid ${n.colors.borders.light}`},children:t("contractorApp.quotes.description")}),e.jsx("th",{style:{padding:"12px 8px",textAlign:"center",fontWeight:"600",borderBottom:`2px solid ${n.colors.borders.light}`},children:t("contractorApp.quotes.quantity")}),e.jsx("th",{style:{padding:"12px 8px",textAlign:"right",fontWeight:"600",borderBottom:`2px solid ${n.colors.borders.light}`},children:t("contractorApp.quotes.unitPrice")}),e.jsx("th",{style:{padding:"12px 8px",textAlign:"right",fontWeight:"600",borderBottom:`2px solid ${n.colors.borders.light}`},children:t("contractorApp.quotes.totalPrice")})]})}),e.jsx("tbody",{children:f.line_items.map((N,M)=>e.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[e.jsx("td",{style:{padding:"12px 8px",textAlign:"center",fontWeight:"600"},children:N.serial_number||M+1}),e.jsx("td",{style:{padding:"12px 8px",fontWeight:"600"},children:N.item_name}),e.jsx("td",{style:{padding:"12px 8px",color:n.colors.text.secondary},children:N.description||"-"}),e.jsx("td",{style:{padding:"12px 8px",textAlign:"center"},children:N.units||N.quantity||1}),e.jsxs("td",{style:{padding:"12px 8px",textAlign:"right",fontWeight:"600"},children:[N.unit_price?.toLocaleString()||"0"," ",t("currency.sar")]}),e.jsxs("td",{style:{padding:"12px 8px",textAlign:"right",fontWeight:"700",color:n.colors.primary[600]},children:[N.total_price?.toLocaleString()||N.user_price?.toLocaleString()||"0"," ",t("currency.sar")]})]},M))})]})}),f.totals&&e.jsxs("div",{style:{backgroundColor:"#f8fafc",borderRadius:"8px",padding:"1rem",marginTop:"1rem"},children:[e.jsx("h4",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"0.75rem",color:n.colors.text.primary},children:t("contractorApp.quotes.pricingBreakdown")}),e.jsxs("div",{style:{display:"grid",gap:"0.5rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"14px"},children:[e.jsx("span",{children:"Subtotal (Your Quote):"}),e.jsxs("span",{style:{fontWeight:"600"},children:[f.totals.total_price?.toLocaleString()||f.base_price?.toLocaleString()||"0"," ",t("currency.sar")]})]}),f.totals.total_commission&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"14px",color:n.colors.semantic.warning.dark},children:[e.jsx("span",{children:"Rabhan Commission (15%):"}),e.jsxs("span",{style:{fontWeight:"600"},children:["-",f.totals.total_commission?.toLocaleString()," ",t("currency.sar")]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"14px",color:n.colors.text.primary},children:[e.jsx("span",{children:"Amount Before VAT:"}),e.jsxs("span",{style:{fontWeight:"600"},children:[f.totals.total_vendor_net?.toLocaleString()||f.totals.total_vendor_net_price?.toLocaleString()||"0"," ",t("currency.sar")]})]}),f.totals.vat_amount&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"14px",color:n.colors.semantic.success.dark},children:[e.jsx("span",{children:"VAT (15%):"}),e.jsxs("span",{style:{fontWeight:"600"},children:["+",f.totals.vat_amount?.toLocaleString()," ",t("currency.sar")]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"16px",fontWeight:"700",color:n.colors.semantic.success.dark,paddingTop:"0.5rem",borderTop:`2px solid ${n.colors.semantic.success.dark}`,marginTop:"0.5rem"},children:[e.jsx("span",{children:"You Will Receive:"}),e.jsxs("span",{children:[f.totals.total_payable?.toLocaleString()||((f.totals.total_vendor_net||0)+(f.totals.vat_amount||0)).toLocaleString()||"0"," ",t("currency.sar")]})]})]})]})]}),e.jsxs("div",{style:{backgroundColor:n.colors.backgrounds.secondary,borderRadius:"12px",padding:"1.5rem"},children:[e.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:"600",marginBottom:"1rem"},children:t("contractorApp.quotes.additionalInformation")}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[f.contractor_vat_number&&e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"12px",color:n.colors.text.secondary,display:"block",marginBottom:"4px"},children:t("contractorApp.quotes.vatNumber")}),e.jsx("div",{style:{fontSize:"14px",color:n.colors.text.primary,fontWeight:"600"},children:f.contractor_vat_number})]}),f.payment_terms&&e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"12px",color:n.colors.text.secondary,display:"block",marginBottom:"4px"},children:t("contractorApp.quotes.paymentTerms")}),e.jsx("div",{style:{fontSize:"14px",color:n.colors.text.primary,fontWeight:"600"},children:f.payment_terms==="wallet_credit"?t("contractorApp.quotes.walletCredit"):t("contractorApp.quotes.bankTransfer")})]}),f.location_address&&e.jsxs("div",{style:{gridColumn:"1 / -1"},children:[e.jsx("label",{style:{fontSize:"12px",color:n.colors.text.secondary,display:"block",marginBottom:"4px"},children:t("contractorApp.quotes.location")}),e.jsxs("div",{style:{fontSize:"14px",color:n.colors.text.primary,display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx($t,{size:14,color:n.colors.primary[500]}),f.location_address]})]})]})]})]})}),e.jsx("div",{style:{padding:"1.5rem",borderTop:`1px solid ${n.colors.borders.light}`,display:"flex",justifyContent:"flex-end"},children:e.jsx("button",{onClick:()=>{O(!1),P(null)},style:{backgroundColor:n.colors.primary[500],color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:t("common.close")})})]})}),K&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:999},onClick:()=>Y(!1)})]})},Pv=({user:r})=>{const{t,i18n:o}=ve(),s=o.language==="ar",i={background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",borderRadius:"20px",border:"1px solid rgba(62, 178, 177, 0.2)",boxShadow:"0 8px 32px rgba(62, 178, 177, 0.1)",padding:"2rem",marginBottom:"1.5rem"};return e.jsxs("div",{style:{direction:s?"rtl":"ltr"},children:[e.jsx("h1",{style:{fontSize:"2rem",fontWeight:"700",color:"#1a1a1a",marginBottom:"2rem",textAlign:s?"right":"left"},children:t("contractorApp.wallet.title")}),e.jsx("div",{style:i,children:e.jsxs("div",{style:{textAlign:"center",padding:"4rem 2rem",color:"#6b7280"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",color:"#1a1a1a",marginBottom:"1rem"},children:t("contractorApp.wallet.paymentTracking")}),e.jsx("p",{children:t("contractorApp.wallet.comingSoon")})]})})]})},Iv=({user:r,onLogout:t,onUserUpdate:o,initialActiveItem:s="dashboard"})=>{const{t:i,i18n:a}=ve(),l=Be(),c=Xr(),p=a.language==="ar",[d,m]=y.useState(s),[u,h]=y.useState(window.innerWidth>=1024),[b,j]=y.useState(r),[_,S]=y.useState(null),[R,I]=y.useState(!0);y.useEffect(()=>{j(r)},[r]),y.useEffect(()=>{const f=async()=>{try{I(!0),console.log("🔄 Fetching contractor profile data for user:",r.id);const P=await xt.getProfile();if(console.log("✅ RAW contractor profile fetched:",P),console.log("🔍 Profile data keys:",Object.keys(P||{})),P&&typeof P=="object"){const w={...r,...P,id:r.id,email:r.email,phone:P.phone||r.phone};console.log("🔄 MERGED user data:",w),console.log("🔍 Merged data keys:",Object.keys(w)),console.log("🔍 Merged business_name:",w.business_name),console.log("🔍 Merged description:",w.description),S(P),j(w)}else console.warn("⚠️ No valid contractor profile data, using basic user data"),console.log("🔍 Basic user data:",r),j(r)}catch(P){console.error("❌ Failed to fetch contractor profile:",P),console.error("❌ Error details:",P.message),console.log("🔄 Falling back to basic user data:",r),j(r)}finally{I(!1)}};r?.role==="CONTRACTOR"?f():(j(r),I(!1))},[r]),y.useEffect(()=>{const f=()=>{h(window.innerWidth>=1024)};return window.addEventListener("resize",f),()=>window.removeEventListener("resize",f)},[]),y.useEffect(()=>{const f=c.pathname;f==="/contractor/dashboard"?m("dashboard"):f==="/contractor/profile"?m("profile"):f==="/contractor/projects"?m("projects"):f==="/contractor/marketplace"?m("marketplace"):f==="/contractor/quotes"?m("quotes"):f==="/contractor/wallet"?m("wallet"):f==="/contractor/documents"&&m("documents")},[c.pathname]);const C=f=>{switch(m(f),f){case"dashboard":l("/contractor/dashboard");break;case"profile":l("/contractor/profile");break;case"projects":l("/contractor/projects");break;case"marketplace":l("/contractor/marketplace");break;case"quotes":l("/contractor/quotes");break;case"wallet":l("/contractor/wallet");break;case"documents":l("/contractor/documents");break;default:l("/contractor/dashboard");break}},z=()=>{if(R)return e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"400px",color:n.colors.text.secondary},children:e.jsxs("div",{children:[e.jsx("div",{style:{marginBottom:"1rem",textAlign:"center"},children:e.jsx("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{animation:"spin 1s linear infinite"},children:e.jsx("path",{d:"M12 2V6M12 18V22M4.93 4.93L7.76 7.76M16.24 16.24L19.07 19.07M2 12H6M18 12H22M4.93 19.07L7.76 16.24M16.24 7.76L19.07 4.93",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),i("common.loading")||"Loading contractor profile..."]})});switch(d){case"dashboard":return e.jsx(ll,{user:b});case"profile":return e.jsx(Sv,{user:b,onUpdate:(f,P)=>{console.log("Contractor profile section updated:",f,P);const w={...b,...P};if(j(w),_){const O={..._,...P};S(O)}console.log("✅ User state updated locally:",w),console.log("✅ Contractor profile updated locally:",_)}});case"projects":return e.jsx(Cv,{user:b});case"marketplace":return e.jsx(Av,{user:b});case"quotes":return e.jsx(Rv,{user:b});case"wallet":return e.jsx(Pv,{user:b});case"documents":return e.jsx(kv,{userType:"CONTRACTOR"});default:return e.jsx(ll,{user:b})}};return e.jsxs("div",{style:{minHeight:"100vh",background:n.colors.gradients.primaryLight,color:n.colors.text.primary,fontFamily:n.typography.fonts.primary,direction:p?"rtl":"ltr"},children:[e.jsx(wv,{user:b,onLogout:t,activeItem:d,onItemClick:C}),e.jsx("main",{style:{minHeight:"100vh",marginLeft:p?"0":u?"280px":"0",marginRight:p&&u?"280px":"0",padding:u?"1.5rem":"4.5rem 1rem 1.5rem 1rem",boxSizing:"border-box",width:u?"calc(100% - 280px)":"100%",transition:n.transitions.normal},children:z()})]})},Lv=({onLogin:r,onRegister:t,isLoginPopupOpen:o,onCloseLoginPopup:s,onLoginSuccess:i,onShowCalculator:a,onHome:l})=>{const{t:c,i18n:p}=ve(),d=Be(),m=p.language==="ar",[u,h]=y.useState(!0),[b,j]=y.useState(null),[_,S]=y.useState([]),[R,I]=y.useState(""),[C,z]=y.useState(""),[f,P]=y.useState([0,1e5]),[w,O]=y.useState(1),[V,re]=y.useState(1),[Q,oe]=y.useState(!1);y.useEffect(()=>{K()},[w,R,C]);const K=async()=>{try{h(!0),j(null);const g={search:R,categoryId:C||void 0,minPrice:f[0],maxPrice:f[1],status:"ACTIVE",approvalStatus:"APPROVED",inStockOnly:!0},A={page:w,limit:12,sortBy:"created_at",sortOrder:"desc"};console.log("🛒 Loading public marketplace products with filters:",g);const ee=await nt.searchProducts(g,A);S(ee.data),re(ee.pagination.totalPages),console.log(`✅ Loaded ${ee.data.length} products for public marketplace`)}catch(g){console.error("❌ Error loading products:",g),j(g instanceof Error?g.message:"Failed to load products")}finally{h(!1)}},Y=g=>new Intl.NumberFormat(m?"ar-SA":"en-US",{style:"currency",currency:"SAR",minimumFractionDigits:0,maximumFractionDigits:0}).format(g),W=g=>{switch(g){case"INVERTER":return{name:c("categories.inverter","Inverter"),nameAr:"العاكسات الشمسية",icon:"⚡"};case"BATTERY":return{name:c("categories.battery","Battery"),nameAr:"البطاريات وأنظمة التخزين",icon:"🔋"};case"SOLAR_PANEL":return{name:c("categories.solarPanel","Solar Panel"),nameAr:"الألواح الشمسية",icon:"☀️"};case"FULL_SYSTEM":return{name:c("categories.fullSystem","Full System"),nameAr:"الأنظمة الكاملة",icon:"⚙️"};default:return{name:c("categories.unknown","Product"),nameAr:"منتج",icon:"📦"}}},$=g=>{if(!g.specifications||typeof g.specifications!="object")return null;const A=g.specifications;switch(g.productCategory){case"INVERTER":return A.powerRate||A.type||A.mppts?`${A.powerRate?A.powerRate+" ":""}${A.type?A.type:""}${A.mppts?" • "+A.mppts+" MPPT":""}`:null;case"BATTERY":return A.capacity||A.voltage?`${A.capacity?A.capacity+" ":""}${A.voltage?A.voltage:""}`:null;case"SOLAR_PANEL":return A.maxPower||A.efficiency?`${A.maxPower?A.maxPower+" ":""}${A.efficiency?"• "+A.efficiency:""}`:null;case"FULL_SYSTEM":return A.systemPower||A.batteryCapacity?`${A.systemPower?A.systemPower+" ":""}${A.batteryCapacity?"• "+A.batteryCapacity:""}`:null;default:return A.wattage||A.efficiency?`${A.wattage?A.wattage+"W":""}${A.efficiency?" • "+A.efficiency:""}`:null}},L=()=>{oe(!0)},k=({product:g})=>{const A=()=>{d(`/marketplace/product/${g.id}`)},ee=U=>{U.stopPropagation(),L()};return e.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.95)",borderRadius:"16px",border:`1px solid ${n.colors.borders.light}`,overflow:"hidden",transition:n.transitions.normal,cursor:"pointer",boxShadow:n.shadows.sm,display:"flex",flexDirection:"column",height:"100%"},onClick:A,onMouseEnter:U=>{U.currentTarget.style.transform="translateY(-2px)",U.currentTarget.style.boxShadow=n.shadows.lg},onMouseLeave:U=>{U.currentTarget.style.transform="translateY(0)",U.currentTarget.style.boxShadow=n.shadows.sm},children:[e.jsxs("div",{style:{width:"100%",height:"200px",background:g.primaryImage?`url(${g.primaryImage})`:`linear-gradient(135deg, ${n.colors.neutral[100]} 0%, ${n.colors.neutral[200]} 100%)`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:[!g.primaryImage&&e.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:n.colors.neutral[400],strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),e.jsx("polyline",{points:"21,15 16,10 5,21"})]}),e.jsx("div",{style:{position:"absolute",top:"8px",left:m?"auto":"8px",right:m?"8px":"auto",background:`linear-gradient(135deg, ${n.colors.semantic.warning.main} 0%, ${n.colors.semantic.warning.dark} 100%)`,color:"white",fontSize:"0.75rem",padding:"4px 8px",borderRadius:"12px",fontWeight:"600",boxShadow:`0 2px 4px ${n.colors.semantic.warning.main}40`},children:"-15% "}),e.jsx("div",{style:{position:"absolute",top:"8px",right:m?"auto":"8px",left:m?"8px":"auto",background:g.stock_status==="IN_STOCK"?n.colors.primary[500]:`${n.colors.semantic.error.main}e6`,color:"white",fontSize:"0.75rem",padding:"4px 8px",borderRadius:"12px",fontWeight:"500"},children:g.stock_status==="IN_STOCK"?c("marketplace.inStock"):c("marketplace.outOfStock")})]}),e.jsxs("div",{style:{padding:"16px",flex:1,display:"flex",flexDirection:"column"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:n.colors.text.primary,marginBottom:"8px",lineHeight:"1.4",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:g.name}),e.jsx("p",{style:{fontSize:"0.875rem",color:n.colors.text.secondary,marginBottom:"8px"},children:g.brand}),e.jsxs("div",{style:{marginBottom:"12px"},children:[g.productCategory&&e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"4px",background:`${n.colors.primary[500]}10`,color:n.colors.primary[600],padding:"2px 6px",borderRadius:"6px",fontSize:"0.65rem",fontWeight:"600",marginBottom:"4px",border:`1px solid ${n.colors.primary[500]}15`},children:[e.jsx("span",{style:{fontSize:"0.6rem"},children:W(g.productCategory).icon}),e.jsx("span",{children:m?W(g.productCategory).nameAr:W(g.productCategory).name})]}),(()=>{const U=$(g);return U?e.jsx("p",{style:{fontSize:"0.75rem",color:n.colors.text.muted,margin:0,lineHeight:"1.3"},children:U}):null})()]}),e.jsxs("div",{style:{marginTop:"auto",display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[e.jsx("span",{style:{fontSize:"1.25rem",fontWeight:"700",color:n.colors.primary[500]},children:Y(parseFloat(g.price)||0)}),e.jsx("span",{style:{fontSize:"0.75rem",color:n.colors.text.muted},children:g.vat_included?c("marketplace.inclVAT"):c("marketplace.exclVAT")})]}),e.jsxs("button",{onClick:ee,disabled:g.stock_status!=="IN_STOCK",style:{background:`linear-gradient(135deg, ${n.colors.primary[500]} 0%, ${n.colors.primary[600]} 100%)`,color:"white",border:"none",borderRadius:"12px",padding:"12px 20px",fontSize:"0.875rem",fontWeight:"600",cursor:g.stock_status==="IN_STOCK"?"pointer":"not-allowed",transition:n.transitions.normal,opacity:g.stock_status==="IN_STOCK"?1:.5,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",boxShadow:`0 4px 15px ${n.colors.primary[500]}40, 0 0 0 1px ${n.colors.primary[500]}20`,position:"relative",overflow:"hidden"},onMouseEnter:U=>{g.stock_status==="IN_STOCK"&&(U.currentTarget.style.transform="translateY(-2px)",U.currentTarget.style.boxShadow=`0 6px 20px ${n.colors.primary[500]}50, 0 0 0 1px ${n.colors.primary[500]}30`)},onMouseLeave:U=>{g.stock_status==="IN_STOCK"&&(U.currentTarget.style.transform="translateY(0)",U.currentTarget.style.boxShadow=`0 4px 15px ${n.colors.primary[500]}40, 0 0 0 1px ${n.colors.primary[500]}20`)},children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"}),e.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),e.jsx("path",{d:"M16 10a4 4 0 0 1-8 0"})]}),c("marketplace.addToCart")]})]})]})},v=()=>Q?e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:n.zIndex.modal},onClick:()=>oe(!1),children:e.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",borderRadius:"24px",border:"1px solid rgba(255, 255, 255, 0.5)",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.1)",padding:"2rem",maxWidth:"400px",width:"100%",textAlign:"center"},onClick:g=>g.stopPropagation(),children:[e.jsx("div",{style:{width:"64px",height:"64px",background:`linear-gradient(135deg, ${n.colors.primary[500]} 0%, ${n.colors.secondary[500]} 100%)`,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem",boxShadow:`0 8px 20px ${n.colors.primary[500]}30`},children:e.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"}),e.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),e.jsx("path",{d:"M16 10a4 4 0 0 1-8 0"})]})}),e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:n.colors.text.primary,marginBottom:"1rem"},children:"Login Required"}),e.jsx("p",{style:{fontSize:"0.875rem",color:n.colors.text.secondary,marginBottom:"1.5rem",lineHeight:"1.5"},children:"Please login to add products to cart and make purchases"}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("button",{onClick:()=>{oe(!1),r()},style:{flex:1,background:`linear-gradient(135deg, ${n.colors.primary[500]} 0%, ${n.colors.primary[600]} 100%)`,color:"white",border:"none",borderRadius:"12px",padding:"12px 20px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:n.transitions.normal},children:c("header.login")}),e.jsx("button",{onClick:()=>{oe(!1),t()},style:{flex:1,background:"transparent",color:n.colors.primary[500],border:`2px solid ${n.colors.primary[500]}`,borderRadius:"12px",padding:"12px 20px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:n.transitions.normal},children:c("header.register")})]}),e.jsx("button",{onClick:()=>oe(!1),style:{position:"absolute",top:"1rem",right:"1rem",width:"32px",height:"32px",border:"none",background:"rgba(107, 114, 128, 0.1)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#6b7280",fontSize:"1.25rem"},children:"×"})]})}):null;return e.jsxs("div",{style:{minHeight:"100vh",background:n.colors.gradients.primaryLight,color:n.colors.text.primary,fontFamily:n.typography.fonts.primary,direction:m?"rtl":"ltr",padding:"clamp(8px, 2vw, 16px)"},children:[e.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",border:`1px solid ${n.colors.borders.light}`,padding:"clamp(16px, 4vw, 24px)",boxShadow:n.shadows.lg,backdropFilter:"blur(10px)",width:"100%",minHeight:"calc(100vh - 32px)"},children:[e.jsxs("div",{style:{background:"rgba(248, 250, 252, 0.6)",borderRadius:"16px",border:`1px solid ${n.colors.borders.light}`,padding:"24px",marginBottom:"24px",boxShadow:n.shadows.sm,position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"4px",background:`linear-gradient(90deg, ${n.colors.primary[500]} 0%, ${n.colors.primary[400]} 100%)`,borderRadius:"16px 16px 0 0"}}),e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"16px"},children:e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"2rem",fontWeight:"700",color:n.colors.text.primary,marginBottom:"8px"},children:c("marketplace.publicTitle","Solar Products Marketplace")}),e.jsx("p",{style:{fontSize:"1rem",color:n.colors.text.secondary,margin:0},children:c("marketplace.publicSubtitle","Discover high-quality solar products from verified contractors")})]})})]}),e.jsxs("div",{style:{background:"rgba(248, 250, 252, 0.6)",borderRadius:"16px",border:`2px solid ${n.colors.borders.light}`,padding:"20px",marginBottom:"24px",boxShadow:n.shadows.md,position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"3px",background:`linear-gradient(90deg, ${n.colors.primary[400]} 0%, ${n.colors.primary[300]} 100%)`,borderRadius:"16px 16px 0 0"}}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth>640?"1fr auto":"1fr",gap:"16px",alignItems:"center"},children:[e.jsx("input",{type:"text",placeholder:c("marketplace.searchPlaceholder","Search solar products..."),value:R,onChange:g=>I(g.target.value),style:{background:"rgba(255, 255, 255, 0.9)",border:`2px solid ${n.colors.borders.light}`,borderRadius:"12px",padding:"14px 20px",fontSize:"1rem",color:n.colors.text.primary,outline:"none",transition:n.transitions.normal,fontFamily:n.typography.fonts.primary,boxShadow:"inset 0 1px 3px rgba(0,0,0,0.1)",width:"100%"},onFocus:g=>{g.target.style.borderColor=n.colors.primary[500],g.target.style.boxShadow=`inset 0 1px 3px rgba(0,0,0,0.1), 0 0 0 3px ${n.colors.primary[500]}20`},onBlur:g=>{g.target.style.borderColor=n.colors.borders.light,g.target.style.boxShadow="inset 0 1px 3px rgba(0,0,0,0.1)"}}),e.jsxs("button",{style:{background:`linear-gradient(135deg, ${n.colors.primary[500]} 0%, ${n.colors.secondary[500]} 100%)`,color:"white",border:"none",borderRadius:"12px",padding:"12px 20px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:n.transitions.normal,display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polygon",{points:"22,3 2,3 10,12.46 10,19 14,21 14,12.46"})}),c("marketplace.filter","Filter")]})]})]}),u&&e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"60px",background:"transparent",borderRadius:"16px",border:`1px solid ${n.colors.borders.light}`},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{width:"40px",height:"40px",border:`3px solid ${n.colors.borders.light}`,borderTop:`3px solid ${n.colors.primary[500]}`,borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 16px"}}),e.jsx("p",{style:{color:n.colors.text.secondary},children:c("marketplace.loading","Loading products...")})]})}),b&&!u&&e.jsxs("div",{style:{background:"transparent",borderRadius:"16px",border:`1px solid ${n.colors.borders.light}`,padding:"40px",textAlign:"center",color:n.colors.semantic.error.main},children:[e.jsx("h3",{style:{marginBottom:"8px"},children:c("marketplace.errorTitle","Error Loading Products")}),e.jsx("p",{style:{marginBottom:"16px"},children:b}),e.jsx("button",{onClick:K,style:{background:n.colors.primary[500],color:"white",border:"none",borderRadius:"8px",padding:"8px 16px",cursor:"pointer"},children:c("marketplace.retry","Try Again")})]}),!u&&!b&&e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(min(300px, 100%), 1fr))",gap:"clamp(16px, 3vw, 24px)",marginBottom:"40px"},children:_.map(g=>e.jsx(k,{product:g},g.id))}),!u&&!b&&_.length===0&&e.jsxs("div",{style:{background:"transparent",borderRadius:"16px",border:`1px solid ${n.colors.borders.light}`,padding:"60px",textAlign:"center"},children:[e.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:n.colors.text.muted,strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",style:{margin:"0 auto 16px"},children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("path",{d:"M21 21l-4.35-4.35"})]}),e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:n.colors.text.secondary,marginBottom:"8px"},children:c("marketplace.noProducts","No products found")}),e.jsx("p",{style:{color:n.colors.text.muted},children:c("marketplace.noProductsDesc","Try adjusting your search criteria")})]}),V>1&&e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"8px",marginTop:"32px"},children:[e.jsx("button",{onClick:()=>O(g=>Math.max(1,g-1)),disabled:w===1,style:{background:w===1?n.colors.neutral[200]:n.colors.primary[500],color:w===1?n.colors.text.secondary:"white",border:`1px solid ${w===1?n.colors.neutral[300]:n.colors.primary[500]}`,borderRadius:"8px",padding:"8px 16px",cursor:w===1?"not-allowed":"pointer",opacity:w===1?.7:1,transition:n.transitions.normal},children:c("marketplace.previous","Previous")}),e.jsxs("span",{style:{padding:"8px 16px",color:n.colors.text.secondary},children:[w," / ",V]}),e.jsx("button",{onClick:()=>O(g=>Math.min(V,g+1)),disabled:w===V,style:{background:w===V?n.colors.neutral[200]:n.colors.primary[500],color:w===V?n.colors.text.secondary:"white",border:`1px solid ${w===V?n.colors.neutral[300]:n.colors.primary[500]}`,borderRadius:"8px",padding:"8px 16px",cursor:w===V?"not-allowed":"pointer",opacity:w===V?.7:1,transition:n.transitions.normal},children:c("marketplace.next","Next")})]}),e.jsx("style",{children:`
            @keyframes spin {
              0% { transform: rotate(0deg); }
              100% { transform: rotate(360deg); }
            }
          `})]})," ",e.jsx(Vt,{isOpen:o,onClose:s,onLoginSuccess:i,onRegister:t}),e.jsx(v,{})]})},zv=({onLogin:r,onRegister:t,onBack:o,onShowCalculator:s,onHome:i})=>{const{productId:a}=cl();Be();const{t:l,i18n:c}=ve(),p=c.language==="ar",[d,m]=y.useState(null),[u,h]=y.useState(!0),[b,j]=y.useState(null),[_,S]=y.useState(0),[R,I]=y.useState(1),[C,z]=y.useState(!1),[f,P]=y.useState(0),[w,O]=y.useState(!1);y.useEffect(()=>{a&&V()},[a]);const V=async()=>{try{h(!0),j(null),console.log("📱 Loading public product details for ID:",a);const g=await nt.getProductById(a);m(g),console.log("✅ Loaded product:",g.name)}catch(g){console.error("❌ Error loading product:",g),j(g instanceof Error?g.message:"Failed to load product")}finally{h(!1)}},re=g=>new Intl.NumberFormat(p?"ar-SA":"en-US",{style:"currency",currency:"SAR",minimumFractionDigits:0,maximumFractionDigits:0}).format(g),Q=g=>{if(!g.specifications||typeof g.specifications!="object")return[];const A=g.specifications;switch(g.productCategory){case"INVERTER":return[{label:l("specs.powerRate","Power Rating"),value:A.powerRate},{label:l("specs.type","Type"),value:A.type},{label:l("specs.mppts","MPPT Inputs"),value:A.mppts},{label:l("specs.mpptRange","MPPT Range"),value:A.mpptRange},{label:l("specs.maxInputCurrent","Max Input Current"),value:A.maxInputCurrent},{label:l("specs.outputPhase","Output Phase"),value:A.outputPhase},{label:l("specs.communication","Communication"),value:A.inverterCommunication},{label:l("specs.weight","Weight"),value:A.inverterWeight}].filter(ee=>ee.value);case"BATTERY":return[{label:l("specs.capacity","Capacity"),value:A.capacity},{label:l("specs.voltage","Voltage"),value:A.voltage},{label:l("specs.current","Current"),value:A.current},{label:l("specs.cycleLife","Cycle Life"),value:A.cycleLife},{label:l("specs.communication","Communication"),value:A.batteryCommunication},{label:l("specs.weight","Weight"),value:A.batteryWeight},{label:l("specs.dimensions","Dimensions"),value:A.batteryDimensions}].filter(ee=>ee.value);case"SOLAR_PANEL":return[{label:l("specs.panelPower","Panel Power"),value:A.panelPower},{label:l("specs.panelEfficiency","Efficiency"),value:A.panelEfficiency},{label:l("specs.cellType","Cell Type"),value:A.cellType},{label:l("specs.panelVoltage","Operating Voltage"),value:A.panelVoltage},{label:l("specs.workingCurrent","Working Current"),value:A.workingCurrent},{label:l("specs.workingTemperature","Operating Temperature"),value:A.workingTemperature},{label:l("specs.dimensions","Dimensions"),value:A.panelDimensions},{label:l("specs.weight","Weight"),value:A.panelWeight},{label:l("specs.warranty","Warranty"),value:A.warranty}].filter(ee=>ee.value);case"FULL_SYSTEM":return[{label:l("specs.systemPower","System Power"),value:A.systemPower},{label:l("specs.systemPeak","Peak Power"),value:A.systemPeak},{label:l("specs.acOutput","AC Output"),value:A.cOutput},{label:l("specs.batteryCapacity","Battery Capacity"),value:A.batteryCapacity},{label:l("specs.chargingPower","Charging Power"),value:A.chargingPower},{label:l("specs.solarConfiguration","Solar Configuration"),value:A.solarConfiguration},{label:l("specs.generatingCapacity","Daily Generation"),value:A.generatingCapacity},{label:l("specs.systemDimensions","System Dimensions"),value:A.systemDimensions1},{label:l("specs.totalWeight","Total Weight"),value:A.totalWeight}].filter(ee=>ee.value);default:return[{label:l("specs.wattage","Wattage"),value:A.wattage},{label:l("specs.efficiency","Efficiency"),value:A.efficiency||A.panelEfficiency},{label:l("specs.warranty","Warranty"),value:A.warranty},{label:l("specs.dimensions","Dimensions"),value:A.dimensions||A.panelDimensions},{label:l("specs.weight","Weight"),value:A.weight||A.panelWeight}].filter(ee=>ee.value)}},oe=g=>{switch(g){case"INVERTER":return{name:l("categories.inverter","Inverter"),nameAr:"العاكسات الشمسية",icon:"⚡"};case"BATTERY":return{name:l("categories.battery","Battery"),nameAr:"البطاريات وأنظمة التخزين",icon:"🔋"};case"SOLAR_PANEL":return{name:l("categories.solarPanel","Solar Panel"),nameAr:"الألواح الشمسية",icon:"☀️"};case"FULL_SYSTEM":return{name:l("categories.fullSystem","Full System"),nameAr:"الأنظمة الكاملة",icon:"⚙️"};default:return{name:l("categories.unknown","Product"),nameAr:"منتج",icon:"📦"}}},K=()=>{o()},Y=(g=0)=>{P(g),z(!0),document.body.style.overflow="hidden"},W=()=>{z(!1),document.body.style.overflow="auto"},$=()=>{d&&d.images&&P(g=>(g+1)%d.images.length)},L=()=>{d&&d.images&&P(g=>(g-1+d.images.length)%d.images.length)},k=g=>{if(C)switch(g.key){case"Escape":W();break;case"ArrowLeft":L();break;case"ArrowRight":$();break}};y.useEffect(()=>(document.addEventListener("keydown",k),()=>{document.removeEventListener("keydown",k),document.body.style.overflow="auto"}),[C,d]);const v=()=>w?e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:n.zIndex.modal},onClick:()=>O(!1),children:e.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",borderRadius:"24px",border:"1px solid rgba(255, 255, 255, 0.5)",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.1)",padding:"2rem",maxWidth:"400px",width:"100%",textAlign:"center"},onClick:g=>g.stopPropagation(),children:[e.jsx("div",{style:{width:"64px",height:"64px",background:`linear-gradient(135deg, ${n.colors.primary[500]} 0%, ${n.colors.secondary[500]} 100%)`,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem",boxShadow:`0 8px 20px ${n.colors.primary[500]}30`},children:e.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"}),e.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),e.jsx("path",{d:"M16 10a4 4 0 0 1-8 0"})]})}),e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:n.colors.text.primary,marginBottom:"1rem"},children:"Login Required"}),e.jsx("p",{style:{fontSize:"0.875rem",color:n.colors.text.secondary,marginBottom:"1.5rem",lineHeight:"1.5"},children:"Please login to add products to cart and make purchases"}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("button",{onClick:()=>{O(!1),r()},style:{flex:1,background:`linear-gradient(135deg, ${n.colors.primary[500]} 0%, ${n.colors.primary[600]} 100%)`,color:"white",border:"none",borderRadius:"12px",padding:"12px 20px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:n.transitions.normal},children:l("header.login")}),e.jsx("button",{onClick:()=>{O(!1),t()},style:{flex:1,background:"transparent",color:n.colors.primary[500],border:`2px solid ${n.colors.primary[500]}`,borderRadius:"12px",padding:"12px 20px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:n.transitions.normal},children:l("header.register")})]}),e.jsx("button",{onClick:()=>O(!1),style:{position:"absolute",top:"1rem",right:"1rem",width:"32px",height:"32px",border:"none",background:"rgba(107, 114, 128, 0.1)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#6b7280",fontSize:"1.25rem"},children:"×"})]})}):null;return u?e.jsx("div",{style:{minHeight:"100vh",background:n.colors.gradients.primaryLight,padding:"clamp(8px, 2vw, 16px)",fontFamily:n.typography.fonts.primary,direction:p?"rtl":"ltr"},children:e.jsx("div",{style:{background:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",border:`1px solid ${n.colors.borders.light}`,padding:"clamp(16px, 4vw, 24px)",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{width:"40px",height:"40px",border:`3px solid ${n.colors.borders.light}`,borderTop:`3px solid ${n.colors.primary[500]}`,borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 16px"}}),e.jsx("p",{style:{color:n.colors.text.secondary},children:l("marketplace.loading","Loading product...")})]})})}):b||!d?e.jsx("div",{style:{minHeight:"100vh",background:n.colors.gradients.primaryLight,padding:"clamp(8px, 2vw, 16px)",fontFamily:n.typography.fonts.primary,direction:p?"rtl":"ltr"},children:e.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",border:`1px solid ${n.colors.borders.light}`,padding:"clamp(16px, 4vw, 24px)",width:"100%",textAlign:"center"},children:[e.jsx("h2",{style:{color:n.colors.semantic.error.main,marginBottom:"16px"},children:l("marketplace.productNotFound","Product Not Found")}),e.jsx("p",{style:{color:n.colors.text.secondary,marginBottom:"24px"},children:b||l("marketplace.productNotFoundDesc","The product you are looking for could not be found.")}),e.jsx("button",{onClick:K,style:{background:n.colors.primary[500],color:"white",border:"none",borderRadius:"12px",padding:"12px 24px",fontSize:"1rem",fontWeight:"600",cursor:"pointer",transition:n.transitions.normal},children:l("marketplace.backToMarketplace","Back to Marketplace")})]})}):e.jsxs("div",{style:{minHeight:"100vh",background:n.colors.gradients.primaryLight,padding:"clamp(8px, 2vw, 16px)",fontFamily:n.typography.fonts.primary,direction:p?"rtl":"ltr"},children:[e.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",border:`1px solid ${n.colors.borders.light}`,padding:"clamp(16px, 4vw, 24px)",width:"100%",minHeight:"calc(100vh - 32px)"},children:[e.jsxs("button",{onClick:K,style:{background:"transparent",border:`1px solid ${n.colors.borders.light}`,borderRadius:"12px",padding:"12px 20px",marginBottom:"24px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",color:n.colors.text.secondary,transition:n.transitions.normal,fontSize:"0.875rem",fontWeight:"500",whiteSpace:"nowrap",minWidth:"fit-content"},onMouseEnter:g=>{g.currentTarget.style.background=n.colors.neutral[50]},onMouseLeave:g=>{g.currentTarget.style.background="transparent"},children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"15,18 9,12 15,6"})}),l("marketplace.backToMarketplace","Back to Marketplace")]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth>768?"1fr 1fr":"1fr",gap:"clamp(24px, 5vw, 48px)",alignItems:"start"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{width:"100%",height:"400px",background:d.images&&d.images.length>0?`url(${d.images[_]?.file_url||d.primaryImage})`:`linear-gradient(135deg, ${n.colors.neutral[100]} 0%, ${n.colors.neutral[200]} 100%)`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",borderRadius:"16px",border:`1px solid ${n.colors.borders.light}`,position:"relative",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"16px",cursor:d.images&&d.images.length>0?"pointer":"default",transition:n.transitions.normal},onClick:()=>{d.images&&d.images.length>0&&Y(_)},onMouseEnter:g=>{d.images&&d.images.length>0&&(g.currentTarget.style.transform="scale(1.02)")},onMouseLeave:g=>{d.images&&d.images.length>0&&(g.currentTarget.style.transform="scale(1)")},children:[!d.primaryImage&&e.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:n.colors.neutral[400],strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),e.jsx("polyline",{points:"21,15 16,10 5,21"})]}),e.jsx("div",{style:{position:"absolute",top:"16px",left:p?"auto":"16px",right:p?"16px":"auto",background:`linear-gradient(135deg, ${n.colors.semantic.warning.main} 0%, ${n.colors.semantic.warning.dark} 100%)`,color:"white",fontSize:"1rem",padding:"8px 12px",borderRadius:"12px",fontWeight:"700",boxShadow:`0 4px 8px ${n.colors.semantic.warning.main}40`},children:"-15%"}),e.jsx("div",{style:{position:"absolute",top:"16px",right:p?"auto":"16px",left:p?"16px":"auto",background:d.stock_status==="IN_STOCK"?n.colors.primary[500]:`${n.colors.semantic.error.main}e6`,color:"white",fontSize:"0.875rem",padding:"6px 12px",borderRadius:"12px",fontWeight:"600"},children:d.stock_status==="IN_STOCK"?l("marketplace.inStock"):l("marketplace.outOfStock")}),d.images&&d.images.length>0&&e.jsxs("div",{style:{position:"absolute",bottom:"12px",right:"12px",background:"rgba(0, 0, 0, 0.7)",color:"white",fontSize:"0.75rem",padding:"4px 8px",borderRadius:"8px",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("path",{d:"M21 21l-4.35-4.35"}),e.jsx("path",{d:"M11 8v6"}),e.jsx("path",{d:"M8 11h6"})]}),"Click to zoom"]})]}),d.images&&d.images.length>1&&e.jsx("div",{style:{display:"flex",gap:"8px",overflowX:"auto",padding:"8px 0",scrollbarWidth:"thin"},children:d.images.map((g,A)=>e.jsx("div",{style:{minWidth:"80px",width:"80px",height:"80px",background:`url(${g.file_url})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",borderRadius:"8px",border:_===A?`2px solid ${n.colors.primary[500]}`:`1px solid ${n.colors.borders.light}`,cursor:"pointer",transition:n.transitions.fast,opacity:_===A?1:.7},onClick:()=>S(A),onMouseEnter:ee=>{ee.currentTarget.style.opacity="1",ee.currentTarget.style.transform="scale(1.05)"},onMouseLeave:ee=>{ee.currentTarget.style.opacity=_===A?"1":"0.7",ee.currentTarget.style.transform="scale(1)"}},g.id||A))})]}),e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"clamp(1.5rem, 4vw, 2rem)",fontWeight:"700",color:n.colors.text.primary,marginBottom:"12px",lineHeight:"1.3"},children:d.name}),e.jsxs("p",{style:{fontSize:"1rem",color:n.colors.text.secondary,marginBottom:"16px",fontWeight:"500"},children:[l("marketplace.brand","Brand"),": ",d.brand]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("div",{style:{marginBottom:"8px"},children:e.jsx("span",{style:{fontSize:"clamp(1.75rem, 5vw, 2.5rem)",fontWeight:"700",color:n.colors.primary[500]},children:re(parseFloat(d.price))})}),e.jsx("p",{style:{fontSize:"0.875rem",color:n.colors.text.muted,margin:0},children:d.vat_included?l("marketplace.inclVAT"):l("marketplace.exclVAT")})]}),d.specifications&&(()=>{const g=Q(d),A=oe(d.productCategory||"");return g.length>0?e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:n.colors.text.primary,marginBottom:"4px"},children:l("marketplace.specifications","Specifications")}),e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",background:`${n.colors.primary[500]}12`,color:n.colors.primary[600],padding:"4px 10px",borderRadius:"8px",fontSize:"0.75rem",fontWeight:"600",marginBottom:"12px",border:`1px solid ${n.colors.primary[500]}20`},children:[e.jsx("span",{children:A.icon}),e.jsx("span",{children:p?A.nameAr:A.name})]}),e.jsx("div",{style:{background:n.colors.neutral[50],borderRadius:"12px",padding:"16px",border:`1px solid ${n.colors.borders.light}`},children:g.map((ee,U)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:U===g.length-1?"0":"12px",paddingBottom:U===g.length-1?"0":"12px",borderBottom:U===g.length-1?"none":`1px solid ${n.colors.borders.light}`},children:[e.jsxs("span",{style:{color:n.colors.text.secondary,fontSize:"0.9rem",fontWeight:"500",maxWidth:"50%"},children:[ee.label,":"]}),e.jsx("span",{style:{color:n.colors.text.primary,fontWeight:"600",fontSize:"0.9rem",textAlign:"right",maxWidth:"50%"},children:ee.value})]},ee.label))})]}):null})(),d.description&&e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:n.colors.text.primary,marginBottom:"12px"},children:l("marketplace.description","Description")}),e.jsx("p",{style:{color:n.colors.text.secondary,lineHeight:"1.6",margin:0},children:d.description})]}),e.jsxs("div",{style:{background:`linear-gradient(135deg, ${n.colors.primary[500]}08 0%, ${n.colors.secondary[500]}08 100%)`,borderRadius:"16px",padding:"24px",border:`1px solid ${n.colors.primary[500]}20`,textAlign:"center"},children:[e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:n.colors.primary[500],strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{margin:"0 auto 12px",display:"block"},children:[e.jsx("path",{d:"M9 12l2 2 4-4"}),e.jsx("path",{d:"M21 12c0 1.66-1.34 3-3 3h-5l-3-3h3l4 4 4-4z"}),e.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"})]}),e.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:"600",color:n.colors.text.primary,marginBottom:"8px"},children:"Login to Purchase"}),e.jsx("p",{style:{fontSize:"0.875rem",color:n.colors.text.secondary,margin:0},children:"Create an account or login to add this product to your cart and complete your purchase"})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[e.jsxs("button",{onClick:r,style:{background:`linear-gradient(135deg, ${n.colors.primary[500]} 0%, ${n.colors.primary[600]} 100%)`,color:"white",border:"none",borderRadius:"12px",padding:"14px 28px",fontSize:"1rem",fontWeight:"600",cursor:"pointer",transition:n.transitions.normal,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",minWidth:"120px",boxShadow:`0 4px 15px ${n.colors.primary[500]}40`},onMouseEnter:g=>{g.currentTarget.style.transform="translateY(-2px)",g.currentTarget.style.boxShadow=`0 6px 20px ${n.colors.primary[500]}50`},onMouseLeave:g=>{g.currentTarget.style.transform="translateY(0)",g.currentTarget.style.boxShadow=`0 4px 15px ${n.colors.primary[500]}40`},children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"}),e.jsx("polyline",{points:"10,17 15,12 10,7"}),e.jsx("line",{x1:"15",y1:"12",x2:"3",y2:"12"})]}),l("header.login")]}),e.jsxs("button",{onClick:t,style:{background:"transparent",color:n.colors.primary[500],border:`2px solid ${n.colors.primary[500]}`,borderRadius:"12px",padding:"14px 28px",fontSize:"1rem",fontWeight:"600",cursor:"pointer",transition:n.transitions.normal,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",minWidth:"120px"},onMouseEnter:g=>{g.currentTarget.style.background=`${n.colors.primary[500]}10`,g.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:g=>{g.currentTarget.style.background="transparent",g.currentTarget.style.transform="translateY(0)"},children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"8.5",cy:"7",r:"4"}),e.jsx("line",{x1:"20",y1:"8",x2:"20",y2:"14"}),e.jsx("line",{x1:"23",y1:"11",x2:"17",y2:"11"})]}),l("header.register")]})]})]})]})]}),C&&d&&d.images&&d.images.length>0&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.95)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",backdropFilter:"blur(5px)"},onClick:W,children:e.jsxs("div",{style:{position:"relative",maxWidth:"90vw",maxHeight:"90vh",display:"flex",alignItems:"center",justifyContent:"center"},onClick:g=>g.stopPropagation(),children:[e.jsx("button",{onClick:W,style:{position:"absolute",top:"20px",right:"20px",background:"rgba(0, 0, 0, 0.7)",color:"white",border:"none",borderRadius:"50%",width:"40px",height:"40px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",fontWeight:"bold",zIndex:10001,transition:n.transitions.fast},onMouseEnter:g=>{g.currentTarget.style.background="rgba(0, 0, 0, 0.9)"},onMouseLeave:g=>{g.currentTarget.style.background="rgba(0, 0, 0, 0.7)"},children:"×"}),d.images.length>1&&e.jsx("button",{onClick:L,style:{position:"absolute",left:"20px",top:"50%",transform:"translateY(-50%)",background:"rgba(0, 0, 0, 0.7)",color:"white",border:"none",borderRadius:"50%",width:"50px",height:"50px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",fontWeight:"bold",zIndex:10001,transition:n.transitions.fast},onMouseEnter:g=>{g.currentTarget.style.background="rgba(0, 0, 0, 0.9)"},onMouseLeave:g=>{g.currentTarget.style.background="rgba(0, 0, 0, 0.7)"},children:"‹"}),d.images.length>1&&e.jsx("button",{onClick:$,style:{position:"absolute",right:"20px",top:"50%",transform:"translateY(-50%)",background:"rgba(0, 0, 0, 0.7)",color:"white",border:"none",borderRadius:"50%",width:"50px",height:"50px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",fontWeight:"bold",zIndex:10001,transition:n.transitions.fast},onMouseEnter:g=>{g.currentTarget.style.background="rgba(0, 0, 0, 0.9)"},onMouseLeave:g=>{g.currentTarget.style.background="rgba(0, 0, 0, 0.7)"},children:"›"}),e.jsx("img",{src:d.images[f]?.file_url,alt:d.name,style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain",borderRadius:"8px",boxShadow:"0 10px 40px rgba(0, 0, 0, 0.5)"}}),d.images.length>1&&e.jsxs("div",{style:{position:"absolute",bottom:"20px",left:"50%",transform:"translateX(-50%)",background:"rgba(0, 0, 0, 0.7)",color:"white",padding:"8px 16px",borderRadius:"20px",fontSize:"14px",fontWeight:"500"},children:[f+1," / ",d.images.length]})]})})]}),e.jsx(v,{}),e.jsx("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]})},Ev=yu();Object.entries(Ev).forEach(([r,t])=>{document.documentElement.style.setProperty(r,t)});const Ge=({children:r})=>{const t=Be(),[o,s]=y.useState(null),[i,a]=y.useState(null);return Me.useEffect(()=>{const l=xe.getState();if(console.log("🔍 AuthGuard: Initial auth state:",{isAuthenticated:l.isAuthenticated,hasUser:!!l.user}),s(l.isAuthenticated),a(l.user),!l.isAuthenticated){console.log("🔍 AuthGuard: Not authenticated, redirecting to home"),t("/");return}return xe.subscribe(p=>{console.log("🔍 AuthGuard: Auth state updated:",{isAuthenticated:p.isAuthenticated,hasUser:!!p.user}),s(p.isAuthenticated),a(p.user),p.isAuthenticated||t("/")})},[t]),o===null?e.jsx("div",{children:"Loading..."}):!o||!i?null:e.jsx(e.Fragment,{children:r})},Mt=()=>{const[r,t]=y.useState(null),o=Xr(),s=Be();Me.useEffect(()=>{const l=xe.getState();if(t(l.user),console.log("🔍 DashboardPage: Auth state check:",{hasUser:!!l.user,userRole:l.user?.role,currentPath:o.pathname,shouldRedirect:l.user?.role==="CONTRACTOR"&&o.pathname.startsWith("/dashboard")}),l.user?.role==="CONTRACTOR"&&o.pathname.startsWith("/dashboard")){console.log("🔄 DashboardPage: Redirecting contractor to contractor dashboard"),s("/contractor/dashboard");return}return xe.subscribe(p=>{t(p.user),console.log("🔍 DashboardPage: Auth state updated:",{hasUser:!!p.user,userRole:p.user?.role,currentPath:o.pathname,shouldRedirect:p.user?.role==="CONTRACTOR"&&o.pathname.startsWith("/dashboard")}),p.user?.role==="CONTRACTOR"&&o.pathname.startsWith("/dashboard")&&(console.log("🔄 DashboardPage: Redirecting contractor from subscription update"),s("/contractor/dashboard"))})},[s,o.pathname]);const i=async()=>{await xe.logout()},a=()=>{const l=o.pathname;return l==="/dashboard/profile"?"profile":l==="/dashboard/settings"?"settings":l==="/dashboard/documents"?"documents":l==="/dashboard/quotes"?"quotes":l==="/dashboard/marketplace"?"marketplace":"dashboard"};return r?e.jsx(uv,{user:r,onLogout:i,initialActiveItem:a()}):e.jsx("div",{children:"Loading..."})},Qt=()=>{const[r,t]=y.useState(null),o=Xr(),s=Be();Me.useEffect(()=>{const l=xe.getState();return t(l.user),console.log("🔍 ContractorDashboardPage: Auth state check:",{hasUser:!!l.user,userRole:l.user?.role,currentPath:o.pathname}),xe.subscribe(p=>{t(p.user),console.log("🔍 ContractorDashboardPage: Auth state updated:",{hasUser:!!p.user,userRole:p.user?.role,currentPath:o.pathname})})},[s,o.pathname]);const i=async()=>{await xe.logout()},a=()=>{const l=o.pathname;return l==="/contractor/profile"?"profile":l==="/contractor/projects"?"projects":l==="/contractor/marketplace"?"marketplace":l==="/contractor/quotes"?"quotes":l==="/contractor/wallet"?"wallet":l==="/contractor/documents"?"documents":"dashboard"};return r?e.jsx(Iv,{user:r,onLogout:i,onUserUpdate:l=>{console.log("🔄 Updating user state in ContractorDashboardPage:",l),t(l),xe.updateUserData(l)},initialActiveItem:a()}):e.jsx("div",{children:"Loading..."})},Mv=()=>{const{i18n:r}=ve(),t=Be(),[o,s]=y.useState(!1),[i,a]=y.useState(!1),[l,c]=y.useState(null);Me.useEffect(()=>{const h=xe.getState();return a(h.isAuthenticated),c(h.user),xe.subscribe(j=>{a(j.isAuthenticated),c(j.user)})},[]);const p=()=>{s(!0)},d=()=>{t("/register")},m=h=>{console.log("Login successful:",h),s(!1),h&&h.role==="CONTRACTOR"?(console.log("🔄 Redirecting contractor to contractor dashboard"),t("/contractor/dashboard")):h&&h.role==="USER"&&(console.log("🔄 Redirecting user to user dashboard"),t("/dashboard"))},u=async()=>{await xe.logout()};return e.jsxs("div",{style:{minHeight:"100vh",background:n.colors.gradients.primaryLight,color:n.colors.text.primary,fontFamily:n.typography.fonts.primary,direction:r.language==="ar"?"rtl":"ltr"},children:[e.jsx(lr,{onLogin:p,onRegister:d,onShowCalculator:()=>t("/solar-calculator"),onShowMarketplace:()=>t("/marketplace"),onHome:()=>t("/"),isAuthenticated:i,user:l,onLogout:u}),e.jsx(Lv,{onLogin:p,onRegister:d,isLoginPopupOpen:o,onCloseLoginPopup:()=>s(!1),onLoginSuccess:m,onShowCalculator:()=>t("/solar-calculator"),onHome:()=>t("/")}),e.jsx(Vt,{isOpen:o,onClose:()=>s(!1),onLoginSuccess:m,onRegister:d})]})},Bv=()=>{const{i18n:r}=ve(),t=Be(),[o,s]=y.useState(!1),[i,a]=y.useState(!1),[l,c]=y.useState(null);Me.useEffect(()=>{const h=xe.getState();return a(h.isAuthenticated),c(h.user),xe.subscribe(j=>{a(j.isAuthenticated),c(j.user)})},[]);const p=()=>{s(!0)},d=()=>{t("/register")},m=h=>{console.log("Login successful:",h),s(!1),h&&h.role==="CONTRACTOR"?(console.log("🔄 Redirecting contractor to contractor dashboard"),t("/contractor/dashboard")):h&&h.role==="USER"&&(console.log("🔄 Redirecting user to user dashboard"),t("/dashboard"))},u=async()=>{await xe.logout()};return e.jsxs("div",{style:{minHeight:"100vh",background:n.colors.gradients.primaryLight,color:n.colors.text.primary,fontFamily:n.typography.fonts.primary,direction:r.language==="ar"?"rtl":"ltr"},children:[e.jsx(lr,{onLogin:p,onRegister:d,onShowCalculator:()=>t("/solar-calculator"),onShowMarketplace:()=>t("/marketplace"),onHome:()=>t("/"),isAuthenticated:i,user:l,onLogout:u}),e.jsx(zv,{onLogin:p,onRegister:d,onBack:()=>t("/marketplace"),onShowCalculator:()=>t("/solar-calculator"),onHome:()=>t("/")}),e.jsx(Vt,{isOpen:o,onClose:()=>s(!1),onLoginSuccess:m,onRegister:d})]})},Nv=()=>{const{i18n:r}=ve(),t=Be(),[o,s]=y.useState(!1),[i,a]=y.useState(!1),[l,c]=y.useState(null);Me.useEffect(()=>{const b=xe.getState();return a(b.isAuthenticated),c(b.user),xe.subscribe(_=>{a(_.isAuthenticated),c(_.user)})},[]);const p=()=>{s(!0)},d=()=>{t("/register")},m=b=>{console.log("Login successful:",b),s(!1),b&&b.role==="CONTRACTOR"?(console.log("🔄 Redirecting contractor to contractor dashboard"),t("/contractor/dashboard")):b&&b.role==="USER"&&(console.log("🔄 Redirecting user to user dashboard"),t("/dashboard"))},u=async()=>{await xe.logout()},h=()=>{};return e.jsxs("div",{style:{minHeight:"100vh",background:n.colors.gradients.primaryLight,color:n.colors.text.primary,fontFamily:n.typography.fonts.primary,direction:r.language==="ar"?"rtl":"ltr"},children:[e.jsx(lr,{onLogin:p,onRegister:d,onShowCalculator:h,onHome:()=>t("/"),isAuthenticated:i,user:l,onLogout:u}),e.jsx("main",{style:{minHeight:"calc(100vh - 80px)",padding:"clamp(1rem, 3vw, 2rem)",boxSizing:"border-box",width:"100%",display:"flex",alignItems:"flex-start",justifyContent:"center",paddingTop:"2rem"},children:e.jsx(ii,{})}),e.jsx(Vt,{isOpen:o,onClose:()=>s(!1),onLoginSuccess:m,onRegister:d})]})},Wv=()=>{const{t:r,i18n:t}=ve(),o=Be(),[s,i]=y.useState(!1),[a,l]=y.useState(!1),[c,p]=y.useState(null);Me.useEffect(()=>{const b=xe.getState();if(l(b.isAuthenticated),p(b.user),b.isAuthenticated&&b.user){b.user.role==="CONTRACTOR"?o("/contractor/dashboard"):o("/dashboard");return}return xe.subscribe(_=>{l(_.isAuthenticated),p(_.user),_.isAuthenticated&&_.user&&(_.user.role==="CONTRACTOR"?o("/contractor/dashboard"):o("/dashboard"))})},[o]);const d=()=>{i(!0)},m=()=>{o("/register")},u=b=>{console.log("Login successful:",b),i(!1),b&&b.role==="CONTRACTOR"?(console.log("🔄 Redirecting contractor to contractor dashboard"),o("/contractor/dashboard")):b&&b.role==="USER"&&(console.log("🔄 Redirecting user to user dashboard"),o("/dashboard"))},h=async()=>{await xe.logout()};return e.jsxs("div",{style:{minHeight:"100vh",background:n.colors.gradients.primaryLight,color:n.colors.text.primary,fontFamily:n.typography.fonts.primary,direction:t.language==="ar"?"rtl":"ltr"},children:[e.jsx(lr,{onLogin:d,onRegister:m,onShowCalculator:()=>o("/solar-calculator"),onShowMarketplace:()=>o("/marketplace"),onHome:()=>o("/"),isAuthenticated:a,user:c,onLogout:h}),e.jsx("main",{style:{minHeight:"calc(100vh - 80px)",padding:"clamp(1rem, 3vw, 2rem)",boxSizing:"border-box",width:"100%",display:"flex",justifyContent:"center",alignItems:"flex-start",paddingTop:"2rem"},children:e.jsx(ii,{})}),e.jsx(Vt,{isOpen:s,onClose:()=>i(!1),onLoginSuccess:u,onRegister:m})]})},Dv=()=>{const{i18n:r}=ve(),t=Be(),[o,s]=y.useState(!1),[i,a]=y.useState(!1),[l,c]=y.useState(null);Me.useEffect(()=>{const j=xe.getState();return a(j.isAuthenticated),c(j.user),xe.subscribe(S=>{a(S.isAuthenticated),c(S.user)})},[]);const p=()=>{s(!0)},d=()=>{t("/register")},m=j=>{console.log("Login successful:",j),s(!1),j&&j.role==="CONTRACTOR"?(console.log("🔄 Redirecting contractor to contractor dashboard"),t("/contractor/dashboard")):j&&j.role==="USER"&&(console.log("🔄 Redirecting user to user dashboard"),t("/dashboard"))},u=async()=>{await xe.logout()},h=j=>{t(j==="USER"?"/register/user":"/register/contractor")},b=()=>{t("/")};return e.jsxs("div",{style:{minHeight:"100vh",background:n.colors.gradients.primaryLight,color:n.colors.text.primary,fontFamily:n.typography.fonts.primary,direction:r.language==="ar"?"rtl":"ltr"},children:[e.jsx(lr,{onLogin:p,onRegister:d,onShowCalculator:()=>t("/solar-calculator"),onShowMarketplace:()=>t("/marketplace"),onHome:()=>t("/"),isAuthenticated:i,user:l,onLogout:u}),e.jsx(rg,{onUserTypeSelect:h,onBack:b,onLogin:p,onRegister:d}),e.jsx(Vt,{isOpen:o,onClose:()=>s(!1),onLoginSuccess:m,onRegister:d})]})},$v=()=>{const{i18n:r}=ve(),t=Be(),[o,s]=y.useState(!1),[i,a]=y.useState(!1),[l,c]=y.useState(null);Me.useEffect(()=>{const j=xe.getState();return a(j.isAuthenticated),c(j.user),xe.subscribe(S=>{a(S.isAuthenticated),c(S.user)})},[]);const p=()=>{s(!0)},d=()=>{t("/register")},m=j=>{console.log("Login successful:",j),s(!1),j&&j.role==="CONTRACTOR"?(console.log("🔄 Redirecting contractor to contractor dashboard"),t("/contractor/dashboard")):j&&j.role==="USER"&&(console.log("🔄 Redirecting user to user dashboard"),t("/dashboard"))},u=async()=>{await xe.logout()},h=()=>{t("/register")},b=async j=>{console.log("Registration completed:",j),t("/dashboard")};return e.jsxs("div",{style:{minHeight:"100vh",background:n.colors.gradients.primaryLight,color:n.colors.text.primary,fontFamily:n.typography.fonts.primary,direction:r.language==="ar"?"rtl":"ltr"},children:[e.jsx(lr,{onLogin:p,onRegister:d,onShowCalculator:()=>t("/solar-calculator"),onShowMarketplace:()=>t("/marketplace"),onHome:()=>t("/"),isAuthenticated:i,user:l,onLogout:u}),e.jsx(og,{onBack:h,onLogin:p,onRegister:d,onComplete:b}),e.jsx(Vt,{isOpen:o,onClose:()=>s(!1),onLoginSuccess:m,onRegister:d})]})},Fv=()=>{const{i18n:r}=ve(),t=Be(),[o,s]=y.useState(!1),[i,a]=y.useState(!1),[l,c]=y.useState(null);Me.useEffect(()=>{const j=xe.getState();return a(j.isAuthenticated),c(j.user),xe.subscribe(S=>{a(S.isAuthenticated),c(S.user)})},[]);const p=()=>{s(!0)},d=()=>{t("/register")},m=j=>{console.log("Login successful:",j),s(!1),j&&j.role==="CONTRACTOR"?(console.log("🔄 Redirecting contractor to contractor dashboard"),t("/contractor/dashboard")):j&&j.role==="USER"&&(console.log("🔄 Redirecting user to user dashboard"),t("/dashboard"))},u=async()=>{await xe.logout()},h=()=>{t("/register")},b=async j=>{console.log("Contractor registration completed:",j),t("/contractor/dashboard")};return e.jsxs("div",{style:{minHeight:"100vh",background:n.colors.gradients.primaryLight,color:n.colors.text.primary,fontFamily:n.typography.fonts.primary,direction:r.language==="ar"?"rtl":"ltr"},children:[e.jsx(lr,{onLogin:p,onRegister:d,onShowCalculator:()=>t("/solar-calculator"),onShowMarketplace:()=>t("/marketplace"),onHome:()=>t("/"),isAuthenticated:i,user:l,onLogout:u}),e.jsx(ng,{onBack:h,onLogin:p,onRegister:d,onComplete:b}),e.jsx(Vt,{isOpen:o,onClose:()=>s(!1),onLoginSuccess:m,onRegister:d})]})},Ov=()=>{const{i18n:r}=ve();return Me.useEffect(()=>{document.documentElement.dir=r.language==="ar"?"rtl":"ltr",document.documentElement.lang=r.language},[r.language]),e.jsx(Xd,{children:e.jsxs(Zd,{children:[e.jsx(Ee,{path:"/",element:e.jsx(Wv,{})}),e.jsx(Ee,{path:"/solar-calculator",element:e.jsx(Nv,{})}),e.jsx(Ee,{path:"/marketplace",element:e.jsx(Mv,{})}),e.jsx(Ee,{path:"/marketplace/product/:productId",element:e.jsx(Bv,{})}),e.jsx(Ee,{path:"/register",element:e.jsx(Dv,{})}),e.jsx(Ee,{path:"/register/user",element:e.jsx($v,{})}),e.jsx(Ee,{path:"/register/contractor",element:e.jsx(Fv,{})}),e.jsx(Ee,{path:"/dashboard",element:e.jsx(Ge,{children:e.jsx(Mt,{})})}),e.jsx(Ee,{path:"/dashboard/profile",element:e.jsx(Ge,{children:e.jsx(Mt,{})})}),e.jsx(Ee,{path:"/dashboard/settings",element:e.jsx(Ge,{children:e.jsx(Mt,{})})}),e.jsx(Ee,{path:"/dashboard/documents",element:e.jsx(Ge,{children:e.jsx(Mt,{})})}),e.jsx(Ee,{path:"/dashboard/quotes",element:e.jsx(Ge,{children:e.jsx(Mt,{})})}),e.jsx(Ee,{path:"/dashboard/marketplace",element:e.jsx(Ge,{children:e.jsx(Mt,{})})}),e.jsx(Ee,{path:"/dashboard/marketplace/product/:productId",element:e.jsx(Ge,{children:e.jsx(Mt,{})})}),e.jsx(Ee,{path:"/dashboard/checkout",element:e.jsx(Ge,{children:e.jsx(Mt,{})})}),e.jsx(Ee,{path:"/contractor/dashboard",element:e.jsx(Ge,{children:e.jsx(Qt,{})})}),e.jsx(Ee,{path:"/contractor/profile",element:e.jsx(Ge,{children:e.jsx(Qt,{})})}),e.jsx(Ee,{path:"/contractor/projects",element:e.jsx(Ge,{children:e.jsx(Qt,{})})}),e.jsx(Ee,{path:"/contractor/marketplace",element:e.jsx(Ge,{children:e.jsx(Qt,{})})}),e.jsx(Ee,{path:"/contractor/quotes",element:e.jsx(Ge,{children:e.jsx(Qt,{})})}),e.jsx(Ee,{path:"/contractor/wallet",element:e.jsx(Ge,{children:e.jsx(Qt,{})})}),e.jsx(Ee,{path:"/contractor/documents",element:e.jsx(Ge,{children:e.jsx(Qt,{})})})]})})};Hs.createRoot(document.getElementById("root")).render(e.jsx(Me.StrictMode,{children:e.jsx(Ov,{})}));
